var T3=Object.defineProperty;var C3=(e,t,n)=>t in e?T3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S3=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var cn=(e,t,n)=>(C3(e,typeof t!="symbol"?t+"":t,n),n);var mte=S3((bs,ws)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function zw(e,t){const n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const gi={},Nh=[],aa=()=>{},E3=()=>!1,M3=/^on[^a-z]/,Ny=e=>M3.test(e),Rw=e=>e.startsWith("onUpdate:"),Gi=Object.assign,Ow=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},P3=Object.prototype.hasOwnProperty,Or=(e,t)=>P3.call(e,t),jn=Array.isArray,Uh=e=>Uy(e)==="[object Map]",JA=e=>Uy(e)==="[object Set]",or=e=>typeof e=="function",qi=e=>typeof e=="string",Lw=e=>typeof e=="symbol",ui=e=>e!==null&&typeof e=="object",QA=e=>ui(e)&&or(e.then)&&or(e.catch),ek=Object.prototype.toString,Uy=e=>ek.call(e),A3=e=>Uy(e).slice(8,-1),tk=e=>Uy(e)==="[object Object]",Bw=e=>qi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$_=zw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vy=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},k3=/-(\w)/g,Va=Vy(e=>e.replace(k3,(t,n)=>n?n.toUpperCase():"")),D3=/\B([A-Z])/g,pf=Vy(e=>e.replace(D3,"-$1").toLowerCase()),jy=Vy(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bx=Vy(e=>e?`on${jy(e)}`:""),km=(e,t)=>!Object.is(e,t),Fx=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},iy=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},I3=e=>{const t=parseFloat(e);return isNaN(t)?e:t},z3=e=>{const t=qi(e)?Number(e):NaN;return isNaN(t)?e:t};let VS;const Wb=()=>VS||(VS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fw(e){if(jn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=qi(i)?B3(i):Fw(i);if(s)for(const u in s)t[u]=s[u]}return t}else{if(qi(e))return e;if(ui(e))return e}}const R3=/;(?![^(]*\))/g,O3=/:([^]+)/,L3=new RegExp("\\/\\*.*?\\*\\/","gs");function B3(e){const t={};return e.replace(L3,"").split(R3).forEach(n=>{if(n){const i=n.split(O3);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function $w(e){let t="";if(qi(e))t=e;else if(jn(e))for(let n=0;n<e.length;n++){const i=$w(e[n]);i&&(t+=i+" ")}else if(ui(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const F3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$3=zw(F3);function nk(e){return!!e||e===""}const Di=e=>qi(e)?e:e==null?"":jn(e)||ui(e)&&(e.toString===ek||!or(e.toString))?JSON.stringify(e,rk,2):String(e),rk=(e,t)=>t&&t.__v_isRef?rk(e,t.value):Uh(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:JA(t)?{[`Set(${t.size})`]:[...t.values()]}:ui(t)&&!jn(t)&&!tk(t)?String(t):t;let ta;class N3{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ta,!t&&ta&&(this.index=(ta.scopes||(ta.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=ta;try{return ta=this,t()}finally{ta=n}}}on(){ta=this}off(){ta=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function U3(e,t=ta){t&&t.active&&t.effects.push(e)}function V3(){return ta}const Nw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ik=e=>(e.w&kc)>0,ok=e=>(e.n&kc)>0,j3=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=kc},W3=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const s=t[i];ik(s)&&!ok(s)?s.delete(e):t[n++]=s,s.w&=~kc,s.n&=~kc}t.length=n}},oy=new WeakMap;let om=0,kc=1;const Hb=30;let ra;const ed=Symbol(""),Gb=Symbol("");class Uw{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,U3(this,i)}run(){if(!this.active)return this.fn();let t=ra,n=Ec;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ra,ra=this,Ec=!0,kc=1<<++om,om<=Hb?j3(this):jS(this),this.fn()}finally{om<=Hb&&W3(this),kc=1<<--om,ra=this.parent,Ec=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ra===this?this.deferStop=!0:this.active&&(jS(this),this.onStop&&this.onStop(),this.active=!1)}}function jS(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Ec=!0;const sk=[];function mf(){sk.push(Ec),Ec=!1}function gf(){const e=sk.pop();Ec=e===void 0?!0:e}function fs(e,t,n){if(Ec&&ra){let i=oy.get(e);i||oy.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=Nw()),ak(s)}}function ak(e,t){let n=!1;om<=Hb?ok(e)||(e.n|=kc,n=!ik(e)):n=!e.has(ra),n&&(e.add(ra),ra.deps.push(e))}function Sl(e,t,n,i,s,u){const d=oy.get(e);if(!d)return;let o=[];if(t==="clear")o=[...d.values()];else if(n==="length"&&jn(e)){const m=Number(i);d.forEach((y,w)=>{(w==="length"||w>=m)&&o.push(y)})}else switch(n!==void 0&&o.push(d.get(n)),t){case"add":jn(e)?Bw(n)&&o.push(d.get("length")):(o.push(d.get(ed)),Uh(e)&&o.push(d.get(Gb)));break;case"delete":jn(e)||(o.push(d.get(ed)),Uh(e)&&o.push(d.get(Gb)));break;case"set":Uh(e)&&o.push(d.get(ed));break}if(o.length===1)o[0]&&qb(o[0]);else{const m=[];for(const y of o)y&&m.push(...y);qb(Nw(m))}}function qb(e,t){const n=jn(e)?e:[...e];for(const i of n)i.computed&&WS(i);for(const i of n)i.computed||WS(i)}function WS(e,t){(e!==ra||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function H3(e,t){var n;return(n=oy.get(e))==null?void 0:n.get(t)}const G3=zw("__proto__,__v_isRef,__isVue"),lk=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Lw)),q3=Vw(),Z3=Vw(!1,!0),Y3=Vw(!0),HS=X3();function X3(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Dr(this);for(let u=0,d=this.length;u<d;u++)fs(i,"get",u+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(Dr)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){mf();const i=Dr(this)[t].apply(this,n);return gf(),i}}),e}function K3(e){const t=Dr(this);return fs(t,"has",e),t.hasOwnProperty(e)}function Vw(e=!1,t=!1){return function(i,s,u){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&u===(e?t?fB:fk:t?hk:dk).get(i))return i;const d=jn(i);if(!e){if(d&&Or(HS,s))return Reflect.get(HS,s,u);if(s==="hasOwnProperty")return K3}const o=Reflect.get(i,s,u);return(Lw(s)?lk.has(s):G3(s))||(e||fs(i,"get",s),t)?o:vo(o)?d&&Bw(s)?o:o.value:ui(o)?e?qh(o):pd(o):o}}const J3=ck(),Q3=ck(!0);function ck(e=!1){return function(n,i,s,u){let d=n[i];if(Zh(d)&&vo(d)&&!vo(s))return!1;if(!e&&(!sy(s)&&!Zh(s)&&(d=Dr(d),s=Dr(s)),!jn(n)&&vo(d)&&!vo(s)))return d.value=s,!0;const o=jn(n)&&Bw(i)?Number(i)<n.length:Or(n,i),m=Reflect.set(n,i,s,u);return n===Dr(u)&&(o?km(s,d)&&Sl(n,"set",i,s):Sl(n,"add",i,s)),m}}function eB(e,t){const n=Or(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Sl(e,"delete",t,void 0),i}function tB(e,t){const n=Reflect.has(e,t);return(!Lw(t)||!lk.has(t))&&fs(e,"has",t),n}function nB(e){return fs(e,"iterate",jn(e)?"length":ed),Reflect.ownKeys(e)}const uk={get:q3,set:J3,deleteProperty:eB,has:tB,ownKeys:nB},rB={get:Y3,set(e,t){return!0},deleteProperty(e,t){return!0}},iB=Gi({},uk,{get:Z3,set:Q3}),jw=e=>e,Wy=e=>Reflect.getPrototypeOf(e);function n_(e,t,n=!1,i=!1){e=e.__v_raw;const s=Dr(e),u=Dr(t);n||(t!==u&&fs(s,"get",t),fs(s,"get",u));const{has:d}=Wy(s),o=i?jw:n?Gw:Dm;if(d.call(s,t))return o(e.get(t));if(d.call(s,u))return o(e.get(u));e!==s&&e.get(t)}function r_(e,t=!1){const n=this.__v_raw,i=Dr(n),s=Dr(e);return t||(e!==s&&fs(i,"has",e),fs(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function i_(e,t=!1){return e=e.__v_raw,!t&&fs(Dr(e),"iterate",ed),Reflect.get(e,"size",e)}function GS(e){e=Dr(e);const t=Dr(this);return Wy(t).has.call(t,e)||(t.add(e),Sl(t,"add",e,e)),this}function qS(e,t){t=Dr(t);const n=Dr(this),{has:i,get:s}=Wy(n);let u=i.call(n,e);u||(e=Dr(e),u=i.call(n,e));const d=s.call(n,e);return n.set(e,t),u?km(t,d)&&Sl(n,"set",e,t):Sl(n,"add",e,t),this}function ZS(e){const t=Dr(this),{has:n,get:i}=Wy(t);let s=n.call(t,e);s||(e=Dr(e),s=n.call(t,e)),i&&i.call(t,e);const u=t.delete(e);return s&&Sl(t,"delete",e,void 0),u}function YS(){const e=Dr(this),t=e.size!==0,n=e.clear();return t&&Sl(e,"clear",void 0,void 0),n}function o_(e,t){return function(i,s){const u=this,d=u.__v_raw,o=Dr(d),m=t?jw:e?Gw:Dm;return!e&&fs(o,"iterate",ed),d.forEach((y,w)=>i.call(s,m(y),m(w),u))}}function s_(e,t,n){return function(...i){const s=this.__v_raw,u=Dr(s),d=Uh(u),o=e==="entries"||e===Symbol.iterator&&d,m=e==="keys"&&d,y=s[e](...i),w=n?jw:t?Gw:Dm;return!t&&fs(u,"iterate",m?Gb:ed),{next(){const{value:S,done:A}=y.next();return A?{value:S,done:A}:{value:o?[w(S[0]),w(S[1])]:w(S),done:A}},[Symbol.iterator](){return this}}}}function cc(e){return function(...t){return e==="delete"?!1:this}}function oB(){const e={get(u){return n_(this,u)},get size(){return i_(this)},has:r_,add:GS,set:qS,delete:ZS,clear:YS,forEach:o_(!1,!1)},t={get(u){return n_(this,u,!1,!0)},get size(){return i_(this)},has:r_,add:GS,set:qS,delete:ZS,clear:YS,forEach:o_(!1,!0)},n={get(u){return n_(this,u,!0)},get size(){return i_(this,!0)},has(u){return r_.call(this,u,!0)},add:cc("add"),set:cc("set"),delete:cc("delete"),clear:cc("clear"),forEach:o_(!0,!1)},i={get(u){return n_(this,u,!0,!0)},get size(){return i_(this,!0)},has(u){return r_.call(this,u,!0)},add:cc("add"),set:cc("set"),delete:cc("delete"),clear:cc("clear"),forEach:o_(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{e[u]=s_(u,!1,!1),n[u]=s_(u,!0,!1),t[u]=s_(u,!1,!0),i[u]=s_(u,!0,!0)}),[e,n,t,i]}const[sB,aB,lB,cB]=oB();function Ww(e,t){const n=t?e?cB:lB:e?aB:sB;return(i,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(Or(n,s)&&s in i?n:i,s,u)}const uB={get:Ww(!1,!1)},dB={get:Ww(!1,!0)},hB={get:Ww(!0,!1)},dk=new WeakMap,hk=new WeakMap,fk=new WeakMap,fB=new WeakMap;function pB(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mB(e){return e.__v_skip||!Object.isExtensible(e)?0:pB(A3(e))}function pd(e){return Zh(e)?e:Hw(e,!1,uk,uB,dk)}function gB(e){return Hw(e,!1,iB,dB,hk)}function qh(e){return Hw(e,!0,rB,hB,fk)}function Hw(e,t,n,i,s){if(!ui(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=s.get(e);if(u)return u;const d=mB(e);if(d===0)return e;const o=new Proxy(e,d===2?i:n);return s.set(e,o),o}function Vh(e){return Zh(e)?Vh(e.__v_raw):!!(e&&e.__v_isReactive)}function Zh(e){return!!(e&&e.__v_isReadonly)}function sy(e){return!!(e&&e.__v_isShallow)}function pk(e){return Vh(e)||Zh(e)}function Dr(e){const t=e&&e.__v_raw;return t?Dr(t):e}function mk(e){return iy(e,"__v_skip",!0),e}const Dm=e=>ui(e)?pd(e):e,Gw=e=>ui(e)?qh(e):e;function gk(e){Ec&&ra&&(e=Dr(e),ak(e.dep||(e.dep=Nw())))}function vk(e,t){e=Dr(e);const n=e.dep;n&&qb(n)}function vo(e){return!!(e&&e.__v_isRef===!0)}function He(e){return _k(e,!1)}function vB(e){return _k(e,!0)}function _k(e,t){return vo(e)?e:new _B(e,t)}class _B{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Dr(t),this._value=n?t:Dm(t)}get value(){return gk(this),this._value}set value(t){const n=this.__v_isShallow||sy(t)||Zh(t);t=n?t:Dr(t),km(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Dm(t),vk(this))}}function cr(e){return vo(e)?e.value:e}const yB={get:(e,t,n)=>cr(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return vo(s)&&!vo(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function yk(e){return Vh(e)?e:new Proxy(e,yB)}class xB{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return H3(Dr(this._object),this._key)}}class bB{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function nr(e,t,n){return vo(e)?e:or(e)?new bB(e):ui(e)&&arguments.length>1?wB(e,t,n):He(e)}function wB(e,t,n){const i=e[t];return vo(i)?i:new xB(e,t,n)}class TB{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Uw(t,()=>{this._dirty||(this._dirty=!0,vk(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=Dr(this);return gk(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function CB(e,t,n=!1){let i,s;const u=or(e);return u?(i=e,s=aa):(i=e.get,s=e.set),new TB(i,s,u||!s,n)}function Mc(e,t,n,i){let s;try{s=i?e(...i):e()}catch(u){Hy(u,t,n)}return s}function Bs(e,t,n,i){if(or(e)){const u=Mc(e,t,n,i);return u&&QA(u)&&u.catch(d=>{Hy(d,t,n)}),u}const s=[];for(let u=0;u<e.length;u++)s.push(Bs(e[u],t,n,i));return s}function Hy(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let u=t.parent;const d=t.proxy,o=n;for(;u;){const y=u.ec;if(y){for(let w=0;w<y.length;w++)if(y[w](e,d,o)===!1)return}u=u.parent}const m=t.appContext.config.errorHandler;if(m){Mc(m,null,10,[e,d,o]);return}}SB(e,n,s,i)}function SB(e,t,n,i=!0){console.error(e)}let Im=!1,Zb=!1;const Bo=[];let Oa=0;const jh=[];let gl=null,Hu=0;const xk=Promise.resolve();let qw=null;function Yi(e){const t=qw||xk;return e?t.then(this?e.bind(this):e):t}function EB(e){let t=Oa+1,n=Bo.length;for(;t<n;){const i=t+n>>>1;zm(Bo[i])<e?t=i+1:n=i}return t}function Zw(e){(!Bo.length||!Bo.includes(e,Im&&e.allowRecurse?Oa+1:Oa))&&(e.id==null?Bo.push(e):Bo.splice(EB(e.id),0,e),bk())}function bk(){!Im&&!Zb&&(Zb=!0,qw=xk.then(Tk))}function MB(e){const t=Bo.indexOf(e);t>Oa&&Bo.splice(t,1)}function PB(e){jn(e)?jh.push(...e):(!gl||!gl.includes(e,e.allowRecurse?Hu+1:Hu))&&jh.push(e),bk()}function XS(e,t=Im?Oa+1:0){for(;t<Bo.length;t++){const n=Bo[t];n&&n.pre&&(Bo.splice(t,1),t--,n())}}function wk(e){if(jh.length){const t=[...new Set(jh)];if(jh.length=0,gl){gl.push(...t);return}for(gl=t,gl.sort((n,i)=>zm(n)-zm(i)),Hu=0;Hu<gl.length;Hu++)gl[Hu]();gl=null,Hu=0}}const zm=e=>e.id==null?1/0:e.id,AB=(e,t)=>{const n=zm(e)-zm(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Tk(e){Zb=!1,Im=!0,Bo.sort(AB);const t=aa;try{for(Oa=0;Oa<Bo.length;Oa++){const n=Bo[Oa];n&&n.active!==!1&&Mc(n,null,14)}}finally{Oa=0,Bo.length=0,wk(),Im=!1,qw=null,(Bo.length||jh.length)&&Tk()}}function kB(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||gi;let s=n;const u=t.startsWith("update:"),d=u&&t.slice(7);if(d&&d in i){const w=`${d==="modelValue"?"model":d}Modifiers`,{number:S,trim:A}=i[w]||gi;A&&(s=n.map(I=>qi(I)?I.trim():I)),S&&(s=n.map(I3))}let o,m=i[o=Bx(t)]||i[o=Bx(Va(t))];!m&&u&&(m=i[o=Bx(pf(t))]),m&&Bs(m,e,6,s);const y=i[o+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Bs(y,e,6,s)}}function Ck(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const u=e.emits;let d={},o=!1;if(!or(e)){const m=y=>{const w=Ck(y,t,!0);w&&(o=!0,Gi(d,w))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!u&&!o?(ui(e)&&i.set(e,null),null):(jn(u)?u.forEach(m=>d[m]=null):Gi(d,u),ui(e)&&i.set(e,d),d)}function Gy(e,t){return!e||!Ny(t)?!1:(t=t.slice(2).replace(/Once$/,""),Or(e,t[0].toLowerCase()+t.slice(1))||Or(e,pf(t))||Or(e,t))}let So=null,Sk=null;function ay(e){const t=So;return So=e,Sk=e&&e.type.__scopeId||null,t}function Gr(e,t=So,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&uE(-1);const u=ay(t);let d;try{d=e(...s)}finally{ay(u),i._d&&uE(1)}return d};return i._n=!0,i._c=!0,i._d=!0,i}function $x(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:u,propsOptions:[d],slots:o,attrs:m,emit:y,render:w,renderCache:S,data:A,setupState:I,ctx:z,inheritAttrs:U}=e;let j,F;const H=ay(e);try{if(n.shapeFlag&4){const Z=s||i;j=Ra(w.call(Z,Z,S,u,I,A,z)),F=m}else{const Z=t;j=Ra(Z.length>1?Z(u,{attrs:m,slots:o,emit:y}):Z(u,null)),F=t.props?m:DB(m)}}catch(Z){_m.length=0,Hy(Z,e,1),j=tr(Zo)}let J=j;if(F&&U!==!1){const Z=Object.keys(F),{shapeFlag:Y}=J;Z.length&&Y&7&&(d&&Z.some(Rw)&&(F=IB(F,d)),J=ca(J,F))}return n.dirs&&(J=ca(J),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&(J.transition=n.transition),j=J,ay(H),j}const DB=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ny(n))&&((t||(t={}))[n]=e[n]);return t},IB=(e,t)=>{const n={};for(const i in e)(!Rw(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function zB(e,t,n){const{props:i,children:s,component:u}=e,{props:d,children:o,patchFlag:m}=t,y=u.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return i?KS(i,d,y):!!d;if(m&8){const w=t.dynamicProps;for(let S=0;S<w.length;S++){const A=w[S];if(d[A]!==i[A]&&!Gy(y,A))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:i===d?!1:i?d?KS(i,d,y):!0:!!d;return!1}function KS(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const u=i[s];if(t[u]!==e[u]&&!Gy(n,u))return!0}return!1}function RB({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const OB=e=>e.__isSuspense;function LB(e,t){t&&t.pendingBranch?jn(e)?t.effects.push(...e):t.effects.push(e):PB(e)}function El(e,t){return Yw(e,null,t)}const a_={};function xr(e,t,n){return Yw(e,t,n)}function Yw(e,t,{immediate:n,deep:i,flush:s,onTrack:u,onTrigger:d}=gi){var o;const m=V3()===((o=go)==null?void 0:o.scope)?go:null;let y,w=!1,S=!1;if(vo(e)?(y=()=>e.value,w=sy(e)):Vh(e)?(y=()=>e,i=!0):jn(e)?(S=!0,w=e.some(Z=>Vh(Z)||sy(Z)),y=()=>e.map(Z=>{if(vo(Z))return Z.value;if(Vh(Z))return Zu(Z);if(or(Z))return Mc(Z,m,2)})):or(e)?t?y=()=>Mc(e,m,2):y=()=>{if(!(m&&m.isUnmounted))return A&&A(),Bs(e,m,3,[I])}:y=aa,t&&i){const Z=y;y=()=>Zu(Z())}let A,I=Z=>{A=H.onStop=()=>{Mc(Z,m,4)}},z;if(Fm)if(I=aa,t?n&&Bs(t,m,3,[y(),S?[]:void 0,I]):y(),s==="sync"){const Z=E5();z=Z.__watcherHandles||(Z.__watcherHandles=[])}else return aa;let U=S?new Array(e.length).fill(a_):a_;const j=()=>{if(H.active)if(t){const Z=H.run();(i||w||(S?Z.some((Y,ce)=>km(Y,U[ce])):km(Z,U)))&&(A&&A(),Bs(t,m,3,[Z,U===a_?void 0:S&&U[0]===a_?[]:U,I]),U=Z)}else H.run()};j.allowRecurse=!!t;let F;s==="sync"?F=j:s==="post"?F=()=>us(j,m&&m.suspense):(j.pre=!0,m&&(j.id=m.uid),F=()=>Zw(j));const H=new Uw(y,F);t?n?j():U=H.run():s==="post"?us(H.run.bind(H),m&&m.suspense):H.run();const J=()=>{H.stop(),m&&m.scope&&Ow(m.scope.effects,H)};return z&&z.push(J),J}function BB(e,t,n){const i=this.proxy,s=qi(e)?e.includes(".")?Ek(i,e):()=>i[e]:e.bind(i,i);let u;or(t)?u=t:(u=t.handler,n=t);const d=go;Xh(this);const o=Yw(s,u.bind(i),n);return d?Xh(d):td(),o}function Ek(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function Zu(e,t){if(!ui(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),vo(e))Zu(e.value,t);else if(jn(e))for(let n=0;n<e.length;n++)Zu(e[n],t);else if(JA(e)||Uh(e))e.forEach(n=>{Zu(n,t)});else if(tk(e))for(const n in e)Zu(e[n],t);return e}function Wa(e,t){const n=So;if(n===null)return e;const i=Ky(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let u=0;u<t.length;u++){let[d,o,m,y=gi]=t[u];d&&(or(d)&&(d={mounted:d,updated:d}),d.deep&&Zu(o),s.push({dir:d,instance:i,value:o,oldValue:void 0,arg:m,modifiers:y}))}return e}function Du(e,t,n,i){const s=e.dirs,u=t&&t.dirs;for(let d=0;d<s.length;d++){const o=s[d];u&&(o.oldValue=u[d].value);let m=o.dir[i];m&&(mf(),Bs(m,n,8,[e.el,o,e,t]),gf())}}function Mk(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Si(()=>{e.isMounted=!0}),Uo(()=>{e.isUnmounting=!0}),e}const Ds=[Function,Array],Pk={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ds,onEnter:Ds,onAfterEnter:Ds,onEnterCancelled:Ds,onBeforeLeave:Ds,onLeave:Ds,onAfterLeave:Ds,onLeaveCancelled:Ds,onBeforeAppear:Ds,onAppear:Ds,onAfterAppear:Ds,onAppearCancelled:Ds},FB={name:"BaseTransition",props:Pk,setup(e,{slots:t}){const n=md(),i=Mk();let s;return()=>{const u=t.default&&Xw(t.default(),!0);if(!u||!u.length)return;let d=u[0];if(u.length>1){for(const U of u)if(U.type!==Zo){d=U;break}}const o=Dr(e),{mode:m}=o;if(i.isLeaving)return Nx(d);const y=JS(d);if(!y)return Nx(d);const w=Rm(y,o,i,n);Om(y,w);const S=n.subTree,A=S&&JS(S);let I=!1;const{getTransitionKey:z}=y.type;if(z){const U=z();s===void 0?s=U:U!==s&&(s=U,I=!0)}if(A&&A.type!==Zo&&(!Gu(y,A)||I)){const U=Rm(A,o,i,n);if(Om(A,U),m==="out-in")return i.isLeaving=!0,U.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Nx(d);m==="in-out"&&y.type!==Zo&&(U.delayLeave=(j,F,H)=>{const J=Ak(i,A);J[String(A.key)]=A,j._leaveCb=()=>{F(),j._leaveCb=void 0,delete w.delayedLeave},w.delayedLeave=H})}return d}}},$B=FB;function Ak(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Rm(e,t,n,i){const{appear:s,mode:u,persisted:d=!1,onBeforeEnter:o,onEnter:m,onAfterEnter:y,onEnterCancelled:w,onBeforeLeave:S,onLeave:A,onAfterLeave:I,onLeaveCancelled:z,onBeforeAppear:U,onAppear:j,onAfterAppear:F,onAppearCancelled:H}=t,J=String(e.key),Z=Ak(n,e),Y=(de,ue)=>{de&&Bs(de,i,9,ue)},ce=(de,ue)=>{const Ee=ue[1];Y(de,ue),jn(de)?de.every(ze=>ze.length<=1)&&Ee():de.length<=1&&Ee()},ee={mode:u,persisted:d,beforeEnter(de){let ue=o;if(!n.isMounted)if(s)ue=U||o;else return;de._leaveCb&&de._leaveCb(!0);const Ee=Z[J];Ee&&Gu(e,Ee)&&Ee.el._leaveCb&&Ee.el._leaveCb(),Y(ue,[de])},enter(de){let ue=m,Ee=y,ze=w;if(!n.isMounted)if(s)ue=j||m,Ee=F||y,ze=H||w;else return;let xe=!1;const qe=de._enterCb=Qe=>{xe||(xe=!0,Qe?Y(ze,[de]):Y(Ee,[de]),ee.delayedLeave&&ee.delayedLeave(),de._enterCb=void 0)};ue?ce(ue,[de,qe]):qe()},leave(de,ue){const Ee=String(e.key);if(de._enterCb&&de._enterCb(!0),n.isUnmounting)return ue();Y(S,[de]);let ze=!1;const xe=de._leaveCb=qe=>{ze||(ze=!0,ue(),qe?Y(z,[de]):Y(I,[de]),de._leaveCb=void 0,Z[Ee]===e&&delete Z[Ee])};Z[Ee]=e,A?ce(A,[de,xe]):xe()},clone(de){return Rm(de,t,n,i)}};return ee}function Nx(e){if(qy(e))return e=ca(e),e.children=null,e}function JS(e){return qy(e)?e.children?e.children[0]:void 0:e}function Om(e,t){e.shapeFlag&6&&e.component?Om(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Xw(e,t=!1,n){let i=[],s=0;for(let u=0;u<e.length;u++){let d=e[u];const o=n==null?d.key:String(n)+String(d.key!=null?d.key:u);d.type===Vr?(d.patchFlag&128&&s++,i=i.concat(Xw(d.children,t,o))):(t||d.type!==Zo)&&i.push(o!=null?ca(d,{key:o}):d)}if(s>1)for(let u=0;u<i.length;u++)i[u].patchFlag=-2;return i}function pn(e,t){return or(e)?(()=>Gi({name:e.name},t,{setup:e}))():e}const mm=e=>!!e.type.__asyncLoader,qy=e=>e.type.__isKeepAlive;function Kw(e,t){kk(e,"a",t)}function Jw(e,t){kk(e,"da",t)}function kk(e,t,n=go){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Zy(t,i,n),n){let s=n.parent;for(;s&&s.parent;)qy(s.parent.vnode)&&NB(i,t,n,s),s=s.parent}}function NB(e,t,n,i){const s=Zy(t,e,i,!0);Ik(()=>{Ow(i[t],s)},n)}function Zy(e,t,n=go,i=!1){if(n){const s=n[e]||(n[e]=[]),u=t.__weh||(t.__weh=(...d)=>{if(n.isUnmounted)return;mf(),Xh(n);const o=Bs(t,n,e,d);return td(),gf(),o});return i?s.unshift(u):s.push(u),u}}const Ml=e=>(t,n=go)=>(!Fm||e==="sp")&&Zy(e,(...i)=>t(...i),n),sg=Ml("bm"),Si=Ml("m"),UB=Ml("bu"),Dk=Ml("u"),Uo=Ml("bum"),Ik=Ml("um"),VB=Ml("sp"),jB=Ml("rtg"),WB=Ml("rtc");function HB(e,t=go){Zy("ec",e,t)}const zk="components";function QS(e,t){return qB(zk,e,!0,t)||e}const GB=Symbol.for("v-ndc");function qB(e,t,n=!0,i=!1){const s=So||go;if(s){const u=s.type;if(e===zk){const o=T5(u,!1);if(o&&(o===t||o===Va(t)||o===jy(Va(t))))return u}const d=eE(s[e]||u[e],t)||eE(s.appContext[e],t);return!d&&i?u:d}}function eE(e,t){return e&&(e[t]||e[Va(t)]||e[jy(Va(t))])}function Qw(e,t,n,i){let s;const u=n&&n[i];if(jn(e)||qi(e)){s=new Array(e.length);for(let d=0,o=e.length;d<o;d++)s[d]=t(e[d],d,void 0,u&&u[d])}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=t(d+1,d,void 0,u&&u[d])}else if(ui(e))if(e[Symbol.iterator])s=Array.from(e,(d,o)=>t(d,o,void 0,u&&u[o]));else{const d=Object.keys(e);s=new Array(d.length);for(let o=0,m=d.length;o<m;o++){const y=d[o];s[o]=t(e[y],y,o,u&&u[o])}}else s=[];return n&&(n[i]=s),s}function eT(e,t,n={},i,s){if(So.isCE||So.parent&&mm(So.parent)&&So.parent.isCE)return t!=="default"&&(n.name=t),tr("slot",n,i&&i());let u=e[t];u&&u._c&&(u._d=!1),si();const d=u&&Rk(u(n)),o=qo(Vr,{key:n.key||d&&d.key||`_${t}`},d||(i?i():[]),d&&e._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),u&&u._c&&(u._d=!0),o}function Rk(e){return e.some(t=>Bm(t)?!(t.type===Zo||t.type===Vr&&!Rk(t.children)):!0)?e:null}const Yb=e=>e?Hk(e)?Ky(e)||e.proxy:Yb(e.parent):null,gm=Gi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Yb(e.parent),$root:e=>Yb(e.root),$emit:e=>e.emit,$options:e=>tT(e),$forceUpdate:e=>e.f||(e.f=()=>Zw(e.update)),$nextTick:e=>e.n||(e.n=Yi.bind(e.proxy)),$watch:e=>BB.bind(e)}),Ux=(e,t)=>e!==gi&&!e.__isScriptSetup&&Or(e,t),ZB={get({_:e},t){const{ctx:n,setupState:i,data:s,props:u,accessCache:d,type:o,appContext:m}=e;let y;if(t[0]!=="$"){const I=d[t];if(I!==void 0)switch(I){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return u[t]}else{if(Ux(i,t))return d[t]=1,i[t];if(s!==gi&&Or(s,t))return d[t]=2,s[t];if((y=e.propsOptions[0])&&Or(y,t))return d[t]=3,u[t];if(n!==gi&&Or(n,t))return d[t]=4,n[t];Xb&&(d[t]=0)}}const w=gm[t];let S,A;if(w)return t==="$attrs"&&fs(e,"get",t),w(e);if((S=o.__cssModules)&&(S=S[t]))return S;if(n!==gi&&Or(n,t))return d[t]=4,n[t];if(A=m.config.globalProperties,Or(A,t))return A[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:u}=e;return Ux(s,t)?(s[t]=n,!0):i!==gi&&Or(i,t)?(i[t]=n,!0):Or(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:u}},d){let o;return!!n[d]||e!==gi&&Or(e,d)||Ux(t,d)||(o=u[0])&&Or(o,d)||Or(i,d)||Or(gm,d)||Or(s.config.globalProperties,d)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Or(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function tE(e){return jn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Xb=!0;function YB(e){const t=tT(e),n=e.proxy,i=e.ctx;Xb=!1,t.beforeCreate&&nE(t.beforeCreate,e,"bc");const{data:s,computed:u,methods:d,watch:o,provide:m,inject:y,created:w,beforeMount:S,mounted:A,beforeUpdate:I,updated:z,activated:U,deactivated:j,beforeDestroy:F,beforeUnmount:H,destroyed:J,unmounted:Z,render:Y,renderTracked:ce,renderTriggered:ee,errorCaptured:de,serverPrefetch:ue,expose:Ee,inheritAttrs:ze,components:xe,directives:qe,filters:Qe}=t;if(y&&XB(y,i,null),d)for(const it in d){const Pt=d[it];or(Pt)&&(i[it]=Pt.bind(n))}if(s){const it=s.call(n,n);ui(it)&&(e.data=pd(it))}if(Xb=!0,u)for(const it in u){const Pt=u[it],Ke=or(Pt)?Pt.bind(n,n):or(Pt.get)?Pt.get.bind(n,n):aa,ut=!or(Pt)&&or(Pt.set)?Pt.set.bind(n):aa,jt=Le({get:Ke,set:ut});Object.defineProperty(i,it,{enumerable:!0,configurable:!0,get:()=>jt.value,set:on=>jt.value=on})}if(o)for(const it in o)Ok(o[it],i,n,it);if(m){const it=or(m)?m.call(n):m;Reflect.ownKeys(it).forEach(Pt=>{Hi(Pt,it[Pt])})}w&&nE(w,e,"c");function st(it,Pt){jn(Pt)?Pt.forEach(Ke=>it(Ke.bind(n))):Pt&&it(Pt.bind(n))}if(st(sg,S),st(Si,A),st(UB,I),st(Dk,z),st(Kw,U),st(Jw,j),st(HB,de),st(WB,ce),st(jB,ee),st(Uo,H),st(Ik,Z),st(VB,ue),jn(Ee))if(Ee.length){const it=e.exposed||(e.exposed={});Ee.forEach(Pt=>{Object.defineProperty(it,Pt,{get:()=>n[Pt],set:Ke=>n[Pt]=Ke})})}else e.exposed||(e.exposed={});Y&&e.render===aa&&(e.render=Y),ze!=null&&(e.inheritAttrs=ze),xe&&(e.components=xe),qe&&(e.directives=qe)}function XB(e,t,n=aa){jn(e)&&(e=Kb(e));for(const i in e){const s=e[i];let u;ui(s)?"default"in s?u=fr(s.from||i,s.default,!0):u=fr(s.from||i):u=fr(s),vo(u)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):t[i]=u}}function nE(e,t,n){Bs(jn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ok(e,t,n,i){const s=i.includes(".")?Ek(n,i):()=>n[i];if(qi(e)){const u=t[e];or(u)&&xr(s,u)}else if(or(e))xr(s,e.bind(n));else if(ui(e))if(jn(e))e.forEach(u=>Ok(u,t,n,i));else{const u=or(e.handler)?e.handler.bind(n):t[e.handler];or(u)&&xr(s,u,e)}}function tT(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,o=u.get(t);let m;return o?m=o:!s.length&&!n&&!i?m=t:(m={},s.length&&s.forEach(y=>ly(m,y,d,!0)),ly(m,t,d)),ui(t)&&u.set(t,m),m}function ly(e,t,n,i=!1){const{mixins:s,extends:u}=t;u&&ly(e,u,n,!0),s&&s.forEach(d=>ly(e,d,n,!0));for(const d in t)if(!(i&&d==="expose")){const o=KB[d]||n&&n[d];e[d]=o?o(e[d],t[d]):t[d]}return e}const KB={data:rE,props:iE,emits:iE,methods:sm,computed:sm,beforeCreate:Ho,created:Ho,beforeMount:Ho,mounted:Ho,beforeUpdate:Ho,updated:Ho,beforeDestroy:Ho,beforeUnmount:Ho,destroyed:Ho,unmounted:Ho,activated:Ho,deactivated:Ho,errorCaptured:Ho,serverPrefetch:Ho,components:sm,directives:sm,watch:QB,provide:rE,inject:JB};function rE(e,t){return t?e?function(){return Gi(or(e)?e.call(this,this):e,or(t)?t.call(this,this):t)}:t:e}function JB(e,t){return sm(Kb(e),Kb(t))}function Kb(e){if(jn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ho(e,t){return e?[...new Set([].concat(e,t))]:t}function sm(e,t){return e?Gi(Object.create(null),e,t):t}function iE(e,t){return e?jn(e)&&jn(t)?[...new Set([...e,...t])]:Gi(Object.create(null),tE(e),tE(t??{})):t}function QB(e,t){if(!e)return t;if(!t)return e;const n=Gi(Object.create(null),e);for(const i in t)n[i]=Ho(e[i],t[i]);return n}function Lk(){return{app:null,config:{isNativeTag:E3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let e5=0;function t5(e,t){return function(i,s=null){or(i)||(i=Gi({},i)),s!=null&&!ui(s)&&(s=null);const u=Lk(),d=new Set;let o=!1;const m=u.app={_uid:e5++,_component:i,_props:s,_container:null,_context:u,_instance:null,version:M5,get config(){return u.config},set config(y){},use(y,...w){return d.has(y)||(y&&or(y.install)?(d.add(y),y.install(m,...w)):or(y)&&(d.add(y),y(m,...w))),m},mixin(y){return u.mixins.includes(y)||u.mixins.push(y),m},component(y,w){return w?(u.components[y]=w,m):u.components[y]},directive(y,w){return w?(u.directives[y]=w,m):u.directives[y]},mount(y,w,S){if(!o){const A=tr(i,s);return A.appContext=u,w&&t?t(A,y):e(A,y,S),o=!0,m._container=y,y.__vue_app__=m,Ky(A.component)||A.component.proxy}},unmount(){o&&(e(null,m._container),delete m._container.__vue_app__)},provide(y,w){return u.provides[y]=w,m},runWithContext(y){cy=m;try{return y()}finally{cy=null}}};return m}}let cy=null;function Hi(e,t){if(go){let n=go.provides;const i=go.parent&&go.parent.provides;i===n&&(n=go.provides=Object.create(i)),n[e]=t}}function fr(e,t,n=!1){const i=go||So;if(i||cy){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:cy._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&or(t)?t.call(i&&i.proxy):t}}function n5(e,t,n,i=!1){const s={},u={};iy(u,Xy,1),e.propsDefaults=Object.create(null),Bk(e,t,s,u);for(const d in e.propsOptions[0])d in s||(s[d]=void 0);n?e.props=i?s:gB(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function r5(e,t,n,i){const{props:s,attrs:u,vnode:{patchFlag:d}}=e,o=Dr(s),[m]=e.propsOptions;let y=!1;if((i||d>0)&&!(d&16)){if(d&8){const w=e.vnode.dynamicProps;for(let S=0;S<w.length;S++){let A=w[S];if(Gy(e.emitsOptions,A))continue;const I=t[A];if(m)if(Or(u,A))I!==u[A]&&(u[A]=I,y=!0);else{const z=Va(A);s[z]=Jb(m,o,z,I,e,!1)}else I!==u[A]&&(u[A]=I,y=!0)}}}else{Bk(e,t,s,u)&&(y=!0);let w;for(const S in o)(!t||!Or(t,S)&&((w=pf(S))===S||!Or(t,w)))&&(m?n&&(n[S]!==void 0||n[w]!==void 0)&&(s[S]=Jb(m,o,S,void 0,e,!0)):delete s[S]);if(u!==o)for(const S in u)(!t||!Or(t,S))&&(delete u[S],y=!0)}y&&Sl(e,"set","$attrs")}function Bk(e,t,n,i){const[s,u]=e.propsOptions;let d=!1,o;if(t)for(let m in t){if($_(m))continue;const y=t[m];let w;s&&Or(s,w=Va(m))?!u||!u.includes(w)?n[w]=y:(o||(o={}))[w]=y:Gy(e.emitsOptions,m)||(!(m in i)||y!==i[m])&&(i[m]=y,d=!0)}if(u){const m=Dr(n),y=o||gi;for(let w=0;w<u.length;w++){const S=u[w];n[S]=Jb(s,m,S,y[S],e,!Or(y,S))}}return d}function Jb(e,t,n,i,s,u){const d=e[n];if(d!=null){const o=Or(d,"default");if(o&&i===void 0){const m=d.default;if(d.type!==Function&&!d.skipFactory&&or(m)){const{propsDefaults:y}=s;n in y?i=y[n]:(Xh(s),i=y[n]=m.call(null,t),td())}else i=m}d[0]&&(u&&!o?i=!1:d[1]&&(i===""||i===pf(n))&&(i=!0))}return i}function Fk(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const u=e.props,d={},o=[];let m=!1;if(!or(e)){const w=S=>{m=!0;const[A,I]=Fk(S,t,!0);Gi(d,A),I&&o.push(...I)};!n&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!u&&!m)return ui(e)&&i.set(e,Nh),Nh;if(jn(u))for(let w=0;w<u.length;w++){const S=Va(u[w]);oE(S)&&(d[S]=gi)}else if(u)for(const w in u){const S=Va(w);if(oE(S)){const A=u[w],I=d[S]=jn(A)||or(A)?{type:A}:Gi({},A);if(I){const z=lE(Boolean,I.type),U=lE(String,I.type);I[0]=z>-1,I[1]=U<0||z<U,(z>-1||Or(I,"default"))&&o.push(S)}}}const y=[d,o];return ui(e)&&i.set(e,y),y}function oE(e){return e[0]!=="$"}function sE(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function aE(e,t){return sE(e)===sE(t)}function lE(e,t){return jn(t)?t.findIndex(n=>aE(n,e)):or(t)&&aE(t,e)?0:-1}const $k=e=>e[0]==="_"||e==="$stable",nT=e=>jn(e)?e.map(Ra):[Ra(e)],i5=(e,t,n)=>{if(t._n)return t;const i=Gr((...s)=>nT(t(...s)),n);return i._c=!1,i},Nk=(e,t,n)=>{const i=e._ctx;for(const s in e){if($k(s))continue;const u=e[s];if(or(u))t[s]=i5(s,u,i);else if(u!=null){const d=nT(u);t[s]=()=>d}}},Uk=(e,t)=>{const n=nT(t);e.slots.default=()=>n},o5=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Dr(t),iy(t,"_",n)):Nk(t,e.slots={})}else e.slots={},t&&Uk(e,t);iy(e.slots,Xy,1)},s5=(e,t,n)=>{const{vnode:i,slots:s}=e;let u=!0,d=gi;if(i.shapeFlag&32){const o=t._;o?n&&o===1?u=!1:(Gi(s,t),!n&&o===1&&delete s._):(u=!t.$stable,Nk(t,s)),d=t}else t&&(Uk(e,t),d={default:1});if(u)for(const o in s)!$k(o)&&!(o in d)&&delete s[o]};function Qb(e,t,n,i,s=!1){if(jn(e)){e.forEach((A,I)=>Qb(A,t&&(jn(t)?t[I]:t),n,i,s));return}if(mm(i)&&!s)return;const u=i.shapeFlag&4?Ky(i.component)||i.component.proxy:i.el,d=s?null:u,{i:o,r:m}=e,y=t&&t.r,w=o.refs===gi?o.refs={}:o.refs,S=o.setupState;if(y!=null&&y!==m&&(qi(y)?(w[y]=null,Or(S,y)&&(S[y]=null)):vo(y)&&(y.value=null)),or(m))Mc(m,o,12,[d,w]);else{const A=qi(m),I=vo(m);if(A||I){const z=()=>{if(e.f){const U=A?Or(S,m)?S[m]:w[m]:m.value;s?jn(U)&&Ow(U,u):jn(U)?U.includes(u)||U.push(u):A?(w[m]=[u],Or(S,m)&&(S[m]=w[m])):(m.value=[u],e.k&&(w[e.k]=m.value))}else A?(w[m]=d,Or(S,m)&&(S[m]=d)):I&&(m.value=d,e.k&&(w[e.k]=d))};d?(z.id=-1,us(z,n)):z()}}}const us=LB;function a5(e){return l5(e)}function l5(e,t){const n=Wb();n.__VUE__=!0;const{insert:i,remove:s,patchProp:u,createElement:d,createText:o,createComment:m,setText:y,setElementText:w,parentNode:S,nextSibling:A,setScopeId:I=aa,insertStaticContent:z}=e,U=(he,Me,Ue,lt=null,gt=null,Ne=null,ht=!1,At=null,Et=!!Me.dynamicChildren)=>{if(he===Me)return;he&&!Gu(he,Me)&&(lt=wt(he),on(he,gt,Ne,!0),he=null),Me.patchFlag===-2&&(Et=!1,Me.dynamicChildren=null);const{type:Oe,ref:vt,shapeFlag:Wt}=Me;switch(Oe){case Yy:j(he,Me,Ue,lt);break;case Zo:F(he,Me,Ue,lt);break;case Vx:he==null&&H(Me,Ue,lt,ht);break;case Vr:xe(he,Me,Ue,lt,gt,Ne,ht,At,Et);break;default:Wt&1?Y(he,Me,Ue,lt,gt,Ne,ht,At,Et):Wt&6?qe(he,Me,Ue,lt,gt,Ne,ht,At,Et):(Wt&64||Wt&128)&&Oe.process(he,Me,Ue,lt,gt,Ne,ht,At,Et,Ct)}vt!=null&&gt&&Qb(vt,he&&he.ref,Ne,Me||he,!Me)},j=(he,Me,Ue,lt)=>{if(he==null)i(Me.el=o(Me.children),Ue,lt);else{const gt=Me.el=he.el;Me.children!==he.children&&y(gt,Me.children)}},F=(he,Me,Ue,lt)=>{he==null?i(Me.el=m(Me.children||""),Ue,lt):Me.el=he.el},H=(he,Me,Ue,lt)=>{[he.el,he.anchor]=z(he.children,Me,Ue,lt,he.el,he.anchor)},J=({el:he,anchor:Me},Ue,lt)=>{let gt;for(;he&&he!==Me;)gt=A(he),i(he,Ue,lt),he=gt;i(Me,Ue,lt)},Z=({el:he,anchor:Me})=>{let Ue;for(;he&&he!==Me;)Ue=A(he),s(he),he=Ue;s(Me)},Y=(he,Me,Ue,lt,gt,Ne,ht,At,Et)=>{ht=ht||Me.type==="svg",he==null?ce(Me,Ue,lt,gt,Ne,ht,At,Et):ue(he,Me,gt,Ne,ht,At,Et)},ce=(he,Me,Ue,lt,gt,Ne,ht,At)=>{let Et,Oe;const{type:vt,props:Wt,shapeFlag:Jt,transition:wn,dirs:Cn}=he;if(Et=he.el=d(he.type,Ne,Wt&&Wt.is,Wt),Jt&8?w(Et,he.children):Jt&16&&de(he.children,Et,null,lt,gt,Ne&&vt!=="foreignObject",ht,At),Cn&&Du(he,null,lt,"created"),ee(Et,he,he.scopeId,ht,lt),Wt){for(const $n in Wt)$n!=="value"&&!$_($n)&&u(Et,$n,null,Wt[$n],Ne,he.children,lt,gt,yt);"value"in Wt&&u(Et,"value",null,Wt.value),(Oe=Wt.onVnodeBeforeMount)&&Aa(Oe,lt,he)}Cn&&Du(he,null,lt,"beforeMount");const Fn=(!gt||gt&&!gt.pendingBranch)&&wn&&!wn.persisted;Fn&&wn.beforeEnter(Et),i(Et,Me,Ue),((Oe=Wt&&Wt.onVnodeMounted)||Fn||Cn)&&us(()=>{Oe&&Aa(Oe,lt,he),Fn&&wn.enter(Et),Cn&&Du(he,null,lt,"mounted")},gt)},ee=(he,Me,Ue,lt,gt)=>{if(Ue&&I(he,Ue),lt)for(let Ne=0;Ne<lt.length;Ne++)I(he,lt[Ne]);if(gt){let Ne=gt.subTree;if(Me===Ne){const ht=gt.vnode;ee(he,ht,ht.scopeId,ht.slotScopeIds,gt.parent)}}},de=(he,Me,Ue,lt,gt,Ne,ht,At,Et=0)=>{for(let Oe=Et;Oe<he.length;Oe++){const vt=he[Oe]=At?_c(he[Oe]):Ra(he[Oe]);U(null,vt,Me,Ue,lt,gt,Ne,ht,At)}},ue=(he,Me,Ue,lt,gt,Ne,ht)=>{const At=Me.el=he.el;let{patchFlag:Et,dynamicChildren:Oe,dirs:vt}=Me;Et|=he.patchFlag&16;const Wt=he.props||gi,Jt=Me.props||gi;let wn;Ue&&Iu(Ue,!1),(wn=Jt.onVnodeBeforeUpdate)&&Aa(wn,Ue,Me,he),vt&&Du(Me,he,Ue,"beforeUpdate"),Ue&&Iu(Ue,!0);const Cn=gt&&Me.type!=="foreignObject";if(Oe?Ee(he.dynamicChildren,Oe,At,Ue,lt,Cn,Ne):ht||Pt(he,Me,At,null,Ue,lt,Cn,Ne,!1),Et>0){if(Et&16)ze(At,Me,Wt,Jt,Ue,lt,gt);else if(Et&2&&Wt.class!==Jt.class&&u(At,"class",null,Jt.class,gt),Et&4&&u(At,"style",Wt.style,Jt.style,gt),Et&8){const Fn=Me.dynamicProps;for(let $n=0;$n<Fn.length;$n++){const Zn=Fn[$n],pr=Wt[Zn],sr=Jt[Zn];(sr!==pr||Zn==="value")&&u(At,Zn,pr,sr,gt,he.children,Ue,lt,yt)}}Et&1&&he.children!==Me.children&&w(At,Me.children)}else!ht&&Oe==null&&ze(At,Me,Wt,Jt,Ue,lt,gt);((wn=Jt.onVnodeUpdated)||vt)&&us(()=>{wn&&Aa(wn,Ue,Me,he),vt&&Du(Me,he,Ue,"updated")},lt)},Ee=(he,Me,Ue,lt,gt,Ne,ht)=>{for(let At=0;At<Me.length;At++){const Et=he[At],Oe=Me[At],vt=Et.el&&(Et.type===Vr||!Gu(Et,Oe)||Et.shapeFlag&70)?S(Et.el):Ue;U(Et,Oe,vt,null,lt,gt,Ne,ht,!0)}},ze=(he,Me,Ue,lt,gt,Ne,ht)=>{if(Ue!==lt){if(Ue!==gi)for(const At in Ue)!$_(At)&&!(At in lt)&&u(he,At,Ue[At],null,ht,Me.children,gt,Ne,yt);for(const At in lt){if($_(At))continue;const Et=lt[At],Oe=Ue[At];Et!==Oe&&At!=="value"&&u(he,At,Oe,Et,ht,Me.children,gt,Ne,yt)}"value"in lt&&u(he,"value",Ue.value,lt.value)}},xe=(he,Me,Ue,lt,gt,Ne,ht,At,Et)=>{const Oe=Me.el=he?he.el:o(""),vt=Me.anchor=he?he.anchor:o("");let{patchFlag:Wt,dynamicChildren:Jt,slotScopeIds:wn}=Me;wn&&(At=At?At.concat(wn):wn),he==null?(i(Oe,Ue,lt),i(vt,Ue,lt),de(Me.children,Ue,vt,gt,Ne,ht,At,Et)):Wt>0&&Wt&64&&Jt&&he.dynamicChildren?(Ee(he.dynamicChildren,Jt,Ue,gt,Ne,ht,At),(Me.key!=null||gt&&Me===gt.subTree)&&rT(he,Me,!0)):Pt(he,Me,Ue,vt,gt,Ne,ht,At,Et)},qe=(he,Me,Ue,lt,gt,Ne,ht,At,Et)=>{Me.slotScopeIds=At,he==null?Me.shapeFlag&512?gt.ctx.activate(Me,Ue,lt,ht,Et):Qe(Me,Ue,lt,gt,Ne,ht,Et):Be(he,Me,Et)},Qe=(he,Me,Ue,lt,gt,Ne,ht)=>{const At=he.component=_5(he,lt,gt);if(qy(he)&&(At.ctx.renderer=Ct),y5(At),At.asyncDep){if(gt&&gt.registerDep(At,st),!he.el){const Et=At.subTree=tr(Zo);F(null,Et,Me,Ue)}return}st(At,he,Me,Ue,gt,Ne,ht)},Be=(he,Me,Ue)=>{const lt=Me.component=he.component;if(zB(he,Me,Ue))if(lt.asyncDep&&!lt.asyncResolved){it(lt,Me,Ue);return}else lt.next=Me,MB(lt.update),lt.update();else Me.el=he.el,lt.vnode=Me},st=(he,Me,Ue,lt,gt,Ne,ht)=>{const At=()=>{if(he.isMounted){let{next:vt,bu:Wt,u:Jt,parent:wn,vnode:Cn}=he,Fn=vt,$n;Iu(he,!1),vt?(vt.el=Cn.el,it(he,vt,ht)):vt=Cn,Wt&&Fx(Wt),($n=vt.props&&vt.props.onVnodeBeforeUpdate)&&Aa($n,wn,vt,Cn),Iu(he,!0);const Zn=$x(he),pr=he.subTree;he.subTree=Zn,U(pr,Zn,S(pr.el),wt(pr),he,gt,Ne),vt.el=Zn.el,Fn===null&&RB(he,Zn.el),Jt&&us(Jt,gt),($n=vt.props&&vt.props.onVnodeUpdated)&&us(()=>Aa($n,wn,vt,Cn),gt)}else{let vt;const{el:Wt,props:Jt}=Me,{bm:wn,m:Cn,parent:Fn}=he,$n=mm(Me);if(Iu(he,!1),wn&&Fx(wn),!$n&&(vt=Jt&&Jt.onVnodeBeforeMount)&&Aa(vt,Fn,Me),Iu(he,!0),Wt&&ln){const Zn=()=>{he.subTree=$x(he),ln(Wt,he.subTree,he,gt,null)};$n?Me.type.__asyncLoader().then(()=>!he.isUnmounted&&Zn()):Zn()}else{const Zn=he.subTree=$x(he);U(null,Zn,Ue,lt,he,gt,Ne),Me.el=Zn.el}if(Cn&&us(Cn,gt),!$n&&(vt=Jt&&Jt.onVnodeMounted)){const Zn=Me;us(()=>Aa(vt,Fn,Zn),gt)}(Me.shapeFlag&256||Fn&&mm(Fn.vnode)&&Fn.vnode.shapeFlag&256)&&he.a&&us(he.a,gt),he.isMounted=!0,Me=Ue=lt=null}},Et=he.effect=new Uw(At,()=>Zw(Oe),he.scope),Oe=he.update=()=>Et.run();Oe.id=he.uid,Iu(he,!0),Oe()},it=(he,Me,Ue)=>{Me.component=he;const lt=he.vnode.props;he.vnode=Me,he.next=null,r5(he,Me.props,lt,Ue),s5(he,Me.children,Ue),mf(),XS(),gf()},Pt=(he,Me,Ue,lt,gt,Ne,ht,At,Et=!1)=>{const Oe=he&&he.children,vt=he?he.shapeFlag:0,Wt=Me.children,{patchFlag:Jt,shapeFlag:wn}=Me;if(Jt>0){if(Jt&128){ut(Oe,Wt,Ue,lt,gt,Ne,ht,At,Et);return}else if(Jt&256){Ke(Oe,Wt,Ue,lt,gt,Ne,ht,At,Et);return}}wn&8?(vt&16&&yt(Oe,gt,Ne),Wt!==Oe&&w(Ue,Wt)):vt&16?wn&16?ut(Oe,Wt,Ue,lt,gt,Ne,ht,At,Et):yt(Oe,gt,Ne,!0):(vt&8&&w(Ue,""),wn&16&&de(Wt,Ue,lt,gt,Ne,ht,At,Et))},Ke=(he,Me,Ue,lt,gt,Ne,ht,At,Et)=>{he=he||Nh,Me=Me||Nh;const Oe=he.length,vt=Me.length,Wt=Math.min(Oe,vt);let Jt;for(Jt=0;Jt<Wt;Jt++){const wn=Me[Jt]=Et?_c(Me[Jt]):Ra(Me[Jt]);U(he[Jt],wn,Ue,null,gt,Ne,ht,At,Et)}Oe>vt?yt(he,gt,Ne,!0,!1,Wt):de(Me,Ue,lt,gt,Ne,ht,At,Et,Wt)},ut=(he,Me,Ue,lt,gt,Ne,ht,At,Et)=>{let Oe=0;const vt=Me.length;let Wt=he.length-1,Jt=vt-1;for(;Oe<=Wt&&Oe<=Jt;){const wn=he[Oe],Cn=Me[Oe]=Et?_c(Me[Oe]):Ra(Me[Oe]);if(Gu(wn,Cn))U(wn,Cn,Ue,null,gt,Ne,ht,At,Et);else break;Oe++}for(;Oe<=Wt&&Oe<=Jt;){const wn=he[Wt],Cn=Me[Jt]=Et?_c(Me[Jt]):Ra(Me[Jt]);if(Gu(wn,Cn))U(wn,Cn,Ue,null,gt,Ne,ht,At,Et);else break;Wt--,Jt--}if(Oe>Wt){if(Oe<=Jt){const wn=Jt+1,Cn=wn<vt?Me[wn].el:lt;for(;Oe<=Jt;)U(null,Me[Oe]=Et?_c(Me[Oe]):Ra(Me[Oe]),Ue,Cn,gt,Ne,ht,At,Et),Oe++}}else if(Oe>Jt)for(;Oe<=Wt;)on(he[Oe],gt,Ne,!0),Oe++;else{const wn=Oe,Cn=Oe,Fn=new Map;for(Oe=Cn;Oe<=Jt;Oe++){const rr=Me[Oe]=Et?_c(Me[Oe]):Ra(Me[Oe]);rr.key!=null&&Fn.set(rr.key,Oe)}let $n,Zn=0;const pr=Jt-Cn+1;let sr=!1,li=0;const br=new Array(pr);for(Oe=0;Oe<pr;Oe++)br[Oe]=0;for(Oe=wn;Oe<=Wt;Oe++){const rr=he[Oe];if(Zn>=pr){on(rr,gt,Ne,!0);continue}let Ae;if(rr.key!=null)Ae=Fn.get(rr.key);else for($n=Cn;$n<=Jt;$n++)if(br[$n-Cn]===0&&Gu(rr,Me[$n])){Ae=$n;break}Ae===void 0?on(rr,gt,Ne,!0):(br[Ae-Cn]=Oe+1,Ae>=li?li=Ae:sr=!0,U(rr,Me[Ae],Ue,null,gt,Ne,ht,At,Et),Zn++)}const dr=sr?c5(br):Nh;for($n=dr.length-1,Oe=pr-1;Oe>=0;Oe--){const rr=Cn+Oe,Ae=Me[rr],mt=rr+1<vt?Me[rr+1].el:lt;br[Oe]===0?U(null,Ae,Ue,mt,gt,Ne,ht,At,Et):sr&&($n<0||Oe!==dr[$n]?jt(Ae,Ue,mt,2):$n--)}}},jt=(he,Me,Ue,lt,gt=null)=>{const{el:Ne,type:ht,transition:At,children:Et,shapeFlag:Oe}=he;if(Oe&6){jt(he.component.subTree,Me,Ue,lt);return}if(Oe&128){he.suspense.move(Me,Ue,lt);return}if(Oe&64){ht.move(he,Me,Ue,Ct);return}if(ht===Vr){i(Ne,Me,Ue);for(let Wt=0;Wt<Et.length;Wt++)jt(Et[Wt],Me,Ue,lt);i(he.anchor,Me,Ue);return}if(ht===Vx){J(he,Me,Ue);return}if(lt!==2&&Oe&1&&At)if(lt===0)At.beforeEnter(Ne),i(Ne,Me,Ue),us(()=>At.enter(Ne),gt);else{const{leave:Wt,delayLeave:Jt,afterLeave:wn}=At,Cn=()=>i(Ne,Me,Ue),Fn=()=>{Wt(Ne,()=>{Cn(),wn&&wn()})};Jt?Jt(Ne,Cn,Fn):Fn()}else i(Ne,Me,Ue)},on=(he,Me,Ue,lt=!1,gt=!1)=>{const{type:Ne,props:ht,ref:At,children:Et,dynamicChildren:Oe,shapeFlag:vt,patchFlag:Wt,dirs:Jt}=he;if(At!=null&&Qb(At,null,Ue,he,!0),vt&256){Me.ctx.deactivate(he);return}const wn=vt&1&&Jt,Cn=!mm(he);let Fn;if(Cn&&(Fn=ht&&ht.onVnodeBeforeUnmount)&&Aa(Fn,Me,he),vt&6)Je(he.component,Ue,lt);else{if(vt&128){he.suspense.unmount(Ue,lt);return}wn&&Du(he,null,Me,"beforeUnmount"),vt&64?he.type.remove(he,Me,Ue,gt,Ct,lt):Oe&&(Ne!==Vr||Wt>0&&Wt&64)?yt(Oe,Me,Ue,!1,!0):(Ne===Vr&&Wt&384||!gt&&vt&16)&&yt(Et,Me,Ue),lt&&En(he)}(Cn&&(Fn=ht&&ht.onVnodeUnmounted)||wn)&&us(()=>{Fn&&Aa(Fn,Me,he),wn&&Du(he,null,Me,"unmounted")},Ue)},En=he=>{const{type:Me,el:Ue,anchor:lt,transition:gt}=he;if(Me===Vr){Dn(Ue,lt);return}if(Me===Vx){Z(he);return}const Ne=()=>{s(Ue),gt&&!gt.persisted&&gt.afterLeave&&gt.afterLeave()};if(he.shapeFlag&1&&gt&&!gt.persisted){const{leave:ht,delayLeave:At}=gt,Et=()=>ht(Ue,Ne);At?At(he.el,Ne,Et):Et()}else Ne()},Dn=(he,Me)=>{let Ue;for(;he!==Me;)Ue=A(he),s(he),he=Ue;s(Me)},Je=(he,Me,Ue)=>{const{bum:lt,scope:gt,update:Ne,subTree:ht,um:At}=he;lt&&Fx(lt),gt.stop(),Ne&&(Ne.active=!1,on(ht,he,Me,Ue)),At&&us(At,Me),us(()=>{he.isUnmounted=!0},Me),Me&&Me.pendingBranch&&!Me.isUnmounted&&he.asyncDep&&!he.asyncResolved&&he.suspenseId===Me.pendingId&&(Me.deps--,Me.deps===0&&Me.resolve())},yt=(he,Me,Ue,lt=!1,gt=!1,Ne=0)=>{for(let ht=Ne;ht<he.length;ht++)on(he[ht],Me,Ue,lt,gt)},wt=he=>he.shapeFlag&6?wt(he.component.subTree):he.shapeFlag&128?he.suspense.next():A(he.anchor||he.el),Lt=(he,Me,Ue)=>{he==null?Me._vnode&&on(Me._vnode,null,null,!0):U(Me._vnode||null,he,Me,null,null,null,Ue),XS(),wk(),Me._vnode=he},Ct={p:U,um:on,m:jt,r:En,mt:Qe,mc:de,pc:Pt,pbc:Ee,n:wt,o:e};let Yt,ln;return t&&([Yt,ln]=t(Ct)),{render:Lt,hydrate:Yt,createApp:t5(Lt,Yt)}}function Iu({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function rT(e,t,n=!1){const i=e.children,s=t.children;if(jn(i)&&jn(s))for(let u=0;u<i.length;u++){const d=i[u];let o=s[u];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[u]=_c(s[u]),o.el=d.el),n||rT(d,o)),o.type===Yy&&(o.el=d.el)}}function c5(e){const t=e.slice(),n=[0];let i,s,u,d,o;const m=e.length;for(i=0;i<m;i++){const y=e[i];if(y!==0){if(s=n[n.length-1],e[s]<y){t[i]=s,n.push(i);continue}for(u=0,d=n.length-1;u<d;)o=u+d>>1,e[n[o]]<y?u=o+1:d=o;y<e[n[u]]&&(u>0&&(t[i]=n[u-1]),n[u]=i)}}for(u=n.length,d=n[u-1];u-- >0;)n[u]=d,d=t[d];return n}const u5=e=>e.__isTeleport,vm=e=>e&&(e.disabled||e.disabled===""),cE=e=>typeof SVGElement<"u"&&e instanceof SVGElement,e1=(e,t)=>{const n=e&&e.to;return qi(n)?t?t(n):null:n},d5={__isTeleport:!0,process(e,t,n,i,s,u,d,o,m,y){const{mc:w,pc:S,pbc:A,o:{insert:I,querySelector:z,createText:U,createComment:j}}=y,F=vm(t.props);let{shapeFlag:H,children:J,dynamicChildren:Z}=t;if(e==null){const Y=t.el=U(""),ce=t.anchor=U("");I(Y,n,i),I(ce,n,i);const ee=t.target=e1(t.props,z),de=t.targetAnchor=U("");ee&&(I(de,ee),d=d||cE(ee));const ue=(Ee,ze)=>{H&16&&w(J,Ee,ze,s,u,d,o,m)};F?ue(n,ce):ee&&ue(ee,de)}else{t.el=e.el;const Y=t.anchor=e.anchor,ce=t.target=e.target,ee=t.targetAnchor=e.targetAnchor,de=vm(e.props),ue=de?n:ce,Ee=de?Y:ee;if(d=d||cE(ce),Z?(A(e.dynamicChildren,Z,ue,s,u,d,o),rT(e,t,!0)):m||S(e,t,ue,Ee,s,u,d,o,!1),F)de||l_(t,n,Y,y,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ze=t.target=e1(t.props,z);ze&&l_(t,ze,null,y,0)}else de&&l_(t,ce,ee,y,1)}Vk(t)},remove(e,t,n,i,{um:s,o:{remove:u}},d){const{shapeFlag:o,children:m,anchor:y,targetAnchor:w,target:S,props:A}=e;if(S&&u(w),(d||!vm(A))&&(u(y),o&16))for(let I=0;I<m.length;I++){const z=m[I];s(z,t,n,!0,!!z.dynamicChildren)}},move:l_,hydrate:h5};function l_(e,t,n,{o:{insert:i},m:s},u=2){u===0&&i(e.targetAnchor,t,n);const{el:d,anchor:o,shapeFlag:m,children:y,props:w}=e,S=u===2;if(S&&i(d,t,n),(!S||vm(w))&&m&16)for(let A=0;A<y.length;A++)s(y[A],t,n,2);S&&i(o,t,n)}function h5(e,t,n,i,s,u,{o:{nextSibling:d,parentNode:o,querySelector:m}},y){const w=t.target=e1(t.props,m);if(w){const S=w._lpa||w.firstChild;if(t.shapeFlag&16)if(vm(t.props))t.anchor=y(d(e),t,o(e),n,i,s,u),t.targetAnchor=S;else{t.anchor=d(e);let A=S;for(;A;)if(A=d(A),A&&A.nodeType===8&&A.data==="teleport anchor"){t.targetAnchor=A,w._lpa=t.targetAnchor&&d(t.targetAnchor);break}y(S,t,w,n,i,s,u)}Vk(t)}return t.anchor&&d(t.anchor)}const iT=d5;function Vk(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Vr=Symbol.for("v-fgt"),Yy=Symbol.for("v-txt"),Zo=Symbol.for("v-cmt"),Vx=Symbol.for("v-stc"),_m=[];let ia=null;function si(e=!1){_m.push(ia=e?null:[])}function f5(){_m.pop(),ia=_m[_m.length-1]||null}let Lm=1;function uE(e){Lm+=e}function jk(e){return e.dynamicChildren=Lm>0?ia||Nh:null,f5(),Lm>0&&ia&&ia.push(e),e}function Fs(e,t,n,i,s,u){return jk(Tn(e,t,n,i,s,u,!0))}function qo(e,t,n,i,s){return jk(tr(e,t,n,i,s,!0))}function Bm(e){return e?e.__v_isVNode===!0:!1}function Gu(e,t){return e.type===t.type&&e.key===t.key}const Xy="__vInternal",Wk=({key:e})=>e??null,N_=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?qi(e)||vo(e)||or(e)?{i:So,r:e,k:t,f:!!n}:e:null);function Tn(e,t=null,n=null,i=0,s=null,u=e===Vr?0:1,d=!1,o=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wk(t),ref:t&&N_(t),scopeId:Sk,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:So};return o?(oT(m,n),u&128&&e.normalize(m)):n&&(m.shapeFlag|=qi(n)?8:16),Lm>0&&!d&&ia&&(m.patchFlag>0||u&6)&&m.patchFlag!==32&&ia.push(m),m}const tr=p5;function p5(e,t=null,n=null,i=0,s=null,u=!1){if((!e||e===GB)&&(e=Zo),Bm(e)){const o=ca(e,t,!0);return n&&oT(o,n),Lm>0&&!u&&ia&&(o.shapeFlag&6?ia[ia.indexOf(e)]=o:ia.push(o)),o.patchFlag|=-2,o}if(C5(e)&&(e=e.__vccOpts),t){t=m5(t);let{class:o,style:m}=t;o&&!qi(o)&&(t.class=$w(o)),ui(m)&&(pk(m)&&!jn(m)&&(m=Gi({},m)),t.style=Fw(m))}const d=qi(e)?1:OB(e)?128:u5(e)?64:ui(e)?4:or(e)?2:0;return Tn(e,t,n,i,s,d,u,!0)}function m5(e){return e?pk(e)||Xy in e?Gi({},e):e:null}function ca(e,t,n=!1){const{props:i,ref:s,patchFlag:u,children:d}=e,o=t?Yh(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Wk(o),ref:t&&t.ref?n&&s?jn(s)?s.concat(N_(t)):[s,N_(t)]:N_(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Vr?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ca(e.ssContent),ssFallback:e.ssFallback&&ca(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ui(e=" ",t=0){return tr(Yy,null,e,t)}function Fa(e="",t=!1){return t?(si(),qo(Zo,null,e)):tr(Zo,null,e)}function Ra(e){return e==null||typeof e=="boolean"?tr(Zo):jn(e)?tr(Vr,null,e.slice()):typeof e=="object"?_c(e):tr(Yy,null,String(e))}function _c(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ca(e)}function oT(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(jn(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),oT(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Xy in t)?t._ctx=So:s===3&&So&&(So.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else or(t)?(t={default:t,_ctx:So},n=32):(t=String(t),i&64?(n=16,t=[Ui(t)]):n=8);e.children=t,e.shapeFlag|=n}function Yh(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=$w([t.class,i.class]));else if(s==="style")t.style=Fw([t.style,i.style]);else if(Ny(s)){const u=t[s],d=i[s];d&&u!==d&&!(jn(u)&&u.includes(d))&&(t[s]=u?[].concat(u,d):d)}else s!==""&&(t[s]=i[s])}return t}function Aa(e,t,n,i=null){Bs(e,t,7,[n,i])}const g5=Lk();let v5=0;function _5(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||g5,u={uid:v5++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new N3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fk(i,s),emitsOptions:Ck(i,s),emit:null,emitted:null,propsDefaults:gi,inheritAttrs:i.inheritAttrs,ctx:gi,data:gi,props:gi,attrs:gi,slots:gi,refs:gi,setupState:gi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=kB.bind(null,u),e.ce&&e.ce(u),u}let go=null;const md=()=>go||So;let sT,Ph,dE="__VUE_INSTANCE_SETTERS__";(Ph=Wb()[dE])||(Ph=Wb()[dE]=[]),Ph.push(e=>go=e),sT=e=>{Ph.length>1?Ph.forEach(t=>t(e)):Ph[0](e)};const Xh=e=>{sT(e),e.scope.on()},td=()=>{go&&go.scope.off(),sT(null)};function Hk(e){return e.vnode.shapeFlag&4}let Fm=!1;function y5(e,t=!1){Fm=t;const{props:n,children:i}=e.vnode,s=Hk(e);n5(e,n,s,t),o5(e,i);const u=s?x5(e,t):void 0;return Fm=!1,u}function x5(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=mk(new Proxy(e.ctx,ZB));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?w5(e):null;Xh(e),mf();const u=Mc(i,e,0,[e.props,s]);if(gf(),td(),QA(u)){if(u.then(td,td),t)return u.then(d=>{hE(e,d,t)}).catch(d=>{Hy(d,e,0)});e.asyncDep=u}else hE(e,u,t)}else Gk(e,t)}function hE(e,t,n){or(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ui(t)&&(e.setupState=yk(t)),Gk(e,n)}let fE;function Gk(e,t,n){const i=e.type;if(!e.render){if(!t&&fE&&!i.render){const s=i.template||tT(e).template;if(s){const{isCustomElement:u,compilerOptions:d}=e.appContext.config,{delimiters:o,compilerOptions:m}=i,y=Gi(Gi({isCustomElement:u,delimiters:o},d),m);i.render=fE(s,y)}}e.render=i.render||aa}Xh(e),mf(),YB(e),gf(),td()}function b5(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return fs(e,"get","$attrs"),t[n]}}))}function w5(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return b5(e)},slots:e.slots,emit:e.emit,expose:t}}function Ky(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(yk(mk(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in gm)return gm[n](e)},has(t,n){return n in t||n in gm}}))}function T5(e,t=!0){return or(e)?e.displayName||e.name:e.name||t&&e.__name}function C5(e){return or(e)&&"__vccOpts"in e}const Le=(e,t)=>CB(e,t,Fm);function V(e,t,n){const i=arguments.length;return i===2?ui(t)&&!jn(t)?Bm(t)?tr(e,null,[t]):tr(e,t):tr(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Bm(n)&&(n=[n]),tr(e,t,n))}const S5=Symbol.for("v-scx"),E5=()=>fr(S5),M5="3.3.2",P5="http://www.w3.org/2000/svg",qu=typeof document<"u"?document:null,pE=qu&&qu.createElement("template"),A5={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t?qu.createElementNS(P5,e):qu.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>qu.createTextNode(e),createComment:e=>qu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,u){const d=n?n.previousSibling:t.lastChild;if(s&&(s===u||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===u||!(s=s.nextSibling)););else{pE.innerHTML=i?`<svg>${e}</svg>`:e;const o=pE.content;if(i){const m=o.firstChild;for(;m.firstChild;)o.appendChild(m.firstChild);o.removeChild(m)}t.insertBefore(o,n)}return[d?d.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function k5(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function D5(e,t,n){const i=e.style,s=qi(n);if(n&&!s){if(t&&!qi(t))for(const u in t)n[u]==null&&t1(i,u,"");for(const u in n)t1(i,u,n[u])}else{const u=i.display;s?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=u)}}const mE=/\s*!important$/;function t1(e,t,n){if(jn(n))n.forEach(i=>t1(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=I5(e,t);mE.test(n)?e.setProperty(pf(i),n.replace(mE,""),"important"):e[i]=n}}const gE=["Webkit","Moz","ms"],jx={};function I5(e,t){const n=jx[t];if(n)return n;let i=Va(t);if(i!=="filter"&&i in e)return jx[t]=i;i=jy(i);for(let s=0;s<gE.length;s++){const u=gE[s]+i;if(u in e)return jx[t]=u}return t}const vE="http://www.w3.org/1999/xlink";function z5(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(vE,t.slice(6,t.length)):e.setAttributeNS(vE,t,n);else{const u=$3(t);n==null||u&&!nk(n)?e.removeAttribute(t):e.setAttribute(t,u?"":n)}}function R5(e,t,n,i,s,u,d){if(t==="innerHTML"||t==="textContent"){i&&d(i,s,u),e[t]=n??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=n;const y=o==="OPTION"?e.getAttribute("value"):e.value,w=n??"";y!==w&&(e.value=w),n==null&&e.removeAttribute(t);return}let m=!1;if(n===""||n==null){const y=typeof e[t];y==="boolean"?n=nk(n):n==null&&y==="string"?(n="",m=!0):y==="number"&&(n=0,m=!0)}try{e[t]=n}catch{}m&&e.removeAttribute(t)}function O5(e,t,n,i){e.addEventListener(t,n,i)}function L5(e,t,n,i){e.removeEventListener(t,n,i)}function B5(e,t,n,i,s=null){const u=e._vei||(e._vei={}),d=u[t];if(i&&d)d.value=i;else{const[o,m]=F5(t);if(i){const y=u[t]=U5(i,s);O5(e,o,y,m)}else d&&(L5(e,o,d,m),u[t]=void 0)}}const _E=/(?:Once|Passive|Capture)$/;function F5(e){let t;if(_E.test(e)){t={};let i;for(;i=e.match(_E);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):pf(e.slice(2)),t]}let Wx=0;const $5=Promise.resolve(),N5=()=>Wx||($5.then(()=>Wx=0),Wx=Date.now());function U5(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Bs(V5(i,n.value),t,5,[i])};return n.value=e,n.attached=N5(),n}function V5(e,t){if(jn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const yE=/^on[a-z]/,j5=(e,t,n,i,s=!1,u,d,o,m)=>{t==="class"?k5(e,i,s):t==="style"?D5(e,n,i):Ny(t)?Rw(t)||B5(e,t,n,i,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):W5(e,t,i,s))?R5(e,t,i,u,d,o,m):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),z5(e,t,i,s))};function W5(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&yE.test(t)&&or(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||yE.test(t)&&qi(n)?!1:t in e}const uc="transition",Wp="animation",Yo=(e,{slots:t})=>V($B,Zk(e),t);Yo.displayName="Transition";const qk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},H5=Yo.props=Gi({},Pk,qk),zu=(e,t=[])=>{jn(e)?e.forEach(n=>n(...t)):e&&e(...t)},xE=e=>e?jn(e)?e.some(t=>t.length>1):e.length>1:!1;function Zk(e){const t={};for(const xe in e)xe in qk||(t[xe]=e[xe]);if(e.css===!1)return t;const{name:n="v",type:i,duration:s,enterFromClass:u=`${n}-enter-from`,enterActiveClass:d=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:m=u,appearActiveClass:y=d,appearToClass:w=o,leaveFromClass:S=`${n}-leave-from`,leaveActiveClass:A=`${n}-leave-active`,leaveToClass:I=`${n}-leave-to`}=e,z=G5(s),U=z&&z[0],j=z&&z[1],{onBeforeEnter:F,onEnter:H,onEnterCancelled:J,onLeave:Z,onLeaveCancelled:Y,onBeforeAppear:ce=F,onAppear:ee=H,onAppearCancelled:de=J}=t,ue=(xe,qe,Qe)=>{vc(xe,qe?w:o),vc(xe,qe?y:d),Qe&&Qe()},Ee=(xe,qe)=>{xe._isLeaving=!1,vc(xe,S),vc(xe,I),vc(xe,A),qe&&qe()},ze=xe=>(qe,Qe)=>{const Be=xe?ee:H,st=()=>ue(qe,xe,Qe);zu(Be,[qe,st]),bE(()=>{vc(qe,xe?m:u),fl(qe,xe?w:o),xE(Be)||wE(qe,i,U,st)})};return Gi(t,{onBeforeEnter(xe){zu(F,[xe]),fl(xe,u),fl(xe,d)},onBeforeAppear(xe){zu(ce,[xe]),fl(xe,m),fl(xe,y)},onEnter:ze(!1),onAppear:ze(!0),onLeave(xe,qe){xe._isLeaving=!0;const Qe=()=>Ee(xe,qe);fl(xe,S),Xk(),fl(xe,A),bE(()=>{xe._isLeaving&&(vc(xe,S),fl(xe,I),xE(Z)||wE(xe,i,j,Qe))}),zu(Z,[xe,Qe])},onEnterCancelled(xe){ue(xe,!1),zu(J,[xe])},onAppearCancelled(xe){ue(xe,!0),zu(de,[xe])},onLeaveCancelled(xe){Ee(xe),zu(Y,[xe])}})}function G5(e){if(e==null)return null;if(ui(e))return[Hx(e.enter),Hx(e.leave)];{const t=Hx(e);return[t,t]}}function Hx(e){return z3(e)}function fl(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function vc(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function bE(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let q5=0;function wE(e,t,n,i){const s=e._endId=++q5,u=()=>{s===e._endId&&i()};if(n)return setTimeout(u,n);const{type:d,timeout:o,propCount:m}=Yk(e,t);if(!d)return i();const y=d+"end";let w=0;const S=()=>{e.removeEventListener(y,A),u()},A=I=>{I.target===e&&++w>=m&&S()};setTimeout(()=>{w<m&&S()},o+1),e.addEventListener(y,A)}function Yk(e,t){const n=window.getComputedStyle(e),i=z=>(n[z]||"").split(", "),s=i(`${uc}Delay`),u=i(`${uc}Duration`),d=TE(s,u),o=i(`${Wp}Delay`),m=i(`${Wp}Duration`),y=TE(o,m);let w=null,S=0,A=0;t===uc?d>0&&(w=uc,S=d,A=u.length):t===Wp?y>0&&(w=Wp,S=y,A=m.length):(S=Math.max(d,y),w=S>0?d>y?uc:Wp:null,A=w?w===uc?u.length:m.length:0);const I=w===uc&&/\b(transform|all)(,|$)/.test(i(`${uc}Property`).toString());return{type:w,timeout:S,propCount:A,hasTransform:I}}function TE(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>CE(n)+CE(e[i])))}function CE(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Xk(){return document.body.offsetHeight}const Kk=new WeakMap,Jk=new WeakMap,Qk={name:"TransitionGroup",props:Gi({},H5,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=md(),i=Mk();let s,u;return Dk(()=>{if(!s.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!J5(s[0].el,n.vnode.el,d))return;s.forEach(Y5),s.forEach(X5);const o=s.filter(K5);Xk(),o.forEach(m=>{const y=m.el,w=y.style;fl(y,d),w.transform=w.webkitTransform=w.transitionDuration="";const S=y._moveCb=A=>{A&&A.target!==y||(!A||/transform$/.test(A.propertyName))&&(y.removeEventListener("transitionend",S),y._moveCb=null,vc(y,d))};y.addEventListener("transitionend",S)})}),()=>{const d=Dr(e),o=Zk(d);let m=d.tag||Vr;s=u,u=t.default?Xw(t.default()):[];for(let y=0;y<u.length;y++){const w=u[y];w.key!=null&&Om(w,Rm(w,o,i,n))}if(s)for(let y=0;y<s.length;y++){const w=s[y];Om(w,Rm(w,o,i,n)),Kk.set(w,w.el.getBoundingClientRect())}return tr(m,null,u)}}},Z5=e=>delete e.mode;Qk.props;const eD=Qk;function Y5(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function X5(e){Jk.set(e,e.el.getBoundingClientRect())}function K5(e){const t=Kk.get(e),n=Jk.get(e),i=t.left-n.left,s=t.top-n.top;if(i||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${i}px,${s}px)`,u.transitionDuration="0s",e}}function J5(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach(d=>{d.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),n.split(/\s+/).forEach(d=>d&&i.classList.add(d)),i.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(i);const{hasTransform:u}=Yk(i);return s.removeChild(i),u}const vf={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Hp(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Hp(e,!0),i.enter(e)):i.leave(e,()=>{Hp(e,!1)}):Hp(e,t))},beforeUnmount(e,{value:t}){Hp(e,t)}};function Hp(e,t){e.style.display=t?e._vod:"none"}const Q5=Gi({patchProp:j5},A5);let SE;function eF(){return SE||(SE=a5(Q5))}const tF=(...e)=>{const t=eF().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=nF(i);if(!s)return;const u=t._component;!or(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.innerHTML="";const d=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),d},t};function nF(e){return qi(e)?document.querySelector(e):e}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Fh=typeof window<"u";function rF(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ei=Object.assign;function Gx(e,t){const n={};for(const i in t){const s=t[i];n[i]=ua(s)?s.map(e):e(s)}return n}const ym=()=>{},ua=Array.isArray,iF=/\/$/,oF=e=>e.replace(iF,"");function qx(e,t,n="/"){let i,s={},u="",d="";const o=t.indexOf("#");let m=t.indexOf("?");return o<m&&o>=0&&(m=-1),m>-1&&(i=t.slice(0,m),u=t.slice(m+1,o>-1?o:t.length),s=e(u)),o>-1&&(i=i||t.slice(0,o),d=t.slice(o,t.length)),i=cF(i??t,n),{fullPath:i+(u&&"?")+u+d,path:i,query:s,hash:d}}function sF(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function EE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function aF(e,t,n){const i=t.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&Kh(t.matched[i],n.matched[s])&&tD(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Kh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function tD(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!lF(e[n],t[n]))return!1;return!0}function lF(e,t){return ua(e)?ME(e,t):ua(t)?ME(t,e):e===t}function ME(e,t){return ua(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function cF(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let s=n.length-1,u,d;for(u=0;u<i.length;u++)if(d=i[u],d!==".")if(d==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(u-(u===i.length?1:0)).join("/")}var $m;(function(e){e.pop="pop",e.push="push"})($m||($m={}));var xm;(function(e){e.back="back",e.forward="forward",e.unknown=""})(xm||(xm={}));function uF(e){if(!e)if(Fh){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),oF(e)}const dF=/^[^#]+#/;function hF(e,t){return e.replace(dF,"#")+t}function fF(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Jy=()=>({left:window.pageXOffset,top:window.pageYOffset});function pF(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=fF(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function PE(e,t){return(history.state?history.state.position-t:-1)+e}const n1=new Map;function mF(e,t){n1.set(e,t)}function gF(e){const t=n1.get(e);return n1.delete(e),t}let vF=()=>location.protocol+"//"+location.host;function nD(e,t){const{pathname:n,search:i,hash:s}=t,u=e.indexOf("#");if(u>-1){let o=s.includes(e.slice(u))?e.slice(u).length:1,m=s.slice(o);return m[0]!=="/"&&(m="/"+m),EE(m,"")}return EE(n,e)+i+s}function _F(e,t,n,i){let s=[],u=[],d=null;const o=({state:A})=>{const I=nD(e,location),z=n.value,U=t.value;let j=0;if(A){if(n.value=I,t.value=A,d&&d===z){d=null;return}j=U?A.position-U.position:0}else i(I);s.forEach(F=>{F(n.value,z,{delta:j,type:$m.pop,direction:j?j>0?xm.forward:xm.back:xm.unknown})})};function m(){d=n.value}function y(A){s.push(A);const I=()=>{const z=s.indexOf(A);z>-1&&s.splice(z,1)};return u.push(I),I}function w(){const{history:A}=window;A.state&&A.replaceState(ei({},A.state,{scroll:Jy()}),"")}function S(){for(const A of u)A();u=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",w),{pauseListeners:m,listen:y,destroy:S}}function AE(e,t,n,i=!1,s=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:s?Jy():null}}function yF(e){const{history:t,location:n}=window,i={value:nD(e,n)},s={value:t.state};s.value||u(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(m,y,w){const S=e.indexOf("#"),A=S>-1?(n.host&&document.querySelector("base")?e:e.slice(S))+m:vF()+e+m;try{t[w?"replaceState":"pushState"](y,"",A),s.value=y}catch(I){console.error(I),n[w?"replace":"assign"](A)}}function d(m,y){const w=ei({},t.state,AE(s.value.back,m,s.value.forward,!0),y,{position:s.value.position});u(m,w,!0),i.value=m}function o(m,y){const w=ei({},s.value,t.state,{forward:m,scroll:Jy()});u(w.current,w,!0);const S=ei({},AE(i.value,m,null),{position:w.position+1},y);u(m,S,!1),i.value=m}return{location:i,state:s,push:o,replace:d}}function xF(e){e=uF(e);const t=yF(e),n=_F(e,t.state,t.location,t.replace);function i(u,d=!0){d||n.pauseListeners(),history.go(u)}const s=ei({location:"",base:e,go:i,createHref:hF.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function bF(e){return typeof e=="string"||e&&typeof e=="object"}function rD(e){return typeof e=="string"||typeof e=="symbol"}const dc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},iD=Symbol("");var kE;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(kE||(kE={}));function Jh(e,t){return ei(new Error,{type:e,[iD]:!0},t)}function ul(e,t){return e instanceof Error&&iD in e&&(t==null||!!(e.type&t))}const DE="[^/]+?",wF={sensitive:!1,strict:!1,start:!0,end:!0},TF=/[.+*?^${}()[\]/\\]/g;function CF(e,t){const n=ei({},wF,t),i=[];let s=n.start?"^":"";const u=[];for(const y of e){const w=y.length?[]:[90];n.strict&&!y.length&&(s+="/");for(let S=0;S<y.length;S++){const A=y[S];let I=40+(n.sensitive?.25:0);if(A.type===0)S||(s+="/"),s+=A.value.replace(TF,"\\$&"),I+=40;else if(A.type===1){const{value:z,repeatable:U,optional:j,regexp:F}=A;u.push({name:z,repeatable:U,optional:j});const H=F||DE;if(H!==DE){I+=10;try{new RegExp(`(${H})`)}catch(Z){throw new Error(`Invalid custom RegExp for param "${z}" (${H}): `+Z.message)}}let J=U?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;S||(J=j&&y.length<2?`(?:/${J})`:"/"+J),j&&(J+="?"),s+=J,I+=20,j&&(I+=-8),U&&(I+=-20),H===".*"&&(I+=-50)}w.push(I)}i.push(w)}if(n.strict&&n.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const d=new RegExp(s,n.sensitive?"":"i");function o(y){const w=y.match(d),S={};if(!w)return null;for(let A=1;A<w.length;A++){const I=w[A]||"",z=u[A-1];S[z.name]=I&&z.repeatable?I.split("/"):I}return S}function m(y){let w="",S=!1;for(const A of e){(!S||!w.endsWith("/"))&&(w+="/"),S=!1;for(const I of A)if(I.type===0)w+=I.value;else if(I.type===1){const{value:z,repeatable:U,optional:j}=I,F=z in y?y[z]:"";if(ua(F)&&!U)throw new Error(`Provided param "${z}" is an array but it is not repeatable (* or + modifiers)`);const H=ua(F)?F.join("/"):F;if(!H)if(j)A.length<2&&(w.endsWith("/")?w=w.slice(0,-1):S=!0);else throw new Error(`Missing required param "${z}"`);w+=H}}return w||"/"}return{re:d,score:i,keys:u,parse:o,stringify:m}}function SF(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function EF(e,t){let n=0;const i=e.score,s=t.score;for(;n<i.length&&n<s.length;){const u=SF(i[n],s[n]);if(u)return u;n++}if(Math.abs(s.length-i.length)===1){if(IE(i))return 1;if(IE(s))return-1}return s.length-i.length}function IE(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const MF={type:0,value:""},PF=/[a-zA-Z0-9_]/;function AF(e){if(!e)return[[]];if(e==="/")return[[MF]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(I){throw new Error(`ERR (${n})/"${y}": ${I}`)}let n=0,i=n;const s=[];let u;function d(){u&&s.push(u),u=[]}let o=0,m,y="",w="";function S(){y&&(n===0?u.push({type:0,value:y}):n===1||n===2||n===3?(u.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:y,regexp:w,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),y="")}function A(){y+=m}for(;o<e.length;){if(m=e[o++],m==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:m==="/"?(y&&S(),d()):m===":"?(S(),n=1):A();break;case 4:A(),n=i;break;case 1:m==="("?n=2:PF.test(m)?A():(S(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&o--);break;case 2:m===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+m:n=3:w+=m;break;case 3:S(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&o--,w="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${y}"`),S(),d(),s}function kF(e,t,n){const i=CF(AF(e.path),n),s=ei(i,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function DF(e,t){const n=[],i=new Map;t=OE({strict:!1,end:!0,sensitive:!1},t);function s(w){return i.get(w)}function u(w,S,A){const I=!A,z=IF(w);z.aliasOf=A&&A.record;const U=OE(t,w),j=[z];if("alias"in w){const J=typeof w.alias=="string"?[w.alias]:w.alias;for(const Z of J)j.push(ei({},z,{components:A?A.record.components:z.components,path:Z,aliasOf:A?A.record:z}))}let F,H;for(const J of j){const{path:Z}=J;if(S&&Z[0]!=="/"){const Y=S.record.path,ce=Y[Y.length-1]==="/"?"":"/";J.path=S.record.path+(Z&&ce+Z)}if(F=kF(J,S,U),A?A.alias.push(F):(H=H||F,H!==F&&H.alias.push(F),I&&w.name&&!RE(F)&&d(w.name)),z.children){const Y=z.children;for(let ce=0;ce<Y.length;ce++)u(Y[ce],F,A&&A.children[ce])}A=A||F,(F.record.components&&Object.keys(F.record.components).length||F.record.name||F.record.redirect)&&m(F)}return H?()=>{d(H)}:ym}function d(w){if(rD(w)){const S=i.get(w);S&&(i.delete(w),n.splice(n.indexOf(S),1),S.children.forEach(d),S.alias.forEach(d))}else{const S=n.indexOf(w);S>-1&&(n.splice(S,1),w.record.name&&i.delete(w.record.name),w.children.forEach(d),w.alias.forEach(d))}}function o(){return n}function m(w){let S=0;for(;S<n.length&&EF(w,n[S])>=0&&(w.record.path!==n[S].record.path||!oD(w,n[S]));)S++;n.splice(S,0,w),w.record.name&&!RE(w)&&i.set(w.record.name,w)}function y(w,S){let A,I={},z,U;if("name"in w&&w.name){if(A=i.get(w.name),!A)throw Jh(1,{location:w});U=A.record.name,I=ei(zE(S.params,A.keys.filter(H=>!H.optional).map(H=>H.name)),w.params&&zE(w.params,A.keys.map(H=>H.name))),z=A.stringify(I)}else if("path"in w)z=w.path,A=n.find(H=>H.re.test(z)),A&&(I=A.parse(z),U=A.record.name);else{if(A=S.name?i.get(S.name):n.find(H=>H.re.test(S.path)),!A)throw Jh(1,{location:w,currentLocation:S});U=A.record.name,I=ei({},S.params,w.params),z=A.stringify(I)}const j=[];let F=A;for(;F;)j.unshift(F.record),F=F.parent;return{name:U,path:z,params:I,matched:j,meta:RF(j)}}return e.forEach(w=>u(w)),{addRoute:u,resolve:y,removeRoute:d,getRoutes:o,getRecordMatcher:s}}function zE(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function IF(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:zF(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function zF(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="boolean"?n:n[i];return t}function RE(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function RF(e){return e.reduce((t,n)=>ei(t,n.meta),{})}function OE(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function oD(e,t){return t.children.some(n=>n===e||oD(e,n))}const sD=/#/g,OF=/&/g,LF=/\//g,BF=/=/g,FF=/\?/g,aD=/\+/g,$F=/%5B/g,NF=/%5D/g,lD=/%5E/g,UF=/%60/g,cD=/%7B/g,VF=/%7C/g,uD=/%7D/g,jF=/%20/g;function aT(e){return encodeURI(""+e).replace(VF,"|").replace($F,"[").replace(NF,"]")}function WF(e){return aT(e).replace(cD,"{").replace(uD,"}").replace(lD,"^")}function r1(e){return aT(e).replace(aD,"%2B").replace(jF,"+").replace(sD,"%23").replace(OF,"%26").replace(UF,"`").replace(cD,"{").replace(uD,"}").replace(lD,"^")}function HF(e){return r1(e).replace(BF,"%3D")}function GF(e){return aT(e).replace(sD,"%23").replace(FF,"%3F")}function qF(e){return e==null?"":GF(e).replace(LF,"%2F")}function uy(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function ZF(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<i.length;++s){const u=i[s].replace(aD," "),d=u.indexOf("="),o=uy(d<0?u:u.slice(0,d)),m=d<0?null:uy(u.slice(d+1));if(o in t){let y=t[o];ua(y)||(y=t[o]=[y]),y.push(m)}else t[o]=m}return t}function LE(e){let t="";for(let n in e){const i=e[n];if(n=HF(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(ua(i)?i.map(u=>u&&r1(u)):[i&&r1(i)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+n,u!=null&&(t+="="+u))})}return t}function YF(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=ua(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const XF=Symbol(""),BE=Symbol(""),lT=Symbol(""),dD=Symbol(""),i1=Symbol("");function Gp(){let e=[];function t(i){return e.push(i),()=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function yc(e,t,n,i,s){const u=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((d,o)=>{const m=S=>{S===!1?o(Jh(4,{from:n,to:t})):S instanceof Error?o(S):bF(S)?o(Jh(2,{from:t,to:S})):(u&&i.enterCallbacks[s]===u&&typeof S=="function"&&u.push(S),d())},y=e.call(i&&i.instances[s],t,n,m);let w=Promise.resolve(y);e.length<3&&(w=w.then(m)),w.catch(S=>o(S))})}function Zx(e,t,n,i){const s=[];for(const u of e)for(const d in u.components){let o=u.components[d];if(!(t!=="beforeRouteEnter"&&!u.instances[d]))if(KF(o)){const y=(o.__vccOpts||o)[t];y&&s.push(yc(y,n,i,u,d))}else{let m=o();s.push(()=>m.then(y=>{if(!y)return Promise.reject(new Error(`Couldn't resolve component "${d}" at "${u.path}"`));const w=rF(y)?y.default:y;u.components[d]=w;const A=(w.__vccOpts||w)[t];return A&&yc(A,n,i,u,d)()}))}}return s}function KF(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function FE(e){const t=fr(lT),n=fr(dD),i=Le(()=>t.resolve(cr(e.to))),s=Le(()=>{const{matched:m}=i.value,{length:y}=m,w=m[y-1],S=n.matched;if(!w||!S.length)return-1;const A=S.findIndex(Kh.bind(null,w));if(A>-1)return A;const I=$E(m[y-2]);return y>1&&$E(w)===I&&S[S.length-1].path!==I?S.findIndex(Kh.bind(null,m[y-2])):A}),u=Le(()=>s.value>-1&&t4(n.params,i.value.params)),d=Le(()=>s.value>-1&&s.value===n.matched.length-1&&tD(n.params,i.value.params));function o(m={}){return e4(m)?t[cr(e.replace)?"replace":"push"](cr(e.to)).catch(ym):Promise.resolve()}return{route:i,href:Le(()=>i.value.href),isActive:u,isExactActive:d,navigate:o}}const JF=pn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:FE,setup(e,{slots:t}){const n=pd(FE(e)),{options:i}=fr(lT),s=Le(()=>({[NE(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[NE(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const u=t.default&&t.default(n);return e.custom?u:V("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},u)}}}),QF=JF;function e4(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function t4(e,t){for(const n in t){const i=t[n],s=e[n];if(typeof i=="string"){if(i!==s)return!1}else if(!ua(s)||s.length!==i.length||i.some((u,d)=>u!==s[d]))return!1}return!0}function $E(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const NE=(e,t,n)=>e??t??n,n4=pn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=fr(i1),s=Le(()=>e.route||i.value),u=fr(BE,0),d=Le(()=>{let y=cr(u);const{matched:w}=s.value;let S;for(;(S=w[y])&&!S.components;)y++;return y}),o=Le(()=>s.value.matched[d.value]);Hi(BE,Le(()=>d.value+1)),Hi(XF,o),Hi(i1,s);const m=He();return xr(()=>[m.value,o.value,e.name],([y,w,S],[A,I,z])=>{w&&(w.instances[S]=y,I&&I!==w&&y&&y===A&&(w.leaveGuards.size||(w.leaveGuards=I.leaveGuards),w.updateGuards.size||(w.updateGuards=I.updateGuards))),y&&w&&(!I||!Kh(w,I)||!A)&&(w.enterCallbacks[S]||[]).forEach(U=>U(y))},{flush:"post"}),()=>{const y=s.value,w=e.name,S=o.value,A=S&&S.components[w];if(!A)return UE(n.default,{Component:A,route:y});const I=S.props[w],z=I?I===!0?y.params:typeof I=="function"?I(y):I:null,j=V(A,ei({},z,t,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(S.instances[w]=null)},ref:m}));return UE(n.default,{Component:j,route:y})||j}}});function UE(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const hD=n4;function r4(e){const t=DF(e.routes,e),n=e.parseQuery||ZF,i=e.stringifyQuery||LE,s=e.history,u=Gp(),d=Gp(),o=Gp(),m=vB(dc);let y=dc;Fh&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=Gx.bind(null,Je=>""+Je),S=Gx.bind(null,qF),A=Gx.bind(null,uy);function I(Je,yt){let wt,Lt;return rD(Je)?(wt=t.getRecordMatcher(Je),Lt=yt):Lt=Je,t.addRoute(Lt,wt)}function z(Je){const yt=t.getRecordMatcher(Je);yt&&t.removeRoute(yt)}function U(){return t.getRoutes().map(Je=>Je.record)}function j(Je){return!!t.getRecordMatcher(Je)}function F(Je,yt){if(yt=ei({},yt||m.value),typeof Je=="string"){const he=qx(n,Je,yt.path),Me=t.resolve({path:he.path},yt),Ue=s.createHref(he.fullPath);return ei(he,Me,{params:A(Me.params),hash:uy(he.hash),redirectedFrom:void 0,href:Ue})}let wt;if("path"in Je)wt=ei({},Je,{path:qx(n,Je.path,yt.path).path});else{const he=ei({},Je.params);for(const Me in he)he[Me]==null&&delete he[Me];wt=ei({},Je,{params:S(Je.params)}),yt.params=S(yt.params)}const Lt=t.resolve(wt,yt),Ct=Je.hash||"";Lt.params=w(A(Lt.params));const Yt=sF(i,ei({},Je,{hash:WF(Ct),path:Lt.path})),ln=s.createHref(Yt);return ei({fullPath:Yt,hash:Ct,query:i===LE?YF(Je.query):Je.query||{}},Lt,{redirectedFrom:void 0,href:ln})}function H(Je){return typeof Je=="string"?qx(n,Je,m.value.path):ei({},Je)}function J(Je,yt){if(y!==Je)return Jh(8,{from:yt,to:Je})}function Z(Je){return ee(Je)}function Y(Je){return Z(ei(H(Je),{replace:!0}))}function ce(Je){const yt=Je.matched[Je.matched.length-1];if(yt&&yt.redirect){const{redirect:wt}=yt;let Lt=typeof wt=="function"?wt(Je):wt;return typeof Lt=="string"&&(Lt=Lt.includes("?")||Lt.includes("#")?Lt=H(Lt):{path:Lt},Lt.params={}),ei({query:Je.query,hash:Je.hash,params:"path"in Lt?{}:Je.params},Lt)}}function ee(Je,yt){const wt=y=F(Je),Lt=m.value,Ct=Je.state,Yt=Je.force,ln=Je.replace===!0,he=ce(wt);if(he)return ee(ei(H(he),{state:typeof he=="object"?ei({},Ct,he.state):Ct,force:Yt,replace:ln}),yt||wt);const Me=wt;Me.redirectedFrom=yt;let Ue;return!Yt&&aF(i,Lt,wt)&&(Ue=Jh(16,{to:Me,from:Lt}),ut(Lt,Lt,!0,!1)),(Ue?Promise.resolve(Ue):ue(Me,Lt)).catch(lt=>ul(lt)?ul(lt,2)?lt:Ke(lt):it(lt,Me,Lt)).then(lt=>{if(lt){if(ul(lt,2))return ee(ei({replace:ln},H(lt.to),{state:typeof lt.to=="object"?ei({},Ct,lt.to.state):Ct,force:Yt}),yt||Me)}else lt=ze(Me,Lt,!0,ln,Ct);return Ee(Me,Lt,lt),lt})}function de(Je,yt){const wt=J(Je,yt);return wt?Promise.reject(wt):Promise.resolve()}function ue(Je,yt){let wt;const[Lt,Ct,Yt]=i4(Je,yt);wt=Zx(Lt.reverse(),"beforeRouteLeave",Je,yt);for(const he of Lt)he.leaveGuards.forEach(Me=>{wt.push(yc(Me,Je,yt))});const ln=de.bind(null,Je,yt);return wt.push(ln),Ah(wt).then(()=>{wt=[];for(const he of u.list())wt.push(yc(he,Je,yt));return wt.push(ln),Ah(wt)}).then(()=>{wt=Zx(Ct,"beforeRouteUpdate",Je,yt);for(const he of Ct)he.updateGuards.forEach(Me=>{wt.push(yc(Me,Je,yt))});return wt.push(ln),Ah(wt)}).then(()=>{wt=[];for(const he of Je.matched)if(he.beforeEnter&&!yt.matched.includes(he))if(ua(he.beforeEnter))for(const Me of he.beforeEnter)wt.push(yc(Me,Je,yt));else wt.push(yc(he.beforeEnter,Je,yt));return wt.push(ln),Ah(wt)}).then(()=>(Je.matched.forEach(he=>he.enterCallbacks={}),wt=Zx(Yt,"beforeRouteEnter",Je,yt),wt.push(ln),Ah(wt))).then(()=>{wt=[];for(const he of d.list())wt.push(yc(he,Je,yt));return wt.push(ln),Ah(wt)}).catch(he=>ul(he,8)?he:Promise.reject(he))}function Ee(Je,yt,wt){for(const Lt of o.list())Lt(Je,yt,wt)}function ze(Je,yt,wt,Lt,Ct){const Yt=J(Je,yt);if(Yt)return Yt;const ln=yt===dc,he=Fh?history.state:{};wt&&(Lt||ln?s.replace(Je.fullPath,ei({scroll:ln&&he&&he.scroll},Ct)):s.push(Je.fullPath,Ct)),m.value=Je,ut(Je,yt,wt,ln),Ke()}let xe;function qe(){xe||(xe=s.listen((Je,yt,wt)=>{if(!Dn.listening)return;const Lt=F(Je),Ct=ce(Lt);if(Ct){ee(ei(Ct,{replace:!0}),Lt).catch(ym);return}y=Lt;const Yt=m.value;Fh&&mF(PE(Yt.fullPath,wt.delta),Jy()),ue(Lt,Yt).catch(ln=>ul(ln,12)?ln:ul(ln,2)?(ee(ln.to,Lt).then(he=>{ul(he,20)&&!wt.delta&&wt.type===$m.pop&&s.go(-1,!1)}).catch(ym),Promise.reject()):(wt.delta&&s.go(-wt.delta,!1),it(ln,Lt,Yt))).then(ln=>{ln=ln||ze(Lt,Yt,!1),ln&&(wt.delta&&!ul(ln,8)?s.go(-wt.delta,!1):wt.type===$m.pop&&ul(ln,20)&&s.go(-1,!1)),Ee(Lt,Yt,ln)}).catch(ym)}))}let Qe=Gp(),Be=Gp(),st;function it(Je,yt,wt){Ke(Je);const Lt=Be.list();return Lt.length?Lt.forEach(Ct=>Ct(Je,yt,wt)):console.error(Je),Promise.reject(Je)}function Pt(){return st&&m.value!==dc?Promise.resolve():new Promise((Je,yt)=>{Qe.add([Je,yt])})}function Ke(Je){return st||(st=!Je,qe(),Qe.list().forEach(([yt,wt])=>Je?wt(Je):yt()),Qe.reset()),Je}function ut(Je,yt,wt,Lt){const{scrollBehavior:Ct}=e;if(!Fh||!Ct)return Promise.resolve();const Yt=!wt&&gF(PE(Je.fullPath,0))||(Lt||!wt)&&history.state&&history.state.scroll||null;return Yi().then(()=>Ct(Je,yt,Yt)).then(ln=>ln&&pF(ln)).catch(ln=>it(ln,Je,yt))}const jt=Je=>s.go(Je);let on;const En=new Set,Dn={currentRoute:m,listening:!0,addRoute:I,removeRoute:z,hasRoute:j,getRoutes:U,resolve:F,options:e,push:Z,replace:Y,go:jt,back:()=>jt(-1),forward:()=>jt(1),beforeEach:u.add,beforeResolve:d.add,afterEach:o.add,onError:Be.add,isReady:Pt,install(Je){const yt=this;Je.component("RouterLink",QF),Je.component("RouterView",hD),Je.config.globalProperties.$router=yt,Object.defineProperty(Je.config.globalProperties,"$route",{enumerable:!0,get:()=>cr(m)}),Fh&&!on&&m.value===dc&&(on=!0,Z(s.location).catch(Ct=>{}));const wt={};for(const Ct in dc)wt[Ct]=Le(()=>m.value[Ct]);Je.provide(lT,yt),Je.provide(dD,pd(wt)),Je.provide(i1,m);const Lt=Je.unmount;En.add(Je),Je.unmount=function(){En.delete(Je),En.size<1&&(y=dc,xe&&xe(),xe=null,m.value=dc,on=!1,st=!1),Lt()}}};return Dn}function Ah(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function i4(e,t){const n=[],i=[],s=[],u=Math.max(t.matched.length,e.matched.length);for(let d=0;d<u;d++){const o=t.matched[d];o&&(e.matched.find(y=>Kh(y,o))?i.push(o):n.push(o));const m=e.matched[d];m&&(t.matched.find(y=>Kh(y,m))||s.push(m))}return[n,i,s]}let dy=[];const fD=new WeakMap;function o4(){dy.forEach(e=>e(...fD.get(e))),dy=[]}function cT(e,...t){fD.set(e,t),!dy.includes(e)&&dy.push(e)===1&&requestAnimationFrame(o4)}function Qh(e,t){let{target:n}=e;for(;n;){if(n.dataset&&n.dataset[t]!==void 0)return!0;n=n.parentElement}return!1}function Dc(e){return e.composedPath()[0]||null}function s4(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(n=>{if(n==="")return;const[i,s]=n.split(":");s===void 0?t[""]=i:t[i]=s}),t}function qp(e,t){var n;if(e==null)return;const i=s4(e);if(t===void 0)return i[""];if(typeof t=="string")return(n=i[t])!==null&&n!==void 0?n:i[""];if(Array.isArray(t)){for(let s=t.length-1;s>=0;--s){const u=t[s];if(u in i)return i[u]}return i[""]}else{let s,u=-1;return Object.keys(i).forEach(d=>{const o=Number(d);!Number.isNaN(o)&&t>=o&&o>=u&&(u=o,s=i[d])}),s}}function Nm(e){return typeof e=="string"?e.endsWith("px")?Number(e.slice(0,e.length-2)):Number(e):e}function oa(e){if(e!=null)return typeof e=="number"?`${e}px`:e.endsWith("px")?e:`${e}px`}function U_(e,t){const n=e.trim().split(/\s+/g),i={top:n[0]};switch(n.length){case 1:i.right=n[0],i.bottom=n[0],i.left=n[0];break;case 2:i.right=n[1],i.left=n[1],i.bottom=n[0];break;case 3:i.right=n[1],i.bottom=n[2],i.left=n[1];break;case 4:i.right=n[1],i.bottom=n[2],i.left=n[3];break;default:throw new Error("[seemly/getMargin]:"+e+" is not a valid value.")}return t===void 0?i:i[t]}function a4(e,t){const[n,i]=e.split(" ");return t?t==="row"?n:i:{row:n,col:i||n}}const VE={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},_f="^\\s*",yf="\\s*$",Yu="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Xu="([0-9A-Fa-f])",Ku="([0-9A-Fa-f]{2})",l4=new RegExp(`${_f}rgb\\s*\\(${Yu},${Yu},${Yu}\\)${yf}`),c4=new RegExp(`${_f}rgba\\s*\\(${Yu},${Yu},${Yu},${Yu}\\)${yf}`),u4=new RegExp(`${_f}#${Xu}${Xu}${Xu}${yf}`),d4=new RegExp(`${_f}#${Ku}${Ku}${Ku}${yf}`),h4=new RegExp(`${_f}#${Xu}${Xu}${Xu}${Xu}${yf}`),f4=new RegExp(`${_f}#${Ku}${Ku}${Ku}${Ku}${yf}`);function ls(e){return parseInt(e,16)}function sd(e){try{let t;if(t=d4.exec(e))return[ls(t[1]),ls(t[2]),ls(t[3]),1];if(t=l4.exec(e))return[Lo(t[1]),Lo(t[5]),Lo(t[9]),1];if(t=c4.exec(e))return[Lo(t[1]),Lo(t[5]),Lo(t[9]),bm(t[13])];if(t=u4.exec(e))return[ls(t[1]+t[1]),ls(t[2]+t[2]),ls(t[3]+t[3]),1];if(t=f4.exec(e))return[ls(t[1]),ls(t[2]),ls(t[3]),bm(ls(t[4])/255)];if(t=h4.exec(e))return[ls(t[1]+t[1]),ls(t[2]+t[2]),ls(t[3]+t[3]),bm(ls(t[4]+t[4])/255)];if(e in VE)return sd(VE[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function p4(e){return e>1?1:e<0?0:e}function o1(e,t,n,i){return`rgba(${Lo(e)}, ${Lo(t)}, ${Lo(n)}, ${p4(i)})`}function Yx(e,t,n,i,s){return Lo((e*t*(1-i)+n*i)/s)}function Rs(e,t){Array.isArray(e)||(e=sd(e)),Array.isArray(t)||(t=sd(t));const n=e[3],i=t[3],s=bm(n+i-n*i);return o1(Yx(e[0],n,t[0],i,s),Yx(e[1],n,t[1],i,s),Yx(e[2],n,t[2],i,s),s)}function gr(e,t){const[n,i,s,u=1]=Array.isArray(e)?e:sd(e);return t.alpha?o1(n,i,s,t.alpha):o1(n,i,s,u)}function c_(e,t){const[n,i,s,u=1]=Array.isArray(e)?e:sd(e),{lightness:d=1,alpha:o=1}=t;return m4([n*d,i*d,s*d,u*o])}function bm(e){const t=Math.round(Number(e)*100)/100;return t>1?1:t<0?0:t}function Lo(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}function m4(e){const[t,n,i]=e;return 3 in e?`rgba(${Lo(t)}, ${Lo(n)}, ${Lo(i)}, ${bm(e[3])})`:`rgba(${Lo(t)}, ${Lo(n)}, ${Lo(i)}, 1)`}function pD(e=8){return Math.random().toString(16).slice(2,2+e)}function mD(e,t="default",n=[]){const s=e.$slots[t];return s===void 0?n:s()}function g4(e,t=[],n){const i={};return t.forEach(s=>{i[s]=e[s]}),Object.assign(i,n)}function v4(e,t=[],n){const i={};return Object.getOwnPropertyNames(e).forEach(u=>{t.includes(u)||(i[u]=e[u])}),Object.assign(i,n)}function Um(e,t=!0,n=[]){return e.forEach(i=>{if(i!==null){if(typeof i!="object"){(typeof i=="string"||typeof i=="number")&&n.push(Ui(String(i)));return}if(Array.isArray(i)){Um(i,t,n);return}if(i.type===Vr){if(i.children===null)return;Array.isArray(i.children)&&Um(i.children,t,n)}else i.type!==Zo&&n.push(i)}}),n}function Un(e,...t){if(Array.isArray(e))e.forEach(n=>Un(n,...t));else return e(...t)}const Ju=(e,...t)=>typeof e=="function"?e(...t):typeof e=="string"?Ui(e):typeof e=="number"?Ui(String(e)):null;function s1(e,t){console.error(`[naive/${e}]: ${t}`)}function Qy(e,t){throw new Error(`[naive/${e}]: ${t}`)}function gD(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function jE(e,t="default",n=void 0){const i=e[t];if(!i)return s1("getFirstSlotVNode",`slot[${t}] is empty`),null;const s=Um(i(n));return s.length===1?s[0]:(s1("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function ag(e){return e.some(t=>Bm(t)?!(t.type===Zo||t.type===Vr&&!ag(t.children)):!0)?e:null}function kr(e,t){return e&&ag(e())||t()}function _4(e,t,n){return e&&ag(e(t))||n(t)}function Os(e,t){const n=e&&ag(e());return t(n||null)}function hy(e){return!(e&&ag(e()))}function Xx(e){const t=e.filter(n=>n!==void 0);if(t.length!==0)return t.length===1?t[0]:n=>{e.forEach(i=>{i&&i(n)})}}function y4(e){var t;const n=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:i})=>i===vf);return!!(n&&n.value===!1)}const a1=pn({render(){var e,t;return(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e)}}),x4=/^(\d|\.)+$/,WE=/(\d|\.)+/;function Kx(e,{c:t=1,offset:n=0,attachPx:i=!0}={}){if(typeof e=="number"){const s=(e+n)*t;return s===0?"0":`${s}px`}else if(typeof e=="string")if(x4.test(e)){const s=(Number(e)+n)*t;return i?s===0?"0":`${s}px`:`${s}`}else{const s=WE.exec(e);return s?e.replace(WE,String((Number(s[0])+n)*t)):e}return e}function Vm(e){return e.replace(/#|\(|\)|,|\s/g,"_")}function b4(e){let t=0;for(let n=0;n<e.length;++n)e[n]==="&"&&++t;return t}const vD=/\s*,(?![^(]*\))\s*/g,w4=/\s+/g;function T4(e,t){const n=[];return t.split(vD).forEach(i=>{let s=b4(i);if(s){if(s===1){e.forEach(d=>{n.push(i.replace("&",d))});return}}else{e.forEach(d=>{n.push((d&&d+" ")+i)});return}let u=[i];for(;s--;){const d=[];u.forEach(o=>{e.forEach(m=>{d.push(o.replace("&",m))})}),u=d}u.forEach(d=>n.push(d))}),n}function C4(e,t){const n=[];return t.split(vD).forEach(i=>{e.forEach(s=>{n.push((s&&s+" ")+i)})}),n}function S4(e){let t=[""];return e.forEach(n=>{n=n&&n.trim(),n&&(n.includes("&")?t=T4(t,n):t=C4(t,n))}),t.join(", ").replace(w4," ")}function HE(e){if(!e)return;const t=e.parentElement;t&&t.removeChild(e)}function e0(e){return document.querySelector(`style[cssr-id="${e}"]`)}function E4(e){const t=document.createElement("style");return t.setAttribute("cssr-id",e),t}function u_(e){return e?/^\s*@(s|m)/.test(e):!1}const M4=/[A-Z]/g;function _D(e){return e.replace(M4,t=>"-"+t.toLowerCase())}function P4(e,t="  "){return typeof e=="object"&&e!==null?` {
`+Object.entries(e).map(n=>t+`  ${_D(n[0])}: ${n[1]};`).join(`
`)+`
`+t+"}":`: ${e};`}function A4(e,t,n){return typeof e=="function"?e({context:t.context,props:n}):e}function GE(e,t,n,i){if(!t)return"";const s=A4(t,n,i);if(!s)return"";if(typeof s=="string")return`${e} {
${s}
}`;const u=Object.keys(s);if(u.length===0)return n.config.keepEmptyBlock?e+` {
}`:"";const d=e?[e+" {"]:[];return u.forEach(o=>{const m=s[o];if(o==="raw"){d.push(`
`+m+`
`);return}o=_D(o),m!=null&&d.push(`  ${o}${P4(m)}`)}),e&&d.push("}"),d.join(`
`)}function l1(e,t,n){e&&e.forEach(i=>{if(Array.isArray(i))l1(i,t,n);else if(typeof i=="function"){const s=i(t);Array.isArray(s)?l1(s,t,n):s&&n(s)}else i&&n(i)})}function yD(e,t,n,i,s,u){const d=e.$;let o="";if(!d||typeof d=="string")u_(d)?o=d:t.push(d);else if(typeof d=="function"){const w=d({context:i.context,props:s});u_(w)?o=w:t.push(w)}else if(d.before&&d.before(i.context),!d.$||typeof d.$=="string")u_(d.$)?o=d.$:t.push(d.$);else if(d.$){const w=d.$({context:i.context,props:s});u_(w)?o=w:t.push(w)}const m=S4(t),y=GE(m,e.props,i,s);o?(n.push(`${o} {`),u&&y&&u.insertRule(`${o} {
${y}
}
`)):(u&&y&&u.insertRule(y),!u&&y.length&&n.push(y)),e.children&&l1(e.children,{context:i.context,props:s},w=>{if(typeof w=="string"){const S=GE(m,{raw:w},i,s);u?u.insertRule(S):n.push(S)}else yD(w,t,n,i,s,u)}),t.pop(),o&&n.push("}"),d&&d.after&&d.after(i.context)}function xD(e,t,n,i=!1){const s=[];return yD(e,[],s,t,n,i?e.instance.__styleSheet:void 0),i?"":s.join(`

`)}function c1(e){for(var t=0,n,i=0,s=e.length;s>=4;++i,s-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function k4(e,t,n){const{els:i}=t;if(n===void 0)i.forEach(HE),t.els=[];else{const s=e0(n);s&&i.includes(s)&&(HE(s),t.els=i.filter(u=>u!==s))}}function qE(e,t){e.push(t)}function D4(e,t,n,i,s,u,d,o,m){if(u&&!m){if(n===void 0){console.error("[css-render/mount]: `id` is required in `silent` mode.");return}const A=window.__cssrContext;A[n]||(A[n]=!0,xD(t,e,i,u));return}let y;if(n===void 0&&(y=t.render(i),n=c1(y)),m){m.adapter(n,y??t.render(i));return}const w=e0(n);if(w!==null&&!d)return w;const S=w??E4(n);if(y===void 0&&(y=t.render(i)),S.textContent=y,w!==null)return w;if(o){const A=document.head.querySelector(`meta[name="${o}"]`);if(A)return document.head.insertBefore(S,A),qE(t.els,S),S}return s?document.head.insertBefore(S,document.head.querySelector("style, link")):document.head.appendChild(S),qE(t.els,S),S}function I4(e){return xD(this,this.instance,e)}function z4(e={}){const{id:t,ssr:n,props:i,head:s=!1,silent:u=!1,force:d=!1,anchorMetaName:o}=e;return D4(this.instance,this,t,i,s,u,d,o,n)}function R4(e={}){const{id:t}=e;k4(this.instance,this,t)}const d_=function(e,t,n,i){return{instance:e,$:t,props:n,children:i,els:[],render:I4,mount:z4,unmount:R4}},O4=function(e,t,n,i){return Array.isArray(t)?d_(e,{$:null},null,t):Array.isArray(n)?d_(e,t,null,n):Array.isArray(i)?d_(e,t,n,i):d_(e,t,n,null)};function bD(e={}){let t=null;const n={c:(...i)=>O4(n,...i),use:(i,...s)=>i.install(n,...s),find:e0,context:{},config:e,get __styleSheet(){if(!t){const i=document.createElement("style");return document.head.appendChild(i),t=document.styleSheets[document.styleSheets.length-1],t}return t}};return n}function L4(e,t){if(e===void 0)return!1;if(t){const{context:{ids:n}}=t;return n.has(e)}return e0(e)!==null}function B4(e){let t=".",n="__",i="--",s;if(e){let z=e.blockPrefix;z&&(t=z),z=e.elementPrefix,z&&(n=z),z=e.modifierPrefix,z&&(i=z)}const u={install(z){s=z.c;const U=z.context;U.bem={},U.bem.b=null,U.bem.els=null}};function d(z){let U,j;return{before(F){U=F.bem.b,j=F.bem.els,F.bem.els=null},after(F){F.bem.b=U,F.bem.els=j},$({context:F,props:H}){return z=typeof z=="string"?z:z({context:F,props:H}),F.bem.b=z,`${(H==null?void 0:H.bPrefix)||t}${F.bem.b}`}}}function o(z){let U;return{before(j){U=j.bem.els},after(j){j.bem.els=U},$({context:j,props:F}){return z=typeof z=="string"?z:z({context:j,props:F}),j.bem.els=z.split(",").map(H=>H.trim()),j.bem.els.map(H=>`${(F==null?void 0:F.bPrefix)||t}${j.bem.b}${n}${H}`).join(", ")}}}function m(z){return{$({context:U,props:j}){z=typeof z=="string"?z:z({context:U,props:j});const F=z.split(",").map(Z=>Z.trim());function H(Z){return F.map(Y=>`&${(j==null?void 0:j.bPrefix)||t}${U.bem.b}${Z!==void 0?`${n}${Z}`:""}${i}${Y}`).join(", ")}const J=U.bem.els;return J!==null?H(J[0]):H()}}}function y(z){return{$({context:U,props:j}){z=typeof z=="string"?z:z({context:U,props:j});const F=U.bem.els;return`&:not(${(j==null?void 0:j.bPrefix)||t}${U.bem.b}${F!==null&&F.length>0?`${n}${F[0]}`:""}${i}${z})`}}}return Object.assign(u,{cB:(...z)=>s(d(z[0]),z[1],z[2]),cE:(...z)=>s(o(z[0]),z[1],z[2]),cM:(...z)=>s(m(z[0]),z[1],z[2]),cNotM:(...z)=>s(y(z[0]),z[1],z[2])}),u}function an(e,t){return e+(t==="default"?"":t.replace(/^[a-z]/,n=>n.toUpperCase()))}an("abc","def");const F4="n",fy=`.${F4}-`,$4="__",N4="--",wD=bD(),TD=B4({blockPrefix:fy,elementPrefix:$4,modifierPrefix:N4});wD.use(TD);const{c:Ze,find:vte}=wD,{cB:It,cE:xt,cM:Nt,cNotM:ai}=TD;function U4(e){return Ze(({props:{bPrefix:t}})=>`${t||fy}modal, ${t||fy}drawer`,[e])}function V4(e){return Ze(({props:{bPrefix:t}})=>`${t||fy}popover`,[e])}const j4=(...e)=>Ze(">",[It(...e)]);let Jx;function W4(){return Jx===void 0&&(Jx=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Jx}const xf=typeof document<"u"&&typeof window<"u",H4=new WeakSet;function jm(e){H4.add(e)}function G4(e){const t=He(!!e.value);if(t.value)return qh(t);const n=xr(e,i=>{i&&(t.value=!0,n())});return qh(t)}function Fo(e){const t=Le(e),n=He(t.value);return xr(t,i=>{n.value=i}),typeof e=="function"?n:{__v_isRef:!0,get value(){return n.value},set value(i){e.set(i)}}}function q4(){return md()!==null}const CD=typeof window<"u";let Wh,wm;const Z4=()=>{var e,t;Wh=CD?(t=(e=document)===null||e===void 0?void 0:e.fonts)===null||t===void 0?void 0:t.ready:void 0,wm=!1,Wh!==void 0?Wh.then(()=>{wm=!0}):wm=!0};Z4();function Y4(e){if(wm)return;let t=!1;Si(()=>{wm||Wh==null||Wh.then(()=>{t||e()})}),Uo(()=>{t=!0})}function V_(e){return e.composedPath()[0]}const X4={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function K4(e,t,n){if(e==="mousemoveoutside"){const i=s=>{t.contains(V_(s))||n(s)};return{mousemove:i,touchstart:i}}else if(e==="clickoutside"){let i=!1;const s=d=>{i=!t.contains(V_(d))},u=d=>{i&&(t.contains(V_(d))||n(d))};return{mousedown:s,mouseup:u,touchstart:s,touchend:u}}return console.error(`[evtd/create-trap-handler]: name \`${e}\` is invalid. This could be a bug of evtd.`),{}}function SD(e,t,n){const i=X4[e];let s=i.get(t);s===void 0&&i.set(t,s=new WeakMap);let u=s.get(n);return u===void 0&&s.set(n,u=K4(e,t,n)),u}function J4(e,t,n,i){if(e==="mousemoveoutside"||e==="clickoutside"){const s=SD(e,t,n);return Object.keys(s).forEach(u=>{Vi(u,document,s[u],i)}),!0}return!1}function Q4(e,t,n,i){if(e==="mousemoveoutside"||e==="clickoutside"){const s=SD(e,t,n);return Object.keys(s).forEach(u=>{vi(u,document,s[u],i)}),!0}return!1}function e$(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const e=new WeakMap,t=new WeakMap;function n(){e.set(this,!0)}function i(){e.set(this,!0),t.set(this,!0)}function s(ee,de,ue){const Ee=ee[de];return ee[de]=function(){return ue.apply(ee,arguments),Ee.apply(ee,arguments)},ee}function u(ee,de){ee[de]=Event.prototype[de]}const d=new WeakMap,o=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function m(){var ee;return(ee=d.get(this))!==null&&ee!==void 0?ee:null}function y(ee,de){o!==void 0&&Object.defineProperty(ee,"currentTarget",{configurable:!0,enumerable:!0,get:de??o.get})}const w={bubble:{},capture:{}},S={};function A(){const ee=function(de){const{type:ue,eventPhase:Ee,bubbles:ze}=de,xe=V_(de);if(Ee===2)return;const qe=Ee===1?"capture":"bubble";let Qe=xe;const Be=[];for(;Qe===null&&(Qe=window),Be.push(Qe),Qe!==window;)Qe=Qe.parentNode||null;const st=w.capture[ue],it=w.bubble[ue];if(s(de,"stopPropagation",n),s(de,"stopImmediatePropagation",i),y(de,m),qe==="capture"){if(st===void 0)return;for(let Pt=Be.length-1;Pt>=0&&!e.has(de);--Pt){const Ke=Be[Pt],ut=st.get(Ke);if(ut!==void 0){d.set(de,Ke);for(const jt of ut){if(t.has(de))break;jt(de)}}if(Pt===0&&!ze&&it!==void 0){const jt=it.get(Ke);if(jt!==void 0)for(const on of jt){if(t.has(de))break;on(de)}}}}else if(qe==="bubble"){if(it===void 0)return;for(let Pt=0;Pt<Be.length&&!e.has(de);++Pt){const Ke=Be[Pt],ut=it.get(Ke);if(ut!==void 0){d.set(de,Ke);for(const jt of ut){if(t.has(de))break;jt(de)}}}}u(de,"stopPropagation"),u(de,"stopImmediatePropagation"),y(de)};return ee.displayName="evtdUnifiedHandler",ee}function I(){const ee=function(de){const{type:ue,eventPhase:Ee}=de;if(Ee!==2)return;const ze=S[ue];ze!==void 0&&ze.forEach(xe=>xe(de))};return ee.displayName="evtdUnifiedWindowEventHandler",ee}const z=A(),U=I();function j(ee,de){const ue=w[ee];return ue[de]===void 0&&(ue[de]=new Map,window.addEventListener(de,z,ee==="capture")),ue[de]}function F(ee){return S[ee]===void 0&&(S[ee]=new Set,window.addEventListener(ee,U)),S[ee]}function H(ee,de){let ue=ee.get(de);return ue===void 0&&ee.set(de,ue=new Set),ue}function J(ee,de,ue,Ee){const ze=w[de][ue];if(ze!==void 0){const xe=ze.get(ee);if(xe!==void 0&&xe.has(Ee))return!0}return!1}function Z(ee,de){const ue=S[ee];return!!(ue!==void 0&&ue.has(de))}function Y(ee,de,ue,Ee){let ze;if(typeof Ee=="object"&&Ee.once===!0?ze=st=>{ce(ee,de,ze,Ee),ue(st)}:ze=ue,J4(ee,de,ze,Ee))return;const qe=Ee===!0||typeof Ee=="object"&&Ee.capture===!0?"capture":"bubble",Qe=j(qe,ee),Be=H(Qe,de);if(Be.has(ze)||Be.add(ze),de===window){const st=F(ee);st.has(ze)||st.add(ze)}}function ce(ee,de,ue,Ee){if(Q4(ee,de,ue,Ee))return;const xe=Ee===!0||typeof Ee=="object"&&Ee.capture===!0,qe=xe?"capture":"bubble",Qe=j(qe,ee),Be=H(Qe,de);if(de===window&&!J(de,xe?"bubble":"capture",ee,ue)&&Z(ee,ue)){const it=S[ee];it.delete(ue),it.size===0&&(window.removeEventListener(ee,U),S[ee]=void 0)}Be.has(ue)&&Be.delete(ue),Be.size===0&&Qe.delete(de),Qe.size===0&&(window.removeEventListener(ee,z,qe==="capture"),w[qe][ee]=void 0)}return{on:Y,off:ce}}const{on:Vi,off:vi}=e$();function ad(e,t){return xr(e,n=>{n!==void 0&&(t.value=n)}),Le(()=>e.value===void 0?t.value:e.value)}function gd(){const e=He(!1);return Si(()=>{e.value=!0}),qh(e)}function uT(e,t){return Le(()=>{for(const n of t)if(e[n]!==void 0)return e[n];return e[t[t.length-1]]})}const t$=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function n$(){return t$}const r$={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function i$(e){return`(min-width: ${e}px)`}const Zp={};function o$(e=r$){if(!CD)return Le(()=>[]);if(typeof window.matchMedia!="function")return Le(()=>[]);const t=He({}),n=Object.keys(e),i=(s,u)=>{s.matches?t.value[u]=!0:t.value[u]=!1};return n.forEach(s=>{const u=e[s];let d,o;Zp[u]===void 0?(d=window.matchMedia(i$(u)),d.addEventListener?d.addEventListener("change",m=>{o.forEach(y=>{y(m,s)})}):d.addListener&&d.addListener(m=>{o.forEach(y=>{y(m,s)})}),o=new Set,Zp[u]={mql:d,cbs:o}):(d=Zp[u].mql,o=Zp[u].cbs),o.add(i),d.matches&&o.forEach(m=>{m(d,s)})}),Uo(()=>{n.forEach(s=>{const{cbs:u}=Zp[e[s]];u.has(i)&&u.delete(i)})}),Le(()=>{const{value:s}=t;return n.filter(u=>s[u])})}function ED(e={},t){const n=pd({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:i,keyup:s}=e,u=m=>{switch(m.key){case"Control":n.ctrl=!0;break;case"Meta":n.command=!0,n.win=!0;break;case"Shift":n.shift=!0;break;case"Tab":n.tab=!0;break}i!==void 0&&Object.keys(i).forEach(y=>{if(y!==m.key)return;const w=i[y];if(typeof w=="function")w(m);else{const{stop:S=!1,prevent:A=!1}=w;S&&m.stopPropagation(),A&&m.preventDefault(),w.handler(m)}})},d=m=>{switch(m.key){case"Control":n.ctrl=!1;break;case"Meta":n.command=!1,n.win=!1;break;case"Shift":n.shift=!1;break;case"Tab":n.tab=!1;break}s!==void 0&&Object.keys(s).forEach(y=>{if(y!==m.key)return;const w=s[y];if(typeof w=="function")w(m);else{const{stop:S=!1,prevent:A=!1}=w;S&&m.stopPropagation(),A&&m.preventDefault(),w.handler(m)}})},o=()=>{(t===void 0||t.value)&&(Vi("keydown",document,u),Vi("keyup",document,d)),t!==void 0&&xr(t,m=>{m?(Vi("keydown",document,u),Vi("keyup",document,d)):(vi("keydown",document,u),vi("keyup",document,d))})};return q4()?(sg(o),Uo(()=>{(t===void 0||t.value)&&(vi("keydown",document,u),vi("keyup",document,d))})):o(),qh(n)}const dT="n-internal-select-menu",MD="n-internal-select-menu-body",PD="n-modal-body",AD="n-drawer-body",kD="n-popover-body",DD="__disabled__";function Xo(e){const t=fr(PD,null),n=fr(AD,null),i=fr(kD,null),s=fr(MD,null),u=He();if(typeof document<"u"){u.value=document.fullscreenElement;const d=()=>{u.value=document.fullscreenElement};Si(()=>{Vi("fullscreenchange",document,d)}),Uo(()=>{vi("fullscreenchange",document,d)})}return Fo(()=>{var d;const{to:o}=e;return o!==void 0?o===!1?DD:o===!0?u.value||"body":o:t!=null&&t.value?(d=t.value.$el)!==null&&d!==void 0?d:t.value:n!=null&&n.value?n.value:i!=null&&i.value?i.value:s!=null&&s.value?s.value:o??(u.value||"body")})}Xo.tdkey=DD;Xo.propTo={type:[String,Object,Boolean],default:void 0};function u1(e,t,n="default"){const i=t[n];if(i===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);return i()}function d1(e,t=!0,n=[]){return e.forEach(i=>{if(i!==null){if(typeof i!="object"){(typeof i=="string"||typeof i=="number")&&n.push(Ui(String(i)));return}if(Array.isArray(i)){d1(i,t,n);return}if(i.type===Vr){if(i.children===null)return;Array.isArray(i.children)&&d1(i.children,t,n)}else i.type!==Zo&&n.push(i)}}),n}function ZE(e,t,n="default"){const i=t[n];if(i===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);const s=d1(i());if(s.length===1)return s[0];throw new Error(`[vueuc/${e}]: slot[${n}] should have exactly one child.`)}let hc=null;function ID(){if(hc===null&&(hc=document.getElementById("v-binder-view-measurer"),hc===null)){hc=document.createElement("div"),hc.id="v-binder-view-measurer";const{style:e}=hc;e.position="fixed",e.left="0",e.right="0",e.top="0",e.bottom="0",e.pointerEvents="none",e.visibility="hidden",document.body.appendChild(hc)}return hc.getBoundingClientRect()}function s$(e,t){const n=ID();return{top:t,left:e,height:0,width:0,right:n.width-e,bottom:n.height-t}}function Qx(e){const t=e.getBoundingClientRect(),n=ID();return{left:t.left-n.left,top:t.top-n.top,bottom:n.height+n.top-t.bottom,right:n.width+n.left-t.right,width:t.width,height:t.height}}function a$(e){return e.nodeType===9?null:e.parentNode}function zD(e){if(e===null)return null;const t=a$(e);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:n,overflowX:i,overflowY:s}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(n+s+i))return t}return zD(t)}const l$=pn({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(e){var t;Hi("VBinder",(t=md())===null||t===void 0?void 0:t.proxy);const n=fr("VBinder",null),i=He(null),s=F=>{i.value=F,n&&e.syncTargetWithParent&&n.setTargetRef(F)};let u=[];const d=()=>{let F=i.value;for(;F=zD(F),F!==null;)u.push(F);for(const H of u)Vi("scroll",H,S,!0)},o=()=>{for(const F of u)vi("scroll",F,S,!0);u=[]},m=new Set,y=F=>{m.size===0&&d(),m.has(F)||m.add(F)},w=F=>{m.has(F)&&m.delete(F),m.size===0&&o()},S=()=>{cT(A)},A=()=>{m.forEach(F=>F())},I=new Set,z=F=>{I.size===0&&Vi("resize",window,j),I.has(F)||I.add(F)},U=F=>{I.has(F)&&I.delete(F),I.size===0&&vi("resize",window,j)},j=()=>{I.forEach(F=>F())};return Uo(()=>{vi("resize",window,j),o()}),{targetRef:i,setTargetRef:s,addScrollListener:y,removeScrollListener:w,addResizeListener:z,removeResizeListener:U}},render(){return u1("binder",this.$slots)}}),lg=l$,cg=pn({name:"Target",setup(){const{setTargetRef:e,syncTarget:t}=fr("VBinder");return{syncTarget:t,setTargetDirective:{mounted:e,updated:e}}},render(){const{syncTarget:e,setTargetDirective:t}=this;return e?Wa(ZE("follower",this.$slots),[[t]]):ZE("follower",this.$slots)}}),kh="@@mmoContext",c$={mounted(e,{value:t}){e[kh]={handler:void 0},typeof t=="function"&&(e[kh].handler=t,Vi("mousemoveoutside",e,t))},updated(e,{value:t}){const n=e[kh];typeof t=="function"?n.handler?n.handler!==t&&(vi("mousemoveoutside",e,n.handler),n.handler=t,Vi("mousemoveoutside",e,t)):(e[kh].handler=t,Vi("mousemoveoutside",e,t)):n.handler&&(vi("mousemoveoutside",e,n.handler),n.handler=void 0)},unmounted(e){const{handler:t}=e[kh];t&&vi("mousemoveoutside",e,t),e[kh].handler=void 0}},u$=c$,Dh="@@coContext",d$={mounted(e,{value:t,modifiers:n}){e[Dh]={handler:void 0},typeof t=="function"&&(e[Dh].handler=t,Vi("clickoutside",e,t,{capture:n.capture}))},updated(e,{value:t,modifiers:n}){const i=e[Dh];typeof t=="function"?i.handler?i.handler!==t&&(vi("clickoutside",e,i.handler,{capture:n.capture}),i.handler=t,Vi("clickoutside",e,t,{capture:n.capture})):(e[Dh].handler=t,Vi("clickoutside",e,t,{capture:n.capture})):i.handler&&(vi("clickoutside",e,i.handler,{capture:n.capture}),i.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:n}=e[Dh];n&&vi("clickoutside",e,n,{capture:t.capture}),e[Dh].handler=void 0}},ld=d$;function h$(e,t){console.error(`[vdirs/${e}]: ${t}`)}class f${constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,n){const{elementZIndex:i}=this;if(n!==void 0){t.style.zIndex=`${n}`,i.delete(t);return}const{nextZIndex:s}=this;i.has(t)&&i.get(t)+1===this.nextZIndex||(t.style.zIndex=`${s}`,i.set(t,s),this.nextZIndex=s+1,this.squashState())}unregister(t,n){const{elementZIndex:i}=this;i.has(t)?i.delete(t):n===void 0&&h$("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((n,i)=>n[1]-i[1]),this.nextZIndex=2e3,t.forEach(n=>{const i=n[0],s=this.nextZIndex++;`${s}`!==i.style.zIndex&&(i.style.zIndex=`${s}`)})}}const eb=new f$,Ih="@@ziContext",p$={mounted(e,t){const{value:n={}}=t,{zIndex:i,enabled:s}=n;e[Ih]={enabled:!!s,initialized:!1},s&&(eb.ensureZIndex(e,i),e[Ih].initialized=!0)},updated(e,t){const{value:n={}}=t,{zIndex:i,enabled:s}=n,u=e[Ih].enabled;s&&!u&&(eb.ensureZIndex(e,i),e[Ih].initialized=!0),e[Ih].enabled=!!s},unmounted(e,t){if(!e[Ih].initialized)return;const{value:n={}}=t,{zIndex:i}=n;eb.unregister(e,i)}},RD=p$,OD=Symbol("@css-render/vue3-ssr");function m$(e,t){return`<style cssr-id="${e}">
${t}
</style>`}function g$(e,t){const n=fr(OD,null);if(n===null){console.error("[css-render/vue3-ssr]: no ssr context found.");return}const{styles:i,ids:s}=n;s.has(e)||i!==null&&(s.add(e),i.push(m$(e,t)))}const v$=typeof document<"u";function vd(){if(v$)return;const e=fr(OD,null);if(e!==null)return{adapter:g$,context:e}}function YE(e,t){console.error(`[vueuc/${e}]: ${t}`)}const{c:bc}=bD(),hT="vueuc-style";function XE(e){return e&-e}class _${constructor(t,n){this.l=t,this.min=n;const i=new Array(t+1);for(let s=0;s<t+1;++s)i[s]=0;this.ft=i}add(t,n){if(n===0)return;const{l:i,ft:s}=this;for(t+=1;t<=i;)s[t]+=n,t+=XE(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(t===void 0&&(t=this.l),t<=0)return 0;const{ft:n,min:i,l:s}=this;if(t>s)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let u=t*i;for(;t>0;)u+=n[t],t-=XE(t);return u}getBound(t){let n=0,i=this.l;for(;i>n;){const s=Math.floor((n+i)/2),u=this.sum(s);if(u>t){i=s;continue}else if(u<t){if(n===s)return this.sum(n+1)<=t?n+1:s;n=s}else return s}return n}}function KE(e){return typeof e=="string"?document.querySelector(e):e()}const y$=pn({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:G4(nr(e,"show")),mergedTo:Le(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?u1("lazy-teleport",this.$slots):V(iT,{disabled:this.disabled,to:this.mergedTo},u1("lazy-teleport",this.$slots)):null}}),h_={top:"bottom",bottom:"top",left:"right",right:"left"},JE={start:"end",center:"center",end:"start"},tb={top:"height",bottom:"height",left:"width",right:"width"},x$={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},b$={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},w$={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},QE={top:!0,bottom:!1,left:!0,right:!1},eM={top:"end",bottom:"start",left:"end",right:"start"};function T$(e,t,n,i,s,u){if(!s||u)return{placement:e,top:0,left:0};const[d,o]=e.split("-");let m=o??"center",y={top:0,left:0};const w=(I,z,U)=>{let j=0,F=0;const H=n[I]-t[z]-t[I];return H>0&&i&&(U?F=QE[z]?H:-H:j=QE[z]?H:-H),{left:j,top:F}},S=d==="left"||d==="right";if(m!=="center"){const I=w$[e],z=h_[I],U=tb[I];if(n[U]>t[U]){if(t[I]+t[U]<n[U]){const j=(n[U]-t[U])/2;t[I]<j||t[z]<j?t[I]<t[z]?(m=JE[o],y=w(U,z,S)):y=w(U,I,S):m="center"}}else n[U]<t[U]&&t[z]<0&&t[I]>t[z]&&(m=JE[o])}else{const I=d==="bottom"||d==="top"?"left":"top",z=h_[I],U=tb[I],j=(n[U]-t[U])/2;(t[I]<j||t[z]<j)&&(t[I]>t[z]?(m=eM[I],y=w(U,I,S)):(m=eM[z],y=w(U,z,S)))}let A=d;return t[d]<n[tb[d]]&&t[d]<t[h_[d]]&&(A=h_[d]),{placement:m!=="center"?`${A}-${m}`:A,left:y.left,top:y.top}}function C$(e,t){return t?b$[e]:x$[e]}function S$(e,t,n,i,s,u){if(u)switch(e){case"bottom-start":return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(n.top-t.top)}px`,left:`${Math.round(n.left-t.left+n.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(n.top-t.top+n.height/2)}px`,left:`${Math.round(n.left-t.left+n.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(n.top-t.top+n.height/2)}px`,left:`${Math.round(n.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(n.top-t.top+n.height)}px`,left:`${Math.round(n.left-t.left+n.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(e){case"bottom-start":return{top:`${Math.round(n.top-t.top+n.height+i)}px`,left:`${Math.round(n.left-t.left+s)}px`,transform:""};case"bottom-end":return{top:`${Math.round(n.top-t.top+n.height+i)}px`,left:`${Math.round(n.left-t.left+n.width+s)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(n.top-t.top+i)}px`,left:`${Math.round(n.left-t.left+s)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(n.top-t.top+i)}px`,left:`${Math.round(n.left-t.left+n.width+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(n.top-t.top+i)}px`,left:`${Math.round(n.left-t.left+n.width+s)}px`,transform:""};case"right-end":return{top:`${Math.round(n.top-t.top+n.height+i)}px`,left:`${Math.round(n.left-t.left+n.width+s)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(n.top-t.top+i)}px`,left:`${Math.round(n.left-t.left+s)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(n.top-t.top+n.height+i)}px`,left:`${Math.round(n.left-t.left+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(n.top-t.top+i)}px`,left:`${Math.round(n.left-t.left+n.width/2+s)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(n.top-t.top+n.height/2+i)}px`,left:`${Math.round(n.left-t.left+n.width+s)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(n.top-t.top+n.height/2+i)}px`,left:`${Math.round(n.left-t.left+s)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(n.top-t.top+n.height+i)}px`,left:`${Math.round(n.left-t.left+n.width/2+s)}px`,transform:"translateX(-50%)"}}}const E$=bc([bc(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),bc(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[bc("> *",{pointerEvents:"all"})])]),ug=pn({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(e){const t=fr("VBinder"),n=Fo(()=>e.enabled!==void 0?e.enabled:e.show),i=He(null),s=He(null),u=()=>{const{syncTrigger:A}=e;A.includes("scroll")&&t.addScrollListener(m),A.includes("resize")&&t.addResizeListener(m)},d=()=>{t.removeScrollListener(m),t.removeResizeListener(m)};Si(()=>{n.value&&(m(),u())});const o=vd();E$.mount({id:"vueuc/binder",head:!0,anchorMetaName:hT,ssr:o}),Uo(()=>{d()}),Y4(()=>{n.value&&m()});const m=()=>{if(!n.value)return;const A=i.value;if(A===null)return;const I=t.targetRef,{x:z,y:U,overlap:j}=e,F=z!==void 0&&U!==void 0?s$(z,U):Qx(I);A.style.setProperty("--v-target-width",`${Math.round(F.width)}px`),A.style.setProperty("--v-target-height",`${Math.round(F.height)}px`);const{width:H,minWidth:J,placement:Z,internalShift:Y,flip:ce}=e;A.setAttribute("v-placement",Z),j?A.setAttribute("v-overlap",""):A.removeAttribute("v-overlap");const{style:ee}=A;H==="target"?ee.width=`${F.width}px`:H!==void 0?ee.width=H:ee.width="",J==="target"?ee.minWidth=`${F.width}px`:J!==void 0?ee.minWidth=J:ee.minWidth="";const de=Qx(A),ue=Qx(s.value),{left:Ee,top:ze,placement:xe}=T$(Z,F,de,Y,ce,j),qe=C$(xe,j),{left:Qe,top:Be,transform:st}=S$(xe,ue,F,ze,Ee,j);A.setAttribute("v-placement",xe),A.style.setProperty("--v-offset-left",`${Math.round(Ee)}px`),A.style.setProperty("--v-offset-top",`${Math.round(ze)}px`),A.style.transform=`translateX(${Qe}) translateY(${Be}) ${st}`,A.style.setProperty("--v-transform-origin",qe),A.style.transformOrigin=qe};xr(n,A=>{A?(u(),y()):d()});const y=()=>{Yi().then(m).catch(A=>console.error(A))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(A=>{xr(nr(e,A),m)}),["teleportDisabled"].forEach(A=>{xr(nr(e,A),y)}),xr(nr(e,"syncTrigger"),A=>{A.includes("resize")?t.addResizeListener(m):t.removeResizeListener(m),A.includes("scroll")?t.addScrollListener(m):t.removeScrollListener(m)});const w=gd(),S=Fo(()=>{const{to:A}=e;if(A!==void 0)return A;w.value});return{VBinder:t,mergedEnabled:n,offsetContainerRef:s,followerRef:i,mergedTo:S,syncPosition:m}},render(){return V(y$,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var e,t;const n=V("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[V("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e))]);return this.zindexable?Wa(n,[[RD,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):n}})}});var nd=[],M$=function(){return nd.some(function(e){return e.activeTargets.length>0})},P$=function(){return nd.some(function(e){return e.skippedTargets.length>0})},tM="ResizeObserver loop completed with undelivered notifications.",A$=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:tM}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=tM),window.dispatchEvent(e)},Wm;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Wm||(Wm={}));var rd=function(e){return Object.freeze(e)},k$=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,rd(this)}return e}(),LD=function(){function e(t,n,i,s){return this.x=t,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,rd(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,i=t.y,s=t.top,u=t.right,d=t.bottom,o=t.left,m=t.width,y=t.height;return{x:n,y:i,top:s,right:u,bottom:d,left:o,width:m,height:y}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),fT=function(e){return e instanceof SVGElement&&"getBBox"in e},BD=function(e){if(fT(e)){var t=e.getBBox(),n=t.width,i=t.height;return!n&&!i}var s=e,u=s.offsetWidth,d=s.offsetHeight;return!(u||d||e.getClientRects().length)},nM=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},D$=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Tm=typeof window<"u"?window:{},f_=new WeakMap,rM=/auto|scroll/,I$=/^tb|vertical/,z$=/msie|trident/i.test(Tm.navigator&&Tm.navigator.userAgent),ka=function(e){return parseFloat(e||"0")},Hh=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new k$((n?t:e)||0,(n?e:t)||0)},iM=rd({devicePixelContentBoxSize:Hh(),borderBoxSize:Hh(),contentBoxSize:Hh(),contentRect:new LD(0,0,0,0)}),FD=function(e,t){if(t===void 0&&(t=!1),f_.has(e)&&!t)return f_.get(e);if(BD(e))return f_.set(e,iM),iM;var n=getComputedStyle(e),i=fT(e)&&e.ownerSVGElement&&e.getBBox(),s=!z$&&n.boxSizing==="border-box",u=I$.test(n.writingMode||""),d=!i&&rM.test(n.overflowY||""),o=!i&&rM.test(n.overflowX||""),m=i?0:ka(n.paddingTop),y=i?0:ka(n.paddingRight),w=i?0:ka(n.paddingBottom),S=i?0:ka(n.paddingLeft),A=i?0:ka(n.borderTopWidth),I=i?0:ka(n.borderRightWidth),z=i?0:ka(n.borderBottomWidth),U=i?0:ka(n.borderLeftWidth),j=S+y,F=m+w,H=U+I,J=A+z,Z=o?e.offsetHeight-J-e.clientHeight:0,Y=d?e.offsetWidth-H-e.clientWidth:0,ce=s?j+H:0,ee=s?F+J:0,de=i?i.width:ka(n.width)-ce-Y,ue=i?i.height:ka(n.height)-ee-Z,Ee=de+j+Y+H,ze=ue+F+Z+J,xe=rd({devicePixelContentBoxSize:Hh(Math.round(de*devicePixelRatio),Math.round(ue*devicePixelRatio),u),borderBoxSize:Hh(Ee,ze,u),contentBoxSize:Hh(de,ue,u),contentRect:new LD(S,m,de,ue)});return f_.set(e,xe),xe},$D=function(e,t,n){var i=FD(e,n),s=i.borderBoxSize,u=i.contentBoxSize,d=i.devicePixelContentBoxSize;switch(t){case Wm.DEVICE_PIXEL_CONTENT_BOX:return d;case Wm.BORDER_BOX:return s;default:return u}},R$=function(){function e(t){var n=FD(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=rd([n.borderBoxSize]),this.contentBoxSize=rd([n.contentBoxSize]),this.devicePixelContentBoxSize=rd([n.devicePixelContentBoxSize])}return e}(),ND=function(e){if(BD(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},O$=function(){var e=1/0,t=[];nd.forEach(function(d){if(d.activeTargets.length!==0){var o=[];d.activeTargets.forEach(function(y){var w=new R$(y.target),S=ND(y.target);o.push(w),y.lastReportedSize=$D(y.target,y.observedBox),S<e&&(e=S)}),t.push(function(){d.callback.call(d.observer,o,d.observer)}),d.activeTargets.splice(0,d.activeTargets.length)}});for(var n=0,i=t;n<i.length;n++){var s=i[n];s()}return e},oM=function(e){nd.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(ND(s.target)>e?n.activeTargets.push(s):n.skippedTargets.push(s))})})},L$=function(){var e=0;for(oM(e);M$();)e=O$(),oM(e);return P$()&&A$(),e>0},nb,UD=[],B$=function(){return UD.splice(0).forEach(function(e){return e()})},F$=function(e){if(!nb){var t=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return B$()}).observe(n,i),nb=function(){n.textContent="".concat(t?t--:t++)}}UD.push(e),nb()},$$=function(e){F$(function(){requestAnimationFrame(e)})},j_=0,N$=function(){return!!j_},U$=250,V$={attributes:!0,characterData:!0,childList:!0,subtree:!0},sM=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],aM=function(e){return e===void 0&&(e=0),Date.now()+e},rb=!1,j$=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=U$),!rb){rb=!0;var i=aM(t);$$(function(){var s=!1;try{s=L$()}finally{if(rb=!1,t=i-aM(),!N$())return;s?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,V$)};document.body?n():Tm.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),sM.forEach(function(n){return Tm.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),sM.forEach(function(n){return Tm.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),h1=new j$,lM=function(e){!j_&&e>0&&h1.start(),j_+=e,!j_&&h1.stop()},W$=function(e){return!fT(e)&&!D$(e)&&getComputedStyle(e).display==="inline"},H$=function(){function e(t,n){this.target=t,this.observedBox=n||Wm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=$D(this.target,this.observedBox,!0);return W$(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),G$=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),p_=new WeakMap,cM=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},m_=function(){function e(){}return e.connect=function(t,n){var i=new G$(t,n);p_.set(t,i)},e.observe=function(t,n,i){var s=p_.get(t),u=s.observationTargets.length===0;cM(s.observationTargets,n)<0&&(u&&nd.push(s),s.observationTargets.push(new H$(n,i&&i.box)),lM(1),h1.schedule())},e.unobserve=function(t,n){var i=p_.get(t),s=cM(i.observationTargets,n),u=i.observationTargets.length===1;s>=0&&(u&&nd.splice(nd.indexOf(i),1),i.observationTargets.splice(s,1),lM(-1))},e.disconnect=function(t){var n=this,i=p_.get(t);i.observationTargets.slice().forEach(function(s){return n.unobserve(t,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},e}(),q$=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");m_.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nM(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");m_.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nM(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");m_.unobserve(this,t)},e.prototype.disconnect=function(){m_.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();class Z${constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||q$)(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const n of t){const i=this.elHandlersMap.get(n.target);i!==void 0&&i(n)}}registerHandler(t,n){this.elHandlersMap.set(t,n),this.observer.observe(t)}unregisterHandler(t){this.elHandlersMap.has(t)&&(this.elHandlersMap.delete(t),this.observer.unobserve(t))}}const py=new Z$,ef=pn({name:"ResizeObserver",props:{onResize:Function},setup(e){let t=!1;const n=md().proxy;function i(s){const{onResize:u}=e;u!==void 0&&u(s)}Si(()=>{const s=n.$el;if(s===void 0){YE("resize-observer","$el does not exist.");return}if(s.nextElementSibling!==s.nextSibling&&s.nodeType===3&&s.nodeValue!==""){YE("resize-observer","$el can not be observed (it may be a text node).");return}s.nextElementSibling!==null&&(py.registerHandler(s.nextElementSibling,i),t=!0)}),Uo(()=>{t&&py.unregisterHandler(n.$el.nextElementSibling)})},render(){return eT(this.$slots,"default")}});let g_;function Y$(){return g_===void 0&&("matchMedia"in window?g_=window.matchMedia("(pointer:coarse)").matches:g_=!1),g_}let ib;function uM(){return ib===void 0&&(ib="chrome"in window?window.devicePixelRatio:1),ib}const X$=bc(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[bc("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[bc("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),my=pn({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const t=vd();X$.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:hT,ssr:t}),Si(()=>{const{defaultScrollIndex:ze,defaultScrollKey:xe}=e;ze!=null?z({index:ze}):xe!=null&&z({key:xe})});let n=!1,i=!1;Kw(()=>{if(n=!1,!i){i=!0;return}z({top:S.value,left:w})}),Jw(()=>{n=!0,i||(i=!0)});const s=Le(()=>{const ze=new Map,{keyField:xe}=e;return e.items.forEach((qe,Qe)=>{ze.set(qe[xe],Qe)}),ze}),u=He(null),d=He(void 0),o=new Map,m=Le(()=>{const{items:ze,itemSize:xe,keyField:qe}=e,Qe=new _$(ze.length,xe);return ze.forEach((Be,st)=>{const it=Be[qe],Pt=o.get(it);Pt!==void 0&&Qe.add(st,Pt)}),Qe}),y=He(0);let w=0;const S=He(0),A=Fo(()=>Math.max(m.value.getBound(S.value-Nm(e.paddingTop))-1,0)),I=Le(()=>{const{value:ze}=d;if(ze===void 0)return[];const{items:xe,itemSize:qe}=e,Qe=A.value,Be=Math.min(Qe+Math.ceil(ze/qe+1),xe.length-1),st=[];for(let it=Qe;it<=Be;++it)st.push(xe[it]);return st}),z=(ze,xe)=>{if(typeof ze=="number"){H(ze,xe,"auto");return}const{left:qe,top:Qe,index:Be,key:st,position:it,behavior:Pt,debounce:Ke=!0}=ze;if(qe!==void 0||Qe!==void 0)H(qe,Qe,Pt);else if(Be!==void 0)F(Be,Pt,Ke);else if(st!==void 0){const ut=s.value.get(st);ut!==void 0&&F(ut,Pt,Ke)}else it==="bottom"?H(0,Number.MAX_SAFE_INTEGER,Pt):it==="top"&&H(0,0,Pt)};let U,j=null;function F(ze,xe,qe){const{value:Qe}=m,Be=Qe.sum(ze)+Nm(e.paddingTop);if(!qe)u.value.scrollTo({left:0,top:Be,behavior:xe});else{U=ze,j!==null&&window.clearTimeout(j),j=window.setTimeout(()=>{U=void 0,j=null},16);const{scrollTop:st,offsetHeight:it}=u.value;if(Be>st){const Pt=Qe.get(ze);Be+Pt<=st+it||u.value.scrollTo({left:0,top:Be+Pt-it,behavior:xe})}else u.value.scrollTo({left:0,top:Be,behavior:xe})}}function H(ze,xe,qe){u.value.scrollTo({left:ze,top:xe,behavior:qe})}function J(ze,xe){var qe,Qe,Be;if(n||e.ignoreItemResize||Ee(xe.target))return;const{value:st}=m,it=s.value.get(ze),Pt=st.get(it),Ke=(Be=(Qe=(qe=xe.borderBoxSize)===null||qe===void 0?void 0:qe[0])===null||Qe===void 0?void 0:Qe.blockSize)!==null&&Be!==void 0?Be:xe.contentRect.height;if(Ke===Pt)return;Ke-e.itemSize===0?o.delete(ze):o.set(ze,Ke-e.itemSize);const jt=Ke-Pt;if(jt===0)return;st.add(it,jt);const on=u.value;if(on!=null){if(U===void 0){const En=st.sum(it);on.scrollTop>En&&on.scrollBy(0,jt)}else if(it<U)on.scrollBy(0,jt);else if(it===U){const En=st.sum(it);Ke+En>on.scrollTop+on.offsetHeight&&on.scrollBy(0,jt)}ue()}y.value++}const Z=!Y$();let Y=!1;function ce(ze){var xe;(xe=e.onScroll)===null||xe===void 0||xe.call(e,ze),(!Z||!Y)&&ue()}function ee(ze){var xe;if((xe=e.onWheel)===null||xe===void 0||xe.call(e,ze),Z){const qe=u.value;if(qe!=null){if(ze.deltaX===0&&(qe.scrollTop===0&&ze.deltaY<=0||qe.scrollTop+qe.offsetHeight>=qe.scrollHeight&&ze.deltaY>=0))return;ze.preventDefault(),qe.scrollTop+=ze.deltaY/uM(),qe.scrollLeft+=ze.deltaX/uM(),ue(),Y=!0,cT(()=>{Y=!1})}}}function de(ze){if(n||Ee(ze.target)||ze.contentRect.height===d.value)return;d.value=ze.contentRect.height;const{onResize:xe}=e;xe!==void 0&&xe(ze)}function ue(){const{value:ze}=u;ze!=null&&(S.value=ze.scrollTop,w=ze.scrollLeft)}function Ee(ze){let xe=ze;for(;xe!==null;){if(xe.style.display==="none")return!0;xe=xe.parentElement}return!1}return{listHeight:d,listStyle:{overflow:"auto"},keyToIndex:s,itemsStyle:Le(()=>{const{itemResizable:ze}=e,xe=oa(m.value.sum());return y.value,[e.itemsStyle,{boxSizing:"content-box",height:ze?"":xe,minHeight:ze?xe:"",paddingTop:oa(e.paddingTop),paddingBottom:oa(e.paddingBottom)}]}),visibleItemsStyle:Le(()=>(y.value,{transform:`translateY(${oa(m.value.sum(A.value))})`})),viewportItems:I,listElRef:u,itemsElRef:He(null),scrollTo:z,handleListResize:de,handleListScroll:ce,handleListWheel:ee,handleItemResize:J}},render(){const{itemResizable:e,keyField:t,keyToIndex:n,visibleItemsTag:i}=this;return V(ef,{onResize:this.handleListResize},{default:()=>{var s,u;return V("div",Yh(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?V("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[V(i,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(d=>{const o=d[t],m=n.get(o),y=this.$slots.default({item:d,index:m})[0];return e?V(ef,{key:o,onResize:w=>this.handleItemResize(o,w)},{default:()=>y}):(y.key=o,y)})})]):(u=(s=this.$slots).empty)===null||u===void 0?void 0:u.call(s)])}})}}),Ru="v-hidden",K$=bc("[v-hidden]",{display:"none!important"}),dM=pn({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(e,{slots:t}){const n=He(null),i=He(null);function s(){const{value:d}=n,{getCounter:o,getTail:m}=e;let y;if(o!==void 0?y=o():y=i.value,!d||!y)return;y.hasAttribute(Ru)&&y.removeAttribute(Ru);const{children:w}=d,S=d.offsetWidth,A=[],I=t.tail?m==null?void 0:m():null;let z=I?I.offsetWidth:0,U=!1;const j=d.children.length-(t.tail?1:0);for(let H=0;H<j-1;++H){if(H<0)continue;const J=w[H];if(U){J.hasAttribute(Ru)||J.setAttribute(Ru,"");continue}else J.hasAttribute(Ru)&&J.removeAttribute(Ru);const Z=J.offsetWidth;if(z+=Z,A[H]=Z,z>S){const{updateCounter:Y}=e;for(let ce=H;ce>=0;--ce){const ee=j-1-ce;Y!==void 0?Y(ee):y.textContent=`${ee}`;const de=y.offsetWidth;if(z-=A[ce],z+de<=S||ce===0){U=!0,H=ce-1,I&&(H===-1?(I.style.maxWidth=`${S-de}px`,I.style.boxSizing="border-box"):I.style.maxWidth="");break}}}}const{onUpdateOverflow:F}=e;U?F!==void 0&&F(!0):(F!==void 0&&F(!1),y.setAttribute(Ru,""))}const u=vd();return K$.mount({id:"vueuc/overflow",head:!0,anchorMetaName:hT,ssr:u}),Si(s),{selfRef:n,counterRef:i,sync:s}},render(){const{$slots:e}=this;return Yi(this.sync),V("div",{class:"v-overflow",ref:"selfRef"},[eT(e,"default"),e.counter?e.counter():V("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function VD(e){return e instanceof HTMLElement}function jD(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(VD(n)&&(HD(n)||jD(n)))return!0}return!1}function WD(e){for(let t=e.childNodes.length-1;t>=0;t--){const n=e.childNodes[t];if(VD(n)&&(HD(n)||WD(n)))return!0}return!1}function HD(e){if(!J$(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function J$(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let Yp=[];const Q$=pn({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=pD(),n=He(null),i=He(null);let s=!1,u=!1;const d=typeof document>"u"?null:document.activeElement;function o(){return Yp[Yp.length-1]===t}function m(j){var F;j.code==="Escape"&&o()&&((F=e.onEsc)===null||F===void 0||F.call(e,j))}Si(()=>{xr(()=>e.active,j=>{j?(S(),Vi("keydown",document,m)):(vi("keydown",document,m),s&&A())},{immediate:!0})}),Uo(()=>{vi("keydown",document,m),s&&A()});function y(j){if(!u&&o()){const F=w();if(F===null||F.contains(Dc(j)))return;I("first")}}function w(){const j=n.value;if(j===null)return null;let F=j;for(;F=F.nextSibling,!(F===null||F instanceof Element&&F.tagName==="DIV"););return F}function S(){var j;if(!e.disabled){if(Yp.push(t),e.autoFocus){const{initialFocusTo:F}=e;F===void 0?I("first"):(j=KE(F))===null||j===void 0||j.focus({preventScroll:!0})}s=!0,document.addEventListener("focus",y,!0)}}function A(){var j;if(e.disabled||(document.removeEventListener("focus",y,!0),Yp=Yp.filter(H=>H!==t),o()))return;const{finalFocusTo:F}=e;F!==void 0?(j=KE(F))===null||j===void 0||j.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&d instanceof HTMLElement&&(u=!0,d.focus({preventScroll:!0}),u=!1)}function I(j){if(o()&&e.active){const F=n.value,H=i.value;if(F!==null&&H!==null){const J=w();if(J==null||J===H){u=!0,F.focus({preventScroll:!0}),u=!1;return}u=!0;const Z=j==="first"?jD(J):WD(J);u=!1,Z||(u=!0,F.focus({preventScroll:!0}),u=!1)}}}function z(j){if(u)return;const F=w();F!==null&&(j.relatedTarget!==null&&F.contains(j.relatedTarget)?I("last"):I("first"))}function U(j){u||(j.relatedTarget!==null&&j.relatedTarget===n.value?I("last"):I("first"))}return{focusableStartRef:n,focusableEndRef:i,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:z,handleEndFocus:U}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:n}=this;return V(Vr,null,[V("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),V("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}});function GD(e,t){t&&(Si(()=>{const{value:n}=e;n&&py.registerHandler(n,t)}),Uo(()=>{const{value:n}=e;n&&py.unregisterHandler(n)}))}function e6(e){const t={isDeactivated:!1};let n=!1;return Kw(()=>{if(t.isDeactivated=!1,!n){n=!0;return}e()}),Jw(()=>{t.isDeactivated=!0,n||(n=!0)}),t}const hM="n-form-item";function dg(e,{defaultSize:t="medium",mergedSize:n,mergedDisabled:i}={}){const s=fr(hM,null);Hi(hM,null);const u=Le(n?()=>n(s):()=>{const{size:m}=e;if(m)return m;if(s){const{mergedSize:y}=s;if(y.value!==void 0)return y.value}return t}),d=Le(i?()=>i(s):()=>{const{disabled:m}=e;return m!==void 0?m:s?s.disabled.value:!1}),o=Le(()=>{const{status:m}=e;return m||(s==null?void 0:s.mergedValidationStatus.value)});return Uo(()=>{s&&s.restoreValidation()}),{mergedSizeRef:u,mergedDisabledRef:d,mergedStatusRef:o,nTriggerFormBlur(){s&&s.handleContentBlur()},nTriggerFormChange(){s&&s.handleContentChange()},nTriggerFormFocus(){s&&s.handleContentFocus()},nTriggerFormInput(){s&&s.handleContentInput()}}}var t6=typeof global=="object"&&global&&global.Object===Object&&global;const qD=t6;var n6=typeof self=="object"&&self&&self.Object===Object&&self,r6=qD||n6||Function("return this")();const Ha=r6;var i6=Ha.Symbol;const Ic=i6;var ZD=Object.prototype,o6=ZD.hasOwnProperty,s6=ZD.toString,Xp=Ic?Ic.toStringTag:void 0;function a6(e){var t=o6.call(e,Xp),n=e[Xp];try{e[Xp]=void 0;var i=!0}catch{}var s=s6.call(e);return i&&(t?e[Xp]=n:delete e[Xp]),s}var l6=Object.prototype,c6=l6.toString;function u6(e){return c6.call(e)}var d6="[object Null]",h6="[object Undefined]",fM=Ic?Ic.toStringTag:void 0;function _d(e){return e==null?e===void 0?h6:d6:fM&&fM in Object(e)?a6(e):u6(e)}function zc(e){return e!=null&&typeof e=="object"}var f6="[object Symbol]";function pT(e){return typeof e=="symbol"||zc(e)&&_d(e)==f6}function YD(e,t){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=t(e[n],n,e);return s}var p6=Array.isArray;const Us=p6;var m6=1/0,pM=Ic?Ic.prototype:void 0,mM=pM?pM.toString:void 0;function XD(e){if(typeof e=="string")return e;if(Us(e))return YD(e,XD)+"";if(pT(e))return mM?mM.call(e):"";var t=e+"";return t=="0"&&1/e==-m6?"-0":t}function Lc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function mT(e){return e}var g6="[object AsyncFunction]",v6="[object Function]",_6="[object GeneratorFunction]",y6="[object Proxy]";function gT(e){if(!Lc(e))return!1;var t=_d(e);return t==v6||t==_6||t==g6||t==y6}var x6=Ha["__core-js_shared__"];const ob=x6;var gM=function(){var e=/[^.]+$/.exec(ob&&ob.keys&&ob.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function b6(e){return!!gM&&gM in e}var w6=Function.prototype,T6=w6.toString;function yd(e){if(e!=null){try{return T6.call(e)}catch{}try{return e+""}catch{}}return""}var C6=/[\\^$.*+?()[\]{}|]/g,S6=/^\[object .+?Constructor\]$/,E6=Function.prototype,M6=Object.prototype,P6=E6.toString,A6=M6.hasOwnProperty,k6=RegExp("^"+P6.call(A6).replace(C6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function D6(e){if(!Lc(e)||b6(e))return!1;var t=gT(e)?k6:S6;return t.test(yd(e))}function I6(e,t){return e==null?void 0:e[t]}function xd(e,t){var n=I6(e,t);return D6(n)?n:void 0}var z6=xd(Ha,"WeakMap");const f1=z6;var vM=Object.create,R6=function(){function e(){}return function(t){if(!Lc(t))return{};if(vM)return vM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const O6=R6;function L6(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function B6(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}var F6=800,$6=16,N6=Date.now;function U6(e){var t=0,n=0;return function(){var i=N6(),s=$6-(i-n);if(n=i,s>0){if(++t>=F6)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function V6(e){return function(){return e}}var j6=function(){try{var e=xd(Object,"defineProperty");return e({},"",{}),e}catch{}}();const gy=j6;var W6=gy?function(e,t){return gy(e,"toString",{configurable:!0,enumerable:!1,value:V6(t),writable:!0})}:mT;const H6=W6;var G6=U6(H6);const q6=G6;var Z6=9007199254740991,Y6=/^(?:0|[1-9]\d*)$/;function vT(e,t){var n=typeof e;return t=t??Z6,!!t&&(n=="number"||n!="symbol"&&Y6.test(e))&&e>-1&&e%1==0&&e<t}function _T(e,t,n){t=="__proto__"&&gy?gy(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function hg(e,t){return e===t||e!==e&&t!==t}var X6=Object.prototype,K6=X6.hasOwnProperty;function J6(e,t,n){var i=e[t];(!(K6.call(e,t)&&hg(i,n))||n===void 0&&!(t in e))&&_T(e,t,n)}function Q6(e,t,n,i){var s=!n;n||(n={});for(var u=-1,d=t.length;++u<d;){var o=t[u],m=i?i(n[o],e[o],o,n,e):void 0;m===void 0&&(m=e[o]),s?_T(n,o,m):J6(n,o,m)}return n}var _M=Math.max;function eN(e,t,n){return t=_M(t===void 0?e.length-1:t,0),function(){for(var i=arguments,s=-1,u=_M(i.length-t,0),d=Array(u);++s<u;)d[s]=i[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=i[s];return o[t]=n(d),L6(e,this,o)}}function tN(e,t){return q6(eN(e,t,mT),e+"")}var nN=9007199254740991;function yT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nN}function bf(e){return e!=null&&yT(e.length)&&!gT(e)}function rN(e,t,n){if(!Lc(n))return!1;var i=typeof t;return(i=="number"?bf(n)&&vT(t,n.length):i=="string"&&t in n)?hg(n[t],e):!1}function iN(e){return tN(function(t,n){var i=-1,s=n.length,u=s>1?n[s-1]:void 0,d=s>2?n[2]:void 0;for(u=e.length>3&&typeof u=="function"?(s--,u):void 0,d&&rN(n[0],n[1],d)&&(u=s<3?void 0:u,s=1),t=Object(t);++i<s;){var o=n[i];o&&e(t,o,i,u)}return t})}var oN=Object.prototype;function xT(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||oN;return e===n}function sN(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}var aN="[object Arguments]";function yM(e){return zc(e)&&_d(e)==aN}var KD=Object.prototype,lN=KD.hasOwnProperty,cN=KD.propertyIsEnumerable,uN=yM(function(){return arguments}())?yM:function(e){return zc(e)&&lN.call(e,"callee")&&!cN.call(e,"callee")};const vy=uN;function dN(){return!1}var JD=typeof bs=="object"&&bs&&!bs.nodeType&&bs,xM=JD&&typeof ws=="object"&&ws&&!ws.nodeType&&ws,hN=xM&&xM.exports===JD,bM=hN?Ha.Buffer:void 0,fN=bM?bM.isBuffer:void 0,pN=fN||dN;const _y=pN;var mN="[object Arguments]",gN="[object Array]",vN="[object Boolean]",_N="[object Date]",yN="[object Error]",xN="[object Function]",bN="[object Map]",wN="[object Number]",TN="[object Object]",CN="[object RegExp]",SN="[object Set]",EN="[object String]",MN="[object WeakMap]",PN="[object ArrayBuffer]",AN="[object DataView]",kN="[object Float32Array]",DN="[object Float64Array]",IN="[object Int8Array]",zN="[object Int16Array]",RN="[object Int32Array]",ON="[object Uint8Array]",LN="[object Uint8ClampedArray]",BN="[object Uint16Array]",FN="[object Uint32Array]",pi={};pi[kN]=pi[DN]=pi[IN]=pi[zN]=pi[RN]=pi[ON]=pi[LN]=pi[BN]=pi[FN]=!0;pi[mN]=pi[gN]=pi[PN]=pi[vN]=pi[AN]=pi[_N]=pi[yN]=pi[xN]=pi[bN]=pi[wN]=pi[TN]=pi[CN]=pi[SN]=pi[EN]=pi[MN]=!1;function $N(e){return zc(e)&&yT(e.length)&&!!pi[_d(e)]}function NN(e){return function(t){return e(t)}}var QD=typeof bs=="object"&&bs&&!bs.nodeType&&bs,Cm=QD&&typeof ws=="object"&&ws&&!ws.nodeType&&ws,UN=Cm&&Cm.exports===QD,sb=UN&&qD.process,VN=function(){try{var e=Cm&&Cm.require&&Cm.require("util").types;return e||sb&&sb.binding&&sb.binding("util")}catch{}}();const wM=VN;var TM=wM&&wM.isTypedArray,jN=TM?NN(TM):$N;const bT=jN;var WN=Object.prototype,HN=WN.hasOwnProperty;function eI(e,t){var n=Us(e),i=!n&&vy(e),s=!n&&!i&&_y(e),u=!n&&!i&&!s&&bT(e),d=n||i||s||u,o=d?sN(e.length,String):[],m=o.length;for(var y in e)(t||HN.call(e,y))&&!(d&&(y=="length"||s&&(y=="offset"||y=="parent")||u&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||vT(y,m)))&&o.push(y);return o}function tI(e,t){return function(n){return e(t(n))}}var GN=tI(Object.keys,Object);const qN=GN;var ZN=Object.prototype,YN=ZN.hasOwnProperty;function XN(e){if(!xT(e))return qN(e);var t=[];for(var n in Object(e))YN.call(e,n)&&n!="constructor"&&t.push(n);return t}function wT(e){return bf(e)?eI(e):XN(e)}function KN(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var JN=Object.prototype,QN=JN.hasOwnProperty;function eU(e){if(!Lc(e))return KN(e);var t=xT(e),n=[];for(var i in e)i=="constructor"&&(t||!QN.call(e,i))||n.push(i);return n}function nI(e){return bf(e)?eI(e,!0):eU(e)}var tU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nU=/^\w*$/;function TT(e,t){if(Us(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pT(e)?!0:nU.test(e)||!tU.test(e)||t!=null&&e in Object(t)}var rU=xd(Object,"create");const Hm=rU;function iU(){this.__data__=Hm?Hm(null):{},this.size=0}function oU(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sU="__lodash_hash_undefined__",aU=Object.prototype,lU=aU.hasOwnProperty;function cU(e){var t=this.__data__;if(Hm){var n=t[e];return n===sU?void 0:n}return lU.call(t,e)?t[e]:void 0}var uU=Object.prototype,dU=uU.hasOwnProperty;function hU(e){var t=this.__data__;return Hm?t[e]!==void 0:dU.call(t,e)}var fU="__lodash_hash_undefined__";function pU(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Hm&&t===void 0?fU:t,this}function cd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}cd.prototype.clear=iU;cd.prototype.delete=oU;cd.prototype.get=cU;cd.prototype.has=hU;cd.prototype.set=pU;function mU(){this.__data__=[],this.size=0}function t0(e,t){for(var n=e.length;n--;)if(hg(e[n][0],t))return n;return-1}var gU=Array.prototype,vU=gU.splice;function _U(e){var t=this.__data__,n=t0(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():vU.call(t,n,1),--this.size,!0}function yU(e){var t=this.__data__,n=t0(t,e);return n<0?void 0:t[n][1]}function xU(e){return t0(this.__data__,e)>-1}function bU(e,t){var n=this.__data__,i=t0(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function Pl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Pl.prototype.clear=mU;Pl.prototype.delete=_U;Pl.prototype.get=yU;Pl.prototype.has=xU;Pl.prototype.set=bU;var wU=xd(Ha,"Map");const Gm=wU;function TU(){this.size=0,this.__data__={hash:new cd,map:new(Gm||Pl),string:new cd}}function CU(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function n0(e,t){var n=e.__data__;return CU(t)?n[typeof t=="string"?"string":"hash"]:n.map}function SU(e){var t=n0(this,e).delete(e);return this.size-=t?1:0,t}function EU(e){return n0(this,e).get(e)}function MU(e){return n0(this,e).has(e)}function PU(e,t){var n=n0(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function Al(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Al.prototype.clear=TU;Al.prototype.delete=SU;Al.prototype.get=EU;Al.prototype.has=MU;Al.prototype.set=PU;var AU="Expected a function";function CT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(AU);var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],u=n.cache;if(u.has(s))return u.get(s);var d=e.apply(this,i);return n.cache=u.set(s,d)||u,d};return n.cache=new(CT.Cache||Al),n}CT.Cache=Al;var kU=500;function DU(e){var t=CT(e,function(i){return n.size===kU&&n.clear(),i}),n=t.cache;return t}var IU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zU=/\\(\\)?/g,RU=DU(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(IU,function(n,i,s,u){t.push(s?u.replace(zU,"$1"):i||n)}),t});const OU=RU;function rI(e){return e==null?"":XD(e)}function iI(e,t){return Us(e)?e:TT(e,t)?[e]:OU(rI(e))}var LU=1/0;function r0(e){if(typeof e=="string"||pT(e))return e;var t=e+"";return t=="0"&&1/e==-LU?"-0":t}function oI(e,t){t=iI(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[r0(t[n++])];return n&&n==i?e:void 0}function BU(e,t,n){var i=e==null?void 0:oI(e,t);return i===void 0?n:i}function FU(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}var $U=tI(Object.getPrototypeOf,Object);const sI=$U;var NU="[object Object]",UU=Function.prototype,VU=Object.prototype,aI=UU.toString,jU=VU.hasOwnProperty,WU=aI.call(Object);function HU(e){if(!zc(e)||_d(e)!=NU)return!1;var t=sI(e);if(t===null)return!0;var n=jU.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&aI.call(n)==WU}function GU(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var u=Array(s);++i<s;)u[i]=e[i+t];return u}function qU(e,t,n){var i=e.length;return n=n===void 0?i:n,!t&&n>=i?e:GU(e,t,n)}var ZU="\\ud800-\\udfff",YU="\\u0300-\\u036f",XU="\\ufe20-\\ufe2f",KU="\\u20d0-\\u20ff",JU=YU+XU+KU,QU="\\ufe0e\\ufe0f",eV="\\u200d",tV=RegExp("["+eV+ZU+JU+QU+"]");function lI(e){return tV.test(e)}function nV(e){return e.split("")}var cI="\\ud800-\\udfff",rV="\\u0300-\\u036f",iV="\\ufe20-\\ufe2f",oV="\\u20d0-\\u20ff",sV=rV+iV+oV,aV="\\ufe0e\\ufe0f",lV="["+cI+"]",p1="["+sV+"]",m1="\\ud83c[\\udffb-\\udfff]",cV="(?:"+p1+"|"+m1+")",uI="[^"+cI+"]",dI="(?:\\ud83c[\\udde6-\\uddff]){2}",hI="[\\ud800-\\udbff][\\udc00-\\udfff]",uV="\\u200d",fI=cV+"?",pI="["+aV+"]?",dV="(?:"+uV+"(?:"+[uI,dI,hI].join("|")+")"+pI+fI+")*",hV=pI+fI+dV,fV="(?:"+[uI+p1+"?",p1,dI,hI,lV].join("|")+")",pV=RegExp(m1+"(?="+m1+")|"+fV+hV,"g");function mV(e){return e.match(pV)||[]}function gV(e){return lI(e)?mV(e):nV(e)}function vV(e){return function(t){t=rI(t);var n=lI(t)?gV(t):void 0,i=n?n[0]:t.charAt(0),s=n?qU(n,1).join(""):t.slice(1);return i[e]()+s}}var _V=vV("toUpperCase");const yV=_V;function xV(){this.__data__=new Pl,this.size=0}function bV(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function wV(e){return this.__data__.get(e)}function TV(e){return this.__data__.has(e)}var CV=200;function SV(e,t){var n=this.__data__;if(n instanceof Pl){var i=n.__data__;if(!Gm||i.length<CV-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Al(i)}return n.set(e,t),this.size=n.size,this}function Na(e){var t=this.__data__=new Pl(e);this.size=t.size}Na.prototype.clear=xV;Na.prototype.delete=bV;Na.prototype.get=wV;Na.prototype.has=TV;Na.prototype.set=SV;var mI=typeof bs=="object"&&bs&&!bs.nodeType&&bs,CM=mI&&typeof ws=="object"&&ws&&!ws.nodeType&&ws,EV=CM&&CM.exports===mI,SM=EV?Ha.Buffer:void 0,EM=SM?SM.allocUnsafe:void 0;function MV(e,t){if(t)return e.slice();var n=e.length,i=EM?EM(n):new e.constructor(n);return e.copy(i),i}function PV(e,t){for(var n=-1,i=e==null?0:e.length,s=0,u=[];++n<i;){var d=e[n];t(d,n,e)&&(u[s++]=d)}return u}function AV(){return[]}var kV=Object.prototype,DV=kV.propertyIsEnumerable,MM=Object.getOwnPropertySymbols,IV=MM?function(e){return e==null?[]:(e=Object(e),PV(MM(e),function(t){return DV.call(e,t)}))}:AV;const zV=IV;function RV(e,t,n){var i=t(e);return Us(e)?i:FU(i,n(e))}function PM(e){return RV(e,wT,zV)}var OV=xd(Ha,"DataView");const g1=OV;var LV=xd(Ha,"Promise");const v1=LV;var BV=xd(Ha,"Set");const _1=BV;var AM="[object Map]",FV="[object Object]",kM="[object Promise]",DM="[object Set]",IM="[object WeakMap]",zM="[object DataView]",$V=yd(g1),NV=yd(Gm),UV=yd(v1),VV=yd(_1),jV=yd(f1),Uu=_d;(g1&&Uu(new g1(new ArrayBuffer(1)))!=zM||Gm&&Uu(new Gm)!=AM||v1&&Uu(v1.resolve())!=kM||_1&&Uu(new _1)!=DM||f1&&Uu(new f1)!=IM)&&(Uu=function(e){var t=_d(e),n=t==FV?e.constructor:void 0,i=n?yd(n):"";if(i)switch(i){case $V:return zM;case NV:return AM;case UV:return kM;case VV:return DM;case jV:return IM}return t});const RM=Uu;var WV=Ha.Uint8Array;const yy=WV;function HV(e){var t=new e.constructor(e.byteLength);return new yy(t).set(new yy(e)),t}function GV(e,t){var n=t?HV(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function qV(e){return typeof e.constructor=="function"&&!xT(e)?O6(sI(e)):{}}var ZV="__lodash_hash_undefined__";function YV(e){return this.__data__.set(e,ZV),this}function XV(e){return this.__data__.has(e)}function xy(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Al;++t<n;)this.add(e[t])}xy.prototype.add=xy.prototype.push=YV;xy.prototype.has=XV;function KV(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function JV(e,t){return e.has(t)}var QV=1,ej=2;function gI(e,t,n,i,s,u){var d=n&QV,o=e.length,m=t.length;if(o!=m&&!(d&&m>o))return!1;var y=u.get(e),w=u.get(t);if(y&&w)return y==t&&w==e;var S=-1,A=!0,I=n&ej?new xy:void 0;for(u.set(e,t),u.set(t,e);++S<o;){var z=e[S],U=t[S];if(i)var j=d?i(U,z,S,t,e,u):i(z,U,S,e,t,u);if(j!==void 0){if(j)continue;A=!1;break}if(I){if(!KV(t,function(F,H){if(!JV(I,H)&&(z===F||s(z,F,n,i,u)))return I.push(H)})){A=!1;break}}else if(!(z===U||s(z,U,n,i,u))){A=!1;break}}return u.delete(e),u.delete(t),A}function tj(e){var t=-1,n=Array(e.size);return e.forEach(function(i,s){n[++t]=[s,i]}),n}function nj(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}var rj=1,ij=2,oj="[object Boolean]",sj="[object Date]",aj="[object Error]",lj="[object Map]",cj="[object Number]",uj="[object RegExp]",dj="[object Set]",hj="[object String]",fj="[object Symbol]",pj="[object ArrayBuffer]",mj="[object DataView]",OM=Ic?Ic.prototype:void 0,ab=OM?OM.valueOf:void 0;function gj(e,t,n,i,s,u,d){switch(n){case mj:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pj:return!(e.byteLength!=t.byteLength||!u(new yy(e),new yy(t)));case oj:case sj:case cj:return hg(+e,+t);case aj:return e.name==t.name&&e.message==t.message;case uj:case hj:return e==t+"";case lj:var o=tj;case dj:var m=i&rj;if(o||(o=nj),e.size!=t.size&&!m)return!1;var y=d.get(e);if(y)return y==t;i|=ij,d.set(e,t);var w=gI(o(e),o(t),i,s,u,d);return d.delete(e),w;case fj:if(ab)return ab.call(e)==ab.call(t)}return!1}var vj=1,_j=Object.prototype,yj=_j.hasOwnProperty;function xj(e,t,n,i,s,u){var d=n&vj,o=PM(e),m=o.length,y=PM(t),w=y.length;if(m!=w&&!d)return!1;for(var S=m;S--;){var A=o[S];if(!(d?A in t:yj.call(t,A)))return!1}var I=u.get(e),z=u.get(t);if(I&&z)return I==t&&z==e;var U=!0;u.set(e,t),u.set(t,e);for(var j=d;++S<m;){A=o[S];var F=e[A],H=t[A];if(i)var J=d?i(H,F,A,t,e,u):i(F,H,A,e,t,u);if(!(J===void 0?F===H||s(F,H,n,i,u):J)){U=!1;break}j||(j=A=="constructor")}if(U&&!j){var Z=e.constructor,Y=t.constructor;Z!=Y&&"constructor"in e&&"constructor"in t&&!(typeof Z=="function"&&Z instanceof Z&&typeof Y=="function"&&Y instanceof Y)&&(U=!1)}return u.delete(e),u.delete(t),U}var bj=1,LM="[object Arguments]",BM="[object Array]",v_="[object Object]",wj=Object.prototype,FM=wj.hasOwnProperty;function Tj(e,t,n,i,s,u){var d=Us(e),o=Us(t),m=d?BM:RM(e),y=o?BM:RM(t);m=m==LM?v_:m,y=y==LM?v_:y;var w=m==v_,S=y==v_,A=m==y;if(A&&_y(e)){if(!_y(t))return!1;d=!0,w=!1}if(A&&!w)return u||(u=new Na),d||bT(e)?gI(e,t,n,i,s,u):gj(e,t,m,n,i,s,u);if(!(n&bj)){var I=w&&FM.call(e,"__wrapped__"),z=S&&FM.call(t,"__wrapped__");if(I||z){var U=I?e.value():e,j=z?t.value():t;return u||(u=new Na),s(U,j,n,i,u)}}return A?(u||(u=new Na),xj(e,t,n,i,s,u)):!1}function ST(e,t,n,i,s){return e===t?!0:e==null||t==null||!zc(e)&&!zc(t)?e!==e&&t!==t:Tj(e,t,n,i,ST,s)}var Cj=1,Sj=2;function Ej(e,t,n,i){var s=n.length,u=s,d=!i;if(e==null)return!u;for(e=Object(e);s--;){var o=n[s];if(d&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<u;){o=n[s];var m=o[0],y=e[m],w=o[1];if(d&&o[2]){if(y===void 0&&!(m in e))return!1}else{var S=new Na;if(i)var A=i(y,w,m,e,t,S);if(!(A===void 0?ST(w,y,Cj|Sj,i,S):A))return!1}}return!0}function vI(e){return e===e&&!Lc(e)}function Mj(e){for(var t=wT(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,vI(s)]}return t}function _I(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function Pj(e){var t=Mj(e);return t.length==1&&t[0][2]?_I(t[0][0],t[0][1]):function(n){return n===e||Ej(n,e,t)}}function Aj(e,t){return e!=null&&t in Object(e)}function kj(e,t,n){t=iI(t,e);for(var i=-1,s=t.length,u=!1;++i<s;){var d=r0(t[i]);if(!(u=e!=null&&n(e,d)))break;e=e[d]}return u||++i!=s?u:(s=e==null?0:e.length,!!s&&yT(s)&&vT(d,s)&&(Us(e)||vy(e)))}function Dj(e,t){return e!=null&&kj(e,t,Aj)}var Ij=1,zj=2;function Rj(e,t){return TT(e)&&vI(t)?_I(r0(e),t):function(n){var i=BU(n,e);return i===void 0&&i===t?Dj(n,e):ST(t,i,Ij|zj)}}function Oj(e){return function(t){return t==null?void 0:t[e]}}function Lj(e){return function(t){return oI(t,e)}}function Bj(e){return TT(e)?Oj(r0(e)):Lj(e)}function Fj(e){return typeof e=="function"?e:e==null?mT:typeof e=="object"?Us(e)?Rj(e[0],e[1]):Pj(e):Bj(e)}function $j(e){return function(t,n,i){for(var s=-1,u=Object(t),d=i(t),o=d.length;o--;){var m=d[e?o:++s];if(n(u[m],m,u)===!1)break}return t}}var Nj=$j();const yI=Nj;function Uj(e,t){return e&&yI(e,t,wT)}function Vj(e,t){return function(n,i){if(n==null)return n;if(!bf(n))return e(n,i);for(var s=n.length,u=t?s:-1,d=Object(n);(t?u--:++u<s)&&i(d[u],u,d)!==!1;);return n}}var jj=Vj(Uj);const Wj=jj;function y1(e,t,n){(n!==void 0&&!hg(e[t],n)||n===void 0&&!(t in e))&&_T(e,t,n)}function Hj(e){return zc(e)&&bf(e)}function x1(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Gj(e){return Q6(e,nI(e))}function qj(e,t,n,i,s,u,d){var o=x1(e,n),m=x1(t,n),y=d.get(m);if(y){y1(e,n,y);return}var w=u?u(o,m,n+"",e,t,d):void 0,S=w===void 0;if(S){var A=Us(m),I=!A&&_y(m),z=!A&&!I&&bT(m);w=m,A||I||z?Us(o)?w=o:Hj(o)?w=B6(o):I?(S=!1,w=MV(m,!0)):z?(S=!1,w=GV(m,!0)):w=[]:HU(m)||vy(m)?(w=o,vy(o)?w=Gj(o):(!Lc(o)||gT(o))&&(w=qV(m))):S=!1}S&&(d.set(m,w),s(w,m,i,u,d),d.delete(m)),y1(e,n,w)}function xI(e,t,n,i,s){e!==t&&yI(t,function(u,d){if(s||(s=new Na),Lc(u))qj(e,t,d,n,xI,i,s);else{var o=i?i(x1(e,d),u,d+"",e,t,s):void 0;o===void 0&&(o=u),y1(e,d,o)}},nI)}function Zj(e,t){var n=-1,i=bf(e)?Array(e.length):[];return Wj(e,function(s,u,d){i[++n]=t(s,u,d)}),i}function Yj(e,t){var n=Us(e)?YD:Zj;return n(e,Fj(t))}var Xj=iN(function(e,t,n){xI(e,t,n)});const __=Xj,Bc={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize:Kj,fontFamily:Jj,lineHeight:Qj}=Bc,bI=Ze("body",`
 margin: 0;
 font-size: ${Kj};
 font-family: ${Jj};
 line-height: ${Qj};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[Ze("input",`
 font-family: inherit;
 font-size: inherit;
 `)]),bd="n-config-provider",qm="naive-ui-style";function ur(e,t,n,i,s,u){const d=vd(),o=fr(bd,null);if(n){const y=()=>{const w=u==null?void 0:u.value;n.mount({id:w===void 0?t:w+t,head:!0,props:{bPrefix:w?`.${w}-`:void 0},anchorMetaName:qm,ssr:d}),o!=null&&o.preflightStyleDisabled||bI.mount({id:"n-global",head:!0,anchorMetaName:qm,ssr:d})};d?y():sg(y)}return Le(()=>{var y;const{theme:{common:w,self:S,peers:A={}}={},themeOverrides:I={},builtinThemeOverrides:z={}}=s,{common:U,peers:j}=I,{common:F=void 0,[e]:{common:H=void 0,self:J=void 0,peers:Z={}}={}}=(o==null?void 0:o.mergedThemeRef.value)||{},{common:Y=void 0,[e]:ce={}}=(o==null?void 0:o.mergedThemeOverridesRef.value)||{},{common:ee,peers:de={}}=ce,ue=__({},w||H||F||i.common,Y,ee,U),Ee=__((y=S||J||i.self)===null||y===void 0?void 0:y(ue),z,ce,I);return{common:ue,self:Ee,peers:__({},i.peers,Z,A),peerOverrides:__({},z.peers,de,j)}})}ur.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const e8="n";function Ki(e={},t={defaultBordered:!0}){const n=fr(bd,null);return{inlineThemeDisabled:n==null?void 0:n.inlineThemeDisabled,mergedRtlRef:n==null?void 0:n.mergedRtlRef,mergedComponentPropsRef:n==null?void 0:n.mergedComponentPropsRef,mergedBreakpointsRef:n==null?void 0:n.mergedBreakpointsRef,mergedBorderedRef:Le(()=>{var i,s;const{bordered:u}=e;return u!==void 0?u:(s=(i=n==null?void 0:n.mergedBorderedRef.value)!==null&&i!==void 0?i:t.defaultBordered)!==null&&s!==void 0?s:!0}),mergedClsPrefixRef:Le(()=>(n==null?void 0:n.mergedClsPrefixRef.value)||e8),namespaceRef:Le(()=>n==null?void 0:n.mergedNamespaceRef.value)}}const t8={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:e=>`Please load all ${e}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:e=>`Total ${e} items`,selected:e=>`${e} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture ()",tipNext:"Next picture ()",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}},n8=t8;function lb(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,i=e.formats[n]||e.formats[e.defaultWidth];return i}}function Nn(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ja(e){return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(e)}function qn(e){Nn(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ja(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ni(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var r8={};function wf(){return r8}function ud(e,t){var n,i,s,u,d,o,m,y;Nn(1,arguments);var w=wf(),S=ni((n=(i=(s=(u=t==null?void 0:t.weekStartsOn)!==null&&u!==void 0?u:t==null||(d=t.locale)===null||d===void 0||(o=d.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&s!==void 0?s:w.weekStartsOn)!==null&&i!==void 0?i:(m=w.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=qn(e),I=A.getUTCDay(),z=(I<S?7:0)+I-S;return A.setUTCDate(A.getUTCDate()-z),A.setUTCHours(0,0,0,0),A}function Kp(e){return function(t,n){var i=n!=null&&n.context?String(n.context):"standalone",s;if(i==="formatting"&&e.formattingValues){var u=e.defaultFormattingWidth||e.defaultWidth,d=n!=null&&n.width?String(n.width):u;s=e.formattingValues[d]||e.formattingValues[u]}else{var o=e.defaultWidth,m=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[m]||e.values[o]}var y=e.argumentCallback?e.argumentCallback(t):t;return s[y]}}function Jp(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=t.match(s);if(!u)return null;var d=u[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(o)?o8(o,function(S){return S.test(d)}):i8(o,function(S){return S.test(d)}),y;y=e.valueCallback?e.valueCallback(m):m,y=n.valueCallback?n.valueCallback(y):y;var w=t.slice(d.length);return{value:y,rest:w}}}function i8(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function o8(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function s8(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.match(e.matchPattern);if(!i)return null;var s=i[0],u=t.match(e.parsePattern);if(!u)return null;var d=e.valueCallback?e.valueCallback(u[0]):u[0];d=n.valueCallback?n.valueCallback(d):d;var o=t.slice(s.length);return{value:d,rest:o}}}var a8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},l8=function(t,n,i){var s,u=a8[t];return typeof u=="string"?s=u:n===1?s=u.one:s=u.other.replace("{{count}}",n.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};const c8=l8;var u8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},d8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},h8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f8={date:lb({formats:u8,defaultWidth:"full"}),time:lb({formats:d8,defaultWidth:"full"}),dateTime:lb({formats:h8,defaultWidth:"full"})};const p8=f8;var m8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g8=function(t,n,i,s){return m8[t]};const v8=g8;var _8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},x8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},b8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},T8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},C8=function(t,n){var i=Number(t),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},S8={ordinalNumber:C8,era:Kp({values:_8,defaultWidth:"wide"}),quarter:Kp({values:y8,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Kp({values:x8,defaultWidth:"wide"}),day:Kp({values:b8,defaultWidth:"wide"}),dayPeriod:Kp({values:w8,defaultWidth:"wide",formattingValues:T8,defaultFormattingWidth:"wide"})};const E8=S8;var M8=/^(\d+)(th|st|nd|rd)?/i,P8=/\d+/i,A8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},k8={any:[/^b/i,/^(a|c)/i]},D8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},I8={any:[/1/i,/2/i,/3/i,/4/i]},z8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},R8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},O8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},B8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},F8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$8={ordinalNumber:s8({matchPattern:M8,parsePattern:P8,valueCallback:function(t){return parseInt(t,10)}}),era:Jp({matchPatterns:A8,defaultMatchWidth:"wide",parsePatterns:k8,defaultParseWidth:"any"}),quarter:Jp({matchPatterns:D8,defaultMatchWidth:"wide",parsePatterns:I8,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Jp({matchPatterns:z8,defaultMatchWidth:"wide",parsePatterns:R8,defaultParseWidth:"any"}),day:Jp({matchPatterns:O8,defaultMatchWidth:"wide",parsePatterns:L8,defaultParseWidth:"any"}),dayPeriod:Jp({matchPatterns:B8,defaultMatchWidth:"any",parsePatterns:F8,defaultParseWidth:"any"})};const N8=$8;var U8={code:"en-US",formatDistance:c8,formatLong:p8,formatRelative:v8,localize:E8,match:N8,options:{weekStartsOn:0,firstWeekContainsDate:1}};const ET=U8,V8={name:"en-US",locale:ET},j8=V8;function y_(e,t){Nn(2,arguments);var n=qn(e),i=ni(t);return isNaN(i)?new Date(NaN):(i&&n.setDate(n.getDate()+i),n)}function To(e,t){Nn(2,arguments);var n=qn(e),i=ni(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var s=n.getDate(),u=new Date(n.getTime());u.setMonth(n.getMonth()+i+1,0);var d=u.getDate();return s>=d?u:(n.setFullYear(u.getFullYear(),u.getMonth(),s),n)}function W8(e,t){Nn(2,arguments);var n=qn(e).getTime(),i=ni(t);return new Date(n+i)}function wI(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function by(e){Nn(1,arguments);var t=qn(e);return t.setHours(0,0,0,0),t}function H8(e,t){Nn(2,arguments);var n=ni(t),i=n*3;return To(e,i)}function b1(e,t){Nn(2,arguments);var n=ni(t);return To(e,n*12)}var G8=6e4,q8=36e5,Z8=1e3;function Y8(e,t){Nn(2,arguments);var n=by(e),i=by(t);return n.getTime()===i.getTime()}function X8(e){return Nn(1,arguments),e instanceof Date||ja(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ls(e){if(Nn(1,arguments),!X8(e)&&typeof e!="number")return!1;var t=qn(e);return!isNaN(Number(t))}function K8(e){Nn(1,arguments);var t=qn(e),n=Math.floor(t.getMonth()/3)+1;return n}function J8(e){Nn(1,arguments);var t=qn(e);return t.setSeconds(0,0),t}function Zm(e){Nn(1,arguments);var t=qn(e),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function vl(e){Nn(1,arguments);var t=qn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function MT(e){Nn(1,arguments);var t=qn(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function TI(e,t){Nn(2,arguments);var n=ni(t);return W8(e,-n)}var Q8=864e5;function eW(e){Nn(1,arguments);var t=qn(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),s=n-i;return Math.floor(s/Q8)+1}function tf(e){Nn(1,arguments);var t=1,n=qn(e),i=n.getUTCDay(),s=(i<t?7:0)+i-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function CI(e){Nn(1,arguments);var t=qn(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var s=tf(i),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var d=tf(u);return t.getTime()>=s.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function tW(e){Nn(1,arguments);var t=CI(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var i=tf(n);return i}var nW=6048e5;function SI(e){Nn(1,arguments);var t=qn(e),n=tf(t).getTime()-tW(t).getTime();return Math.round(n/nW)+1}function PT(e,t){var n,i,s,u,d,o,m,y;Nn(1,arguments);var w=qn(e),S=w.getUTCFullYear(),A=wf(),I=ni((n=(i=(s=(u=t==null?void 0:t.firstWeekContainsDate)!==null&&u!==void 0?u:t==null||(d=t.locale)===null||d===void 0||(o=d.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&s!==void 0?s:A.firstWeekContainsDate)!==null&&i!==void 0?i:(m=A.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=new Date(0);z.setUTCFullYear(S+1,0,I),z.setUTCHours(0,0,0,0);var U=ud(z,t),j=new Date(0);j.setUTCFullYear(S,0,I),j.setUTCHours(0,0,0,0);var F=ud(j,t);return w.getTime()>=U.getTime()?S+1:w.getTime()>=F.getTime()?S:S-1}function rW(e,t){var n,i,s,u,d,o,m,y;Nn(1,arguments);var w=wf(),S=ni((n=(i=(s=(u=t==null?void 0:t.firstWeekContainsDate)!==null&&u!==void 0?u:t==null||(d=t.locale)===null||d===void 0||(o=d.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&s!==void 0?s:w.firstWeekContainsDate)!==null&&i!==void 0?i:(m=w.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&n!==void 0?n:1),A=PT(e,t),I=new Date(0);I.setUTCFullYear(A,0,S),I.setUTCHours(0,0,0,0);var z=ud(I,t);return z}var iW=6048e5;function EI(e,t){Nn(1,arguments);var n=qn(e),i=ud(n,t).getTime()-rW(n,t).getTime();return Math.round(i/iW)+1}function Qr(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}var oW={y:function(t,n){var i=t.getUTCFullYear(),s=i>0?i:1-i;return Qr(n==="yy"?s%100:s,n.length)},M:function(t,n){var i=t.getUTCMonth();return n==="M"?String(i+1):Qr(i+1,2)},d:function(t,n){return Qr(t.getUTCDate(),n.length)},a:function(t,n){var i=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(t,n){return Qr(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Qr(t.getUTCHours(),n.length)},m:function(t,n){return Qr(t.getUTCMinutes(),n.length)},s:function(t,n){return Qr(t.getUTCSeconds(),n.length)},S:function(t,n){var i=n.length,s=t.getUTCMilliseconds(),u=Math.floor(s*Math.pow(10,i-3));return Qr(u,n.length)}};const fc=oW;var zh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sW={G:function(t,n,i){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});case"GGGG":default:return i.era(s,{width:"wide"})}},y:function(t,n,i){if(n==="yo"){var s=t.getUTCFullYear(),u=s>0?s:1-s;return i.ordinalNumber(u,{unit:"year"})}return fc.y(t,n)},Y:function(t,n,i,s){var u=PT(t,s),d=u>0?u:1-u;if(n==="YY"){var o=d%100;return Qr(o,2)}return n==="Yo"?i.ordinalNumber(d,{unit:"year"}):Qr(d,n.length)},R:function(t,n){var i=CI(t);return Qr(i,n.length)},u:function(t,n){var i=t.getUTCFullYear();return Qr(i,n.length)},Q:function(t,n,i){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Qr(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,i){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Qr(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,i){var s=t.getUTCMonth();switch(n){case"M":case"MM":return fc.M(t,n);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,i){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Qr(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,i,s){var u=EI(t,s);return n==="wo"?i.ordinalNumber(u,{unit:"week"}):Qr(u,n.length)},I:function(t,n,i){var s=SI(t);return n==="Io"?i.ordinalNumber(s,{unit:"week"}):Qr(s,n.length)},d:function(t,n,i){return n==="do"?i.ordinalNumber(t.getUTCDate(),{unit:"date"}):fc.d(t,n)},D:function(t,n,i){var s=eW(t);return n==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):Qr(s,n.length)},E:function(t,n,i){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});case"EEEE":default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,i,s){var u=t.getUTCDay(),d=(u-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return Qr(d,2);case"eo":return i.ordinalNumber(d,{unit:"day"});case"eee":return i.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(u,{width:"short",context:"formatting"});case"eeee":default:return i.day(u,{width:"wide",context:"formatting"})}},c:function(t,n,i,s){var u=t.getUTCDay(),d=(u-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return Qr(d,n.length);case"co":return i.ordinalNumber(d,{unit:"day"});case"ccc":return i.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(u,{width:"narrow",context:"standalone"});case"cccccc":return i.day(u,{width:"short",context:"standalone"});case"cccc":default:return i.day(u,{width:"wide",context:"standalone"})}},i:function(t,n,i){var s=t.getUTCDay(),u=s===0?7:s;switch(n){case"i":return String(u);case"ii":return Qr(u,n.length);case"io":return i.ordinalNumber(u,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});case"iiii":default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,i){var s=t.getUTCHours(),u=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(t,n,i){var s=t.getUTCHours(),u;switch(s===12?u=zh.noon:s===0?u=zh.midnight:u=s/12>=1?"pm":"am",n){case"b":case"bb":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(t,n,i){var s=t.getUTCHours(),u;switch(s>=17?u=zh.evening:s>=12?u=zh.afternoon:s>=4?u=zh.morning:u=zh.night,n){case"B":case"BB":case"BBB":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(t,n,i){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return fc.h(t,n)},H:function(t,n,i){return n==="Ho"?i.ordinalNumber(t.getUTCHours(),{unit:"hour"}):fc.H(t,n)},K:function(t,n,i){var s=t.getUTCHours()%12;return n==="Ko"?i.ordinalNumber(s,{unit:"hour"}):Qr(s,n.length)},k:function(t,n,i){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?i.ordinalNumber(s,{unit:"hour"}):Qr(s,n.length)},m:function(t,n,i){return n==="mo"?i.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):fc.m(t,n)},s:function(t,n,i){return n==="so"?i.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):fc.s(t,n)},S:function(t,n){return fc.S(t,n)},X:function(t,n,i,s){var u=s._originalDate||t,d=u.getTimezoneOffset();if(d===0)return"Z";switch(n){case"X":return NM(d);case"XXXX":case"XX":return Vu(d);case"XXXXX":case"XXX":default:return Vu(d,":")}},x:function(t,n,i,s){var u=s._originalDate||t,d=u.getTimezoneOffset();switch(n){case"x":return NM(d);case"xxxx":case"xx":return Vu(d);case"xxxxx":case"xxx":default:return Vu(d,":")}},O:function(t,n,i,s){var u=s._originalDate||t,d=u.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+$M(d,":");case"OOOO":default:return"GMT"+Vu(d,":")}},z:function(t,n,i,s){var u=s._originalDate||t,d=u.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+$M(d,":");case"zzzz":default:return"GMT"+Vu(d,":")}},t:function(t,n,i,s){var u=s._originalDate||t,d=Math.floor(u.getTime()/1e3);return Qr(d,n.length)},T:function(t,n,i,s){var u=s._originalDate||t,d=u.getTime();return Qr(d,n.length)}};function $M(e,t){var n=e>0?"-":"+",i=Math.abs(e),s=Math.floor(i/60),u=i%60;if(u===0)return n+String(s);var d=t||"";return n+String(s)+d+Qr(u,2)}function NM(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Qr(Math.abs(e)/60,2)}return Vu(e,t)}function Vu(e,t){var n=t||"",i=e>0?"-":"+",s=Math.abs(e),u=Qr(Math.floor(s/60),2),d=Qr(s%60,2);return i+u+n+d}const aW=sW;var UM=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},MI=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},lW=function(t,n){var i=t.match(/(P+)(p+)?/)||[],s=i[1],u=i[2];if(!u)return UM(t,n);var d;switch(s){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",UM(s,n)).replace("{{time}}",MI(u,n))},cW={p:MI,P:lW};const w1=cW;var uW=["D","DD"],dW=["YY","YYYY"];function PI(e){return uW.indexOf(e)!==-1}function AI(e){return dW.indexOf(e)!==-1}function wy(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pW=/^'([^]*?)'?$/,mW=/''/g,gW=/[a-zA-Z]/;function mi(e,t,n){var i,s,u,d,o,m,y,w,S,A,I,z,U,j,F,H,J,Z;Nn(2,arguments);var Y=String(t),ce=wf(),ee=(i=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:ce.locale)!==null&&i!==void 0?i:ET,de=ni((u=(d=(o=(m=n==null?void 0:n.firstWeekContainsDate)!==null&&m!==void 0?m:n==null||(y=n.locale)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&o!==void 0?o:ce.firstWeekContainsDate)!==null&&d!==void 0?d:(S=ce.locale)===null||S===void 0||(A=S.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&u!==void 0?u:1);if(!(de>=1&&de<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ue=ni((I=(z=(U=(j=n==null?void 0:n.weekStartsOn)!==null&&j!==void 0?j:n==null||(F=n.locale)===null||F===void 0||(H=F.options)===null||H===void 0?void 0:H.weekStartsOn)!==null&&U!==void 0?U:ce.weekStartsOn)!==null&&z!==void 0?z:(J=ce.locale)===null||J===void 0||(Z=J.options)===null||Z===void 0?void 0:Z.weekStartsOn)!==null&&I!==void 0?I:0);if(!(ue>=0&&ue<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ee.localize)throw new RangeError("locale must contain localize property");if(!ee.formatLong)throw new RangeError("locale must contain formatLong property");var Ee=qn(e);if(!Ls(Ee))throw new RangeError("Invalid time value");var ze=wI(Ee),xe=TI(Ee,ze),qe={firstWeekContainsDate:de,weekStartsOn:ue,locale:ee,_originalDate:Ee},Qe=Y.match(fW).map(function(Be){var st=Be[0];if(st==="p"||st==="P"){var it=w1[st];return it(Be,ee.formatLong)}return Be}).join("").match(hW).map(function(Be){if(Be==="''")return"'";var st=Be[0];if(st==="'")return vW(Be);var it=aW[st];if(it)return!(n!=null&&n.useAdditionalWeekYearTokens)&&AI(Be)&&wy(Be,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&PI(Be)&&wy(Be,t,String(e)),it(xe,Be,ee.localize,qe);if(st.match(gW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+st+"`");return Be}).join("");return Qe}function vW(e){var t=e.match(pW);return t?t[1].replace(mW,"'"):e}function _W(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function na(e){Nn(1,arguments);var t=qn(e),n=t.getDate();return n}function yW(e){Nn(1,arguments);var t=qn(e),n=t.getDay();return n}function xW(e){Nn(1,arguments);var t=qn(e),n=t.getFullYear(),i=t.getMonth(),s=new Date(0);return s.setFullYear(n,i+1,0),s.setHours(0,0,0,0),s.getDate()}function xc(e){Nn(1,arguments);var t=qn(e),n=t.getHours();return n}function Ty(e){Nn(1,arguments);var t=qn(e),n=t.getMinutes();return n}function fi(e){Nn(1,arguments);var t=qn(e),n=t.getMonth();return n}function Cy(e){Nn(1,arguments);var t=qn(e),n=t.getSeconds();return n}function fn(e){Nn(1,arguments);var t=qn(e),n=t.getTime();return n}function ki(e){return Nn(1,arguments),qn(e).getFullYear()}function VM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function bW(e,t){if(e){if(typeof e=="string")return VM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VM(e,t)}}function jM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bW(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(y){throw y},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,d=!1,o;return{s:function(){n=n.call(e)},n:function(){var y=n.next();return u=y.done,y},e:function(y){d=!0,o=y},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(d)throw o}}}}function Pn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T1(e,t){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},T1(e,t)}function Fr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T1(e,t)}function Sy(e){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sy(e)}function wW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function TW(e,t){if(t&&(ja(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}function $r(e){var t=wW();return function(){var i=Sy(e),s;if(t){var u=Sy(this).constructor;s=Reflect.construct(i,arguments,u)}else s=i.apply(this,arguments);return TW(this,s)}}function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CW(e,t){if(ja(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(ja(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kI(e){var t=CW(e,"string");return ja(t)==="symbol"?t:String(t)}function WM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,kI(i.key),i)}}function Mr(e,t,n){return t&&WM(e.prototype,t),n&&WM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bn(e,t,n){return t=kI(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SW=10,DI=function(){function e(){Er(this,e),bn(this,"priority",void 0),bn(this,"subPriority",0)}return Mr(e,[{key:"validate",value:function(n,i){return!0}}]),e}(),EW=function(e){Fr(n,e);var t=$r(n);function n(i,s,u,d,o){var m;return Er(this,n),m=t.call(this),m.value=i,m.validateValue=s,m.setValue=u,m.priority=d,o&&(m.subPriority=o),m}return Mr(n,[{key:"validate",value:function(s,u){return this.validateValue(s,this.value,u)}},{key:"set",value:function(s,u,d){return this.setValue(s,u,this.value,d)}}]),n}(DI),MW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",SW),bn(Pn(i),"subPriority",-1),i}return Mr(n,[{key:"set",value:function(s,u){if(u.timestampIsSet)return s;var d=new Date(0);return d.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),d.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),d}}]),n}(DI),qr=function(){function e(){Er(this,e),bn(this,"incompatibleTokens",void 0),bn(this,"priority",void 0),bn(this,"subPriority",void 0)}return Mr(e,[{key:"run",value:function(n,i,s,u){var d=this.parse(n,i,s,u);return d?{setter:new EW(d.value,this.validate,this.set,this.priority,this.subPriority),rest:d.rest}:null}},{key:"validate",value:function(n,i,s){return!0}}]),e}(),PW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",140),bn(Pn(i),"incompatibleTokens",["R","u","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"G":case"GG":case"GGG":return d.era(s,{width:"abbreviated"})||d.era(s,{width:"narrow"});case"GGGGG":return d.era(s,{width:"narrow"});case"GGGG":default:return d.era(s,{width:"wide"})||d.era(s,{width:"abbreviated"})||d.era(s,{width:"narrow"})}}},{key:"set",value:function(s,u,d){return u.era=d,s.setUTCFullYear(d,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr),ji={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},La={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Wi(e,t){return e&&{value:t(e.value),rest:e.rest}}function Ii(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Ba(e,t){var n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};var i=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,u=n[3]?parseInt(n[3],10):0,d=n[5]?parseInt(n[5],10):0;return{value:i*(s*q8+u*G8+d*Z8),rest:t.slice(n[0].length)}}function II(e){return Ii(ji.anyDigitsSigned,e)}function $i(e,t){switch(e){case 1:return Ii(ji.singleDigit,t);case 2:return Ii(ji.twoDigits,t);case 3:return Ii(ji.threeDigits,t);case 4:return Ii(ji.fourDigits,t);default:return Ii(new RegExp("^\\d{1,"+e+"}"),t)}}function Ey(e,t){switch(e){case 1:return Ii(ji.singleDigitSigned,t);case 2:return Ii(ji.twoDigitsSigned,t);case 3:return Ii(ji.threeDigitsSigned,t);case 4:return Ii(ji.fourDigitsSigned,t);default:return Ii(new RegExp("^-?\\d{1,"+e+"}"),t)}}function AT(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zI(e,t){var n=t>0,i=n?t:1-t,s;if(i<=50)s=e||100;else{var u=i+50,d=Math.floor(u/100)*100,o=e>=u%100;s=e+d-(o?100:0)}return n?s:1-s}function RI(e){return e%400===0||e%4===0&&e%100!==0}var AW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",130),bn(Pn(i),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){var o=function(y){return{year:y,isTwoDigitYear:u==="yy"}};switch(u){case"y":return Wi($i(4,s),o);case"yo":return Wi(d.ordinalNumber(s,{unit:"year"}),o);default:return Wi($i(u.length,s),o)}}},{key:"validate",value:function(s,u){return u.isTwoDigitYear||u.year>0}},{key:"set",value:function(s,u,d){var o=s.getUTCFullYear();if(d.isTwoDigitYear){var m=zI(d.year,o);return s.setUTCFullYear(m,0,1),s.setUTCHours(0,0,0,0),s}var y=!("era"in u)||u.era===1?d.year:1-d.year;return s.setUTCFullYear(y,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr),kW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",130),bn(Pn(i),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){var o=function(y){return{year:y,isTwoDigitYear:u==="YY"}};switch(u){case"Y":return Wi($i(4,s),o);case"Yo":return Wi(d.ordinalNumber(s,{unit:"year"}),o);default:return Wi($i(u.length,s),o)}}},{key:"validate",value:function(s,u){return u.isTwoDigitYear||u.year>0}},{key:"set",value:function(s,u,d,o){var m=PT(s,o);if(d.isTwoDigitYear){var y=zI(d.year,m);return s.setUTCFullYear(y,0,o.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ud(s,o)}var w=!("era"in u)||u.era===1?d.year:1-d.year;return s.setUTCFullYear(w,0,o.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ud(s,o)}}]),n}(qr),DW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",130),bn(Pn(i),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u){return Ey(u==="R"?4:u.length,s)}},{key:"set",value:function(s,u,d){var o=new Date(0);return o.setUTCFullYear(d,0,4),o.setUTCHours(0,0,0,0),tf(o)}}]),n}(qr),IW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",130),bn(Pn(i),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u){return Ey(u==="u"?4:u.length,s)}},{key:"set",value:function(s,u,d){return s.setUTCFullYear(d,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr),zW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",120),bn(Pn(i),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"Q":case"QQ":return $i(u.length,s);case"Qo":return d.ordinalNumber(s,{unit:"quarter"});case"QQQ":return d.quarter(s,{width:"abbreviated",context:"formatting"})||d.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return d.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return d.quarter(s,{width:"wide",context:"formatting"})||d.quarter(s,{width:"abbreviated",context:"formatting"})||d.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,u){return u>=1&&u<=4}},{key:"set",value:function(s,u,d){return s.setUTCMonth((d-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr),RW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",120),bn(Pn(i),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"q":case"qq":return $i(u.length,s);case"qo":return d.ordinalNumber(s,{unit:"quarter"});case"qqq":return d.quarter(s,{width:"abbreviated",context:"standalone"})||d.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return d.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return d.quarter(s,{width:"wide",context:"standalone"})||d.quarter(s,{width:"abbreviated",context:"standalone"})||d.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,u){return u>=1&&u<=4}},{key:"set",value:function(s,u,d){return s.setUTCMonth((d-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr),OW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),bn(Pn(i),"priority",110),i}return Mr(n,[{key:"parse",value:function(s,u,d){var o=function(y){return y-1};switch(u){case"M":return Wi(Ii(ji.month,s),o);case"MM":return Wi($i(2,s),o);case"Mo":return Wi(d.ordinalNumber(s,{unit:"month"}),o);case"MMM":return d.month(s,{width:"abbreviated",context:"formatting"})||d.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return d.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return d.month(s,{width:"wide",context:"formatting"})||d.month(s,{width:"abbreviated",context:"formatting"})||d.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,u){return u>=0&&u<=11}},{key:"set",value:function(s,u,d){return s.setUTCMonth(d,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr),LW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",110),bn(Pn(i),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){var o=function(y){return y-1};switch(u){case"L":return Wi(Ii(ji.month,s),o);case"LL":return Wi($i(2,s),o);case"Lo":return Wi(d.ordinalNumber(s,{unit:"month"}),o);case"LLL":return d.month(s,{width:"abbreviated",context:"standalone"})||d.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return d.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return d.month(s,{width:"wide",context:"standalone"})||d.month(s,{width:"abbreviated",context:"standalone"})||d.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,u){return u>=0&&u<=11}},{key:"set",value:function(s,u,d){return s.setUTCMonth(d,1),s.setUTCHours(0,0,0,0),s}}]),n}(qr);function BW(e,t,n){Nn(2,arguments);var i=qn(e),s=ni(t),u=EI(i,n)-s;return i.setUTCDate(i.getUTCDate()-u*7),i}var FW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",100),bn(Pn(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"w":return Ii(ji.week,s);case"wo":return d.ordinalNumber(s,{unit:"week"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=1&&u<=53}},{key:"set",value:function(s,u,d,o){return ud(BW(s,d,o),o)}}]),n}(qr);function $W(e,t){Nn(2,arguments);var n=qn(e),i=ni(t),s=SI(n)-i;return n.setUTCDate(n.getUTCDate()-s*7),n}var NW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",100),bn(Pn(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"I":return Ii(ji.week,s);case"Io":return d.ordinalNumber(s,{unit:"week"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=1&&u<=53}},{key:"set",value:function(s,u,d){return tf($W(s,d))}}]),n}(qr),UW=[31,28,31,30,31,30,31,31,30,31,30,31],VW=[31,29,31,30,31,30,31,31,30,31,30,31],jW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",90),bn(Pn(i),"subPriority",1),bn(Pn(i),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"d":return Ii(ji.date,s);case"do":return d.ordinalNumber(s,{unit:"date"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){var d=s.getUTCFullYear(),o=RI(d),m=s.getUTCMonth();return o?u>=1&&u<=VW[m]:u>=1&&u<=UW[m]}},{key:"set",value:function(s,u,d){return s.setUTCDate(d),s.setUTCHours(0,0,0,0),s}}]),n}(qr),WW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",90),bn(Pn(i),"subpriority",1),bn(Pn(i),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"D":case"DD":return Ii(ji.dayOfYear,s);case"Do":return d.ordinalNumber(s,{unit:"date"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){var d=s.getUTCFullYear(),o=RI(d);return o?u>=1&&u<=366:u>=1&&u<=365}},{key:"set",value:function(s,u,d){return s.setUTCMonth(0,d),s.setUTCHours(0,0,0,0),s}}]),n}(qr);function kT(e,t,n){var i,s,u,d,o,m,y,w;Nn(2,arguments);var S=wf(),A=ni((i=(s=(u=(d=n==null?void 0:n.weekStartsOn)!==null&&d!==void 0?d:n==null||(o=n.locale)===null||o===void 0||(m=o.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&u!==void 0?u:S.weekStartsOn)!==null&&s!==void 0?s:(y=S.locale)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&i!==void 0?i:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var I=qn(e),z=ni(t),U=I.getUTCDay(),j=z%7,F=(j+7)%7,H=(F<A?7:0)+z-U;return I.setUTCDate(I.getUTCDate()+H),I}var HW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",90),bn(Pn(i),"incompatibleTokens",["D","i","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"E":case"EE":case"EEE":return d.day(s,{width:"abbreviated",context:"formatting"})||d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return d.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return d.day(s,{width:"wide",context:"formatting"})||d.day(s,{width:"abbreviated",context:"formatting"})||d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,u){return u>=0&&u<=6}},{key:"set",value:function(s,u,d,o){return s=kT(s,d,o),s.setUTCHours(0,0,0,0),s}}]),n}(qr),GW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",90),bn(Pn(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d,o){var m=function(w){var S=Math.floor((w-1)/7)*7;return(w+o.weekStartsOn+6)%7+S};switch(u){case"e":case"ee":return Wi($i(u.length,s),m);case"eo":return Wi(d.ordinalNumber(s,{unit:"day"}),m);case"eee":return d.day(s,{width:"abbreviated",context:"formatting"})||d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"});case"eeeee":return d.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return d.day(s,{width:"wide",context:"formatting"})||d.day(s,{width:"abbreviated",context:"formatting"})||d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,u){return u>=0&&u<=6}},{key:"set",value:function(s,u,d,o){return s=kT(s,d,o),s.setUTCHours(0,0,0,0),s}}]),n}(qr),qW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",90),bn(Pn(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d,o){var m=function(w){var S=Math.floor((w-1)/7)*7;return(w+o.weekStartsOn+6)%7+S};switch(u){case"c":case"cc":return Wi($i(u.length,s),m);case"co":return Wi(d.ordinalNumber(s,{unit:"day"}),m);case"ccc":return d.day(s,{width:"abbreviated",context:"standalone"})||d.day(s,{width:"short",context:"standalone"})||d.day(s,{width:"narrow",context:"standalone"});case"ccccc":return d.day(s,{width:"narrow",context:"standalone"});case"cccccc":return d.day(s,{width:"short",context:"standalone"})||d.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return d.day(s,{width:"wide",context:"standalone"})||d.day(s,{width:"abbreviated",context:"standalone"})||d.day(s,{width:"short",context:"standalone"})||d.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,u){return u>=0&&u<=6}},{key:"set",value:function(s,u,d,o){return s=kT(s,d,o),s.setUTCHours(0,0,0,0),s}}]),n}(qr);function ZW(e,t){Nn(2,arguments);var n=ni(t);n%7===0&&(n=n-7);var i=1,s=qn(e),u=s.getUTCDay(),d=n%7,o=(d+7)%7,m=(o<i?7:0)+n-u;return s.setUTCDate(s.getUTCDate()+m),s}var YW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",90),bn(Pn(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){var o=function(y){return y===0?7:y};switch(u){case"i":case"ii":return $i(u.length,s);case"io":return d.ordinalNumber(s,{unit:"day"});case"iii":return Wi(d.day(s,{width:"abbreviated",context:"formatting"})||d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"}),o);case"iiiii":return Wi(d.day(s,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Wi(d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Wi(d.day(s,{width:"wide",context:"formatting"})||d.day(s,{width:"abbreviated",context:"formatting"})||d.day(s,{width:"short",context:"formatting"})||d.day(s,{width:"narrow",context:"formatting"}),o)}}},{key:"validate",value:function(s,u){return u>=1&&u<=7}},{key:"set",value:function(s,u,d){return s=ZW(s,d),s.setUTCHours(0,0,0,0),s}}]),n}(qr),XW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",80),bn(Pn(i),"incompatibleTokens",["b","B","H","k","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"a":case"aa":case"aaa":return d.dayPeriod(s,{width:"abbreviated",context:"formatting"})||d.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return d.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return d.dayPeriod(s,{width:"wide",context:"formatting"})||d.dayPeriod(s,{width:"abbreviated",context:"formatting"})||d.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,u,d){return s.setUTCHours(AT(d),0,0,0),s}}]),n}(qr),KW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",80),bn(Pn(i),"incompatibleTokens",["a","B","H","k","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"b":case"bb":case"bbb":return d.dayPeriod(s,{width:"abbreviated",context:"formatting"})||d.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return d.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return d.dayPeriod(s,{width:"wide",context:"formatting"})||d.dayPeriod(s,{width:"abbreviated",context:"formatting"})||d.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,u,d){return s.setUTCHours(AT(d),0,0,0),s}}]),n}(qr),JW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",80),bn(Pn(i),"incompatibleTokens",["a","b","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"B":case"BB":case"BBB":return d.dayPeriod(s,{width:"abbreviated",context:"formatting"})||d.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return d.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return d.dayPeriod(s,{width:"wide",context:"formatting"})||d.dayPeriod(s,{width:"abbreviated",context:"formatting"})||d.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,u,d){return s.setUTCHours(AT(d),0,0,0),s}}]),n}(qr),QW=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",70),bn(Pn(i),"incompatibleTokens",["H","K","k","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"h":return Ii(ji.hour12h,s);case"ho":return d.ordinalNumber(s,{unit:"hour"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=1&&u<=12}},{key:"set",value:function(s,u,d){var o=s.getUTCHours()>=12;return o&&d<12?s.setUTCHours(d+12,0,0,0):!o&&d===12?s.setUTCHours(0,0,0,0):s.setUTCHours(d,0,0,0),s}}]),n}(qr),eH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",70),bn(Pn(i),"incompatibleTokens",["a","b","h","K","k","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"H":return Ii(ji.hour23h,s);case"Ho":return d.ordinalNumber(s,{unit:"hour"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=0&&u<=23}},{key:"set",value:function(s,u,d){return s.setUTCHours(d,0,0,0),s}}]),n}(qr),tH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",70),bn(Pn(i),"incompatibleTokens",["h","H","k","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"K":return Ii(ji.hour11h,s);case"Ko":return d.ordinalNumber(s,{unit:"hour"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=0&&u<=11}},{key:"set",value:function(s,u,d){var o=s.getUTCHours()>=12;return o&&d<12?s.setUTCHours(d+12,0,0,0):s.setUTCHours(d,0,0,0),s}}]),n}(qr),nH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",70),bn(Pn(i),"incompatibleTokens",["a","b","h","H","K","t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"k":return Ii(ji.hour24h,s);case"ko":return d.ordinalNumber(s,{unit:"hour"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=1&&u<=24}},{key:"set",value:function(s,u,d){var o=d<=24?d%24:d;return s.setUTCHours(o,0,0,0),s}}]),n}(qr),rH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",60),bn(Pn(i),"incompatibleTokens",["t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"m":return Ii(ji.minute,s);case"mo":return d.ordinalNumber(s,{unit:"minute"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=0&&u<=59}},{key:"set",value:function(s,u,d){return s.setUTCMinutes(d,0,0),s}}]),n}(qr),iH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",50),bn(Pn(i),"incompatibleTokens",["t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u,d){switch(u){case"s":return Ii(ji.second,s);case"so":return d.ordinalNumber(s,{unit:"second"});default:return $i(u.length,s)}}},{key:"validate",value:function(s,u){return u>=0&&u<=59}},{key:"set",value:function(s,u,d){return s.setUTCSeconds(d,0),s}}]),n}(qr),oH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",30),bn(Pn(i),"incompatibleTokens",["t","T"]),i}return Mr(n,[{key:"parse",value:function(s,u){var d=function(m){return Math.floor(m*Math.pow(10,-u.length+3))};return Wi($i(u.length,s),d)}},{key:"set",value:function(s,u,d){return s.setUTCMilliseconds(d),s}}]),n}(qr),sH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",10),bn(Pn(i),"incompatibleTokens",["t","T","x"]),i}return Mr(n,[{key:"parse",value:function(s,u){switch(u){case"X":return Ba(La.basicOptionalMinutes,s);case"XX":return Ba(La.basic,s);case"XXXX":return Ba(La.basicOptionalSeconds,s);case"XXXXX":return Ba(La.extendedOptionalSeconds,s);case"XXX":default:return Ba(La.extended,s)}}},{key:"set",value:function(s,u,d){return u.timestampIsSet?s:new Date(s.getTime()-d)}}]),n}(qr),aH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",10),bn(Pn(i),"incompatibleTokens",["t","T","X"]),i}return Mr(n,[{key:"parse",value:function(s,u){switch(u){case"x":return Ba(La.basicOptionalMinutes,s);case"xx":return Ba(La.basic,s);case"xxxx":return Ba(La.basicOptionalSeconds,s);case"xxxxx":return Ba(La.extendedOptionalSeconds,s);case"xxx":default:return Ba(La.extended,s)}}},{key:"set",value:function(s,u,d){return u.timestampIsSet?s:new Date(s.getTime()-d)}}]),n}(qr),lH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",40),bn(Pn(i),"incompatibleTokens","*"),i}return Mr(n,[{key:"parse",value:function(s){return II(s)}},{key:"set",value:function(s,u,d){return[new Date(d*1e3),{timestampIsSet:!0}]}}]),n}(qr),cH=function(e){Fr(n,e);var t=$r(n);function n(){var i;Er(this,n);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return i=t.call.apply(t,[this].concat(u)),bn(Pn(i),"priority",20),bn(Pn(i),"incompatibleTokens","*"),i}return Mr(n,[{key:"parse",value:function(s){return II(s)}},{key:"set",value:function(s,u,d){return[new Date(d),{timestampIsSet:!0}]}}]),n}(qr),uH={G:new PW,y:new AW,Y:new kW,R:new DW,u:new IW,Q:new zW,q:new RW,M:new OW,L:new LW,w:new FW,I:new NW,d:new jW,D:new WW,E:new HW,e:new GW,c:new qW,i:new YW,a:new XW,b:new KW,B:new JW,h:new QW,H:new eH,K:new tH,k:new nH,m:new rH,s:new iH,S:new oH,X:new sH,x:new aH,t:new lH,T:new cH},dH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fH=/^'([^]*?)'?$/,pH=/''/g,mH=/\S/,gH=/[a-zA-Z]/;function vH(e,t,n,i){var s,u,d,o,m,y,w,S,A,I,z,U,j,F,H,J,Z,Y;Nn(3,arguments);var ce=String(e),ee=String(t),de=wf(),ue=(s=(u=i==null?void 0:i.locale)!==null&&u!==void 0?u:de.locale)!==null&&s!==void 0?s:ET;if(!ue.match)throw new RangeError("locale must contain match property");var Ee=ni((d=(o=(m=(y=i==null?void 0:i.firstWeekContainsDate)!==null&&y!==void 0?y:i==null||(w=i.locale)===null||w===void 0||(S=w.options)===null||S===void 0?void 0:S.firstWeekContainsDate)!==null&&m!==void 0?m:de.firstWeekContainsDate)!==null&&o!==void 0?o:(A=de.locale)===null||A===void 0||(I=A.options)===null||I===void 0?void 0:I.firstWeekContainsDate)!==null&&d!==void 0?d:1);if(!(Ee>=1&&Ee<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ze=ni((z=(U=(j=(F=i==null?void 0:i.weekStartsOn)!==null&&F!==void 0?F:i==null||(H=i.locale)===null||H===void 0||(J=H.options)===null||J===void 0?void 0:J.weekStartsOn)!==null&&j!==void 0?j:de.weekStartsOn)!==null&&U!==void 0?U:(Z=de.locale)===null||Z===void 0||(Y=Z.options)===null||Y===void 0?void 0:Y.weekStartsOn)!==null&&z!==void 0?z:0);if(!(ze>=0&&ze<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(ee==="")return ce===""?qn(n):new Date(NaN);var xe={firstWeekContainsDate:Ee,weekStartsOn:ze,locale:ue},qe=[new MW],Qe=ee.match(hH).map(function(Lt){var Ct=Lt[0];if(Ct in w1){var Yt=w1[Ct];return Yt(Lt,ue.formatLong)}return Lt}).join("").match(dH),Be=[],st=jM(Qe),it;try{var Pt=function(){var Ct=it.value;!(i!=null&&i.useAdditionalWeekYearTokens)&&AI(Ct)&&wy(Ct,ee,e),!(i!=null&&i.useAdditionalDayOfYearTokens)&&PI(Ct)&&wy(Ct,ee,e);var Yt=Ct[0],ln=uH[Yt];if(ln){var he=ln.incompatibleTokens;if(Array.isArray(he)){var Me=Be.find(function(lt){return he.includes(lt.token)||lt.token===Yt});if(Me)throw new RangeError("The format string mustn't contain `".concat(Me.fullToken,"` and `").concat(Ct,"` at the same time"))}else if(ln.incompatibleTokens==="*"&&Be.length>0)throw new RangeError("The format string mustn't contain `".concat(Ct,"` and any other token at the same time"));Be.push({token:Yt,fullToken:Ct});var Ue=ln.run(ce,Ct,ue.match,xe);if(!Ue)return{v:new Date(NaN)};qe.push(Ue.setter),ce=Ue.rest}else{if(Yt.match(gH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Yt+"`");if(Ct==="''"?Ct="'":Yt==="'"&&(Ct=_H(Ct)),ce.indexOf(Ct)===0)ce=ce.slice(Ct.length);else return{v:new Date(NaN)}}};for(st.s();!(it=st.n()).done;){var Ke=Pt();if(ja(Ke)==="object")return Ke.v}}catch(Lt){st.e(Lt)}finally{st.f()}if(ce.length>0&&mH.test(ce))return new Date(NaN);var ut=qe.map(function(Lt){return Lt.priority}).sort(function(Lt,Ct){return Ct-Lt}).filter(function(Lt,Ct,Yt){return Yt.indexOf(Lt)===Ct}).map(function(Lt){return qe.filter(function(Ct){return Ct.priority===Lt}).sort(function(Ct,Yt){return Yt.subPriority-Ct.subPriority})}).map(function(Lt){return Lt[0]}),jt=qn(n);if(isNaN(jt.getTime()))return new Date(NaN);var on=TI(jt,wI(jt)),En={},Dn=jM(ut),Je;try{for(Dn.s();!(Je=Dn.n()).done;){var yt=Je.value;if(!yt.validate(on,xe))return new Date(NaN);var wt=yt.set(on,En,xe);Array.isArray(wt)?(on=wt[0],_W(En,wt[1])):on=wt}}catch(Lt){Dn.e(Lt)}finally{Dn.f()}return on}function _H(e){return e.match(fH)[1].replace(pH,"'")}function yH(e){Nn(1,arguments);var t=qn(e);return t.setMinutes(0,0,0),t}function i0(e,t){Nn(2,arguments);var n=qn(e),i=qn(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function OI(e,t){Nn(2,arguments);var n=Zm(e),i=Zm(t);return n.getTime()===i.getTime()}function DT(e){Nn(1,arguments);var t=qn(e);return t.setMilliseconds(0),t}function LI(e,t){Nn(2,arguments);var n=qn(e),i=qn(t);return n.getFullYear()===i.getFullYear()}function IT(e,t){Nn(2,arguments);var n=qn(e),i=ni(t),s=n.getFullYear(),u=n.getDate(),d=new Date(0);d.setFullYear(s,i,15),d.setHours(0,0,0,0);var o=xW(d);return n.setMonth(i,Math.min(u,o)),n}function Co(e,t){if(Nn(2,arguments),ja(t)!=="object"||t===null)throw new RangeError("values parameter must be an object");var n=qn(e);return isNaN(n.getTime())?new Date(NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=IT(n,t.month)),t.date!=null&&n.setDate(ni(t.date)),t.hours!=null&&n.setHours(ni(t.hours)),t.minutes!=null&&n.setMinutes(ni(t.minutes)),t.seconds!=null&&n.setSeconds(ni(t.seconds)),t.milliseconds!=null&&n.setMilliseconds(ni(t.milliseconds)),n)}function Ou(e,t){Nn(2,arguments);var n=qn(e),i=ni(t);return n.setHours(i),n}function cb(e,t){Nn(2,arguments);var n=qn(e),i=ni(t);return n.setMinutes(i),n}function xH(e,t){Nn(2,arguments);var n=qn(e),i=ni(t),s=Math.floor(n.getMonth()/3)+1,u=i-s;return IT(n,n.getMonth()+u*3)}function ub(e,t){Nn(2,arguments);var n=qn(e),i=ni(t);return n.setSeconds(i),n}function HM(e,t){Nn(2,arguments);var n=qn(e),i=ni(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(i),n)}function fg(e){const{mergedLocaleRef:t,mergedDateLocaleRef:n}=fr(bd,null)||{},i=Le(()=>{var u,d;return(d=(u=t==null?void 0:t.value)===null||u===void 0?void 0:u[e])!==null&&d!==void 0?d:n8[e]});return{dateLocaleRef:Le(()=>{var u;return(u=n==null?void 0:n.value)!==null&&u!==void 0?u:j8}),localeRef:i}}function wd(e,t,n){if(!t)return;const i=vd(),s=fr(bd,null),u=()=>{const d=n==null?void 0:n.value;t.mount({id:d===void 0?e:d+e,head:!0,anchorMetaName:qm,props:{bPrefix:d?`.${d}-`:void 0},ssr:i}),s!=null&&s.preflightStyleDisabled||bI.mount({id:"n-global",head:!0,anchorMetaName:qm,ssr:i})};i?u():sg(u)}function Xi(e,t,n,i){var s;n||Qy("useThemeClass","cssVarsRef is not passed");const u=(s=fr(bd,null))===null||s===void 0?void 0:s.mergedThemeHashRef,d=He(""),o=vd();let m;const y=`__${e}`,w=()=>{let S=y;const A=t?t.value:void 0,I=u==null?void 0:u.value;I&&(S+="-"+I),A&&(S+="-"+A);const{themeOverrides:z,builtinThemeOverrides:U}=i;z&&(S+="-"+c1(JSON.stringify(z))),U&&(S+="-"+c1(JSON.stringify(U))),d.value=S,m=()=>{const j=n.value;let F="";for(const H in j)F+=`${H}: ${j[H]};`;Ze(`.${S}`,F).mount({id:S,ssr:o}),m=void 0}};return El(()=>{w()}),{themeClass:d,onRender:()=>{m==null||m()}}}function Fc(e,t,n){if(!t)return;const i=vd(),s=Le(()=>{const{value:d}=t;if(!d)return;const o=d[e];if(o)return o}),u=()=>{El(()=>{const{value:d}=n,o=`${d}${e}Rtl`;if(L4(o,i))return;const{value:m}=s;m&&m.style.mount({id:o,head:!0,anchorMetaName:qm,props:{bPrefix:d?`.${d}-`:void 0},ssr:i})})};return i?u():sg(u),s}function kl(e,t){return pn({name:yV(e),setup(){var n;const i=(n=fr(bd,null))===null||n===void 0?void 0:n.mergedIconsRef;return()=>{var s;const u=(s=i==null?void 0:i.value)===null||s===void 0?void 0:s[e];return u?u():t}}})}const nf=pn({name:"Backward",render(){return V("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}}),GM=kl("date",V("svg",{width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},V("g",{"fill-rule":"nonzero"},V("path",{d:"M21.75,3 C23.5449254,3 25,4.45507456 25,6.25 L25,21.75 C25,23.5449254 23.5449254,25 21.75,25 L6.25,25 C4.45507456,25 3,23.5449254 3,21.75 L3,6.25 C3,4.45507456 4.45507456,3 6.25,3 L21.75,3 Z M23.5,9.503 L4.5,9.503 L4.5,21.75 C4.5,22.7164983 5.28350169,23.5 6.25,23.5 L21.75,23.5 C22.7164983,23.5 23.5,22.7164983 23.5,21.75 L23.5,9.503 Z M21.75,4.5 L6.25,4.5 C5.28350169,4.5 4.5,5.28350169 4.5,6.25 L4.5,8.003 L23.5,8.003 L23.5,6.25 C23.5,5.28350169 22.7164983,4.5 21.75,4.5 Z"}))))),bH=pn({name:"Checkmark",render(){return V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},V("g",{fill:"none"},V("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),wH=kl("close",V("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},V("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},V("g",{fill:"currentColor","fill-rule":"nonzero"},V("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),TH=pn({name:"Eye",render(){return V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},V("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),V("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),CH=pn({name:"EyeOff",render(){return V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},V("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),V("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),V("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),V("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),V("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),SH=pn({name:"Empty",render(){return V("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),V("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),EH=kl("error",V("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},V("g",{"fill-rule":"nonzero"},V("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),rf=pn({name:"FastBackward",render(){return V("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},V("g",{fill:"currentColor","fill-rule":"nonzero"},V("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}}),of=pn({name:"FastForward",render(){return V("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},V("g",{fill:"currentColor","fill-rule":"nonzero"},V("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}}),sf=pn({name:"Forward",render(){return V("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}}),MH=kl("info",V("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},V("g",{"fill-rule":"nonzero"},V("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),PH=kl("success",V("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},V("g",{"fill-rule":"nonzero"},V("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),AH=kl("time",V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},V("path",{d:"M256,64C150,64,64,150,64,256s86,192,192,192,192-86,192-192S362,64,256,64Z",style:`
        fill: none;
        stroke: currentColor;
        stroke-miterlimit: 10;
        stroke-width: 32px;
      `}),V("polyline",{points:"256 128 256 272 352 272",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))),kH=kl("warning",V("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},V("g",{"fill-rule":"nonzero"},V("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),DH=pn({name:"ChevronDown",render(){return V("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),IH=kl("clear",V("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},V("g",{fill:"currentColor","fill-rule":"nonzero"},V("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),zH=kl("to",V("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},V("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},V("g",{fill:"currentColor","fill-rule":"nonzero"},V("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))),o0=pn({name:"BaseIconSwitchTransition",setup(e,{slots:t}){const n=gd();return()=>V(Yo,{name:"icon-switch-transition",appear:n.value},t)}}),zT=pn({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(e,{slots:t}){function n(o){e.width?o.style.maxWidth=`${o.offsetWidth}px`:o.style.maxHeight=`${o.offsetHeight}px`,o.offsetWidth}function i(o){e.width?o.style.maxWidth="0":o.style.maxHeight="0",o.offsetWidth;const{onLeave:m}=e;m&&m()}function s(o){e.width?o.style.maxWidth="":o.style.maxHeight="";const{onAfterLeave:m}=e;m&&m()}function u(o){if(o.style.transition="none",e.width){const m=o.offsetWidth;o.style.maxWidth="0",o.offsetWidth,o.style.transition="",o.style.maxWidth=`${m}px`}else if(e.reverse)o.style.maxHeight=`${o.offsetHeight}px`,o.offsetHeight,o.style.transition="",o.style.maxHeight="0";else{const m=o.offsetHeight;o.style.maxHeight="0",o.offsetWidth,o.style.transition="",o.style.maxHeight=`${m}px`}o.offsetWidth}function d(o){var m;e.width?o.style.maxWidth="":e.reverse||(o.style.maxHeight=""),(m=e.onAfterEnter)===null||m===void 0||m.call(e)}return()=>{const o=e.group?eD:Yo;return V(o,{name:e.width?"fade-in-width-expand-transition":"fade-in-height-expand-transition",mode:e.mode,appear:e.appear,onEnter:u,onAfterEnter:d,onBeforeLeave:n,onLeave:i,onAfterLeave:s},t)}}}),RH=It("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[Ze("svg",`
 height: 1em;
 width: 1em;
 `)]),$s=pn({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(e){wd("-base-icon",RH,nr(e,"clsPrefix"))},render(){return V("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),OH=It("base-close",`
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`,[Nt("absolute",`
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `),Ze("&::before",`
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `),ai("disabled",[Ze("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),Ze("&:hover::before",`
 background-color: var(--n-close-color-hover);
 `),Ze("&:focus::before",`
 background-color: var(--n-close-color-hover);
 `),Ze("&:active",`
 color: var(--n-close-icon-color-pressed);
 `),Ze("&:active::before",`
 background-color: var(--n-close-color-pressed);
 `)]),Nt("disabled",`
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `),Nt("round",[Ze("&::before",`
 border-radius: 50%;
 `)])]),BI=pn({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup(e){return wd("-base-close",OH,nr(e,"clsPrefix")),()=>{const{clsPrefix:t,disabled:n,absolute:i,round:s,isButtonTag:u}=e;return V(u?"button":"div",{type:u?"button":void 0,tabindex:n||!e.focusable?-1:0,"aria-disabled":n,"aria-label":"close",role:u?void 0:"button",disabled:n,class:[`${t}-base-close`,i&&`${t}-base-close--absolute`,n&&`${t}-base-close--disabled`,s&&`${t}-base-close--round`],onMousedown:o=>{e.focusable||o.preventDefault()},onClick:e.onClick},V($s,{clsPrefix:t},{default:()=>V(wH,null)}))}}}),$c=pn({props:{onFocus:Function,onBlur:Function},setup(e){return()=>V("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}}),{cubicBezierEaseInOut:LH}=Bc;function Ym({originalTransform:e="",left:t=0,top:n=0,transition:i=`all .3s ${LH} !important`}={}){return[Ze("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:e+" scale(0.75)",left:t,top:n,opacity:0}),Ze("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${e}`,left:t,top:n,opacity:1}),Ze("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:t,top:n,transition:i})]}const BH=Ze([Ze("@keyframes loading-container-rotate",`
 to {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }
 `),Ze("@keyframes loading-layer-rotate",`
 12.5% {
 -webkit-transform: rotate(135deg);
 transform: rotate(135deg);
 }
 25% {
 -webkit-transform: rotate(270deg);
 transform: rotate(270deg);
 }
 37.5% {
 -webkit-transform: rotate(405deg);
 transform: rotate(405deg);
 }
 50% {
 -webkit-transform: rotate(540deg);
 transform: rotate(540deg);
 }
 62.5% {
 -webkit-transform: rotate(675deg);
 transform: rotate(675deg);
 }
 75% {
 -webkit-transform: rotate(810deg);
 transform: rotate(810deg);
 }
 87.5% {
 -webkit-transform: rotate(945deg);
 transform: rotate(945deg);
 }
 100% {
 -webkit-transform: rotate(1080deg);
 transform: rotate(1080deg);
 } 
 `),Ze("@keyframes loading-left-spin",`
 from {
 -webkit-transform: rotate(265deg);
 transform: rotate(265deg);
 }
 50% {
 -webkit-transform: rotate(130deg);
 transform: rotate(130deg);
 }
 to {
 -webkit-transform: rotate(265deg);
 transform: rotate(265deg);
 }
 `),Ze("@keyframes loading-right-spin",`
 from {
 -webkit-transform: rotate(-265deg);
 transform: rotate(-265deg);
 }
 50% {
 -webkit-transform: rotate(-130deg);
 transform: rotate(-130deg);
 }
 to {
 -webkit-transform: rotate(-265deg);
 transform: rotate(-265deg);
 }
 `),It("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[xt("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[Ym()]),xt("container",`
 display: inline-flex;
 position: relative;
 direction: ltr;
 line-height: 0;
 animation: loading-container-rotate 1568.2352941176ms linear infinite;
 font-size: 0;
 letter-spacing: 0;
 white-space: nowrap;
 opacity: 1;
 width: 100%;
 height: 100%;
 `,[xt("svg",`
 stroke: var(--n-text-color);
 fill: transparent;
 position: absolute;
 height: 100%;
 overflow: hidden;
 `),xt("container-layer",`
 position: absolute;
 width: 100%;
 height: 100%;
 animation: loading-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both;
 `,[xt("container-layer-left",`
 display: inline-flex;
 position: relative;
 width: 50%;
 height: 100%;
 overflow: hidden;
 `,[xt("svg",`
 animation: loading-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both;
 width: 200%;
 `)]),xt("container-layer-patch",`
 position: absolute;
 top: 0;
 left: 47.5%;
 box-sizing: border-box;
 width: 5%;
 height: 100%;
 overflow: hidden;
 `,[xt("svg",`
 left: -900%;
 width: 2000%;
 transform: rotate(180deg);
 `)]),xt("container-layer-right",`
 display: inline-flex;
 position: relative;
 width: 50%;
 height: 100%;
 overflow: hidden;
 `,[xt("svg",`
 animation: loading-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both;
 left: -100%;
 width: 200%;
 `)])])]),xt("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Ym({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})])])]),FH={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},pg=pn({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},FH),setup(e){wd("-base-loading",BH,nr(e,"clsPrefix"))},render(){const{clsPrefix:e,radius:t,strokeWidth:n,stroke:i,scale:s}=this,u=t/s;return V("div",{class:`${e}-base-loading`,role:"img","aria-label":"loading"},V(o0,null,{default:()=>this.show?V("div",{key:"icon",class:`${e}-base-loading__transition-wrapper`},V("div",{class:`${e}-base-loading__container`},V("div",{class:`${e}-base-loading__container-layer`},V("div",{class:`${e}-base-loading__container-layer-left`},V("svg",{class:`${e}-base-loading__svg`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:i}},V("circle",{fill:"none",stroke:"currentColor","stroke-width":n,"stroke-linecap":"round",cx:u,cy:u,r:t-n/2,"stroke-dasharray":4.91*t,"stroke-dashoffset":2.46*t}))),V("div",{class:`${e}-base-loading__container-layer-patch`},V("svg",{class:`${e}-base-loading__svg`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:i}},V("circle",{fill:"none",stroke:"currentColor","stroke-width":n,"stroke-linecap":"round",cx:u,cy:u,r:t-n/2,"stroke-dasharray":4.91*t,"stroke-dashoffset":2.46*t}))),V("div",{class:`${e}-base-loading__container-layer-right`},V("svg",{class:`${e}-base-loading__svg`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:i}},V("circle",{fill:"none",stroke:"currentColor","stroke-width":n,"stroke-linecap":"round",cx:u,cy:u,r:t-n/2,"stroke-dasharray":4.91*t,"stroke-dashoffset":2.46*t})))))):V("div",{key:"placeholder",class:`${e}-base-loading__placeholder`},this.$slots)}))}});function qM(e){return Array.isArray(e)?e:[e]}const C1={STOP:"STOP"};function FI(e,t){const n=t(e);e.children!==void 0&&n!==C1.STOP&&e.children.forEach(i=>FI(i,t))}function $H(e,t={}){const{preserveGroup:n=!1}=t,i=[],s=n?d=>{d.isLeaf||(i.push(d.key),u(d.children))}:d=>{d.isLeaf||(d.isGroup||i.push(d.key),u(d.children))};function u(d){d.forEach(s)}return u(e),i}function NH(e,t){const{isLeaf:n}=e;return n!==void 0?n:!t(e)}function UH(e){return e.children}function VH(e){return e.key}function jH(){return!1}function WH(e,t){const{isLeaf:n}=e;return!(n===!1&&!Array.isArray(t(e)))}function HH(e){return e.disabled===!0}function GH(e,t){return e.isLeaf===!1&&!Array.isArray(t(e))}function db(e){var t;return e==null?[]:Array.isArray(e)?e:(t=e.checkedKeys)!==null&&t!==void 0?t:[]}function hb(e){var t;return e==null||Array.isArray(e)?[]:(t=e.indeterminateKeys)!==null&&t!==void 0?t:[]}function qH(e,t){const n=new Set(e);return t.forEach(i=>{n.has(i)||n.add(i)}),Array.from(n)}function ZH(e,t){const n=new Set(e);return t.forEach(i=>{n.has(i)&&n.delete(i)}),Array.from(n)}function YH(e){return(e==null?void 0:e.type)==="group"}function XH(e){const t=new Map;return e.forEach((n,i)=>{t.set(n.key,i)}),n=>{var i;return(i=t.get(n))!==null&&i!==void 0?i:null}}class KH extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function JH(e,t,n,i){return My(t.concat(e),n,i,!1)}function QH(e,t){const n=new Set;return e.forEach(i=>{const s=t.treeNodeMap.get(i);if(s!==void 0){let u=s.parent;for(;u!==null&&!(u.disabled||n.has(u.key));)n.add(u.key),u=u.parent}}),n}function e9(e,t,n,i){const s=My(t,n,i,!1),u=My(e,n,i,!0),d=QH(e,n),o=[];return s.forEach(m=>{(u.has(m)||d.has(m))&&o.push(m)}),o.forEach(m=>s.delete(m)),s}function fb(e,t){const{checkedKeys:n,keysToCheck:i,keysToUncheck:s,indeterminateKeys:u,cascade:d,leafOnly:o,checkStrategy:m,allowNotLoaded:y}=e;if(!d)return i!==void 0?{checkedKeys:qH(n,i),indeterminateKeys:Array.from(u)}:s!==void 0?{checkedKeys:ZH(n,s),indeterminateKeys:Array.from(u)}:{checkedKeys:Array.from(n),indeterminateKeys:Array.from(u)};const{levelTreeNodeMap:w}=t;let S;s!==void 0?S=e9(s,n,t,y):i!==void 0?S=JH(i,n,t,y):S=My(n,t,y,!1);const A=m==="parent",I=m==="child"||o,z=S,U=new Set,j=Math.max.apply(null,Array.from(w.keys()));for(let F=j;F>=0;F-=1){const H=F===0,J=w.get(F);for(const Z of J){if(Z.isLeaf)continue;const{key:Y,shallowLoaded:ce}=Z;if(I&&ce&&Z.children.forEach(Ee=>{!Ee.disabled&&!Ee.isLeaf&&Ee.shallowLoaded&&z.has(Ee.key)&&z.delete(Ee.key)}),Z.disabled||!ce)continue;let ee=!0,de=!1,ue=!0;for(const Ee of Z.children){const ze=Ee.key;if(!Ee.disabled){if(ue&&(ue=!1),z.has(ze))de=!0;else if(U.has(ze)){de=!0,ee=!1;break}else if(ee=!1,de)break}}ee&&!ue?(A&&Z.children.forEach(Ee=>{!Ee.disabled&&z.has(Ee.key)&&z.delete(Ee.key)}),z.add(Y)):de&&U.add(Y),H&&I&&z.has(Y)&&z.delete(Y)}}return{checkedKeys:Array.from(z),indeterminateKeys:Array.from(U)}}function My(e,t,n,i){const{treeNodeMap:s,getChildren:u}=t,d=new Set,o=new Set(e);return e.forEach(m=>{const y=s.get(m);y!==void 0&&FI(y,w=>{if(w.disabled)return C1.STOP;const{key:S}=w;if(!d.has(S)&&(d.add(S),o.add(S),GH(w.rawNode,u))){if(i)return C1.STOP;if(!n)throw new KH}})}),o}function t9(e,{includeGroup:t=!1,includeSelf:n=!0},i){var s;const u=i.treeNodeMap;let d=e==null?null:(s=u.get(e))!==null&&s!==void 0?s:null;const o={keyPath:[],treeNodePath:[],treeNode:d};if(d!=null&&d.ignored)return o.treeNode=null,o;for(;d;)!d.ignored&&(t||!d.isGroup)&&o.treeNodePath.push(d),d=d.parent;return o.treeNodePath.reverse(),n||o.treeNodePath.pop(),o.keyPath=o.treeNodePath.map(m=>m.key),o}function n9(e){if(e.length===0)return null;const t=e[0];return t.isGroup||t.ignored||t.disabled?t.getNext():t}function r9(e,t){const n=e.siblings,i=n.length,{index:s}=e;return t?n[(s+1)%i]:s===n.length-1?null:n[s+1]}function ZM(e,t,{loop:n=!1,includeDisabled:i=!1}={}){const s=t==="prev"?i9:r9,u={reverse:t==="prev"};let d=!1,o=null;function m(y){if(y!==null){if(y===e){if(!d)d=!0;else if(!e.disabled&&!e.isGroup){o=e;return}}else if((!y.disabled||i)&&!y.ignored&&!y.isGroup){o=y;return}if(y.isGroup){const w=RT(y,u);w!==null?o=w:m(s(y,n))}else{const w=s(y,!1);if(w!==null)m(w);else{const S=o9(y);S!=null&&S.isGroup?m(s(S,n)):n&&m(s(y,!0))}}}}return m(e),o}function i9(e,t){const n=e.siblings,i=n.length,{index:s}=e;return t?n[(s-1+i)%i]:s===0?null:n[s-1]}function o9(e){return e.parent}function RT(e,t={}){const{reverse:n=!1}=t,{children:i}=e;if(i){const{length:s}=i,u=n?s-1:0,d=n?-1:s,o=n?-1:1;for(let m=u;m!==d;m+=o){const y=i[m];if(!y.disabled&&!y.ignored)if(y.isGroup){const w=RT(y,t);if(w!==null)return w}else return y}}return null}const s9={getChild(){return this.ignored?null:RT(this)},getParent(){const{parent:e}=this;return e!=null&&e.isGroup?e.getParent():e},getNext(e={}){return ZM(this,"next",e)},getPrev(e={}){return ZM(this,"prev",e)}};function a9(e,t){const n=t?new Set(t):void 0,i=[];function s(u){u.forEach(d=>{i.push(d),!(d.isLeaf||!d.children||d.ignored)&&(d.isGroup||n===void 0||n.has(d.key))&&s(d.children)})}return s(e),i}function l9(e,t){const n=e.key;for(;t;){if(t.key===n)return!0;t=t.parent}return!1}function $I(e,t,n,i,s,u=null,d=0){const o=[];return e.forEach((m,y)=>{var w;const S=Object.create(i);if(S.rawNode=m,S.siblings=o,S.level=d,S.index=y,S.isFirstChild=y===0,S.isLastChild=y+1===e.length,S.parent=u,!S.ignored){const A=s(m);Array.isArray(A)&&(S.children=$I(A,t,n,i,s,S,d+1))}o.push(S),t.set(S.key,S),n.has(d)||n.set(d,[]),(w=n.get(d))===null||w===void 0||w.push(S)}),o}function c9(e,t={}){var n;const i=new Map,s=new Map,{getDisabled:u=HH,getIgnored:d=jH,getIsGroup:o=YH,getKey:m=VH}=t,y=(n=t.getChildren)!==null&&n!==void 0?n:UH,w=t.ignoreEmptyChildren?Z=>{const Y=y(Z);return Array.isArray(Y)?Y.length?Y:null:Y}:y,S=Object.assign({get key(){return m(this.rawNode)},get disabled(){return u(this.rawNode)},get isGroup(){return o(this.rawNode)},get isLeaf(){return NH(this.rawNode,w)},get shallowLoaded(){return WH(this.rawNode,w)},get ignored(){return d(this.rawNode)},contains(Z){return l9(this,Z)}},s9),A=$I(e,i,s,S,w);function I(Z){if(Z==null)return null;const Y=i.get(Z);return Y&&!Y.isGroup&&!Y.ignored?Y:null}function z(Z){if(Z==null)return null;const Y=i.get(Z);return Y&&!Y.ignored?Y:null}function U(Z,Y){const ce=z(Z);return ce?ce.getPrev(Y):null}function j(Z,Y){const ce=z(Z);return ce?ce.getNext(Y):null}function F(Z){const Y=z(Z);return Y?Y.getParent():null}function H(Z){const Y=z(Z);return Y?Y.getChild():null}const J={treeNodes:A,treeNodeMap:i,levelTreeNodeMap:s,maxLevel:Math.max(...s.keys()),getChildren:w,getFlattenedNodes(Z){return a9(A,Z)},getNode:I,getPrev:U,getNext:j,getParent:F,getChild:H,getFirstAvailableNode(){return n9(A)},getPath(Z,Y={}){return t9(Z,Y,J)},getCheckedKeys(Z,Y={}){const{cascade:ce=!0,leafOnly:ee=!1,checkStrategy:de="all",allowNotLoaded:ue=!1}=Y;return fb({checkedKeys:db(Z),indeterminateKeys:hb(Z),cascade:ce,leafOnly:ee,checkStrategy:de,allowNotLoaded:ue},J)},check(Z,Y,ce={}){const{cascade:ee=!0,leafOnly:de=!1,checkStrategy:ue="all",allowNotLoaded:Ee=!1}=ce;return fb({checkedKeys:db(Y),indeterminateKeys:hb(Y),keysToCheck:Z==null?[]:qM(Z),cascade:ee,leafOnly:de,checkStrategy:ue,allowNotLoaded:Ee},J)},uncheck(Z,Y,ce={}){const{cascade:ee=!0,leafOnly:de=!1,checkStrategy:ue="all",allowNotLoaded:Ee=!1}=ce;return fb({checkedKeys:db(Y),indeterminateKeys:hb(Y),keysToUncheck:Z==null?[]:qM(Z),cascade:ee,leafOnly:de,checkStrategy:ue,allowNotLoaded:Ee},J)},getNonLeafKeys(Z={}){return $H(A,Z)}};return J}const Bn={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},u9=sd(Bn.neutralBase),NI=sd(Bn.neutralInvertBase),d9="rgba("+NI.slice(0,3).join(", ")+", ";function YM(e){return d9+String(e)+")"}function Ro(e){const t=Array.from(NI);return t[3]=Number(e),Rs(u9,t)}const h9=Object.assign(Object.assign({name:"common"},Bc),{baseColor:Bn.neutralBase,primaryColor:Bn.primaryDefault,primaryColorHover:Bn.primaryHover,primaryColorPressed:Bn.primaryActive,primaryColorSuppl:Bn.primarySuppl,infoColor:Bn.infoDefault,infoColorHover:Bn.infoHover,infoColorPressed:Bn.infoActive,infoColorSuppl:Bn.infoSuppl,successColor:Bn.successDefault,successColorHover:Bn.successHover,successColorPressed:Bn.successActive,successColorSuppl:Bn.successSuppl,warningColor:Bn.warningDefault,warningColorHover:Bn.warningHover,warningColorPressed:Bn.warningActive,warningColorSuppl:Bn.warningSuppl,errorColor:Bn.errorDefault,errorColorHover:Bn.errorHover,errorColorPressed:Bn.errorActive,errorColorSuppl:Bn.errorSuppl,textColorBase:Bn.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:Ro(Bn.alpha4),placeholderColor:Ro(Bn.alpha4),placeholderColorDisabled:Ro(Bn.alpha5),iconColor:Ro(Bn.alpha4),iconColorHover:c_(Ro(Bn.alpha4),{lightness:.75}),iconColorPressed:c_(Ro(Bn.alpha4),{lightness:.9}),iconColorDisabled:Ro(Bn.alpha5),opacity1:Bn.alpha1,opacity2:Bn.alpha2,opacity3:Bn.alpha3,opacity4:Bn.alpha4,opacity5:Bn.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:Ro(Number(Bn.alphaClose)),closeIconColorHover:Ro(Number(Bn.alphaClose)),closeIconColorPressed:Ro(Number(Bn.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:Ro(Bn.alpha4),clearColorHover:c_(Ro(Bn.alpha4),{lightness:.75}),clearColorPressed:c_(Ro(Bn.alpha4),{lightness:.9}),scrollbarColor:YM(Bn.alphaScrollbar),scrollbarColorHover:YM(Bn.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:Ro(Bn.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:Bn.neutralPopover,tableColor:Bn.neutralCard,cardColor:Bn.neutralCard,modalColor:Bn.neutralModal,bodyColor:Bn.neutralBody,tagColor:"#eee",avatarColor:Ro(Bn.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:Ro(Bn.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:Bn.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),xo=h9,f9={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"},p9=e=>{const{textColorDisabled:t,iconColor:n,textColor2:i,fontSizeSmall:s,fontSizeMedium:u,fontSizeLarge:d,fontSizeHuge:o}=e;return Object.assign(Object.assign({},f9),{fontSizeSmall:s,fontSizeMedium:u,fontSizeLarge:d,fontSizeHuge:o,textColor:t,iconColor:n,extraTextColor:i})},m9={name:"Empty",common:xo,self:p9},UI=m9,g9=It("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[xt("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[Ze("+",[xt("description",`
 margin-top: 8px;
 `)])]),xt("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),xt("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),v9=Object.assign(Object.assign({},ur.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),VI=pn({name:"Empty",props:v9,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=Ki(e),i=ur("Empty","-empty",g9,UI,e,t),{localeRef:s}=fg("Empty"),u=fr(bd,null),d=Le(()=>{var w,S,A;return(w=e.description)!==null&&w!==void 0?w:(A=(S=u==null?void 0:u.mergedComponentPropsRef.value)===null||S===void 0?void 0:S.Empty)===null||A===void 0?void 0:A.description}),o=Le(()=>{var w,S;return((S=(w=u==null?void 0:u.mergedComponentPropsRef.value)===null||w===void 0?void 0:w.Empty)===null||S===void 0?void 0:S.renderIcon)||(()=>V(SH,null))}),m=Le(()=>{const{size:w}=e,{common:{cubicBezierEaseInOut:S},self:{[an("iconSize",w)]:A,[an("fontSize",w)]:I,textColor:z,iconColor:U,extraTextColor:j}}=i.value;return{"--n-icon-size":A,"--n-font-size":I,"--n-bezier":S,"--n-text-color":z,"--n-icon-color":U,"--n-extra-text-color":j}}),y=n?Xi("empty",Le(()=>{let w="";const{size:S}=e;return w+=S[0],w}),m,e):void 0;return{mergedClsPrefix:t,mergedRenderIcon:o,localizedDescription:Le(()=>d.value||s.value.description),cssVars:n?void 0:m,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender}},render(){const{$slots:e,mergedClsPrefix:t,onRender:n}=this;return n==null||n(),V("div",{class:[`${t}-empty`,this.themeClass],style:this.cssVars},this.showIcon?V("div",{class:`${t}-empty__icon`},e.icon?e.icon():V($s,{clsPrefix:t},{default:this.mergedRenderIcon})):null,this.showDescription?V("div",{class:`${t}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?V("div",{class:`${t}-empty__extra`},e.extra()):null)}}),_9=e=>{const{scrollbarColor:t,scrollbarColorHover:n}=e;return{color:t,colorHover:n}},y9={name:"Scrollbar",common:xo,self:_9},s0=y9,{cubicBezierEaseInOut:XM}=Bc;function OT({name:e="fade-in",enterDuration:t="0.2s",leaveDuration:n="0.2s",enterCubicBezier:i=XM,leaveCubicBezier:s=XM}={}){return[Ze(`&.${e}-transition-enter-active`,{transition:`all ${t} ${i}!important`}),Ze(`&.${e}-transition-leave-active`,{transition:`all ${n} ${s}!important`}),Ze(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0}),Ze(`&.${e}-transition-leave-from, &.${e}-transition-enter-to`,{opacity:1})]}const x9=It("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[Ze(">",[It("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[Ze("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),Ze(">",[It("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),Ze(">, +",[It("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 -webkit-user-select: none;
 `,[Nt("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[Ze(">",[xt("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),Nt("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[Ze(">",[xt("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),Nt("disabled",[Ze(">",[xt("scrollbar",{pointerEvents:"none"})])]),Ze(">",[xt("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[OT(),Ze("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]),b9=Object.assign(Object.assign({},ur.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean}),jI=pn({name:"Scrollbar",props:b9,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:i}=Ki(e),s=Fc("Scrollbar",i,t),u=He(null),d=He(null),o=He(null),m=He(null),y=He(null),w=He(null),S=He(null),A=He(null),I=He(null),z=He(null),U=He(null),j=He(0),F=He(0),H=He(!1),J=He(!1);let Z=!1,Y=!1,ce,ee,de=0,ue=0,Ee=0,ze=0;const xe=n$(),qe=Le(()=>{const{value:Ae}=A,{value:mt}=w,{value:Vt}=z;return Ae===null||mt===null||Vt===null?0:Math.min(Ae,Vt*Ae/mt+e.size*1.5)}),Qe=Le(()=>`${qe.value}px`),Be=Le(()=>{const{value:Ae}=I,{value:mt}=S,{value:Vt}=U;return Ae===null||mt===null||Vt===null?0:Vt*Ae/mt+e.size*1.5}),st=Le(()=>`${Be.value}px`),it=Le(()=>{const{value:Ae}=A,{value:mt}=j,{value:Vt}=w,{value:gn}=z;if(Ae===null||Vt===null||gn===null)return 0;{const hn=Vt-Ae;return hn?mt/hn*(gn-qe.value):0}}),Pt=Le(()=>`${it.value}px`),Ke=Le(()=>{const{value:Ae}=I,{value:mt}=F,{value:Vt}=S,{value:gn}=U;if(Ae===null||Vt===null||gn===null)return 0;{const hn=Vt-Ae;return hn?mt/hn*(gn-Be.value):0}}),ut=Le(()=>`${Ke.value}px`),jt=Le(()=>{const{value:Ae}=A,{value:mt}=w;return Ae!==null&&mt!==null&&mt>Ae}),on=Le(()=>{const{value:Ae}=I,{value:mt}=S;return Ae!==null&&mt!==null&&mt>Ae}),En=Le(()=>{const{trigger:Ae}=e;return Ae==="none"||H.value}),Dn=Le(()=>{const{trigger:Ae}=e;return Ae==="none"||J.value}),Je=Le(()=>{const{container:Ae}=e;return Ae?Ae():d.value}),yt=Le(()=>{const{content:Ae}=e;return Ae?Ae():o.value}),wt=e6(()=>{e.container||Yt({top:j.value,left:F.value})}),Lt=()=>{wt.isDeactivated||Jt()},Ct=Ae=>{if(wt.isDeactivated)return;const{onResize:mt}=e;mt&&mt(Ae),Jt()},Yt=(Ae,mt)=>{if(!e.scrollable)return;if(typeof Ae=="number"){he(mt??0,Ae,0,!1,"auto");return}const{left:Vt,top:gn,index:hn,elSize:Fe,position:Rt,behavior:Qt,el:An,debounce:et=!0}=Ae;(Vt!==void 0||gn!==void 0)&&he(Vt??0,gn??0,0,!1,Qt),An!==void 0?he(0,An.offsetTop,An.offsetHeight,et,Qt):hn!==void 0&&Fe!==void 0?he(0,hn*Fe,Fe,et,Qt):Rt==="bottom"?he(0,Number.MAX_SAFE_INTEGER,0,!1,Qt):Rt==="top"&&he(0,0,0,!1,Qt)},ln=(Ae,mt)=>{if(!e.scrollable)return;const{value:Vt}=Je;Vt&&(typeof Ae=="object"?Vt.scrollBy(Ae):Vt.scrollBy(Ae,mt||0))};function he(Ae,mt,Vt,gn,hn){const{value:Fe}=Je;if(Fe){if(gn){const{scrollTop:Rt,offsetHeight:Qt}=Fe;if(mt>Rt){mt+Vt<=Rt+Qt||Fe.scrollTo({left:Ae,top:mt+Vt-Qt,behavior:hn});return}}Fe.scrollTo({left:Ae,top:mt,behavior:hn})}}function Me(){ht(),At(),Jt()}function Ue(){lt()}function lt(){gt(),Ne()}function gt(){ee!==void 0&&window.clearTimeout(ee),ee=window.setTimeout(()=>{J.value=!1},e.duration)}function Ne(){ce!==void 0&&window.clearTimeout(ce),ce=window.setTimeout(()=>{H.value=!1},e.duration)}function ht(){ce!==void 0&&window.clearTimeout(ce),H.value=!0}function At(){ee!==void 0&&window.clearTimeout(ee),J.value=!0}function Et(Ae){const{onScroll:mt}=e;mt&&mt(Ae),Oe()}function Oe(){const{value:Ae}=Je;Ae&&(j.value=Ae.scrollTop,F.value=Ae.scrollLeft*(s!=null&&s.value?-1:1))}function vt(){const{value:Ae}=yt;Ae&&(w.value=Ae.offsetHeight,S.value=Ae.offsetWidth);const{value:mt}=Je;mt&&(A.value=mt.offsetHeight,I.value=mt.offsetWidth);const{value:Vt}=y,{value:gn}=m;Vt&&(U.value=Vt.offsetWidth),gn&&(z.value=gn.offsetHeight)}function Wt(){const{value:Ae}=Je;Ae&&(j.value=Ae.scrollTop,F.value=Ae.scrollLeft*(s!=null&&s.value?-1:1),A.value=Ae.offsetHeight,I.value=Ae.offsetWidth,w.value=Ae.scrollHeight,S.value=Ae.scrollWidth);const{value:mt}=y,{value:Vt}=m;mt&&(U.value=mt.offsetWidth),Vt&&(z.value=Vt.offsetHeight)}function Jt(){e.scrollable&&(e.useUnifiedContainer?Wt():(vt(),Oe()))}function wn(Ae){var mt;return!(!((mt=u.value)===null||mt===void 0)&&mt.contains(Dc(Ae)))}function Cn(Ae){Ae.preventDefault(),Ae.stopPropagation(),Y=!0,Vi("mousemove",window,Fn,!0),Vi("mouseup",window,$n,!0),ue=F.value,Ee=s!=null&&s.value?window.innerWidth-Ae.clientX:Ae.clientX}function Fn(Ae){if(!Y)return;ce!==void 0&&window.clearTimeout(ce),ee!==void 0&&window.clearTimeout(ee);const{value:mt}=I,{value:Vt}=S,{value:gn}=Be;if(mt===null||Vt===null)return;const Fe=(s!=null&&s.value?window.innerWidth-Ae.clientX-Ee:Ae.clientX-Ee)*(Vt-mt)/(mt-gn),Rt=Vt-mt;let Qt=ue+Fe;Qt=Math.min(Rt,Qt),Qt=Math.max(Qt,0);const{value:An}=Je;if(An){An.scrollLeft=Qt*(s!=null&&s.value?-1:1);const{internalOnUpdateScrollLeft:et}=e;et&&et(Qt)}}function $n(Ae){Ae.preventDefault(),Ae.stopPropagation(),vi("mousemove",window,Fn,!0),vi("mouseup",window,$n,!0),Y=!1,Jt(),wn(Ae)&&lt()}function Zn(Ae){Ae.preventDefault(),Ae.stopPropagation(),Z=!0,Vi("mousemove",window,pr,!0),Vi("mouseup",window,sr,!0),de=j.value,ze=Ae.clientY}function pr(Ae){if(!Z)return;ce!==void 0&&window.clearTimeout(ce),ee!==void 0&&window.clearTimeout(ee);const{value:mt}=A,{value:Vt}=w,{value:gn}=qe;if(mt===null||Vt===null)return;const Fe=(Ae.clientY-ze)*(Vt-mt)/(mt-gn),Rt=Vt-mt;let Qt=de+Fe;Qt=Math.min(Rt,Qt),Qt=Math.max(Qt,0);const{value:An}=Je;An&&(An.scrollTop=Qt)}function sr(Ae){Ae.preventDefault(),Ae.stopPropagation(),vi("mousemove",window,pr,!0),vi("mouseup",window,sr,!0),Z=!1,Jt(),wn(Ae)&&lt()}El(()=>{const{value:Ae}=on,{value:mt}=jt,{value:Vt}=t,{value:gn}=y,{value:hn}=m;gn&&(Ae?gn.classList.remove(`${Vt}-scrollbar-rail--disabled`):gn.classList.add(`${Vt}-scrollbar-rail--disabled`)),hn&&(mt?hn.classList.remove(`${Vt}-scrollbar-rail--disabled`):hn.classList.add(`${Vt}-scrollbar-rail--disabled`))}),Si(()=>{e.container||Jt()}),Uo(()=>{ce!==void 0&&window.clearTimeout(ce),ee!==void 0&&window.clearTimeout(ee),vi("mousemove",window,pr,!0),vi("mouseup",window,sr,!0)});const li=ur("Scrollbar","-scrollbar",x9,s0,e,t),br=Le(()=>{const{common:{cubicBezierEaseInOut:Ae,scrollbarBorderRadius:mt,scrollbarHeight:Vt,scrollbarWidth:gn},self:{color:hn,colorHover:Fe}}=li.value;return{"--n-scrollbar-bezier":Ae,"--n-scrollbar-color":hn,"--n-scrollbar-color-hover":Fe,"--n-scrollbar-border-radius":mt,"--n-scrollbar-width":gn,"--n-scrollbar-height":Vt}}),dr=n?Xi("scrollbar",void 0,br,e):void 0;return Object.assign(Object.assign({},{scrollTo:Yt,scrollBy:ln,sync:Jt,syncUnifiedContainer:Wt,handleMouseEnterWrapper:Me,handleMouseLeaveWrapper:Ue}),{mergedClsPrefix:t,rtlEnabled:s,containerScrollTop:j,wrapperRef:u,containerRef:d,contentRef:o,yRailRef:m,xRailRef:y,needYBar:jt,needXBar:on,yBarSizePx:Qe,xBarSizePx:st,yBarTopPx:Pt,xBarLeftPx:ut,isShowXBar:En,isShowYBar:Dn,isIos:xe,handleScroll:Et,handleContentResize:Lt,handleContainerResize:Ct,handleYScrollMouseDown:Zn,handleXScrollMouseDown:Cn,cssVars:n?void 0:br,themeClass:dr==null?void 0:dr.themeClass,onRender:dr==null?void 0:dr.onRender})},render(){var e;const{$slots:t,mergedClsPrefix:n,triggerDisplayManually:i,rtlEnabled:s,internalHoistYRail:u}=this;if(!this.scrollable)return(e=t.default)===null||e===void 0?void 0:e.call(t);const d=this.trigger==="none",o=()=>V("div",{ref:"yRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--vertical`],"data-scrollbar-rail":!0,style:this.verticalRailStyle,"aria-hidden":!0},V(d?a1:Yo,d?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?V("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),m=()=>{var w,S;return(w=this.onRender)===null||w===void 0||w.call(this),V("div",Yh(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${n}-scrollbar`,this.themeClass,s&&`${n}-scrollbar--rtl`],style:this.cssVars,onMouseenter:i?void 0:this.handleMouseEnterWrapper,onMouseleave:i?void 0:this.handleMouseLeaveWrapper}),[this.container?(S=t.default)===null||S===void 0?void 0:S.call(t):V("div",{role:"none",ref:"containerRef",class:[`${n}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},V(ef,{onResize:this.handleContentResize},{default:()=>V("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${n}-scrollbar-content`,this.contentClass]},t)})),u?null:o(),this.xScrollable&&V("div",{ref:"xRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--horizontal`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},V(d?a1:Yo,d?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?V("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:s?this.xBarLeftPx:void 0,left:s?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},y=this.container?m():V(ef,{onResize:this.handleContainerResize},{default:m});return u?V(Vr,null,y,o()):y}}),xs=jI,w9=jI,T9={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"},C9=e=>{const{borderRadius:t,popoverColor:n,textColor3:i,dividerColor:s,textColor2:u,primaryColorPressed:d,textColorDisabled:o,primaryColor:m,opacityDisabled:y,hoverColor:w,fontSizeSmall:S,fontSizeMedium:A,fontSizeLarge:I,fontSizeHuge:z,heightSmall:U,heightMedium:j,heightLarge:F,heightHuge:H}=e;return Object.assign(Object.assign({},T9),{optionFontSizeSmall:S,optionFontSizeMedium:A,optionFontSizeLarge:I,optionFontSizeHuge:z,optionHeightSmall:U,optionHeightMedium:j,optionHeightLarge:F,optionHeightHuge:H,borderRadius:t,color:n,groupHeaderTextColor:i,actionDividerColor:s,optionTextColor:u,optionTextColorPressed:d,optionTextColorDisabled:o,optionTextColorActive:m,optionOpacityDisabled:y,optionCheckColor:m,optionColorPending:w,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:w,actionTextColor:u,loadingColor:m})},S9={name:"InternalSelectMenu",common:xo,peers:{Scrollbar:s0,Empty:UI},self:C9},WI=S9;function E9(e,t){return V(Yo,{name:"fade-in-scale-up-transition"},{default:()=>e?V($s,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>V(bH)}):null})}const KM=pn({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:t,pendingTmNodeRef:n,multipleRef:i,valueSetRef:s,renderLabelRef:u,renderOptionRef:d,labelFieldRef:o,valueFieldRef:m,showCheckmarkRef:y,nodePropsRef:w,handleOptionClick:S,handleOptionMouseEnter:A}=fr(dT),I=Fo(()=>{const{value:F}=n;return F?e.tmNode.key===F.key:!1});function z(F){const{tmNode:H}=e;H.disabled||S(F,H)}function U(F){const{tmNode:H}=e;H.disabled||A(F,H)}function j(F){const{tmNode:H}=e,{value:J}=I;H.disabled||J||A(F,H)}return{multiple:i,isGrouped:Fo(()=>{const{tmNode:F}=e,{parent:H}=F;return H&&H.rawNode.type==="group"}),showCheckmark:y,nodeProps:w,isPending:I,isSelected:Fo(()=>{const{value:F}=t,{value:H}=i;if(F===null)return!1;const J=e.tmNode.rawNode[m.value];if(H){const{value:Z}=s;return Z.has(J)}else return F===J}),labelField:o,renderLabel:u,renderOption:d,handleMouseMove:j,handleMouseEnter:U,handleClick:z}},render(){const{clsPrefix:e,tmNode:{rawNode:t},isSelected:n,isPending:i,isGrouped:s,showCheckmark:u,nodeProps:d,renderOption:o,renderLabel:m,handleClick:y,handleMouseEnter:w,handleMouseMove:S}=this,A=E9(n,e),I=m?[m(t,n),u&&A]:[Ju(t[this.labelField],t,n),u&&A],z=d==null?void 0:d(t),U=V("div",Object.assign({},z,{class:[`${e}-base-select-option`,t.class,z==null?void 0:z.class,{[`${e}-base-select-option--disabled`]:t.disabled,[`${e}-base-select-option--selected`]:n,[`${e}-base-select-option--grouped`]:s,[`${e}-base-select-option--pending`]:i,[`${e}-base-select-option--show-checkmark`]:u}],style:[(z==null?void 0:z.style)||"",t.style||""],onClick:Xx([y,z==null?void 0:z.onClick]),onMouseenter:Xx([w,z==null?void 0:z.onMouseenter]),onMousemove:Xx([S,z==null?void 0:z.onMousemove])}),V("div",{class:`${e}-base-select-option__content`},I));return t.render?t.render({node:U,option:t,selected:n}):o?o({node:U,option:t,selected:n}):U}}),JM=pn({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:t,labelFieldRef:n,nodePropsRef:i}=fr(dT);return{labelField:n,nodeProps:i,renderLabel:e,renderOption:t}},render(){const{clsPrefix:e,renderLabel:t,renderOption:n,nodeProps:i,tmNode:{rawNode:s}}=this,u=i==null?void 0:i(s),d=t?t(s,!1):Ju(s[this.labelField],s,!1),o=V("div",Object.assign({},u,{class:[`${e}-base-select-group-header`,u==null?void 0:u.class]}),d);return s.render?s.render({node:o,option:s}):n?n({node:o,option:s,selected:!1}):o}}),{cubicBezierEaseIn:QM,cubicBezierEaseOut:eP}=Bc;function af({transformOrigin:e="inherit",duration:t=".2s",enterScale:n=".9",originalTransform:i="",originalTransition:s=""}={}){return[Ze("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${QM}, transform ${t} ${QM} ${s&&","+s}`}),Ze("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${eP}, transform ${t} ${eP} ${s&&","+s}`}),Ze("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${i} scale(${n})`}),Ze("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${i} scale(1)`})]}const M9=It("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[It("scrollbar",`
 max-height: var(--n-height);
 `),It("virtual-list",`
 max-height: var(--n-height);
 `),It("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[xt("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),It("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),It("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),xt("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),xt("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),xt("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),It("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),It("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[Nt("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),Ze("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),Ze("&:active",`
 color: var(--n-option-text-color-pressed);
 `),Nt("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),Nt("pending",[Ze("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),Nt("selected",`
 color: var(--n-option-text-color-active);
 `,[Ze("&::before",`
 background-color: var(--n-option-color-active);
 `),Nt("pending",[Ze("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),Nt("disabled",`
 cursor: not-allowed;
 `,[ai("selected",`
 color: var(--n-option-text-color-disabled);
 `),Nt("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),xt("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[af({enterScale:"0.5"})])])]),P9=pn({name:"InternalSelectMenu",props:Object.assign(Object.assign({},ur.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const t=ur("InternalSelectMenu","-internal-select-menu",M9,WI,e,nr(e,"clsPrefix")),n=He(null),i=He(null),s=He(null),u=Le(()=>e.treeMate.getFlattenedNodes()),d=Le(()=>XH(u.value)),o=He(null);function m(){const{treeMate:Ke}=e;let ut=null;const{value:jt}=e;jt===null?ut=Ke.getFirstAvailableNode():(e.multiple?ut=Ke.getNode((jt||[])[(jt||[]).length-1]):ut=Ke.getNode(jt),(!ut||ut.disabled)&&(ut=Ke.getFirstAvailableNode())),ze(ut||null)}function y(){const{value:Ke}=o;Ke&&!e.treeMate.getNode(Ke.key)&&(o.value=null)}let w;xr(()=>e.show,Ke=>{Ke?w=xr(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?m():y(),Yi(xe)):y()},{immediate:!0}):w==null||w()},{immediate:!0}),Uo(()=>{w==null||w()});const S=Le(()=>Nm(t.value.self[an("optionHeight",e.size)])),A=Le(()=>U_(t.value.self[an("padding",e.size)])),I=Le(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),z=Le(()=>{const Ke=u.value;return Ke&&Ke.length===0});function U(Ke){const{onToggle:ut}=e;ut&&ut(Ke)}function j(Ke){const{onScroll:ut}=e;ut&&ut(Ke)}function F(Ke){var ut;(ut=s.value)===null||ut===void 0||ut.sync(),j(Ke)}function H(){var Ke;(Ke=s.value)===null||Ke===void 0||Ke.sync()}function J(){const{value:Ke}=o;return Ke||null}function Z(Ke,ut){ut.disabled||ze(ut,!1)}function Y(Ke,ut){ut.disabled||U(ut)}function ce(Ke){var ut;Qh(Ke,"action")||(ut=e.onKeyup)===null||ut===void 0||ut.call(e,Ke)}function ee(Ke){var ut;Qh(Ke,"action")||(ut=e.onKeydown)===null||ut===void 0||ut.call(e,Ke)}function de(Ke){var ut;(ut=e.onMousedown)===null||ut===void 0||ut.call(e,Ke),!e.focusable&&Ke.preventDefault()}function ue(){const{value:Ke}=o;Ke&&ze(Ke.getNext({loop:!0}),!0)}function Ee(){const{value:Ke}=o;Ke&&ze(Ke.getPrev({loop:!0}),!0)}function ze(Ke,ut=!1){o.value=Ke,ut&&xe()}function xe(){var Ke,ut;const jt=o.value;if(!jt)return;const on=d.value(jt.key);on!==null&&(e.virtualScroll?(Ke=i.value)===null||Ke===void 0||Ke.scrollTo({index:on}):(ut=s.value)===null||ut===void 0||ut.scrollTo({index:on,elSize:S.value}))}function qe(Ke){var ut,jt;!((ut=n.value)===null||ut===void 0)&&ut.contains(Ke.target)&&((jt=e.onFocus)===null||jt===void 0||jt.call(e,Ke))}function Qe(Ke){var ut,jt;!((ut=n.value)===null||ut===void 0)&&ut.contains(Ke.relatedTarget)||(jt=e.onBlur)===null||jt===void 0||jt.call(e,Ke)}Hi(dT,{handleOptionMouseEnter:Z,handleOptionClick:Y,valueSetRef:I,pendingTmNodeRef:o,nodePropsRef:nr(e,"nodeProps"),showCheckmarkRef:nr(e,"showCheckmark"),multipleRef:nr(e,"multiple"),valueRef:nr(e,"value"),renderLabelRef:nr(e,"renderLabel"),renderOptionRef:nr(e,"renderOption"),labelFieldRef:nr(e,"labelField"),valueFieldRef:nr(e,"valueField")}),Hi(MD,n),Si(()=>{const{value:Ke}=s;Ke&&Ke.sync()});const Be=Le(()=>{const{size:Ke}=e,{common:{cubicBezierEaseInOut:ut},self:{height:jt,borderRadius:on,color:En,groupHeaderTextColor:Dn,actionDividerColor:Je,optionTextColorPressed:yt,optionTextColor:wt,optionTextColorDisabled:Lt,optionTextColorActive:Ct,optionOpacityDisabled:Yt,optionCheckColor:ln,actionTextColor:he,optionColorPending:Me,optionColorActive:Ue,loadingColor:lt,loadingSize:gt,optionColorActivePending:Ne,[an("optionFontSize",Ke)]:ht,[an("optionHeight",Ke)]:At,[an("optionPadding",Ke)]:Et}}=t.value;return{"--n-height":jt,"--n-action-divider-color":Je,"--n-action-text-color":he,"--n-bezier":ut,"--n-border-radius":on,"--n-color":En,"--n-option-font-size":ht,"--n-group-header-text-color":Dn,"--n-option-check-color":ln,"--n-option-color-pending":Me,"--n-option-color-active":Ue,"--n-option-color-active-pending":Ne,"--n-option-height":At,"--n-option-opacity-disabled":Yt,"--n-option-text-color":wt,"--n-option-text-color-active":Ct,"--n-option-text-color-disabled":Lt,"--n-option-text-color-pressed":yt,"--n-option-padding":Et,"--n-option-padding-left":U_(Et,"left"),"--n-option-padding-right":U_(Et,"right"),"--n-loading-color":lt,"--n-loading-size":gt}}),{inlineThemeDisabled:st}=e,it=st?Xi("internal-select-menu",Le(()=>e.size[0]),Be,e):void 0,Pt={selfRef:n,next:ue,prev:Ee,getPendingTmNode:J};return GD(n,e.onResize),Object.assign({mergedTheme:t,virtualListRef:i,scrollbarRef:s,itemSize:S,padding:A,flattenedNodes:u,empty:z,virtualListContainer(){const{value:Ke}=i;return Ke==null?void 0:Ke.listElRef},virtualListContent(){const{value:Ke}=i;return Ke==null?void 0:Ke.itemsElRef},doScroll:j,handleFocusin:qe,handleFocusout:Qe,handleKeyUp:ce,handleKeyDown:ee,handleMouseDown:de,handleVirtualListResize:H,handleVirtualListScroll:F,cssVars:st?void 0:Be,themeClass:it==null?void 0:it.themeClass,onRender:it==null?void 0:it.onRender},Pt)},render(){const{$slots:e,virtualScroll:t,clsPrefix:n,mergedTheme:i,themeClass:s,onRender:u}=this;return u==null||u(),V("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${n}-base-select-menu`,s,this.multiple&&`${n}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?V("div",{class:`${n}-base-select-menu__loading`},V(pg,{clsPrefix:n,strokeWidth:20})):this.empty?V("div",{class:`${n}-base-select-menu__empty`,"data-empty":!0},kr(e.empty,()=>[V(VI,{theme:i.peers.Empty,themeOverrides:i.peerOverrides.Empty})])):V(xs,{ref:"scrollbarRef",theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?V(my,{ref:"virtualListRef",class:`${n}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:d})=>d.isGroup?V(JM,{key:d.key,clsPrefix:n,tmNode:d}):d.ignored?null:V(KM,{clsPrefix:n,key:d.key,tmNode:d})}):V("div",{class:`${n}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(d=>d.isGroup?V(JM,{key:d.key,clsPrefix:n,tmNode:d}):V(KM,{clsPrefix:n,key:d.key,tmNode:d})))}),Os(e.action,d=>d&&[V("div",{class:`${n}-base-select-menu__action`,"data-action":!0,key:"action"},d),V($c,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),A9=It("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),HI=pn({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(e){wd("-base-wave",A9,nr(e,"clsPrefix"));const t=He(null),n=He(!1);let i=null;return Uo(()=>{i!==null&&window.clearTimeout(i)}),{active:n,selfRef:t,play(){i!==null&&(window.clearTimeout(i),n.value=!1,i=null),Yi(()=>{var s;(s=t.value)===null||s===void 0||s.offsetHeight,n.value=!0,i=window.setTimeout(()=>{n.value=!1,i=null},1e3)})}}},render(){const{clsPrefix:e}=this;return V("div",{ref:"selfRef","aria-hidden":!0,class:[`${e}-base-wave`,this.active&&`${e}-base-wave--active`]})}}),k9={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"},D9=e=>{const{boxShadow2:t,popoverColor:n,textColor2:i,borderRadius:s,fontSize:u,dividerColor:d}=e;return Object.assign(Object.assign({},k9),{fontSize:u,borderRadius:s,color:n,dividerColor:d,textColor:i,boxShadow:t})},I9={name:"Popover",common:xo,self:D9},GI=I9,pb={top:"bottom",bottom:"top",left:"right",right:"left"},io="var(--n-arrow-height) * 1.414",z9=Ze([It("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 word-break: break-word;
 `,[Ze(">",[It("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),ai("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[ai("scrollable",[ai("show-header-or-footer","padding: var(--n-padding);")])]),xt("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),xt("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),Nt("scrollable, show-header-or-footer",[xt("content",`
 padding: var(--n-padding);
 `)])]),It("popover-shared",`
 transform-origin: inherit;
 `,[It("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[It("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${io});
 height: calc(${io});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),Ze("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),Ze("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),Ze("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),Ze("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),Is("top-start",`
 top: calc(${io} / -2);
 left: calc(${dl("top-start")} - var(--v-offset-left));
 `),Is("top",`
 top: calc(${io} / -2);
 transform: translateX(calc(${io} / -2)) rotate(45deg);
 left: 50%;
 `),Is("top-end",`
 top: calc(${io} / -2);
 right: calc(${dl("top-end")} + var(--v-offset-left));
 `),Is("bottom-start",`
 bottom: calc(${io} / -2);
 left: calc(${dl("bottom-start")} - var(--v-offset-left));
 `),Is("bottom",`
 bottom: calc(${io} / -2);
 transform: translateX(calc(${io} / -2)) rotate(45deg);
 left: 50%;
 `),Is("bottom-end",`
 bottom: calc(${io} / -2);
 right: calc(${dl("bottom-end")} + var(--v-offset-left));
 `),Is("left-start",`
 left: calc(${io} / -2);
 top: calc(${dl("left-start")} - var(--v-offset-top));
 `),Is("left",`
 left: calc(${io} / -2);
 transform: translateY(calc(${io} / -2)) rotate(45deg);
 top: 50%;
 `),Is("left-end",`
 left: calc(${io} / -2);
 bottom: calc(${dl("left-end")} + var(--v-offset-top));
 `),Is("right-start",`
 right: calc(${io} / -2);
 top: calc(${dl("right-start")} - var(--v-offset-top));
 `),Is("right",`
 right: calc(${io} / -2);
 transform: translateY(calc(${io} / -2)) rotate(45deg);
 top: 50%;
 `),Is("right-end",`
 right: calc(${io} / -2);
 bottom: calc(${dl("right-end")} + var(--v-offset-top));
 `),...Yj({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(e,t)=>{const n=["right","left"].includes(t),i=n?"width":"height";return e.map(s=>{const u=s.split("-")[1]==="end",o=`calc((${`var(--v-target-${i}, 0px)`} - ${io}) / 2)`,m=dl(s);return Ze(`[v-placement="${s}"] >`,[It("popover-shared",[Nt("center-arrow",[It("popover-arrow",`${t}: calc(max(${o}, ${m}) ${u?"+":"-"} var(--v-offset-${n?"left":"top"}));`)])])])})})]);function dl(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function Is(e,t){const n=e.split("-")[0],i=["top","bottom"].includes(n)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return Ze(`[v-placement="${e}"] >`,[It("popover-shared",`
 margin-${pb[n]}: var(--n-space);
 `,[Nt("show-arrow",`
 margin-${pb[n]}: var(--n-space-arrow);
 `),Nt("overlap",`
 margin: 0;
 `),j4("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${n}: 100%;
 ${pb[n]}: auto;
 ${i}
 `,[It("popover-arrow",t)])])])}const qI=Object.assign(Object.assign({},ur.props),{to:Xo.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number}),R9=({arrowStyle:e,clsPrefix:t})=>V("div",{key:"__popover-arrow__",class:`${t}-popover-arrow-wrapper`},V("div",{class:`${t}-popover-arrow`,style:e})),O9=pn({name:"PopoverBody",inheritAttrs:!1,props:qI,setup(e,{slots:t,attrs:n}){const{namespaceRef:i,mergedClsPrefixRef:s,inlineThemeDisabled:u}=Ki(e),d=ur("Popover","-popover",z9,GI,e,s),o=He(null),m=fr("NPopover"),y=He(null),w=He(e.show),S=He(!1);El(()=>{const{show:ee}=e;ee&&!W4()&&!e.internalDeactivateImmediately&&(S.value=!0)});const A=Le(()=>{const{trigger:ee,onClickoutside:de}=e,ue=[],{positionManuallyRef:{value:Ee}}=m;return Ee||(ee==="click"&&!de&&ue.push([ld,Z,void 0,{capture:!0}]),ee==="hover"&&ue.push([u$,J])),de&&ue.push([ld,Z,void 0,{capture:!0}]),(e.displayDirective==="show"||e.animated&&S.value)&&ue.push([vf,e.show]),ue}),I=Le(()=>{const ee=e.width==="trigger"?void 0:Kx(e.width),de=[];ee&&de.push({width:ee});const{maxWidth:ue,minWidth:Ee}=e;return ue&&de.push({maxWidth:Kx(ue)}),Ee&&de.push({maxWidth:Kx(Ee)}),u||de.push(z.value),de}),z=Le(()=>{const{common:{cubicBezierEaseInOut:ee,cubicBezierEaseIn:de,cubicBezierEaseOut:ue},self:{space:Ee,spaceArrow:ze,padding:xe,fontSize:qe,textColor:Qe,dividerColor:Be,color:st,boxShadow:it,borderRadius:Pt,arrowHeight:Ke,arrowOffset:ut,arrowOffsetVertical:jt}}=d.value;return{"--n-box-shadow":it,"--n-bezier":ee,"--n-bezier-ease-in":de,"--n-bezier-ease-out":ue,"--n-font-size":qe,"--n-text-color":Qe,"--n-color":st,"--n-divider-color":Be,"--n-border-radius":Pt,"--n-arrow-height":Ke,"--n-arrow-offset":ut,"--n-arrow-offset-vertical":jt,"--n-padding":xe,"--n-space":Ee,"--n-space-arrow":ze}}),U=u?Xi("popover",void 0,z,e):void 0;m.setBodyInstance({syncPosition:j}),Uo(()=>{m.setBodyInstance(null)}),xr(nr(e,"show"),ee=>{e.animated||(ee?w.value=!0:w.value=!1)});function j(){var ee;(ee=o.value)===null||ee===void 0||ee.syncPosition()}function F(ee){e.trigger==="hover"&&e.keepAliveOnHover&&e.show&&m.handleMouseEnter(ee)}function H(ee){e.trigger==="hover"&&e.keepAliveOnHover&&m.handleMouseLeave(ee)}function J(ee){e.trigger==="hover"&&!Y().contains(Dc(ee))&&m.handleMouseMoveOutside(ee)}function Z(ee){(e.trigger==="click"&&!Y().contains(Dc(ee))||e.onClickoutside)&&m.handleClickOutside(ee)}function Y(){return m.getTriggerElement()}Hi(kD,y),Hi(AD,null),Hi(PD,null);function ce(){if(U==null||U.onRender(),!(e.displayDirective==="show"||e.show||e.animated&&S.value))return null;let de;const ue=m.internalRenderBodyRef.value,{value:Ee}=s;if(ue)de=ue([`${Ee}-popover-shared`,U==null?void 0:U.themeClass.value,e.overlap&&`${Ee}-popover-shared--overlap`,e.showArrow&&`${Ee}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${Ee}-popover-shared--center-arrow`],y,I.value,F,H);else{const{value:ze}=m.extraClassRef,{internalTrapFocus:xe}=e,qe=!hy(t.header)||!hy(t.footer),Qe=()=>{var Be;const st=qe?V(Vr,null,Os(t.header,Ke=>Ke?V("div",{class:`${Ee}-popover__header`,style:e.headerStyle},Ke):null),Os(t.default,Ke=>Ke?V("div",{class:`${Ee}-popover__content`,style:e.contentStyle},t):null),Os(t.footer,Ke=>Ke?V("div",{class:`${Ee}-popover__footer`,style:e.footerStyle},Ke):null)):e.scrollable?(Be=t.default)===null||Be===void 0?void 0:Be.call(t):V("div",{class:`${Ee}-popover__content`,style:e.contentStyle},t),it=e.scrollable?V(w9,{contentClass:qe?void 0:`${Ee}-popover__content`,contentStyle:qe?void 0:e.contentStyle},{default:()=>st}):st,Pt=e.showArrow?R9({arrowStyle:e.arrowStyle,clsPrefix:Ee}):null;return[it,Pt]};de=V("div",Yh({class:[`${Ee}-popover`,`${Ee}-popover-shared`,U==null?void 0:U.themeClass.value,ze.map(Be=>`${Ee}-${Be}`),{[`${Ee}-popover--scrollable`]:e.scrollable,[`${Ee}-popover--show-header-or-footer`]:qe,[`${Ee}-popover--raw`]:e.raw,[`${Ee}-popover-shared--overlap`]:e.overlap,[`${Ee}-popover-shared--show-arrow`]:e.showArrow,[`${Ee}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:y,style:I.value,onKeydown:m.handleKeydown,onMouseenter:F,onMouseleave:H},n),xe?V(Q$,{active:e.show,autoFocus:!0},{default:Qe}):Qe())}return Wa(de,A.value)}return{displayed:S,namespace:i,isMounted:m.isMountedRef,zIndex:m.zIndexRef,followerRef:o,adjustedTo:Xo(e),followerEnabled:w,renderContentNode:ce}},render(){return V(ug,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===Xo.tdkey},{default:()=>this.animated?V(Yo,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;(e=this.internalOnAfterLeave)===null||e===void 0||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),L9=Object.keys(qI),B9={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function F9(e,t,n){B9[t].forEach(i=>{e.props?e.props=Object.assign({},e.props):e.props={};const s=e.props[i],u=n[i];s?e.props[i]=(...d)=>{s(...d),u(...d)}:e.props[i]=u})}const $9=Ui("").type,N9={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:Xo.propTo,scrollable:Boolean,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},U9=Object.assign(Object.assign(Object.assign({},ur.props),N9),{internalOnAfterLeave:Function,internalRenderBody:Function}),V9=pn({name:"Popover",inheritAttrs:!1,props:U9,__popover__:!0,setup(e){const t=gd(),n=He(null),i=Le(()=>e.show),s=He(e.defaultShow),u=ad(i,s),d=Fo(()=>e.disabled?!1:u.value),o=()=>{if(e.disabled)return!0;const{getDisabled:Qe}=e;return!!(Qe!=null&&Qe())},m=()=>o()?!1:u.value,y=uT(e,["arrow","showArrow"]),w=Le(()=>e.overlap?!1:y.value);let S=null;const A=He(null),I=He(null),z=Fo(()=>e.x!==void 0&&e.y!==void 0);function U(Qe){const{"onUpdate:show":Be,onUpdateShow:st,onShow:it,onHide:Pt}=e;s.value=Qe,Be&&Un(Be,Qe),st&&Un(st,Qe),Qe&&it&&Un(it,!0),Qe&&Pt&&Un(Pt,!1)}function j(){S&&S.syncPosition()}function F(){const{value:Qe}=A;Qe&&(window.clearTimeout(Qe),A.value=null)}function H(){const{value:Qe}=I;Qe&&(window.clearTimeout(Qe),I.value=null)}function J(){const Qe=o();if(e.trigger==="focus"&&!Qe){if(m())return;U(!0)}}function Z(){const Qe=o();if(e.trigger==="focus"&&!Qe){if(!m())return;U(!1)}}function Y(){const Qe=o();if(e.trigger==="hover"&&!Qe){if(H(),A.value!==null||m())return;const Be=()=>{U(!0),A.value=null},{delay:st}=e;st===0?Be():A.value=window.setTimeout(Be,st)}}function ce(){const Qe=o();if(e.trigger==="hover"&&!Qe){if(F(),I.value!==null||!m())return;const Be=()=>{U(!1),I.value=null},{duration:st}=e;st===0?Be():I.value=window.setTimeout(Be,st)}}function ee(){ce()}function de(Qe){var Be;m()&&(e.trigger==="click"&&(F(),H(),U(!1)),(Be=e.onClickoutside)===null||Be===void 0||Be.call(e,Qe))}function ue(){if(e.trigger==="click"&&!o()){F(),H();const Qe=!m();U(Qe)}}function Ee(Qe){e.internalTrapFocus&&Qe.key==="Escape"&&(F(),H(),U(!1))}function ze(Qe){s.value=Qe}function xe(){var Qe;return(Qe=n.value)===null||Qe===void 0?void 0:Qe.targetRef}function qe(Qe){S=Qe}return Hi("NPopover",{getTriggerElement:xe,handleKeydown:Ee,handleMouseEnter:Y,handleMouseLeave:ce,handleClickOutside:de,handleMouseMoveOutside:ee,setBodyInstance:qe,positionManuallyRef:z,isMountedRef:t,zIndexRef:nr(e,"zIndex"),extraClassRef:nr(e,"internalExtraClass"),internalRenderBodyRef:nr(e,"internalRenderBody")}),El(()=>{u.value&&o()&&U(!1)}),{binderInstRef:n,positionManually:z,mergedShowConsideringDisabledProp:d,uncontrolledShow:s,mergedShowArrow:w,getMergedShow:m,setShow:ze,handleClick:ue,handleMouseEnter:Y,handleMouseLeave:ce,handleFocus:J,handleBlur:Z,syncPosition:j}},render(){var e;const{positionManually:t,$slots:n}=this;let i,s=!1;if(!t&&(n.activator?i=jE(n,"activator"):i=jE(n,"trigger"),i)){i=ca(i),i=i.type===$9?V("span",[i]):i;const u={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((e=i.type)===null||e===void 0)&&e.__popover__)s=!0,i.props||(i.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),i.props.internalSyncTargetWithParent=!0,i.props.internalInheritedEventHandlers?i.props.internalInheritedEventHandlers=[u,...i.props.internalInheritedEventHandlers]:i.props.internalInheritedEventHandlers=[u];else{const{internalInheritedEventHandlers:d}=this,o=[u,...d],m={onBlur:y=>{o.forEach(w=>{w.onBlur(y)})},onFocus:y=>{o.forEach(w=>{w.onFocus(y)})},onClick:y=>{o.forEach(w=>{w.onClick(y)})},onMouseenter:y=>{o.forEach(w=>{w.onMouseenter(y)})},onMouseleave:y=>{o.forEach(w=>{w.onMouseleave(y)})}};F9(i,d?"nested":t?"manual":this.trigger,m)}}return V(lg,{ref:"binderInstRef",syncTarget:!s,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const u=this.getMergedShow();return[this.internalTrapFocus&&u?Wa(V("div",{style:{position:"fixed",inset:0}}),[[RD,{enabled:u,zIndex:this.zIndex}]]):null,t?null:V(cg,null,{default:()=>i}),V(O9,g4(this.$props,L9,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:u})),{default:()=>{var d,o;return(o=(d=this.$slots).default)===null||o===void 0?void 0:o.call(d)},header:()=>{var d,o;return(o=(d=this.$slots).header)===null||o===void 0?void 0:o.call(d)},footer:()=>{var d,o;return(o=(d=this.$slots).footer)===null||o===void 0?void 0:o.call(d)}})]}})}}),j9={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px",closeMarginRtl:"0 4px 0 0"},W9=e=>{const{textColor2:t,primaryColorHover:n,primaryColorPressed:i,primaryColor:s,infoColor:u,successColor:d,warningColor:o,errorColor:m,baseColor:y,borderColor:w,opacityDisabled:S,tagColor:A,closeIconColor:I,closeIconColorHover:z,closeIconColorPressed:U,borderRadiusSmall:j,fontSizeMini:F,fontSizeTiny:H,fontSizeSmall:J,fontSizeMedium:Z,heightMini:Y,heightTiny:ce,heightSmall:ee,heightMedium:de,closeColorHover:ue,closeColorPressed:Ee,buttonColor2Hover:ze,buttonColor2Pressed:xe,fontWeightStrong:qe}=e;return Object.assign(Object.assign({},j9),{closeBorderRadius:j,heightTiny:Y,heightSmall:ce,heightMedium:ee,heightLarge:de,borderRadius:j,opacityDisabled:S,fontSizeTiny:F,fontSizeSmall:H,fontSizeMedium:J,fontSizeLarge:Z,fontWeightStrong:qe,textColorCheckable:t,textColorHoverCheckable:t,textColorPressedCheckable:t,textColorChecked:y,colorCheckable:"#0000",colorHoverCheckable:ze,colorPressedCheckable:xe,colorChecked:s,colorCheckedHover:n,colorCheckedPressed:i,border:`1px solid ${w}`,textColor:t,color:A,colorBordered:"rgb(250, 250, 252)",closeIconColor:I,closeIconColorHover:z,closeIconColorPressed:U,closeColorHover:ue,closeColorPressed:Ee,borderPrimary:`1px solid ${gr(s,{alpha:.3})}`,textColorPrimary:s,colorPrimary:gr(s,{alpha:.12}),colorBorderedPrimary:gr(s,{alpha:.1}),closeIconColorPrimary:s,closeIconColorHoverPrimary:s,closeIconColorPressedPrimary:s,closeColorHoverPrimary:gr(s,{alpha:.12}),closeColorPressedPrimary:gr(s,{alpha:.18}),borderInfo:`1px solid ${gr(u,{alpha:.3})}`,textColorInfo:u,colorInfo:gr(u,{alpha:.12}),colorBorderedInfo:gr(u,{alpha:.1}),closeIconColorInfo:u,closeIconColorHoverInfo:u,closeIconColorPressedInfo:u,closeColorHoverInfo:gr(u,{alpha:.12}),closeColorPressedInfo:gr(u,{alpha:.18}),borderSuccess:`1px solid ${gr(d,{alpha:.3})}`,textColorSuccess:d,colorSuccess:gr(d,{alpha:.12}),colorBorderedSuccess:gr(d,{alpha:.1}),closeIconColorSuccess:d,closeIconColorHoverSuccess:d,closeIconColorPressedSuccess:d,closeColorHoverSuccess:gr(d,{alpha:.12}),closeColorPressedSuccess:gr(d,{alpha:.18}),borderWarning:`1px solid ${gr(o,{alpha:.35})}`,textColorWarning:o,colorWarning:gr(o,{alpha:.15}),colorBorderedWarning:gr(o,{alpha:.12}),closeIconColorWarning:o,closeIconColorHoverWarning:o,closeIconColorPressedWarning:o,closeColorHoverWarning:gr(o,{alpha:.12}),closeColorPressedWarning:gr(o,{alpha:.18}),borderError:`1px solid ${gr(m,{alpha:.23})}`,textColorError:m,colorError:gr(m,{alpha:.1}),colorBorderedError:gr(m,{alpha:.08}),closeIconColorError:m,closeIconColorHoverError:m,closeIconColorPressedError:m,closeColorHoverError:gr(m,{alpha:.12}),closeColorPressedError:gr(m,{alpha:.18})})},H9={name:"Tag",common:xo,self:W9},G9=H9,q9={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Z9=It("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[Nt("strong",`
 font-weight: var(--n-font-weight-strong);
 `),xt("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),xt("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),xt("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),xt("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),Nt("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[xt("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),xt("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),Nt("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),Nt("icon, avatar",[Nt("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),Nt("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),Nt("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[ai("disabled",[Ze("&:hover","background-color: var(--n-color-hover-checkable);",[ai("checked","color: var(--n-text-color-hover-checkable);")]),Ze("&:active","background-color: var(--n-color-pressed-checkable);",[ai("checked","color: var(--n-text-color-pressed-checkable);")])]),Nt("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[ai("disabled",[Ze("&:hover","background-color: var(--n-color-checked-hover);"),Ze("&:active","background-color: var(--n-color-checked-pressed);")])])])]),Y9=Object.assign(Object.assign(Object.assign({},ur.props),q9),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),X9="n-tag",mb=pn({name:"Tag",props:Y9,setup(e){const t=He(null),{mergedBorderedRef:n,mergedClsPrefixRef:i,inlineThemeDisabled:s,mergedRtlRef:u}=Ki(e),d=ur("Tag","-tag",Z9,G9,e,i);Hi(X9,{roundRef:nr(e,"round")});function o(I){if(!e.disabled&&e.checkable){const{checked:z,onCheckedChange:U,onUpdateChecked:j,"onUpdate:checked":F}=e;j&&j(!z),F&&F(!z),U&&U(!z)}}function m(I){if(e.triggerClickOnClose||I.stopPropagation(),!e.disabled){const{onClose:z}=e;z&&Un(z,I)}}const y={setTextContent(I){const{value:z}=t;z&&(z.textContent=I)}},w=Fc("Tag",u,i),S=Le(()=>{const{type:I,size:z,color:{color:U,textColor:j}={}}=e,{common:{cubicBezierEaseInOut:F},self:{padding:H,closeMargin:J,closeMarginRtl:Z,borderRadius:Y,opacityDisabled:ce,textColorCheckable:ee,textColorHoverCheckable:de,textColorPressedCheckable:ue,textColorChecked:Ee,colorCheckable:ze,colorHoverCheckable:xe,colorPressedCheckable:qe,colorChecked:Qe,colorCheckedHover:Be,colorCheckedPressed:st,closeBorderRadius:it,fontWeightStrong:Pt,[an("colorBordered",I)]:Ke,[an("closeSize",z)]:ut,[an("closeIconSize",z)]:jt,[an("fontSize",z)]:on,[an("height",z)]:En,[an("color",I)]:Dn,[an("textColor",I)]:Je,[an("border",I)]:yt,[an("closeIconColor",I)]:wt,[an("closeIconColorHover",I)]:Lt,[an("closeIconColorPressed",I)]:Ct,[an("closeColorHover",I)]:Yt,[an("closeColorPressed",I)]:ln}}=d.value;return{"--n-font-weight-strong":Pt,"--n-avatar-size-override":`calc(${En} - 8px)`,"--n-bezier":F,"--n-border-radius":Y,"--n-border":yt,"--n-close-icon-size":jt,"--n-close-color-pressed":ln,"--n-close-color-hover":Yt,"--n-close-border-radius":it,"--n-close-icon-color":wt,"--n-close-icon-color-hover":Lt,"--n-close-icon-color-pressed":Ct,"--n-close-icon-color-disabled":wt,"--n-close-margin":J,"--n-close-margin-rtl":Z,"--n-close-size":ut,"--n-color":U||(n.value?Ke:Dn),"--n-color-checkable":ze,"--n-color-checked":Qe,"--n-color-checked-hover":Be,"--n-color-checked-pressed":st,"--n-color-hover-checkable":xe,"--n-color-pressed-checkable":qe,"--n-font-size":on,"--n-height":En,"--n-opacity-disabled":ce,"--n-padding":H,"--n-text-color":j||Je,"--n-text-color-checkable":ee,"--n-text-color-checked":Ee,"--n-text-color-hover-checkable":de,"--n-text-color-pressed-checkable":ue}}),A=s?Xi("tag",Le(()=>{let I="";const{type:z,size:U,color:{color:j,textColor:F}={}}=e;return I+=z[0],I+=U[0],j&&(I+=`a${Vm(j)}`),F&&(I+=`b${Vm(F)}`),n.value&&(I+="c"),I}),S,e):void 0;return Object.assign(Object.assign({},y),{rtlEnabled:w,mergedClsPrefix:i,contentRef:t,mergedBordered:n,handleClick:o,handleCloseClick:m,cssVars:s?void 0:S,themeClass:A==null?void 0:A.themeClass,onRender:A==null?void 0:A.onRender})},render(){var e,t;const{mergedClsPrefix:n,rtlEnabled:i,closable:s,color:{borderColor:u}={},round:d,onRender:o,$slots:m}=this;o==null||o();const y=Os(m.avatar,S=>S&&V("div",{class:`${n}-tag__avatar`},S)),w=Os(m.icon,S=>S&&V("div",{class:`${n}-tag__icon`},S));return V("div",{class:[`${n}-tag`,this.themeClass,{[`${n}-tag--rtl`]:i,[`${n}-tag--strong`]:this.strong,[`${n}-tag--disabled`]:this.disabled,[`${n}-tag--checkable`]:this.checkable,[`${n}-tag--checked`]:this.checkable&&this.checked,[`${n}-tag--round`]:d,[`${n}-tag--avatar`]:y,[`${n}-tag--icon`]:w,[`${n}-tag--closable`]:s}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},w||y,V("span",{class:`${n}-tag__content`,ref:"contentRef"},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e)),!this.checkable&&s?V(BI,{clsPrefix:n,class:`${n}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:d,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?V("div",{class:`${n}-tag__border`,style:{borderColor:u}}):null)}}),K9=It("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[Ze(">",[xt("clear",`
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `,[Ze("&:hover",`
 color: var(--n-clear-color-hover)!important;
 `),Ze("&:active",`
 color: var(--n-clear-color-pressed)!important;
 `)]),xt("placeholder",`
 display: flex;
 `),xt("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Ym({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),S1=pn({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(e){return wd("-base-clear",K9,nr(e,"clsPrefix")),{handleMouseDown(t){t.preventDefault()}}},render(){const{clsPrefix:e}=this;return V("div",{class:`${e}-base-clear`},V(o0,null,{default:()=>{var t,n;return this.show?V("div",{key:"dismiss",class:`${e}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},kr(this.$slots.icon,()=>[V($s,{clsPrefix:e},{default:()=>V(IH,null)})])):V("div",{key:"icon",class:`${e}-base-clear__placeholder`},(n=(t=this.$slots).placeholder)===null||n===void 0?void 0:n.call(t))}}))}}),ZI=pn({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(e,{slots:t}){return()=>{const{clsPrefix:n}=e;return V(pg,{clsPrefix:n,class:`${n}-base-suffix`,strokeWidth:24,scale:.85,show:e.loading},{default:()=>e.showArrow?V(S1,{clsPrefix:n,show:e.showClear,onClear:e.onClear},{placeholder:()=>V($s,{clsPrefix:n,class:`${n}-base-suffix__arrow`},{default:()=>kr(t.default,()=>[V(DH,null)])})}):null})}}}),J9={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},Q9=e=>{const{borderRadius:t,textColor2:n,textColorDisabled:i,inputColor:s,inputColorDisabled:u,primaryColor:d,primaryColorHover:o,warningColor:m,warningColorHover:y,errorColor:w,errorColorHover:S,borderColor:A,iconColor:I,iconColorDisabled:z,clearColor:U,clearColorHover:j,clearColorPressed:F,placeholderColor:H,placeholderColorDisabled:J,fontSizeTiny:Z,fontSizeSmall:Y,fontSizeMedium:ce,fontSizeLarge:ee,heightTiny:de,heightSmall:ue,heightMedium:Ee,heightLarge:ze}=e;return Object.assign(Object.assign({},J9),{fontSizeTiny:Z,fontSizeSmall:Y,fontSizeMedium:ce,fontSizeLarge:ee,heightTiny:de,heightSmall:ue,heightMedium:Ee,heightLarge:ze,borderRadius:t,textColor:n,textColorDisabled:i,placeholderColor:H,placeholderColorDisabled:J,color:s,colorDisabled:u,colorActive:s,border:`1px solid ${A}`,borderHover:`1px solid ${o}`,borderActive:`1px solid ${d}`,borderFocus:`1px solid ${o}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${gr(d,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${gr(d,{alpha:.2})}`,caretColor:d,arrowColor:I,arrowColorDisabled:z,loadingColor:d,borderWarning:`1px solid ${m}`,borderHoverWarning:`1px solid ${y}`,borderActiveWarning:`1px solid ${m}`,borderFocusWarning:`1px solid ${y}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${gr(m,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${gr(m,{alpha:.2})}`,colorActiveWarning:s,caretColorWarning:m,borderError:`1px solid ${w}`,borderHoverError:`1px solid ${S}`,borderActiveError:`1px solid ${w}`,borderFocusError:`1px solid ${S}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${gr(w,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${gr(w,{alpha:.2})}`,colorActiveError:s,caretColorError:w,clearColor:U,clearColorHover:j,clearColorPressed:F})},e7={name:"InternalSelection",common:xo,peers:{Popover:GI},self:Q9},YI=e7,t7=Ze([It("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[It("base-loading",`
 color: var(--n-loading-color);
 `),It("base-selection-tags","min-height: var(--n-height);"),xt("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),xt("state-border",`
 z-index: 1;
 border-color: #0000;
 `),It("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[xt("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),It("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[xt("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),It("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[xt("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),It("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),It("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[It("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[xt("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),xt("render-label",`
 color: var(--n-text-color);
 `)]),ai("disabled",[Ze("&:hover",[xt("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),Nt("focus",[xt("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),Nt("active",[xt("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),It("base-selection-label","background-color: var(--n-color-active);"),It("base-selection-tags","background-color: var(--n-color-active);")])]),Nt("disabled","cursor: not-allowed;",[xt("arrow",`
 color: var(--n-arrow-color-disabled);
 `),It("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[It("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),xt("render-label",`
 color: var(--n-text-color-disabled);
 `)]),It("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),It("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),It("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[xt("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),xt("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(e=>Nt(`${e}-status`,[xt("state-border",`border: var(--n-border-${e});`),ai("disabled",[Ze("&:hover",[xt("state-border",`
 box-shadow: var(--n-box-shadow-hover-${e});
 border: var(--n-border-hover-${e});
 `)]),Nt("active",[xt("state-border",`
 box-shadow: var(--n-box-shadow-active-${e});
 border: var(--n-border-active-${e});
 `),It("base-selection-label",`background-color: var(--n-color-active-${e});`),It("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),Nt("focus",[xt("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),It("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),It("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[Ze("&:last-child","padding-right: 0;"),It("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[xt("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),n7=pn({name:"InternalSelection",props:Object.assign(Object.assign({},ur.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const t=He(null),n=He(null),i=He(null),s=He(null),u=He(null),d=He(null),o=He(null),m=He(null),y=He(null),w=He(null),S=He(!1),A=He(!1),I=He(!1),z=ur("InternalSelection","-internal-selection",t7,YI,e,nr(e,"clsPrefix")),U=Le(()=>e.clearable&&!e.disabled&&(I.value||e.active)),j=Le(()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):Ju(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder),F=Le(()=>{const Oe=e.selectedOption;if(Oe)return Oe[e.labelField]}),H=Le(()=>e.multiple?!!(Array.isArray(e.selectedOptions)&&e.selectedOptions.length):e.selectedOption!==null);function J(){var Oe;const{value:vt}=t;if(vt){const{value:Wt}=n;Wt&&(Wt.style.width=`${vt.offsetWidth}px`,e.maxTagCount!=="responsive"&&((Oe=y.value)===null||Oe===void 0||Oe.sync()))}}function Z(){const{value:Oe}=w;Oe&&(Oe.style.display="none")}function Y(){const{value:Oe}=w;Oe&&(Oe.style.display="inline-block")}xr(nr(e,"active"),Oe=>{Oe||Z()}),xr(nr(e,"pattern"),()=>{e.multiple&&Yi(J)});function ce(Oe){const{onFocus:vt}=e;vt&&vt(Oe)}function ee(Oe){const{onBlur:vt}=e;vt&&vt(Oe)}function de(Oe){const{onDeleteOption:vt}=e;vt&&vt(Oe)}function ue(Oe){const{onClear:vt}=e;vt&&vt(Oe)}function Ee(Oe){const{onPatternInput:vt}=e;vt&&vt(Oe)}function ze(Oe){var vt;(!Oe.relatedTarget||!(!((vt=i.value)===null||vt===void 0)&&vt.contains(Oe.relatedTarget)))&&ce(Oe)}function xe(Oe){var vt;!((vt=i.value)===null||vt===void 0)&&vt.contains(Oe.relatedTarget)||ee(Oe)}function qe(Oe){ue(Oe)}function Qe(){I.value=!0}function Be(){I.value=!1}function st(Oe){!e.active||!e.filterable||Oe.target!==n.value&&Oe.preventDefault()}function it(Oe){de(Oe)}function Pt(Oe){if(Oe.key==="Backspace"&&!Ke.value&&!e.pattern.length){const{selectedOptions:vt}=e;vt!=null&&vt.length&&it(vt[vt.length-1])}}const Ke=He(!1);let ut=null;function jt(Oe){const{value:vt}=t;if(vt){const Wt=Oe.target.value;vt.textContent=Wt,J()}e.ignoreComposition&&Ke.value?ut=Oe:Ee(Oe)}function on(){Ke.value=!0}function En(){Ke.value=!1,e.ignoreComposition&&Ee(ut),ut=null}function Dn(Oe){var vt;A.value=!0,(vt=e.onPatternFocus)===null||vt===void 0||vt.call(e,Oe)}function Je(Oe){var vt;A.value=!1,(vt=e.onPatternBlur)===null||vt===void 0||vt.call(e,Oe)}function yt(){var Oe,vt;if(e.filterable)A.value=!1,(Oe=d.value)===null||Oe===void 0||Oe.blur(),(vt=n.value)===null||vt===void 0||vt.blur();else if(e.multiple){const{value:Wt}=s;Wt==null||Wt.blur()}else{const{value:Wt}=u;Wt==null||Wt.blur()}}function wt(){var Oe,vt,Wt;e.filterable?(A.value=!1,(Oe=d.value)===null||Oe===void 0||Oe.focus()):e.multiple?(vt=s.value)===null||vt===void 0||vt.focus():(Wt=u.value)===null||Wt===void 0||Wt.focus()}function Lt(){const{value:Oe}=n;Oe&&(Y(),Oe.focus())}function Ct(){const{value:Oe}=n;Oe&&Oe.blur()}function Yt(Oe){const{value:vt}=o;vt&&vt.setTextContent(`+${Oe}`)}function ln(){const{value:Oe}=m;return Oe}function he(){return n.value}let Me=null;function Ue(){Me!==null&&window.clearTimeout(Me)}function lt(){e.disabled||e.active||(Ue(),Me=window.setTimeout(()=>{H.value&&(S.value=!0)},100))}function gt(){Ue()}function Ne(Oe){Oe||(Ue(),S.value=!1)}xr(H,Oe=>{Oe||(S.value=!1)}),Si(()=>{El(()=>{const Oe=d.value;Oe&&(Oe.tabIndex=e.disabled||A.value?-1:0)})}),GD(i,e.onResize);const{inlineThemeDisabled:ht}=e,At=Le(()=>{const{size:Oe}=e,{common:{cubicBezierEaseInOut:vt},self:{borderRadius:Wt,color:Jt,placeholderColor:wn,textColor:Cn,paddingSingle:Fn,paddingMultiple:$n,caretColor:Zn,colorDisabled:pr,textColorDisabled:sr,placeholderColorDisabled:li,colorActive:br,boxShadowFocus:dr,boxShadowActive:rr,boxShadowHover:Ae,border:mt,borderFocus:Vt,borderHover:gn,borderActive:hn,arrowColor:Fe,arrowColorDisabled:Rt,loadingColor:Qt,colorActiveWarning:An,boxShadowFocusWarning:et,boxShadowActiveWarning:Gt,boxShadowHoverWarning:sn,borderWarning:On,borderFocusWarning:xi,borderHoverWarning:ri,borderActiveWarning:oe,colorActiveError:L,boxShadowFocusError:G,boxShadowActiveError:ne,boxShadowHoverError:pe,borderError:we,borderFocusError:Re,borderHoverError:$e,borderActiveError:De,clearColor:je,clearColorHover:bt,clearColorPressed:Zt,clearSize:ye,arrowSize:pt,[an("height",Oe)]:kt,[an("fontSize",Oe)]:en}}=z.value;return{"--n-bezier":vt,"--n-border":mt,"--n-border-active":hn,"--n-border-focus":Vt,"--n-border-hover":gn,"--n-border-radius":Wt,"--n-box-shadow-active":rr,"--n-box-shadow-focus":dr,"--n-box-shadow-hover":Ae,"--n-caret-color":Zn,"--n-color":Jt,"--n-color-active":br,"--n-color-disabled":pr,"--n-font-size":en,"--n-height":kt,"--n-padding-single":Fn,"--n-padding-multiple":$n,"--n-placeholder-color":wn,"--n-placeholder-color-disabled":li,"--n-text-color":Cn,"--n-text-color-disabled":sr,"--n-arrow-color":Fe,"--n-arrow-color-disabled":Rt,"--n-loading-color":Qt,"--n-color-active-warning":An,"--n-box-shadow-focus-warning":et,"--n-box-shadow-active-warning":Gt,"--n-box-shadow-hover-warning":sn,"--n-border-warning":On,"--n-border-focus-warning":xi,"--n-border-hover-warning":ri,"--n-border-active-warning":oe,"--n-color-active-error":L,"--n-box-shadow-focus-error":G,"--n-box-shadow-active-error":ne,"--n-box-shadow-hover-error":pe,"--n-border-error":we,"--n-border-focus-error":Re,"--n-border-hover-error":$e,"--n-border-active-error":De,"--n-clear-size":ye,"--n-clear-color":je,"--n-clear-color-hover":bt,"--n-clear-color-pressed":Zt,"--n-arrow-size":pt}}),Et=ht?Xi("internal-selection",Le(()=>e.size[0]),At,e):void 0;return{mergedTheme:z,mergedClearable:U,patternInputFocused:A,filterablePlaceholder:j,label:F,selected:H,showTagsPanel:S,isComposing:Ke,counterRef:o,counterWrapperRef:m,patternInputMirrorRef:t,patternInputRef:n,selfRef:i,multipleElRef:s,singleElRef:u,patternInputWrapperRef:d,overflowRef:y,inputTagElRef:w,handleMouseDown:st,handleFocusin:ze,handleClear:qe,handleMouseEnter:Qe,handleMouseLeave:Be,handleDeleteOption:it,handlePatternKeyDown:Pt,handlePatternInputInput:jt,handlePatternInputBlur:Je,handlePatternInputFocus:Dn,handleMouseEnterCounter:lt,handleMouseLeaveCounter:gt,handleFocusout:xe,handleCompositionEnd:En,handleCompositionStart:on,onPopoverUpdateShow:Ne,focus:wt,focusInput:Lt,blur:yt,blurInput:Ct,updateCounter:Yt,getCounter:ln,getTail:he,renderLabel:e.renderLabel,cssVars:ht?void 0:At,themeClass:Et==null?void 0:Et.themeClass,onRender:Et==null?void 0:Et.onRender}},render(){const{status:e,multiple:t,size:n,disabled:i,filterable:s,maxTagCount:u,bordered:d,clsPrefix:o,onRender:m,renderTag:y,renderLabel:w}=this;m==null||m();const S=u==="responsive",A=typeof u=="number",I=S||A,z=V(a1,null,{default:()=>V(ZI,{clsPrefix:o,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var j,F;return(F=(j=this.$slots).arrow)===null||F===void 0?void 0:F.call(j)}})});let U;if(t){const{labelField:j}=this,F=xe=>V("div",{class:`${o}-base-selection-tag-wrapper`,key:xe.value},y?y({option:xe,handleClose:()=>this.handleDeleteOption(xe)}):V(mb,{size:n,closable:!xe.disabled,disabled:i,onClose:()=>this.handleDeleteOption(xe),internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>w?w(xe,!0):Ju(xe[j],xe,!0)})),H=()=>(A?this.selectedOptions.slice(0,u):this.selectedOptions).map(F),J=s?V("div",{class:`${o}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},V("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:i,value:this.pattern,autofocus:this.autofocus,class:`${o}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),V("span",{ref:"patternInputMirrorRef",class:`${o}-base-selection-input-tag__mirror`},this.pattern)):null,Z=S?()=>V("div",{class:`${o}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},V(mb,{size:n,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:i})):void 0;let Y;if(A){const xe=this.selectedOptions.length-u;xe>0&&(Y=V("div",{class:`${o}-base-selection-tag-wrapper`,key:"__counter__"},V(mb,{size:n,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:i},{default:()=>`+${xe}`})))}const ce=S?s?V(dM,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:H,counter:Z,tail:()=>J}):V(dM,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:H,counter:Z}):A?H().concat(Y):H(),ee=I?()=>V("div",{class:`${o}-base-selection-popover`},S?H():this.selectedOptions.map(F)):void 0,de=I?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,Ee=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?V("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`},V("div",{class:`${o}-base-selection-placeholder__inner`},this.placeholder)):null,ze=s?V("div",{ref:"patternInputWrapperRef",class:`${o}-base-selection-tags`},ce,S?null:J,z):V("div",{ref:"multipleElRef",class:`${o}-base-selection-tags`,tabindex:i?void 0:0},ce,z);U=V(Vr,null,I?V(V9,Object.assign({},de,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>ze,default:ee}):ze,Ee)}else if(s){const j=this.pattern||this.isComposing,F=this.active?!j:!this.selected,H=this.active?!1:this.selected;U=V("div",{ref:"patternInputWrapperRef",class:`${o}-base-selection-label`},V("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${o}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:i,disabled:i,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),H?V("div",{class:`${o}-base-selection-label__render-label ${o}-base-selection-overlay`,key:"input"},V("div",{class:`${o}-base-selection-overlay__wrapper`},y?y({option:this.selectedOption,handleClose:()=>{}}):w?w(this.selectedOption,!0):Ju(this.label,this.selectedOption,!0))):null,F?V("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`,key:"placeholder"},V("div",{class:`${o}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,z)}else U=V("div",{ref:"singleElRef",class:`${o}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?V("div",{class:`${o}-base-selection-input`,title:gD(this.label),key:"input"},V("div",{class:`${o}-base-selection-input__content`},y?y({option:this.selectedOption,handleClose:()=>{}}):w?w(this.selectedOption,!0):Ju(this.label,this.selectedOption,!0))):V("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`,key:"placeholder"},V("div",{class:`${o}-base-selection-placeholder__inner`},this.placeholder)),z);return V("div",{ref:"selfRef",class:[`${o}-base-selection`,this.themeClass,e&&`${o}-base-selection--${e}-status`,{[`${o}-base-selection--active`]:this.active,[`${o}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${o}-base-selection--disabled`]:this.disabled,[`${o}-base-selection--multiple`]:this.multiple,[`${o}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},U,d?V("div",{class:`${o}-base-selection__border`}):null,d?V("div",{class:`${o}-base-selection__state-border`}):null)}}),tP=pn({name:"SlotMachineNumber",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],required:!0},oldOriginalNumber:{type:Number,default:void 0},newOriginalNumber:{type:Number,default:void 0}},setup(e){const t=He(null),n=He(e.value),i=He(e.value),s=He("up"),u=He(!1),d=Le(()=>u.value?`${e.clsPrefix}-base-slot-machine-current-number--${s.value}-scroll`:null),o=Le(()=>u.value?`${e.clsPrefix}-base-slot-machine-old-number--${s.value}-scroll`:null);xr(nr(e,"value"),(w,S)=>{n.value=S,i.value=w,Yi(m)});function m(){const w=e.newOriginalNumber,S=e.oldOriginalNumber;S===void 0||w===void 0||(w>S?y("up"):S>w&&y("down"))}function y(w){s.value=w,u.value=!1,Yi(()=>{var S;(S=t.value)===null||S===void 0||S.offsetWidth,u.value=!0})}return()=>{const{clsPrefix:w}=e;return V("span",{ref:t,class:`${w}-base-slot-machine-number`},n.value!==null?V("span",{class:[`${w}-base-slot-machine-old-number ${w}-base-slot-machine-old-number--top`,o.value]},n.value):null,V("span",{class:[`${w}-base-slot-machine-current-number`,d.value]},V("span",{ref:"numberWrapper",class:[`${w}-base-slot-machine-current-number__inner`,typeof e.value!="number"&&`${w}-base-slot-machine-current-number__inner--not-number`]},i.value)),n.value!==null?V("span",{class:[`${w}-base-slot-machine-old-number ${w}-base-slot-machine-old-number--bottom`,o.value]},n.value):null)}}}),{cubicBezierEaseInOut:pc}=Bc;function XI({duration:e=".2s",delay:t=".1s"}={}){return[Ze("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),Ze("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),Ze("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${pc},
 max-width ${e} ${pc} ${t},
 margin-left ${e} ${pc} ${t},
 margin-right ${e} ${pc} ${t};
 `),Ze("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${pc} ${t},
 max-width ${e} ${pc},
 margin-left ${e} ${pc},
 margin-right ${e} ${pc};
 `)]}const{cubicBezierEaseOut:Rh}=Bc;function r7({duration:e=".2s"}={}){return[Ze("&.fade-up-width-expand-transition-leave-active",{transition:`
 opacity ${e} ${Rh},
 max-width ${e} ${Rh},
 transform ${e} ${Rh}
 `}),Ze("&.fade-up-width-expand-transition-enter-active",{transition:`
 opacity ${e} ${Rh},
 max-width ${e} ${Rh},
 transform ${e} ${Rh}
 `}),Ze("&.fade-up-width-expand-transition-enter-to",{opacity:1,transform:"translateX(0) translateY(0)"}),Ze("&.fade-up-width-expand-transition-enter-from",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"}),Ze("&.fade-up-width-expand-transition-leave-from",{opacity:1,transform:"translateY(0)"}),Ze("&.fade-up-width-expand-transition-leave-to",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"})]}const i7=Ze([Ze("@keyframes n-base-slot-machine-fade-up-in",`
 from {
 transform: translateY(60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),Ze("@keyframes n-base-slot-machine-fade-down-in",`
 from {
 transform: translateY(-60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),Ze("@keyframes n-base-slot-machine-fade-up-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(-60%);
 opacity: 0;
 }
 `),Ze("@keyframes n-base-slot-machine-fade-down-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(60%);
 opacity: 0;
 }
 `),It("base-slot-machine",`
 overflow: hidden;
 white-space: nowrap;
 display: inline-block;
 height: 18px;
 line-height: 18px;
 `,[It("base-slot-machine-number",`
 display: inline-block;
 position: relative;
 height: 18px;
 width: .6em;
 max-width: .6em;
 `,[r7({duration:".2s"}),XI({duration:".2s",delay:"0s"}),It("base-slot-machine-old-number",`
 display: inline-block;
 opacity: 0;
 position: absolute;
 left: 0;
 right: 0;
 `,[Nt("top",{transform:"translateY(-100%)"}),Nt("bottom",{transform:"translateY(100%)"}),Nt("down-scroll",{animation:"n-base-slot-machine-fade-down-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),Nt("up-scroll",{animation:"n-base-slot-machine-fade-up-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1})]),It("base-slot-machine-current-number",`
 display: inline-block;
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 1;
 transform: translateY(0);
 width: .6em;
 `,[Nt("down-scroll",{animation:"n-base-slot-machine-fade-down-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),Nt("up-scroll",{animation:"n-base-slot-machine-fade-up-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),xt("inner",`
 display: inline-block;
 position: absolute;
 right: 0;
 top: 0;
 width: .6em;
 `,[Nt("not-number",`
 right: unset;
 left: 0;
 `)])])])])]),o7=pn({name:"BaseSlotMachine",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],default:0},max:{type:Number,default:void 0},appeared:{type:Boolean,required:!0}},setup(e){wd("-base-slot-machine",i7,nr(e,"clsPrefix"));const t=He(),n=He(),i=Le(()=>{if(typeof e.value=="string")return[];if(e.value<1)return[0];const s=[];let u=e.value;for(e.max!==void 0&&(u=Math.min(e.max,u));u>=1;)s.push(u%10),u/=10,u=Math.floor(u);return s.reverse(),s});return xr(nr(e,"value"),(s,u)=>{typeof s=="string"?(n.value=void 0,t.value=void 0):typeof u=="string"?(n.value=s,t.value=void 0):(n.value=s,t.value=u)}),()=>{const{value:s,clsPrefix:u}=e;return typeof s=="number"?V("span",{class:`${u}-base-slot-machine`},V(eD,{name:"fade-up-width-expand-transition",tag:"span"},{default:()=>i.value.map((d,o)=>V(tP,{clsPrefix:u,key:i.value.length-o-1,oldOriginalNumber:t.value,newOriginalNumber:n.value,value:d}))}),V(zT,{key:"+",width:!0},{default:()=>e.max!==void 0&&e.max<s?V(tP,{clsPrefix:u,value:"+"}):null})):V("span",{class:`${u}-base-slot-machine`},s)}}}),{cubicBezierEaseInOut:Da,cubicBezierEaseOut:s7,cubicBezierEaseIn:a7}=Bc;function l7({overflow:e="hidden",duration:t=".3s",originalTransition:n="",leavingDelay:i="0s",foldPadding:s=!1,enterToProps:u=void 0,leaveToProps:d=void 0,reverse:o=!1}={}){const m=o?"leave":"enter",y=o?"enter":"leave";return[Ze(`&.fade-in-height-expand-transition-${y}-from,
 &.fade-in-height-expand-transition-${m}-to`,Object.assign(Object.assign({},u),{opacity:1})),Ze(`&.fade-in-height-expand-transition-${y}-to,
 &.fade-in-height-expand-transition-${m}-from`,Object.assign(Object.assign({},d),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:s?"0 !important":void 0,paddingBottom:s?"0 !important":void 0})),Ze(`&.fade-in-height-expand-transition-${y}-active`,`
 overflow: ${e};
 transition:
 max-height ${t} ${Da} ${i},
 opacity ${t} ${s7} ${i},
 margin-top ${t} ${Da} ${i},
 margin-bottom ${t} ${Da} ${i},
 padding-top ${t} ${Da} ${i},
 padding-bottom ${t} ${Da} ${i}
 ${n?","+n:""}
 `),Ze(`&.fade-in-height-expand-transition-${m}-active`,`
 overflow: ${e};
 transition:
 max-height ${t} ${Da},
 opacity ${t} ${a7},
 margin-top ${t} ${Da},
 margin-bottom ${t} ${Da},
 padding-top ${t} ${Da},
 padding-bottom ${t} ${Da}
 ${n?","+n:""}
 `)]}function Py(e){return e.type==="group"}function KI(e){return e.type==="ignored"}function gb(e,t){try{return!!(1+t.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function c7(e,t){return{getIsGroup:Py,getIgnored:KI,getKey(i){return Py(i)?i.name||i.key||"key-required":i[e]},getChildren(i){return i[t]}}}function u7(e,t,n,i){if(!t)return e;function s(u){if(!Array.isArray(u))return[];const d=[];for(const o of u)if(Py(o)){const m=s(o[i]);m.length&&d.push(Object.assign({},o,{[i]:m}))}else{if(KI(o))continue;t(n,o)&&d.push(o)}return d}return s(e)}function d7(e,t,n){const i=new Map;return e.forEach(s=>{Py(s)?s[n].forEach(u=>{i.set(u[t],u)}):i.set(s[t],s)}),i}const h7=xf&&"chrome"in window;xf&&navigator.userAgent.includes("Firefox");const JI=xf&&navigator.userAgent.includes("Safari")&&!h7,f7={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"},p7=e=>{const{textColor2:t,textColor3:n,textColorDisabled:i,primaryColor:s,primaryColorHover:u,inputColor:d,inputColorDisabled:o,borderColor:m,warningColor:y,warningColorHover:w,errorColor:S,errorColorHover:A,borderRadius:I,lineHeight:z,fontSizeTiny:U,fontSizeSmall:j,fontSizeMedium:F,fontSizeLarge:H,heightTiny:J,heightSmall:Z,heightMedium:Y,heightLarge:ce,actionColor:ee,clearColor:de,clearColorHover:ue,clearColorPressed:Ee,placeholderColor:ze,placeholderColorDisabled:xe,iconColor:qe,iconColorDisabled:Qe,iconColorHover:Be,iconColorPressed:st}=e;return Object.assign(Object.assign({},f7),{countTextColorDisabled:i,countTextColor:n,heightTiny:J,heightSmall:Z,heightMedium:Y,heightLarge:ce,fontSizeTiny:U,fontSizeSmall:j,fontSizeMedium:F,fontSizeLarge:H,lineHeight:z,lineHeightTextarea:z,borderRadius:I,iconSize:"16px",groupLabelColor:ee,groupLabelTextColor:t,textColor:t,textColorDisabled:i,textDecorationColor:t,caretColor:s,placeholderColor:ze,placeholderColorDisabled:xe,color:d,colorDisabled:o,colorFocus:d,groupLabelBorder:`1px solid ${m}`,border:`1px solid ${m}`,borderHover:`1px solid ${u}`,borderDisabled:`1px solid ${m}`,borderFocus:`1px solid ${u}`,boxShadowFocus:`0 0 0 2px ${gr(s,{alpha:.2})}`,loadingColor:s,loadingColorWarning:y,borderWarning:`1px solid ${y}`,borderHoverWarning:`1px solid ${w}`,colorFocusWarning:d,borderFocusWarning:`1px solid ${w}`,boxShadowFocusWarning:`0 0 0 2px ${gr(y,{alpha:.2})}`,caretColorWarning:y,loadingColorError:S,borderError:`1px solid ${S}`,borderHoverError:`1px solid ${A}`,colorFocusError:d,borderFocusError:`1px solid ${A}`,boxShadowFocusError:`0 0 0 2px ${gr(S,{alpha:.2})}`,caretColorError:S,clearColor:de,clearColorHover:ue,clearColorPressed:Ee,iconColor:qe,iconColorDisabled:Qe,iconColorHover:Be,iconColorPressed:st,suffixTextColor:t})},m7={name:"Input",common:xo,self:p7},LT=m7,QI="n-input";function g7(e){let t=0;for(const n of e)t++;return t}function x_(e){return e===""||e==null}function v7(e){const t=He(null);function n(){const{value:u}=e;if(!(u!=null&&u.focus)){s();return}const{selectionStart:d,selectionEnd:o,value:m}=u;if(d==null||o==null){s();return}t.value={start:d,end:o,beforeText:m.slice(0,d),afterText:m.slice(o)}}function i(){var u;const{value:d}=t,{value:o}=e;if(!d||!o)return;const{value:m}=o,{start:y,beforeText:w,afterText:S}=d;let A=m.length;if(m.endsWith(S))A=m.length-S.length;else if(m.startsWith(w))A=w.length;else{const I=w[y-1],z=m.indexOf(I,y-1);z!==-1&&(A=z+1)}(u=o.setSelectionRange)===null||u===void 0||u.call(o,A,A)}function s(){t.value=null}return xr(e,s),{recordCursor:n,restoreCursor:i}}const nP=pn({name:"InputWordCount",setup(e,{slots:t}){const{mergedValueRef:n,maxlengthRef:i,mergedClsPrefixRef:s,countGraphemesRef:u}=fr(QI),d=Le(()=>{const{value:o}=n;return o===null||Array.isArray(o)?0:(u.value||g7)(o)});return()=>{const{value:o}=i,{value:m}=n;return V("span",{class:`${s.value}-input-word-count`},_4(t.default,{value:m===null||Array.isArray(m)?"":m},()=>[o===void 0?d.value:`${d.value} / ${o}`]))}}}),_7=It("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color .3s var(--n-bezier);
 font-size: var(--n-font-size);
 --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);
`,[xt("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),xt("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 -webkit-text-fill-color .3s var(--n-bezier),
 caret-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier);
 `),xt("input-el, textarea-el",`
 -webkit-appearance: none;
 scrollbar-width: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--n-text-decoration-color);
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 background-color: transparent;
 `,[Ze("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),Ze("&::placeholder",`
 color: #0000;
 -webkit-text-fill-color: transparent !important;
 `),Ze("&:-webkit-autofill ~",[xt("placeholder","display: none;")])]),Nt("round",[ai("textarea","border-radius: calc(var(--n-height) / 2);")]),xt("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--n-placeholder-color);
 `,[Ze("span",`
 width: 100%;
 display: inline-block;
 `)]),Nt("textarea",[xt("placeholder","overflow: visible;")]),ai("autosize","width: 100%;"),Nt("autosize",[xt("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),It("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 `),xt("input-mirror",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre;
 pointer-events: none;
 `),xt("input-el",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[Ze("+",[xt("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),ai("textarea",[xt("placeholder","white-space: nowrap;")]),xt("eye",`
 transition: color .3s var(--n-bezier);
 `),Nt("textarea","width: 100%;",[It("input-word-count",`
 position: absolute;
 right: var(--n-padding-right);
 bottom: var(--n-padding-vertical);
 `),Nt("resizable",[It("input-wrapper",`
 resize: vertical;
 min-height: var(--n-height);
 `)]),xt("textarea-el, textarea-mirror, placeholder",`
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--n-padding-vertical);
 padding-bottom: var(--n-padding-vertical);
 word-break: break-word;
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--n-line-height-textarea);
 margin: 0;
 resize: none;
 white-space: pre-wrap;
 `),xt("textarea-mirror",`
 width: 100%;
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),Nt("pair",[xt("input-el, placeholder","text-align: center;"),xt("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 white-space: nowrap;
 `,[It("icon",`
 color: var(--n-icon-color);
 `),It("base-icon",`
 color: var(--n-icon-color);
 `)])]),Nt("disabled",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[xt("border","border: var(--n-border-disabled);"),xt("input-el, textarea-el",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 text-decoration-color: var(--n-text-color-disabled);
 `),xt("placeholder","color: var(--n-placeholder-color-disabled);"),xt("separator","color: var(--n-text-color-disabled);",[It("icon",`
 color: var(--n-icon-color-disabled);
 `),It("base-icon",`
 color: var(--n-icon-color-disabled);
 `)]),It("input-word-count",`
 color: var(--n-count-text-color-disabled);
 `),xt("suffix, prefix","color: var(--n-text-color-disabled);",[It("icon",`
 color: var(--n-icon-color-disabled);
 `),It("internal-icon",`
 color: var(--n-icon-color-disabled);
 `)])]),ai("disabled",[xt("eye",`
 display: flex;
 align-items: center;
 justify-content: center;
 color: var(--n-icon-color);
 cursor: pointer;
 `,[Ze("&:hover",`
 color: var(--n-icon-color-hover);
 `),Ze("&:active",`
 color: var(--n-icon-color-pressed);
 `)]),Ze("&:hover",[xt("state-border","border: var(--n-border-hover);")]),Nt("focus","background-color: var(--n-color-focus);",[xt("state-border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),xt("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--n-border);
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),xt("state-border",`
 border-color: #0000;
 z-index: 1;
 `),xt("prefix","margin-right: 4px;"),xt("suffix",`
 margin-left: 4px;
 `),xt("suffix, prefix",`
 transition: color .3s var(--n-bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--n-height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--n-suffix-text-color);
 `,[It("base-loading",`
 font-size: var(--n-icon-size);
 margin: 0 2px;
 color: var(--n-loading-color);
 `),It("base-clear",`
 font-size: var(--n-icon-size);
 `,[xt("placeholder",[It("base-icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)])]),Ze(">",[It("icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)]),It("base-icon",`
 font-size: var(--n-icon-size);
 `)]),It("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--n-count-text-color);
 transition: color .3s var(--n-bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `),["warning","error"].map(e=>Nt(`${e}-status`,[ai("disabled",[It("base-loading",`
 color: var(--n-loading-color-${e})
 `),xt("input-el, textarea-el",`
 caret-color: var(--n-caret-color-${e});
 `),xt("state-border",`
 border: var(--n-border-${e});
 `),Ze("&:hover",[xt("state-border",`
 border: var(--n-border-hover-${e});
 `)]),Ze("&:focus",`
 background-color: var(--n-color-focus-${e});
 `,[xt("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)]),Nt("focus",`
 background-color: var(--n-color-focus-${e});
 `,[xt("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),y7=It("input",[Nt("disabled",[xt("input-el, textarea-el",`
 -webkit-text-fill-color: var(--n-text-color-disabled);
 `)])]),x7=Object.assign(Object.assign({},ur.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:Function,onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:Boolean,showPasswordToggle:Boolean}),lf=pn({name:"Input",props:x7,setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:n,inlineThemeDisabled:i,mergedRtlRef:s}=Ki(e),u=ur("Input","-input",_7,LT,e,t);JI&&wd("-input-safari",y7,t);const d=He(null),o=He(null),m=He(null),y=He(null),w=He(null),S=He(null),A=He(null),I=v7(A),z=He(null),{localeRef:U}=fg("Input"),j=He(e.defaultValue),F=nr(e,"value"),H=ad(F,j),J=dg(e),{mergedSizeRef:Z,mergedDisabledRef:Y,mergedStatusRef:ce}=J,ee=He(!1),de=He(!1),ue=He(!1),Ee=He(!1);let ze=null;const xe=Le(()=>{const{placeholder:L,pair:G}=e;return G?Array.isArray(L)?L:L===void 0?["",""]:[L,L]:L===void 0?[U.value.placeholder]:[L]}),qe=Le(()=>{const{value:L}=ue,{value:G}=H,{value:ne}=xe;return!L&&(x_(G)||Array.isArray(G)&&x_(G[0]))&&ne[0]}),Qe=Le(()=>{const{value:L}=ue,{value:G}=H,{value:ne}=xe;return!L&&ne[1]&&(x_(G)||Array.isArray(G)&&x_(G[1]))}),Be=Fo(()=>e.internalForceFocus||ee.value),st=Fo(()=>{if(Y.value||e.readonly||!e.clearable||!Be.value&&!de.value)return!1;const{value:L}=H,{value:G}=Be;return e.pair?!!(Array.isArray(L)&&(L[0]||L[1]))&&(de.value||G):!!L&&(de.value||G)}),it=Le(()=>{const{showPasswordOn:L}=e;if(L)return L;if(e.showPasswordToggle)return"click"}),Pt=He(!1),Ke=Le(()=>{const{textDecoration:L}=e;return L?Array.isArray(L)?L.map(G=>({textDecoration:G})):[{textDecoration:L}]:["",""]}),ut=He(void 0),jt=()=>{var L,G;if(e.type==="textarea"){const{autosize:ne}=e;if(ne&&(ut.value=(G=(L=z.value)===null||L===void 0?void 0:L.$el)===null||G===void 0?void 0:G.offsetWidth),!o.value||typeof ne=="boolean")return;const{paddingTop:pe,paddingBottom:we,lineHeight:Re}=window.getComputedStyle(o.value),$e=Number(pe.slice(0,-2)),De=Number(we.slice(0,-2)),je=Number(Re.slice(0,-2)),{value:bt}=m;if(!bt)return;if(ne.minRows){const Zt=Math.max(ne.minRows,1),ye=`${$e+De+je*Zt}px`;bt.style.minHeight=ye}if(ne.maxRows){const Zt=`${$e+De+je*ne.maxRows}px`;bt.style.maxHeight=Zt}}},on=Le(()=>{const{maxlength:L}=e;return L===void 0?void 0:Number(L)});Si(()=>{const{value:L}=H;Array.isArray(L)||Rt(L)});const En=md().proxy;function Dn(L){const{onUpdateValue:G,"onUpdate:value":ne,onInput:pe}=e,{nTriggerFormInput:we}=J;G&&Un(G,L),ne&&Un(ne,L),pe&&Un(pe,L),j.value=L,we()}function Je(L){const{onChange:G}=e,{nTriggerFormChange:ne}=J;G&&Un(G,L),j.value=L,ne()}function yt(L){const{onBlur:G}=e,{nTriggerFormBlur:ne}=J;G&&Un(G,L),ne()}function wt(L){const{onFocus:G}=e,{nTriggerFormFocus:ne}=J;G&&Un(G,L),ne()}function Lt(L){const{onClear:G}=e;G&&Un(G,L)}function Ct(L){const{onInputBlur:G}=e;G&&Un(G,L)}function Yt(L){const{onInputFocus:G}=e;G&&Un(G,L)}function ln(){const{onDeactivate:L}=e;L&&Un(L)}function he(){const{onActivate:L}=e;L&&Un(L)}function Me(L){const{onClick:G}=e;G&&Un(G,L)}function Ue(L){const{onWrapperFocus:G}=e;G&&Un(G,L)}function lt(L){const{onWrapperBlur:G}=e;G&&Un(G,L)}function gt(){ue.value=!0}function Ne(L){ue.value=!1,L.target===S.value?ht(L,1):ht(L,0)}function ht(L,G=0,ne="input"){const pe=L.target.value;if(Rt(pe),L instanceof InputEvent&&!L.isComposing&&(ue.value=!1),e.type==="textarea"){const{value:Re}=z;Re&&Re.syncUnifiedContainer()}if(ze=pe,ue.value)return;I.recordCursor();const we=At(pe);if(we)if(!e.pair)ne==="input"?Dn(pe):Je(pe);else{let{value:Re}=H;Array.isArray(Re)?Re=[Re[0],Re[1]]:Re=["",""],Re[G]=pe,ne==="input"?Dn(Re):Je(Re)}En.$forceUpdate(),we||Yi(I.restoreCursor)}function At(L){const{countGraphemes:G,maxlength:ne,minlength:pe}=e;if(G){let Re;if(ne!==void 0&&(Re===void 0&&(Re=G(L)),Re>Number(ne))||pe!==void 0&&(Re===void 0&&(Re=G(L)),Re<Number(ne)))return!1}const{allowInput:we}=e;return typeof we=="function"?we(L):!0}function Et(L){Ct(L),L.relatedTarget===d.value&&ln(),L.relatedTarget!==null&&(L.relatedTarget===w.value||L.relatedTarget===S.value||L.relatedTarget===o.value)||(Ee.value=!1),Jt(L,"blur"),A.value=null}function Oe(L,G){Yt(L),ee.value=!0,Ee.value=!0,he(),Jt(L,"focus"),G===0?A.value=w.value:G===1?A.value=S.value:G===2&&(A.value=o.value)}function vt(L){e.passivelyActivated&&(lt(L),Jt(L,"blur"))}function Wt(L){e.passivelyActivated&&(ee.value=!0,Ue(L),Jt(L,"focus"))}function Jt(L,G){L.relatedTarget!==null&&(L.relatedTarget===w.value||L.relatedTarget===S.value||L.relatedTarget===o.value||L.relatedTarget===d.value)||(G==="focus"?(wt(L),ee.value=!0):G==="blur"&&(yt(L),ee.value=!1))}function wn(L,G){ht(L,G,"change")}function Cn(L){Me(L)}function Fn(L){Lt(L),e.pair?(Dn(["",""]),Je(["",""])):(Dn(""),Je(""))}function $n(L){const{onMousedown:G}=e;G&&G(L);const{tagName:ne}=L.target;if(ne!=="INPUT"&&ne!=="TEXTAREA"){if(e.resizable){const{value:pe}=d;if(pe){const{left:we,top:Re,width:$e,height:De}=pe.getBoundingClientRect(),je=14;if(we+$e-je<L.clientX&&L.clientX<we+$e&&Re+De-je<L.clientY&&L.clientY<Re+De)return}}L.preventDefault(),ee.value||Ae()}}function Zn(){var L;de.value=!0,e.type==="textarea"&&((L=z.value)===null||L===void 0||L.handleMouseEnterWrapper())}function pr(){var L;de.value=!1,e.type==="textarea"&&((L=z.value)===null||L===void 0||L.handleMouseLeaveWrapper())}function sr(){Y.value||it.value==="click"&&(Pt.value=!Pt.value)}function li(L){if(Y.value)return;L.preventDefault();const G=pe=>{pe.preventDefault(),vi("mouseup",document,G)};if(Vi("mouseup",document,G),it.value!=="mousedown")return;Pt.value=!0;const ne=()=>{Pt.value=!1,vi("mouseup",document,ne)};Vi("mouseup",document,ne)}function br(L){var G;switch((G=e.onKeydown)===null||G===void 0||G.call(e,L),L.key){case"Escape":rr();break;case"Enter":dr(L);break}}function dr(L){var G,ne;if(e.passivelyActivated){const{value:pe}=Ee;if(pe){e.internalDeactivateOnEnter&&rr();return}L.preventDefault(),e.type==="textarea"?(G=o.value)===null||G===void 0||G.focus():(ne=w.value)===null||ne===void 0||ne.focus()}}function rr(){e.passivelyActivated&&(Ee.value=!1,Yi(()=>{var L;(L=d.value)===null||L===void 0||L.focus()}))}function Ae(){var L,G,ne;Y.value||(e.passivelyActivated?(L=d.value)===null||L===void 0||L.focus():((G=o.value)===null||G===void 0||G.focus(),(ne=w.value)===null||ne===void 0||ne.focus()))}function mt(){var L;!((L=d.value)===null||L===void 0)&&L.contains(document.activeElement)&&document.activeElement.blur()}function Vt(){var L,G;(L=o.value)===null||L===void 0||L.select(),(G=w.value)===null||G===void 0||G.select()}function gn(){Y.value||(o.value?o.value.focus():w.value&&w.value.focus())}function hn(){const{value:L}=d;L!=null&&L.contains(document.activeElement)&&L!==document.activeElement&&rr()}function Fe(L){if(e.type==="textarea"){const{value:G}=o;G==null||G.scrollTo(L)}else{const{value:G}=w;G==null||G.scrollTo(L)}}function Rt(L){const{type:G,pair:ne,autosize:pe}=e;if(!ne&&pe)if(G==="textarea"){const{value:we}=m;we&&(we.textContent=(L??"")+`\r
`)}else{const{value:we}=y;we&&(L?we.textContent=L:we.innerHTML="&nbsp;")}}function Qt(){jt()}const An=He({top:"0"});function et(L){var G;const{scrollTop:ne}=L.target;An.value.top=`${-ne}px`,(G=z.value)===null||G===void 0||G.syncUnifiedContainer()}let Gt=null;El(()=>{const{autosize:L,type:G}=e;L&&G==="textarea"?Gt=xr(H,ne=>{!Array.isArray(ne)&&ne!==ze&&Rt(ne)}):Gt==null||Gt()});let sn=null;El(()=>{e.type==="textarea"?sn=xr(H,L=>{var G;!Array.isArray(L)&&L!==ze&&((G=z.value)===null||G===void 0||G.syncUnifiedContainer())}):sn==null||sn()}),Hi(QI,{mergedValueRef:H,maxlengthRef:on,mergedClsPrefixRef:t,countGraphemesRef:nr(e,"countGraphemes")});const On={wrapperElRef:d,inputElRef:w,textareaElRef:o,isCompositing:ue,focus:Ae,blur:mt,select:Vt,deactivate:hn,activate:gn,scrollTo:Fe},xi=Fc("Input",s,t),ri=Le(()=>{const{value:L}=Z,{common:{cubicBezierEaseInOut:G},self:{color:ne,borderRadius:pe,textColor:we,caretColor:Re,caretColorError:$e,caretColorWarning:De,textDecorationColor:je,border:bt,borderDisabled:Zt,borderHover:ye,borderFocus:pt,placeholderColor:kt,placeholderColorDisabled:en,lineHeightTextarea:yn,colorDisabled:vn,colorFocus:Yn,textColorDisabled:Sn,boxShadowFocus:ar,iconSize:yr,colorFocusWarning:Jo,boxShadowFocusWarning:Vo,borderWarning:ft,borderFocusWarning:jo,borderHoverWarning:ii,colorFocusError:Qo,boxShadowFocusError:Il,borderError:Eo,borderFocusError:Ts,borderHoverError:zl,clearSize:Cs,clearColor:qt,clearColorHover:Xn,clearColorPressed:Hn,iconColor:es,iconColorDisabled:Vs,suffixTextColor:Wn,countTextColor:Za,countTextColorDisabled:da,iconColorHover:ha,iconColorPressed:Ji,loadingColor:Ir,loadingColorError:Md,loadingColorWarning:ao,[an("padding",L)]:Uc,[an("fontSize",L)]:js,[an("height",L)]:Vc}}=u.value,{left:Rl,right:Ya}=U_(Uc);return{"--n-bezier":G,"--n-count-text-color":Za,"--n-count-text-color-disabled":da,"--n-color":ne,"--n-font-size":js,"--n-border-radius":pe,"--n-height":Vc,"--n-padding-left":Rl,"--n-padding-right":Ya,"--n-text-color":we,"--n-caret-color":Re,"--n-text-decoration-color":je,"--n-border":bt,"--n-border-disabled":Zt,"--n-border-hover":ye,"--n-border-focus":pt,"--n-placeholder-color":kt,"--n-placeholder-color-disabled":en,"--n-icon-size":yr,"--n-line-height-textarea":yn,"--n-color-disabled":vn,"--n-color-focus":Yn,"--n-text-color-disabled":Sn,"--n-box-shadow-focus":ar,"--n-loading-color":Ir,"--n-caret-color-warning":De,"--n-color-focus-warning":Jo,"--n-box-shadow-focus-warning":Vo,"--n-border-warning":ft,"--n-border-focus-warning":jo,"--n-border-hover-warning":ii,"--n-loading-color-warning":ao,"--n-caret-color-error":$e,"--n-color-focus-error":Qo,"--n-box-shadow-focus-error":Il,"--n-border-error":Eo,"--n-border-focus-error":Ts,"--n-border-hover-error":zl,"--n-loading-color-error":Md,"--n-clear-color":qt,"--n-clear-size":Cs,"--n-clear-color-hover":Xn,"--n-clear-color-pressed":Hn,"--n-icon-color":es,"--n-icon-color-hover":ha,"--n-icon-color-pressed":Ji,"--n-icon-color-disabled":Vs,"--n-suffix-text-color":Wn}}),oe=i?Xi("input",Le(()=>{const{value:L}=Z;return L[0]}),ri,e):void 0;return Object.assign(Object.assign({},On),{wrapperElRef:d,inputElRef:w,inputMirrorElRef:y,inputEl2Ref:S,textareaElRef:o,textareaMirrorElRef:m,textareaScrollbarInstRef:z,rtlEnabled:xi,uncontrolledValue:j,mergedValue:H,passwordVisible:Pt,mergedPlaceholder:xe,showPlaceholder1:qe,showPlaceholder2:Qe,mergedFocus:Be,isComposing:ue,activated:Ee,showClearButton:st,mergedSize:Z,mergedDisabled:Y,textDecorationStyle:Ke,mergedClsPrefix:t,mergedBordered:n,mergedShowPasswordOn:it,placeholderStyle:An,mergedStatus:ce,textAreaScrollContainerWidth:ut,handleTextAreaScroll:et,handleCompositionStart:gt,handleCompositionEnd:Ne,handleInput:ht,handleInputBlur:Et,handleInputFocus:Oe,handleWrapperBlur:vt,handleWrapperFocus:Wt,handleMouseEnter:Zn,handleMouseLeave:pr,handleMouseDown:$n,handleChange:wn,handleClick:Cn,handleClear:Fn,handlePasswordToggleClick:sr,handlePasswordToggleMousedown:li,handleWrapperKeydown:br,handleTextAreaMirrorResize:Qt,getTextareaScrollContainer:()=>o.value,mergedTheme:u,cssVars:i?void 0:ri,themeClass:oe==null?void 0:oe.themeClass,onRender:oe==null?void 0:oe.onRender})},render(){var e,t;const{mergedClsPrefix:n,mergedStatus:i,themeClass:s,type:u,countGraphemes:d,onRender:o}=this,m=this.$slots;return o==null||o(),V("div",{ref:"wrapperElRef",class:[`${n}-input`,s,i&&`${n}-input--${i}-status`,{[`${n}-input--rtl`]:this.rtlEnabled,[`${n}-input--disabled`]:this.mergedDisabled,[`${n}-input--textarea`]:u==="textarea",[`${n}-input--resizable`]:this.resizable&&!this.autosize,[`${n}-input--autosize`]:this.autosize,[`${n}-input--round`]:this.round&&u!=="textarea",[`${n}-input--pair`]:this.pair,[`${n}-input--focus`]:this.mergedFocus,[`${n}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.onKeyup,onKeydown:this.handleWrapperKeydown},V("div",{class:`${n}-input-wrapper`},Os(m.prefix,y=>y&&V("div",{class:`${n}-input__prefix`},y)),u==="textarea"?V(xs,{ref:"textareaScrollbarInstRef",class:`${n}-input__textarea`,container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:()=>{var y,w;const{textAreaScrollContainerWidth:S}=this,A={width:this.autosize&&S&&`${S}px`};return V(Vr,null,V("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:[`${n}-input__textarea-el`,(y=this.inputProps)===null||y===void 0?void 0:y.class],autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:d?void 0:this.maxlength,minlength:d?void 0:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:[this.textDecorationStyle[0],(w=this.inputProps)===null||w===void 0?void 0:w.style,A],onBlur:this.handleInputBlur,onFocus:I=>this.handleInputFocus(I,2),onInput:this.handleInput,onChange:this.handleChange,onScroll:this.handleTextAreaScroll})),this.showPlaceholder1?V("div",{class:`${n}-input__placeholder`,style:[this.placeholderStyle,A],key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?V(ef,{onResize:this.handleTextAreaMirrorResize},{default:()=>V("div",{ref:"textareaMirrorElRef",class:`${n}-input__textarea-mirror`,key:"mirror"})}):null)}}):V("div",{class:`${n}-input__input`},V("input",Object.assign({type:u==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":u},this.inputProps,{ref:"inputElRef",class:[`${n}-input__input-el`,(e=this.inputProps)===null||e===void 0?void 0:e.class],style:[this.textDecorationStyle[0],(t=this.inputProps)===null||t===void 0?void 0:t.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:d?void 0:this.maxlength,minlength:d?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:y=>this.handleInputFocus(y,0),onInput:y=>this.handleInput(y,0),onChange:y=>this.handleChange(y,0)})),this.showPlaceholder1?V("div",{class:`${n}-input__placeholder`},V("span",null,this.mergedPlaceholder[0])):null,this.autosize?V("div",{class:`${n}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},""):null),!this.pair&&Os(m.suffix,y=>y||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0?V("div",{class:`${n}-input__suffix`},[Os(m["clear-icon-placeholder"],w=>(this.clearable||w)&&V(S1,{clsPrefix:n,show:this.showClearButton,onClear:this.handleClear},{placeholder:()=>w,icon:()=>{var S,A;return(A=(S=this.$slots)["clear-icon"])===null||A===void 0?void 0:A.call(S)}})),this.internalLoadingBeforeSuffix?null:y,this.loading!==void 0?V(ZI,{clsPrefix:n,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.internalLoadingBeforeSuffix?y:null,this.showCount&&this.type!=="textarea"?V(nP,null,{default:w=>{var S;return(S=m.count)===null||S===void 0?void 0:S.call(m,w)}}):null,this.mergedShowPasswordOn&&this.type==="password"?V("div",{class:`${n}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},this.passwordVisible?kr(m["password-visible-icon"],()=>[V($s,{clsPrefix:n},{default:()=>V(TH,null)})]):kr(m["password-invisible-icon"],()=>[V($s,{clsPrefix:n},{default:()=>V(CH,null)})])):null]):null)),this.pair?V("span",{class:`${n}-input__separator`},kr(m.separator,()=>[this.separator])):null,this.pair?V("div",{class:`${n}-input-wrapper`},V("div",{class:`${n}-input__input`},V("input",{ref:"inputEl2Ref",type:this.type,class:`${n}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:d?void 0:this.maxlength,minlength:d?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:y=>this.handleInputFocus(y,1),onInput:y=>this.handleInput(y,1),onChange:y=>this.handleChange(y,1)}),this.showPlaceholder2?V("div",{class:`${n}-input__placeholder`},V("span",null,this.mergedPlaceholder[1])):null),Os(m.suffix,y=>(this.clearable||y)&&V("div",{class:`${n}-input__suffix`},[this.clearable&&V(S1,{clsPrefix:n,show:this.showClearButton,onClear:this.handleClear},{icon:()=>{var w;return(w=m["clear-icon"])===null||w===void 0?void 0:w.call(m)},placeholder:()=>{var w;return(w=m["clear-icon-placeholder"])===null||w===void 0?void 0:w.call(m)}}),y]))):null,this.mergedBordered?V("div",{class:`${n}-input__border`}):null,this.mergedBordered?V("div",{class:`${n}-input__state-border`}):null,this.showCount&&u==="textarea"?V(nP,null,{default:y=>{var w;const{renderCount:S}=this;return S?S(y):(w=m.count)===null||w===void 0?void 0:w.call(m,y)}}):null)}}),b7=e=>{const{errorColor:t,infoColor:n,successColor:i,warningColor:s,fontFamily:u}=e;return{color:t,colorInfo:n,colorSuccess:i,colorError:t,colorWarning:s,fontSize:"12px",fontFamily:u}},w7={name:"Badge",common:xo,self:b7},T7=w7,C7=Ze([Ze("@keyframes badge-wave-spread",{from:{boxShadow:"0 0 0.5px 0px var(--n-ripple-color)",opacity:.6},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)",opacity:0}}),It("badge",`
 display: inline-flex;
 position: relative;
 vertical-align: middle;
 color: var(--n-color);
 font-family: var(--n-font-family);
 `,[Nt("as-is",[It("badge-sup",{position:"static",transform:"translateX(0)"},[af({transformOrigin:"left bottom",originalTransform:"translateX(0)"})])]),Nt("dot",[It("badge-sup",`
 height: 8px;
 width: 8px;
 padding: 0;
 min-width: 8px;
 left: 100%;
 bottom: calc(100% - 4px);
 `,[Ze("::before","border-radius: 4px;")])]),It("badge-sup",`
 background: var(--n-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: #FFF;
 position: absolute;
 height: 18px;
 line-height: 18px;
 border-radius: 9px;
 padding: 0 6px;
 text-align: center;
 font-size: var(--n-font-size);
 transform: translateX(-50%);
 left: 100%;
 bottom: calc(100% - 9px);
 font-variant-numeric: tabular-nums;
 z-index: 1;
 display: flex;
 align-items: center;
 `,[af({transformOrigin:"left bottom",originalTransform:"translateX(-50%)"}),It("base-wave",{zIndex:1,animationDuration:"2s",animationIterationCount:"infinite",animationDelay:"1s",animationTimingFunction:"var(--n-ripple-bezier)",animationName:"badge-wave-spread"}),Ze("&::before",`
 opacity: 0;
 transform: scale(1);
 border-radius: 9px;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)])])]),S7=Object.assign(Object.assign({},ur.props),{value:[String,Number],max:Number,dot:Boolean,type:{type:String,default:"default"},show:{type:Boolean,default:!0},showZero:Boolean,processing:Boolean,color:String,offset:Array}),E7=pn({name:"Badge",props:S7,setup(e,{slots:t}){const{mergedClsPrefixRef:n,inlineThemeDisabled:i,mergedRtlRef:s}=Ki(e),u=ur("Badge","-badge",C7,T7,e,n),d=He(!1),o=()=>{d.value=!0},m=()=>{d.value=!1},y=Le(()=>e.show&&(e.dot||e.value!==void 0&&!(!e.showZero&&e.value<=0)||!hy(t.value)));Si(()=>{y.value&&(d.value=!0)});const w=Fc("Badge",s,n),S=Le(()=>{const{type:z,color:U}=e,{common:{cubicBezierEaseInOut:j,cubicBezierEaseOut:F},self:{[an("color",z)]:H,fontFamily:J,fontSize:Z}}=u.value;return{"--n-font-size":Z,"--n-font-family":J,"--n-color":U||H,"--n-ripple-color":U||H,"--n-bezier":j,"--n-ripple-bezier":F}}),A=i?Xi("badge",Le(()=>{let z="";const{type:U,color:j}=e;return U&&(z+=U[0]),j&&(z+=Vm(j)),z}),S,e):void 0,I=Le(()=>{const{offset:z}=e;if(!z)return;const[U,j]=z,F=typeof U=="number"?`${U}px`:U,H=typeof j=="number"?`${j}px`:j;return{transform:`translate(calc(${w!=null&&w.value?"50%":"-50%"} + ${F}), ${H})`}});return{rtlEnabled:w,mergedClsPrefix:n,appeared:d,showBadge:y,handleAfterEnter:o,handleAfterLeave:m,cssVars:i?void 0:S,themeClass:A==null?void 0:A.themeClass,onRender:A==null?void 0:A.onRender,offsetStyle:I}},render(){var e;const{mergedClsPrefix:t,onRender:n,themeClass:i,$slots:s}=this;n==null||n();const u=(e=s.default)===null||e===void 0?void 0:e.call(s);return V("div",{class:[`${t}-badge`,this.rtlEnabled&&`${t}-badge--rtl`,i,{[`${t}-badge--dot`]:this.dot,[`${t}-badge--as-is`]:!u}],style:this.cssVars},u,V(Yo,{name:"fade-in-scale-up-transition",onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>this.showBadge?V("sup",{class:`${t}-badge-sup`,title:gD(this.value),style:this.offsetStyle},kr(s.value,()=>[this.dot?null:V(o7,{clsPrefix:t,appeared:this.appeared,max:this.max,value:this.value})]),this.processing?V(HI,{clsPrefix:t}):null):null}))}});function Lu(e){return Rs(e,[255,255,255,.16])}function b_(e){return Rs(e,[0,0,0,.12])}const M7="n-button-group",P7={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"},A7=e=>{const{heightTiny:t,heightSmall:n,heightMedium:i,heightLarge:s,borderRadius:u,fontSizeTiny:d,fontSizeSmall:o,fontSizeMedium:m,fontSizeLarge:y,opacityDisabled:w,textColor2:S,textColor3:A,primaryColorHover:I,primaryColorPressed:z,borderColor:U,primaryColor:j,baseColor:F,infoColor:H,infoColorHover:J,infoColorPressed:Z,successColor:Y,successColorHover:ce,successColorPressed:ee,warningColor:de,warningColorHover:ue,warningColorPressed:Ee,errorColor:ze,errorColorHover:xe,errorColorPressed:qe,fontWeight:Qe,buttonColor2:Be,buttonColor2Hover:st,buttonColor2Pressed:it,fontWeightStrong:Pt}=e;return Object.assign(Object.assign({},P7),{heightTiny:t,heightSmall:n,heightMedium:i,heightLarge:s,borderRadiusTiny:u,borderRadiusSmall:u,borderRadiusMedium:u,borderRadiusLarge:u,fontSizeTiny:d,fontSizeSmall:o,fontSizeMedium:m,fontSizeLarge:y,opacityDisabled:w,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:Be,colorSecondaryHover:st,colorSecondaryPressed:it,colorTertiary:Be,colorTertiaryHover:st,colorTertiaryPressed:it,colorQuaternary:"#0000",colorQuaternaryHover:st,colorQuaternaryPressed:it,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:S,textColorTertiary:A,textColorHover:I,textColorPressed:z,textColorFocus:I,textColorDisabled:S,textColorText:S,textColorTextHover:I,textColorTextPressed:z,textColorTextFocus:I,textColorTextDisabled:S,textColorGhost:S,textColorGhostHover:I,textColorGhostPressed:z,textColorGhostFocus:I,textColorGhostDisabled:S,border:`1px solid ${U}`,borderHover:`1px solid ${I}`,borderPressed:`1px solid ${z}`,borderFocus:`1px solid ${I}`,borderDisabled:`1px solid ${U}`,rippleColor:j,colorPrimary:j,colorHoverPrimary:I,colorPressedPrimary:z,colorFocusPrimary:I,colorDisabledPrimary:j,textColorPrimary:F,textColorHoverPrimary:F,textColorPressedPrimary:F,textColorFocusPrimary:F,textColorDisabledPrimary:F,textColorTextPrimary:j,textColorTextHoverPrimary:I,textColorTextPressedPrimary:z,textColorTextFocusPrimary:I,textColorTextDisabledPrimary:S,textColorGhostPrimary:j,textColorGhostHoverPrimary:I,textColorGhostPressedPrimary:z,textColorGhostFocusPrimary:I,textColorGhostDisabledPrimary:j,borderPrimary:`1px solid ${j}`,borderHoverPrimary:`1px solid ${I}`,borderPressedPrimary:`1px solid ${z}`,borderFocusPrimary:`1px solid ${I}`,borderDisabledPrimary:`1px solid ${j}`,rippleColorPrimary:j,colorInfo:H,colorHoverInfo:J,colorPressedInfo:Z,colorFocusInfo:J,colorDisabledInfo:H,textColorInfo:F,textColorHoverInfo:F,textColorPressedInfo:F,textColorFocusInfo:F,textColorDisabledInfo:F,textColorTextInfo:H,textColorTextHoverInfo:J,textColorTextPressedInfo:Z,textColorTextFocusInfo:J,textColorTextDisabledInfo:S,textColorGhostInfo:H,textColorGhostHoverInfo:J,textColorGhostPressedInfo:Z,textColorGhostFocusInfo:J,textColorGhostDisabledInfo:H,borderInfo:`1px solid ${H}`,borderHoverInfo:`1px solid ${J}`,borderPressedInfo:`1px solid ${Z}`,borderFocusInfo:`1px solid ${J}`,borderDisabledInfo:`1px solid ${H}`,rippleColorInfo:H,colorSuccess:Y,colorHoverSuccess:ce,colorPressedSuccess:ee,colorFocusSuccess:ce,colorDisabledSuccess:Y,textColorSuccess:F,textColorHoverSuccess:F,textColorPressedSuccess:F,textColorFocusSuccess:F,textColorDisabledSuccess:F,textColorTextSuccess:Y,textColorTextHoverSuccess:ce,textColorTextPressedSuccess:ee,textColorTextFocusSuccess:ce,textColorTextDisabledSuccess:S,textColorGhostSuccess:Y,textColorGhostHoverSuccess:ce,textColorGhostPressedSuccess:ee,textColorGhostFocusSuccess:ce,textColorGhostDisabledSuccess:Y,borderSuccess:`1px solid ${Y}`,borderHoverSuccess:`1px solid ${ce}`,borderPressedSuccess:`1px solid ${ee}`,borderFocusSuccess:`1px solid ${ce}`,borderDisabledSuccess:`1px solid ${Y}`,rippleColorSuccess:Y,colorWarning:de,colorHoverWarning:ue,colorPressedWarning:Ee,colorFocusWarning:ue,colorDisabledWarning:de,textColorWarning:F,textColorHoverWarning:F,textColorPressedWarning:F,textColorFocusWarning:F,textColorDisabledWarning:F,textColorTextWarning:de,textColorTextHoverWarning:ue,textColorTextPressedWarning:Ee,textColorTextFocusWarning:ue,textColorTextDisabledWarning:S,textColorGhostWarning:de,textColorGhostHoverWarning:ue,textColorGhostPressedWarning:Ee,textColorGhostFocusWarning:ue,textColorGhostDisabledWarning:de,borderWarning:`1px solid ${de}`,borderHoverWarning:`1px solid ${ue}`,borderPressedWarning:`1px solid ${Ee}`,borderFocusWarning:`1px solid ${ue}`,borderDisabledWarning:`1px solid ${de}`,rippleColorWarning:de,colorError:ze,colorHoverError:xe,colorPressedError:qe,colorFocusError:xe,colorDisabledError:ze,textColorError:F,textColorHoverError:F,textColorPressedError:F,textColorFocusError:F,textColorDisabledError:F,textColorTextError:ze,textColorTextHoverError:xe,textColorTextPressedError:qe,textColorTextFocusError:xe,textColorTextDisabledError:S,textColorGhostError:ze,textColorGhostHoverError:xe,textColorGhostPressedError:qe,textColorGhostFocusError:xe,textColorGhostDisabledError:ze,borderError:`1px solid ${ze}`,borderHoverError:`1px solid ${xe}`,borderPressedError:`1px solid ${qe}`,borderFocusError:`1px solid ${xe}`,borderDisabledError:`1px solid ${ze}`,rippleColorError:ze,waveOpacity:"0.6",fontWeight:Qe,fontWeightStrong:Pt})},k7={name:"Button",common:xo,self:A7},BT=k7,D7=Ze([It("button",`
 margin: 0;
 font-weight: var(--n-font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--n-padding);
 height: var(--n-height);
 font-size: var(--n-font-size);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 width: var(--n-width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 -webkit-user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[Nt("color",[xt("border",{borderColor:"var(--n-border-color)"}),Nt("disabled",[xt("border",{borderColor:"var(--n-border-color-disabled)"})]),ai("disabled",[Ze("&:focus",[xt("state-border",{borderColor:"var(--n-border-color-focus)"})]),Ze("&:hover",[xt("state-border",{borderColor:"var(--n-border-color-hover)"})]),Ze("&:active",[xt("state-border",{borderColor:"var(--n-border-color-pressed)"})]),Nt("pressed",[xt("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),Nt("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[xt("border",{border:"var(--n-border-disabled)"})]),ai("disabled",[Ze("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[xt("state-border",{border:"var(--n-border-focus)"})]),Ze("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[xt("state-border",{border:"var(--n-border-hover)"})]),Ze("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[xt("state-border",{border:"var(--n-border-pressed)"})]),Nt("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[xt("state-border",{border:"var(--n-border-pressed)"})])]),Nt("loading","cursor: wait;"),It("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--n-ripple-duration);
 animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);
 `,[Nt("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),xf&&"MozBoxSizing"in document.createElement("div").style?Ze("&::moz-focus-inner",{border:0}):null,xt("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 `),xt("border",{border:"var(--n-border)"}),xt("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),xt("icon",`
 margin: var(--n-icon-margin);
 margin-left: 0;
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 max-width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 position: relative;
 flex-shrink: 0;
 `,[It("icon-slot",`
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[Ym({top:"50%",originalTransform:"translateY(-50%)"})]),XI()]),xt("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 min-width: 0;
 `,[Ze("~",[xt("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),Nt("block",`
 display: flex;
 width: 100%;
 `),Nt("dashed",[xt("border, state-border",{borderStyle:"dashed !important"})]),Nt("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),Ze("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),Ze("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),I7=Object.assign(Object.assign({},ur.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!JI}}),ez=pn({name:"Button",props:I7,setup(e){const t=He(null),n=He(null),i=He(!1),s=Fo(()=>!e.quaternary&&!e.tertiary&&!e.secondary&&!e.text&&(!e.color||e.ghost||e.dashed)&&e.bordered),u=fr(M7,{}),{mergedSizeRef:d}=dg({},{defaultSize:"medium",mergedSize:Z=>{const{size:Y}=e;if(Y)return Y;const{size:ce}=u;if(ce)return ce;const{mergedSize:ee}=Z||{};return ee?ee.value:"medium"}}),o=Le(()=>e.focusable&&!e.disabled),m=Z=>{var Y;o.value||Z.preventDefault(),!e.nativeFocusBehavior&&(Z.preventDefault(),!e.disabled&&o.value&&((Y=t.value)===null||Y===void 0||Y.focus({preventScroll:!0})))},y=Z=>{var Y;if(!e.disabled&&!e.loading){const{onClick:ce}=e;ce&&Un(ce,Z),e.text||(Y=n.value)===null||Y===void 0||Y.play()}},w=Z=>{switch(Z.key){case"Enter":if(!e.keyboard)return;i.value=!1}},S=Z=>{switch(Z.key){case"Enter":if(!e.keyboard||e.loading){Z.preventDefault();return}i.value=!0}},A=()=>{i.value=!1},{inlineThemeDisabled:I,mergedClsPrefixRef:z,mergedRtlRef:U}=Ki(e),j=ur("Button","-button",D7,BT,e,z),F=Fc("Button",U,z),H=Le(()=>{const Z=j.value,{common:{cubicBezierEaseInOut:Y,cubicBezierEaseOut:ce},self:ee}=Z,{rippleDuration:de,opacityDisabled:ue,fontWeight:Ee,fontWeightStrong:ze}=ee,xe=d.value,{dashed:qe,type:Qe,ghost:Be,text:st,color:it,round:Pt,circle:Ke,textColor:ut,secondary:jt,tertiary:on,quaternary:En,strong:Dn}=e,Je={"font-weight":Dn?ze:Ee};let yt={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const wt=Qe==="tertiary",Lt=Qe==="default",Ct=wt?"default":Qe;if(st){const Et=ut||it;yt={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":Et||ee[an("textColorText",Ct)],"--n-text-color-hover":Et?Lu(Et):ee[an("textColorTextHover",Ct)],"--n-text-color-pressed":Et?b_(Et):ee[an("textColorTextPressed",Ct)],"--n-text-color-focus":Et?Lu(Et):ee[an("textColorTextHover",Ct)],"--n-text-color-disabled":Et||ee[an("textColorTextDisabled",Ct)]}}else if(Be||qe){const Et=ut||it;yt={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":it||ee[an("rippleColor",Ct)],"--n-text-color":Et||ee[an("textColorGhost",Ct)],"--n-text-color-hover":Et?Lu(Et):ee[an("textColorGhostHover",Ct)],"--n-text-color-pressed":Et?b_(Et):ee[an("textColorGhostPressed",Ct)],"--n-text-color-focus":Et?Lu(Et):ee[an("textColorGhostHover",Ct)],"--n-text-color-disabled":Et||ee[an("textColorGhostDisabled",Ct)]}}else if(jt){const Et=Lt?ee.textColor:wt?ee.textColorTertiary:ee[an("color",Ct)],Oe=it||Et,vt=Qe!=="default"&&Qe!=="tertiary";yt={"--n-color":vt?gr(Oe,{alpha:Number(ee.colorOpacitySecondary)}):ee.colorSecondary,"--n-color-hover":vt?gr(Oe,{alpha:Number(ee.colorOpacitySecondaryHover)}):ee.colorSecondaryHover,"--n-color-pressed":vt?gr(Oe,{alpha:Number(ee.colorOpacitySecondaryPressed)}):ee.colorSecondaryPressed,"--n-color-focus":vt?gr(Oe,{alpha:Number(ee.colorOpacitySecondaryHover)}):ee.colorSecondaryHover,"--n-color-disabled":ee.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":Oe,"--n-text-color-hover":Oe,"--n-text-color-pressed":Oe,"--n-text-color-focus":Oe,"--n-text-color-disabled":Oe}}else if(on||En){const Et=Lt?ee.textColor:wt?ee.textColorTertiary:ee[an("color",Ct)],Oe=it||Et;on?(yt["--n-color"]=ee.colorTertiary,yt["--n-color-hover"]=ee.colorTertiaryHover,yt["--n-color-pressed"]=ee.colorTertiaryPressed,yt["--n-color-focus"]=ee.colorSecondaryHover,yt["--n-color-disabled"]=ee.colorTertiary):(yt["--n-color"]=ee.colorQuaternary,yt["--n-color-hover"]=ee.colorQuaternaryHover,yt["--n-color-pressed"]=ee.colorQuaternaryPressed,yt["--n-color-focus"]=ee.colorQuaternaryHover,yt["--n-color-disabled"]=ee.colorQuaternary),yt["--n-ripple-color"]="#0000",yt["--n-text-color"]=Oe,yt["--n-text-color-hover"]=Oe,yt["--n-text-color-pressed"]=Oe,yt["--n-text-color-focus"]=Oe,yt["--n-text-color-disabled"]=Oe}else yt={"--n-color":it||ee[an("color",Ct)],"--n-color-hover":it?Lu(it):ee[an("colorHover",Ct)],"--n-color-pressed":it?b_(it):ee[an("colorPressed",Ct)],"--n-color-focus":it?Lu(it):ee[an("colorFocus",Ct)],"--n-color-disabled":it||ee[an("colorDisabled",Ct)],"--n-ripple-color":it||ee[an("rippleColor",Ct)],"--n-text-color":ut||(it?ee.textColorPrimary:wt?ee.textColorTertiary:ee[an("textColor",Ct)]),"--n-text-color-hover":ut||(it?ee.textColorHoverPrimary:ee[an("textColorHover",Ct)]),"--n-text-color-pressed":ut||(it?ee.textColorPressedPrimary:ee[an("textColorPressed",Ct)]),"--n-text-color-focus":ut||(it?ee.textColorFocusPrimary:ee[an("textColorFocus",Ct)]),"--n-text-color-disabled":ut||(it?ee.textColorDisabledPrimary:ee[an("textColorDisabled",Ct)])};let Yt={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};st?Yt={"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:Yt={"--n-border":ee[an("border",Ct)],"--n-border-hover":ee[an("borderHover",Ct)],"--n-border-pressed":ee[an("borderPressed",Ct)],"--n-border-focus":ee[an("borderFocus",Ct)],"--n-border-disabled":ee[an("borderDisabled",Ct)]};const{[an("height",xe)]:ln,[an("fontSize",xe)]:he,[an("padding",xe)]:Me,[an("paddingRound",xe)]:Ue,[an("iconSize",xe)]:lt,[an("borderRadius",xe)]:gt,[an("iconMargin",xe)]:Ne,waveOpacity:ht}=ee,At={"--n-width":Ke&&!st?ln:"initial","--n-height":st?"initial":ln,"--n-font-size":he,"--n-padding":Ke||st?"initial":Pt?Ue:Me,"--n-icon-size":lt,"--n-icon-margin":Ne,"--n-border-radius":st?"initial":Ke||Pt?ln:gt};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":Y,"--n-bezier-ease-out":ce,"--n-ripple-duration":de,"--n-opacity-disabled":ue,"--n-wave-opacity":ht},Je),yt),Yt),At)}),J=I?Xi("button",Le(()=>{let Z="";const{dashed:Y,type:ce,ghost:ee,text:de,color:ue,round:Ee,circle:ze,textColor:xe,secondary:qe,tertiary:Qe,quaternary:Be,strong:st}=e;Y&&(Z+="a"),ee&&(Z+="b"),de&&(Z+="c"),Ee&&(Z+="d"),ze&&(Z+="e"),qe&&(Z+="f"),Qe&&(Z+="g"),Be&&(Z+="h"),st&&(Z+="i"),ue&&(Z+="j"+Vm(ue)),xe&&(Z+="k"+Vm(xe));const{value:it}=d;return Z+="l"+it[0],Z+="m"+ce[0],Z}),H,e):void 0;return{selfElRef:t,waveElRef:n,mergedClsPrefix:z,mergedFocusable:o,mergedSize:d,showBorder:s,enterPressed:i,rtlEnabled:F,handleMousedown:m,handleKeydown:S,handleBlur:A,handleKeyup:w,handleClick:y,customColorCssVars:Le(()=>{const{color:Z}=e;if(!Z)return null;const Y=Lu(Z);return{"--n-border-color":Z,"--n-border-color-hover":Y,"--n-border-color-pressed":b_(Z),"--n-border-color-focus":Y,"--n-border-color-disabled":Z}}),cssVars:I?void 0:H,themeClass:J==null?void 0:J.themeClass,onRender:J==null?void 0:J.onRender}},render(){const{mergedClsPrefix:e,tag:t,onRender:n}=this;n==null||n();const i=Os(this.$slots.default,s=>s&&V("span",{class:`${e}-button__content`},s));return V(t,{ref:"selfElRef",class:[this.themeClass,`${e}-button`,`${e}-button--${this.type}-type`,`${e}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${e}-button--rtl`,this.disabled&&`${e}-button--disabled`,this.block&&`${e}-button--block`,this.enterPressed&&`${e}-button--pressed`,!this.text&&this.dashed&&`${e}-button--dashed`,this.color&&`${e}-button--color`,this.secondary&&`${e}-button--secondary`,this.loading&&`${e}-button--loading`,this.ghost&&`${e}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},this.iconPlacement==="right"&&i,V(zT,{width:!0},{default:()=>Os(this.$slots.icon,s=>(this.loading||this.renderIcon||s)&&V("span",{class:`${e}-button__icon`,style:{margin:hy(this.$slots.default)?"0":""}},V(o0,null,{default:()=>this.loading?V(pg,{clsPrefix:e,key:"loading",class:`${e}-icon-slot`,strokeWidth:20}):V("div",{key:"icon",class:`${e}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():s)})))}),this.iconPlacement==="left"&&i,this.text?null:V(HI,{ref:"waveElRef",clsPrefix:e}),this.showBorder?V("div",{"aria-hidden":!0,class:`${e}-button__border`,style:this.customColorCssVars}):null,this.showBorder?V("div",{"aria-hidden":!0,class:`${e}-button__state-border`,style:this.customColorCssVars}):null)}}),yo=ez,Pc=ez,Ay=1901,dd=40,z7={date:Y8,month:i0,year:LI,quarter:OI};function _l(e,t,n){const i=z7[n];return Array.isArray(e)?e.some(s=>i(s,t)):i(e,t)}function vb(e,t,n,i){let s=!1,u=!1,d=!1;Array.isArray(n)&&(n[0]<e&&e<n[1]&&(s=!0),_l(n[0],e,"date")&&(u=!0),_l(n[1],e,"date")&&(d=!0));const o=n!==null&&(Array.isArray(n)?_l(n[0],e,"date")||_l(n[1],e,"date"):_l(n,e,"date"));return{type:"date",dateObject:{date:na(e),month:fi(e),year:ki(e)},inCurrentMonth:i0(e,t),isCurrentDate:_l(i,e,"date"),inSpan:s,startOfSpan:u,endOfSpan:d,selected:o,ts:fn(e)}}function R7(e,t,n){return{type:"month",dateObject:{month:fi(e),year:ki(e)},isCurrent:i0(n,e),selected:t!==null&&_l(t,e,"month"),ts:fn(e)}}function O7(e,t,n){return{type:"year",dateObject:{year:ki(e)},isCurrent:LI(n,e),selected:t!==null&&_l(t,e,"year"),ts:fn(e)}}function L7(e,t,n){return{type:"quarter",dateObject:{quarter:K8(e),year:ki(e)},isCurrent:OI(n,e),selected:t!==null&&_l(t,e,"quarter"),ts:fn(e)}}function E1(e,t,n,i,s=!1){const u=fi(e);let d=fn(vl(e)),o=fn(y_(d,-1));const m=[];let y=!s;for(;yW(o)!==i||y;)m.unshift(vb(o,e,t,n)),o=fn(y_(o,-1)),y=!1;for(;fi(d)===u;)m.push(vb(d,e,t,n)),d=fn(y_(d,1));const w=s?m.length<=28?28:m.length<=35?35:42:42;for(;m.length<w;)m.push(vb(d,e,t,n)),d=fn(y_(d,1));return m}function M1(e,t,n){const i=[],s=MT(e);for(let u=0;u<12;u++)i.push(R7(fn(To(s,u)),t,n));return i}function P1(e,t,n){const i=[],s=MT(e);for(let u=0;u<4;u++)i.push(L7(fn(H8(s,u)),t,n));return i}function A1(e,t){const n=[],i=new Date(Ay,0,1);for(let s=0;s<200;s++)n.push(O7(fn(b1(i,s)),e,t));return n}function ds(e,t,n,i){const s=vH(e,t,n,i);return Ls(s)?mi(s,t,i)===e?s:new Date(NaN):s}function W_(e){if(e===void 0)return;if(typeof e=="number")return e;const[t,n,i]=e.split(":");return{hours:Number(t),minutes:Number(n),seconds:Number(i)}}function Oh(e,t){return Array.isArray(e)?e[t==="start"?0:1]:null}function B7(e){const{boxShadow2:t}=e;return{menuBoxShadow:t}}const F7={name:"Select",common:xo,peers:{InternalSelection:YI,InternalSelectMenu:WI},self:B7},$7=F7,N7=Ze([It("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),It("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[af({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),U7=Object.assign(Object.assign({},ur.props),{to:Xo.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),rP=pn({name:"Select",props:U7,setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:n,namespaceRef:i,inlineThemeDisabled:s}=Ki(e),u=ur("Select","-select",N7,$7,e,t),d=He(e.defaultValue),o=nr(e,"value"),m=ad(o,d),y=He(!1),w=He(""),S=Le(()=>{const{valueField:Ae,childrenField:mt}=e,Vt=c7(Ae,mt);return c9(xe.value,Vt)}),A=Le(()=>d7(Ee.value,e.valueField,e.childrenField)),I=He(!1),z=ad(nr(e,"show"),I),U=He(null),j=He(null),F=He(null),{localeRef:H}=fg("Select"),J=Le(()=>{var Ae;return(Ae=e.placeholder)!==null&&Ae!==void 0?Ae:H.value.placeholder}),Z=uT(e,["items","options"]),Y=[],ce=He([]),ee=He([]),de=He(new Map),ue=Le(()=>{const{fallbackOption:Ae}=e;if(Ae===void 0){const{labelField:mt,valueField:Vt}=e;return gn=>({[mt]:String(gn),[Vt]:gn})}return Ae===!1?!1:mt=>Object.assign(Ae(mt),{value:mt})}),Ee=Le(()=>ee.value.concat(ce.value).concat(Z.value)),ze=Le(()=>{const{filter:Ae}=e;if(Ae)return Ae;const{labelField:mt,valueField:Vt}=e;return(gn,hn)=>{if(!hn)return!1;const Fe=hn[mt];if(typeof Fe=="string")return gb(gn,Fe);const Rt=hn[Vt];return typeof Rt=="string"?gb(gn,Rt):typeof Rt=="number"?gb(gn,String(Rt)):!1}}),xe=Le(()=>{if(e.remote)return Z.value;{const{value:Ae}=Ee,{value:mt}=w;return!mt.length||!e.filterable?Ae:u7(Ae,ze.value,mt,e.childrenField)}});function qe(Ae){const mt=e.remote,{value:Vt}=de,{value:gn}=A,{value:hn}=ue,Fe=[];return Ae.forEach(Rt=>{if(gn.has(Rt))Fe.push(gn.get(Rt));else if(mt&&Vt.has(Rt))Fe.push(Vt.get(Rt));else if(hn){const Qt=hn(Rt);Qt&&Fe.push(Qt)}}),Fe}const Qe=Le(()=>{if(e.multiple){const{value:Ae}=m;return Array.isArray(Ae)?qe(Ae):[]}return null}),Be=Le(()=>{const{value:Ae}=m;return!e.multiple&&!Array.isArray(Ae)?Ae===null?null:qe([Ae])[0]||null:null}),st=dg(e),{mergedSizeRef:it,mergedDisabledRef:Pt,mergedStatusRef:Ke}=st;function ut(Ae,mt){const{onChange:Vt,"onUpdate:value":gn,onUpdateValue:hn}=e,{nTriggerFormChange:Fe,nTriggerFormInput:Rt}=st;Vt&&Un(Vt,Ae,mt),hn&&Un(hn,Ae,mt),gn&&Un(gn,Ae,mt),d.value=Ae,Fe(),Rt()}function jt(Ae){const{onBlur:mt}=e,{nTriggerFormBlur:Vt}=st;mt&&Un(mt,Ae),Vt()}function on(){const{onClear:Ae}=e;Ae&&Un(Ae)}function En(Ae){const{onFocus:mt,showOnFocus:Vt}=e,{nTriggerFormFocus:gn}=st;mt&&Un(mt,Ae),gn(),Vt&&Lt()}function Dn(Ae){const{onSearch:mt}=e;mt&&Un(mt,Ae)}function Je(Ae){const{onScroll:mt}=e;mt&&Un(mt,Ae)}function yt(){var Ae;const{remote:mt,multiple:Vt}=e;if(mt){const{value:gn}=de;if(Vt){const{valueField:hn}=e;(Ae=Qe.value)===null||Ae===void 0||Ae.forEach(Fe=>{gn.set(Fe[hn],Fe)})}else{const hn=Be.value;hn&&gn.set(hn[e.valueField],hn)}}}function wt(Ae){const{onUpdateShow:mt,"onUpdate:show":Vt}=e;mt&&Un(mt,Ae),Vt&&Un(Vt,Ae),I.value=Ae}function Lt(){Pt.value||(wt(!0),I.value=!0,e.filterable&&sr())}function Ct(){wt(!1)}function Yt(){w.value="",ee.value=Y}const ln=He(!1);function he(){e.filterable&&(ln.value=!0)}function Me(){e.filterable&&(ln.value=!1,z.value||Yt())}function Ue(){Pt.value||(z.value?e.filterable?sr():Ct():Lt())}function lt(Ae){var mt,Vt;!((Vt=(mt=F.value)===null||mt===void 0?void 0:mt.selfRef)===null||Vt===void 0)&&Vt.contains(Ae.relatedTarget)||(y.value=!1,jt(Ae),Ct())}function gt(Ae){En(Ae),y.value=!0}function Ne(Ae){y.value=!0}function ht(Ae){var mt;!((mt=U.value)===null||mt===void 0)&&mt.$el.contains(Ae.relatedTarget)||(y.value=!1,jt(Ae),Ct())}function At(){var Ae;(Ae=U.value)===null||Ae===void 0||Ae.focus(),Ct()}function Et(Ae){var mt;z.value&&(!((mt=U.value)===null||mt===void 0)&&mt.$el.contains(Dc(Ae))||Ct())}function Oe(Ae){if(!Array.isArray(Ae))return[];if(ue.value)return Array.from(Ae);{const{remote:mt}=e,{value:Vt}=A;if(mt){const{value:gn}=de;return Ae.filter(hn=>Vt.has(hn)||gn.has(hn))}else return Ae.filter(gn=>Vt.has(gn))}}function vt(Ae){Wt(Ae.rawNode)}function Wt(Ae){if(Pt.value)return;const{tag:mt,remote:Vt,clearFilterAfterSelect:gn,valueField:hn}=e;if(mt&&!Vt){const{value:Fe}=ee,Rt=Fe[0]||null;if(Rt){const Qt=ce.value;Qt.length?Qt.push(Rt):ce.value=[Rt],ee.value=Y}}if(Vt&&de.value.set(Ae[hn],Ae),e.multiple){const Fe=Oe(m.value),Rt=Fe.findIndex(Qt=>Qt===Ae[hn]);if(~Rt){if(Fe.splice(Rt,1),mt&&!Vt){const Qt=Jt(Ae[hn]);~Qt&&(ce.value.splice(Qt,1),gn&&(w.value=""))}}else Fe.push(Ae[hn]),gn&&(w.value="");ut(Fe,qe(Fe))}else{if(mt&&!Vt){const Fe=Jt(Ae[hn]);~Fe?ce.value=[ce.value[Fe]]:ce.value=Y}pr(),Ct(),ut(Ae[hn],Ae)}}function Jt(Ae){return ce.value.findIndex(Vt=>Vt[e.valueField]===Ae)}function wn(Ae){z.value||Lt();const{value:mt}=Ae.target;w.value=mt;const{tag:Vt,remote:gn}=e;if(Dn(mt),Vt&&!gn){if(!mt){ee.value=Y;return}const{onCreate:hn}=e,Fe=hn?hn(mt):{[e.labelField]:mt,[e.valueField]:mt},{valueField:Rt}=e;Z.value.some(Qt=>Qt[Rt]===Fe[Rt])||ce.value.some(Qt=>Qt[Rt]===Fe[Rt])?ee.value=Y:ee.value=[Fe]}}function Cn(Ae){Ae.stopPropagation();const{multiple:mt}=e;!mt&&e.filterable&&Ct(),on(),mt?ut([],[]):ut(null,null)}function Fn(Ae){!Qh(Ae,"action")&&!Qh(Ae,"empty")&&Ae.preventDefault()}function $n(Ae){Je(Ae)}function Zn(Ae){var mt,Vt,gn,hn,Fe;switch(Ae.key){case" ":if(e.filterable)break;Ae.preventDefault();case"Enter":if(!(!((mt=U.value)===null||mt===void 0)&&mt.isComposing)){if(z.value){const Rt=(Vt=F.value)===null||Vt===void 0?void 0:Vt.getPendingTmNode();Rt?vt(Rt):e.filterable||(Ct(),pr())}else if(Lt(),e.tag&&ln.value){const Rt=ee.value[0];if(Rt){const Qt=Rt[e.valueField],{value:An}=m;e.multiple&&Array.isArray(An)&&An.some(et=>et===Qt)||Wt(Rt)}}}Ae.preventDefault();break;case"ArrowUp":if(Ae.preventDefault(),e.loading)return;z.value&&((gn=F.value)===null||gn===void 0||gn.prev());break;case"ArrowDown":if(Ae.preventDefault(),e.loading)return;z.value?(hn=F.value)===null||hn===void 0||hn.next():Lt();break;case"Escape":z.value&&(jm(Ae),Ct()),(Fe=U.value)===null||Fe===void 0||Fe.focus();break}}function pr(){var Ae;(Ae=U.value)===null||Ae===void 0||Ae.focus()}function sr(){var Ae;(Ae=U.value)===null||Ae===void 0||Ae.focusInput()}function li(){var Ae;z.value&&((Ae=j.value)===null||Ae===void 0||Ae.syncPosition())}yt(),xr(nr(e,"options"),yt);const br={focus:()=>{var Ae;(Ae=U.value)===null||Ae===void 0||Ae.focus()},blur:()=>{var Ae;(Ae=U.value)===null||Ae===void 0||Ae.blur()}},dr=Le(()=>{const{self:{menuBoxShadow:Ae}}=u.value;return{"--n-menu-box-shadow":Ae}}),rr=s?Xi("select",void 0,dr,e):void 0;return Object.assign(Object.assign({},br),{mergedStatus:Ke,mergedClsPrefix:t,mergedBordered:n,namespace:i,treeMate:S,isMounted:gd(),triggerRef:U,menuRef:F,pattern:w,uncontrolledShow:I,mergedShow:z,adjustedTo:Xo(e),uncontrolledValue:d,mergedValue:m,followerRef:j,localizedPlaceholder:J,selectedOption:Be,selectedOptions:Qe,mergedSize:it,mergedDisabled:Pt,focused:y,activeWithoutMenuOpen:ln,inlineThemeDisabled:s,onTriggerInputFocus:he,onTriggerInputBlur:Me,handleTriggerOrMenuResize:li,handleMenuFocus:Ne,handleMenuBlur:ht,handleMenuTabOut:At,handleTriggerClick:Ue,handleToggle:vt,handleDeleteOption:Wt,handlePatternInput:wn,handleClear:Cn,handleTriggerBlur:lt,handleTriggerFocus:gt,handleKeydown:Zn,handleMenuAfterLeave:Yt,handleMenuClickOutside:Et,handleMenuScroll:$n,handleMenuKeydown:Zn,handleMenuMousedown:Fn,mergedTheme:u,cssVars:s?void 0:dr,themeClass:rr==null?void 0:rr.themeClass,onRender:rr==null?void 0:rr.onRender})},render(){return V("div",{class:`${this.mergedClsPrefix}-select`},V(lg,null,{default:()=>[V(cg,null,{default:()=>V(n7,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,t;return[(t=(e=this.$slots).arrow)===null||t===void 0?void 0:t.call(e)]}})}),V(ug,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Xo.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>V(Yo,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,t,n;return this.mergedShow||this.displayDirective==="show"?((e=this.onRender)===null||e===void 0||e.call(this),Wa(V(P9,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(t=this.menuProps)===null||t===void 0?void 0:t.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(n=this.menuProps)===null||n===void 0?void 0:n.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var i,s;return[(s=(i=this.$slots).empty)===null||s===void 0?void 0:s.call(i)]},action:()=>{var i,s;return[(s=(i=this.$slots).action)===null||s===void 0?void 0:s.call(i)]}}),this.displayDirective==="show"?[[vf,this.mergedShow],[ld,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[ld,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),V7={itemFontSize:"12px",itemHeight:"36px",itemWidth:"52px",panelActionPadding:"8px 0"},j7=e=>{const{popoverColor:t,textColor2:n,primaryColor:i,hoverColor:s,dividerColor:u,opacityDisabled:d,boxShadow2:o,borderRadius:m,iconColor:y,iconColorDisabled:w}=e;return Object.assign(Object.assign({},V7),{panelColor:t,panelBoxShadow:o,panelDividerColor:u,itemTextColor:n,itemTextColorActive:i,itemColorHover:s,itemOpacityDisabled:d,itemBorderRadius:m,borderRadius:m,iconColor:y,iconColorDisabled:w})},W7={name:"TimePicker",common:xo,peers:{Scrollbar:s0,Button:BT,Input:LT},self:j7},tz=W7,H7={itemSize:"24px",itemCellWidth:"38px",itemCellHeight:"32px",scrollItemWidth:"80px",scrollItemHeight:"40px",panelExtraFooterPadding:"8px 12px",panelActionPadding:"8px 12px",calendarTitlePadding:"0",calendarTitleHeight:"28px",arrowSize:"14px",panelHeaderPadding:"8px 12px",calendarDaysHeight:"32px",calendarTitleGridTempateColumns:"28px 28px 1fr 28px 28px",calendarLeftPaddingDate:"6px 12px 4px 12px",calendarLeftPaddingDatetime:"4px 12px",calendarLeftPaddingDaterange:"6px 12px 4px 12px",calendarLeftPaddingDatetimerange:"4px 12px",calendarLeftPaddingMonth:"0",calendarLeftPaddingYear:"0",calendarLeftPaddingQuarter:"0",calendarLeftPaddingMonthrange:"0",calendarLeftPaddingQuarterrange:"0",calendarLeftPaddingYearrange:"0",calendarRightPaddingDate:"6px 12px 4px 12px",calendarRightPaddingDatetime:"4px 12px",calendarRightPaddingDaterange:"6px 12px 4px 12px",calendarRightPaddingDatetimerange:"4px 12px",calendarRightPaddingMonth:"0",calendarRightPaddingYear:"0",calendarRightPaddingQuarter:"0",calendarRightPaddingMonthrange:"0",calendarRightPaddingQuarterrange:"0",calendarRightPaddingYearrange:"0"},G7=e=>{const{hoverColor:t,fontSize:n,textColor2:i,textColorDisabled:s,popoverColor:u,primaryColor:d,borderRadiusSmall:o,iconColor:m,iconColorDisabled:y,textColor1:w,dividerColor:S,boxShadow2:A,borderRadius:I,fontWeightStrong:z}=e;return Object.assign(Object.assign({},H7),{itemFontSize:n,calendarDaysFontSize:n,calendarTitleFontSize:n,itemTextColor:i,itemTextColorDisabled:s,itemTextColorActive:u,itemTextColorCurrent:d,itemColorIncluded:gr(d,{alpha:.1}),itemColorHover:t,itemColorDisabled:t,itemColorActive:d,itemBorderRadius:o,panelColor:u,panelTextColor:i,arrowColor:m,calendarTitleTextColor:w,calendarTitleColorHover:t,calendarDaysTextColor:i,panelHeaderDividerColor:S,calendarDaysDividerColor:S,calendarDividerColor:S,panelActionDividerColor:S,panelBoxShadow:A,panelBorderRadius:I,calendarTitleFontWeight:z,scrollItemBorderRadius:I,iconColor:m,iconColorDisabled:y})},q7={name:"DatePicker",common:xo,peers:{Input:LT,Button:BT,TimePicker:tz,Scrollbar:s0},self:G7},Z7=q7;function Y7(e,t){const n=Le(()=>{const{isTimeDisabled:w}=e,{value:S}=t;if(!(S===null||Array.isArray(S)))return w==null?void 0:w(S)}),i=Le(()=>{var w;return(w=n.value)===null||w===void 0?void 0:w.isHourDisabled}),s=Le(()=>{var w;return(w=n.value)===null||w===void 0?void 0:w.isMinuteDisabled}),u=Le(()=>{var w;return(w=n.value)===null||w===void 0?void 0:w.isSecondDisabled}),d=Le(()=>{const{type:w,isDateDisabled:S}=e,{value:A}=t;return A===null||Array.isArray(A)||!["date","datetime"].includes(w)||!S?!1:S(A)}),o=Le(()=>{const{type:w}=e,{value:S}=t;if(S===null||w==="datetime"||Array.isArray(S))return!1;const A=new Date(S),I=A.getHours(),z=A.getMinutes(),U=A.getMinutes();return(i.value?i.value(I):!1)||(s.value?s.value(z,I):!1)||(u.value?u.value(U,z,I):!1)}),m=Le(()=>d.value||o.value);return{isValueInvalidRef:Le(()=>{const{type:w}=e;return w==="date"?d.value:w==="datetime"?m.value:!1}),isDateInvalidRef:d,isTimeInvalidRef:o,isDateTimeInvalidRef:m,isHourDisabledRef:i,isMinuteDisabledRef:s,isSecondDisabledRef:u}}function X7(e,t){const n=Le(()=>{const{isTimeDisabled:S}=e,{value:A}=t;return!Array.isArray(A)||!S?[void 0,void 0]:[S==null?void 0:S(A[0],"start",A),S==null?void 0:S(A[1],"end",A)]}),i={isStartHourDisabledRef:Le(()=>{var S;return(S=n.value[0])===null||S===void 0?void 0:S.isHourDisabled}),isEndHourDisabledRef:Le(()=>{var S;return(S=n.value[1])===null||S===void 0?void 0:S.isHourDisabled}),isStartMinuteDisabledRef:Le(()=>{var S;return(S=n.value[0])===null||S===void 0?void 0:S.isMinuteDisabled}),isEndMinuteDisabledRef:Le(()=>{var S;return(S=n.value[1])===null||S===void 0?void 0:S.isMinuteDisabled}),isStartSecondDisabledRef:Le(()=>{var S;return(S=n.value[0])===null||S===void 0?void 0:S.isSecondDisabled}),isEndSecondDisabledRef:Le(()=>{var S;return(S=n.value[1])===null||S===void 0?void 0:S.isSecondDisabled})},s=Le(()=>{const{type:S,isDateDisabled:A}=e,{value:I}=t;return I===null||!Array.isArray(I)||!["daterange","datetimerange"].includes(S)||!A?!1:A(I[0],"start",I)}),u=Le(()=>{const{type:S,isDateDisabled:A}=e,{value:I}=t;return I===null||!Array.isArray(I)||!["daterange","datetimerange"].includes(S)||!A?!1:A(I[1],"end",I)}),d=Le(()=>{const{type:S}=e,{value:A}=t;if(A===null||!Array.isArray(A)||S!=="datetimerange")return!1;const I=xc(A[0]),z=Ty(A[0]),U=Cy(A[0]),{isStartHourDisabledRef:j,isStartMinuteDisabledRef:F,isStartSecondDisabledRef:H}=i;return(j.value?j.value(I):!1)||(F.value?F.value(z,I):!1)||(H.value?H.value(U,z,I):!1)}),o=Le(()=>{const{type:S}=e,{value:A}=t;if(A===null||!Array.isArray(A)||S!=="datetimerange")return!1;const I=xc(A[1]),z=Ty(A[1]),U=Cy(A[1]),{isEndHourDisabledRef:j,isEndMinuteDisabledRef:F,isEndSecondDisabledRef:H}=i;return(j.value?j.value(I):!1)||(F.value?F.value(z,I):!1)||(H.value?H.value(U,z,I):!1)}),m=Le(()=>s.value||d.value),y=Le(()=>u.value||o.value),w=Le(()=>m.value||y.value);return Object.assign(Object.assign({},i),{isStartDateInvalidRef:s,isEndDateInvalidRef:u,isStartTimeInvalidRef:d,isEndTimeInvalidRef:o,isStartValueInvalidRef:m,isEndValueInvalidRef:y,isRangeInvalidRef:w})}const a0="n-date-picker";var K7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k1={exports:{}},nz={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(nz);var zi=nz.exports,D1={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i,s){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u]);return i}e.exports=t.default})(D1,D1.exports);var J7=D1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=n(J7);function s(u){return(0,i.default)({},u)}e.exports=t.default})(k1,k1.exports);var Q7=k1.exports;const eG=mg(Q7);var I1={exports:{}},z1={exports:{}},R1={exports:{}},rz={exports:{}};(function(e){function t(n){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(rz);var iz=rz.exports,O1={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i,s){if(s.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+s.length+" present")}e.exports=t.default})(O1,O1.exports);var Ko=O1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(iz),s=n(Ko);function u(d){return(0,s.default)(1,arguments),d instanceof Date||(0,i.default)(d)==="object"&&Object.prototype.toString.call(d)==="[object Date]"}e.exports=t.default})(R1,R1.exports);var tG=R1.exports,L1={exports:{}};(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(iz),s=n(Ko);function u(d){(0,s.default)(1,arguments);var o=Object.prototype.toString.call(d);return d instanceof Date||(0,i.default)(d)==="object"&&o==="[object Date]"?new Date(d.getTime()):typeof d=="number"||o==="[object Number]"?new Date(d):((typeof d=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}e.exports=t.default})(L1,L1.exports);var Ga=L1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=n(tG),s=n(Ga),u=n(Ko);function d(o){if((0,u.default)(1,arguments),!(0,i.default)(o)&&typeof o!="number")return!1;var m=(0,s.default)(o);return!isNaN(Number(m))}e.exports=t.default})(z1,z1.exports);var nG=z1.exports,B1={exports:{}},F1={exports:{}},$1={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){if(i===null||i===!0||i===!1)return NaN;var s=Number(i);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})($1,$1.exports);var Td=$1.exports;const rG=mg(Td);(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=n(Td),s=n(Ga),u=n(Ko);function d(o,m){(0,u.default)(2,arguments);var y=(0,s.default)(o).getTime(),w=(0,i.default)(m);return new Date(y+w)}e.exports=t.default})(F1,F1.exports);var iG=F1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=n(iG),s=n(Ko),u=n(Td);function d(o,m){(0,s.default)(2,arguments);var y=(0,u.default)(m);return(0,i.default)(o,-y)}e.exports=t.default})(B1,B1.exports);var oG=B1.exports,N1={exports:{}},U1={exports:{}};(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=n(Ga),s=n(Ko),u=864e5;function d(o){(0,s.default)(1,arguments);var m=(0,i.default)(o),y=m.getTime();m.setUTCMonth(0,1),m.setUTCHours(0,0,0,0);var w=m.getTime(),S=y-w;return Math.floor(S/u)+1}e.exports=t.default})(U1,U1.exports);var sG=U1.exports,V1={exports:{}},j1={exports:{}};(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(Ga),s=n(Ko);function u(d){(0,s.default)(1,arguments);var o=1,m=(0,i.default)(d),y=m.getUTCDay(),w=(y<o?7:0)+y-o;return m.setUTCDate(m.getUTCDate()-w),m.setUTCHours(0,0,0,0),m}e.exports=t.default})(j1,j1.exports);var FT=j1.exports,W1={exports:{}},H1={exports:{}};(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=n(Ga),s=n(Ko),u=n(FT);function d(o){(0,s.default)(1,arguments);var m=(0,i.default)(o),y=m.getUTCFullYear(),w=new Date(0);w.setUTCFullYear(y+1,0,4),w.setUTCHours(0,0,0,0);var S=(0,u.default)(w),A=new Date(0);A.setUTCFullYear(y,0,4),A.setUTCHours(0,0,0,0);var I=(0,u.default)(A);return m.getTime()>=S.getTime()?y+1:m.getTime()>=I.getTime()?y:y-1}e.exports=t.default})(H1,H1.exports);var oz=H1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=n(oz),s=n(FT),u=n(Ko);function d(o){(0,u.default)(1,arguments);var m=(0,i.default)(o),y=new Date(0);y.setUTCFullYear(m,0,4),y.setUTCHours(0,0,0,0);var w=(0,s.default)(y);return w}e.exports=t.default})(W1,W1.exports);var aG=W1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var i=n(Ga),s=n(FT),u=n(aG),d=n(Ko),o=6048e5;function m(y){(0,d.default)(1,arguments);var w=(0,i.default)(y),S=(0,s.default)(w).getTime()-(0,u.default)(w).getTime();return Math.round(S/o)+1}e.exports=t.default})(V1,V1.exports);var lG=V1.exports,G1={exports:{}},q1={exports:{}},Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});Cd.getDefaultOptions=cG;Cd.setDefaultOptions=uG;var sz={};function cG(){return sz}function uG(e){sz=e}(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(Ga),s=n(Ko),u=n(Td),d=Cd;function o(m,y){var w,S,A,I,z,U,j,F;(0,s.default)(1,arguments);var H=(0,d.getDefaultOptions)(),J=(0,u.default)((w=(S=(A=(I=y==null?void 0:y.weekStartsOn)!==null&&I!==void 0?I:y==null||(z=y.locale)===null||z===void 0||(U=z.options)===null||U===void 0?void 0:U.weekStartsOn)!==null&&A!==void 0?A:H.weekStartsOn)!==null&&S!==void 0?S:(j=H.locale)===null||j===void 0||(F=j.options)===null||F===void 0?void 0:F.weekStartsOn)!==null&&w!==void 0?w:0);if(!(J>=0&&J<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var Z=(0,i.default)(m),Y=Z.getUTCDay(),ce=(Y<J?7:0)+Y-J;return Z.setUTCDate(Z.getUTCDate()-ce),Z.setUTCHours(0,0,0,0),Z}e.exports=t.default})(q1,q1.exports);var $T=q1.exports,Z1={exports:{}},Y1={exports:{}};(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var i=n(Ga),s=n(Ko),u=n($T),d=n(Td),o=Cd;function m(y,w){var S,A,I,z,U,j,F,H;(0,s.default)(1,arguments);var J=(0,i.default)(y),Z=J.getUTCFullYear(),Y=(0,o.getDefaultOptions)(),ce=(0,d.default)((S=(A=(I=(z=w==null?void 0:w.firstWeekContainsDate)!==null&&z!==void 0?z:w==null||(U=w.locale)===null||U===void 0||(j=U.options)===null||j===void 0?void 0:j.firstWeekContainsDate)!==null&&I!==void 0?I:Y.firstWeekContainsDate)!==null&&A!==void 0?A:(F=Y.locale)===null||F===void 0||(H=F.options)===null||H===void 0?void 0:H.firstWeekContainsDate)!==null&&S!==void 0?S:1);if(!(ce>=1&&ce<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ee=new Date(0);ee.setUTCFullYear(Z+1,0,ce),ee.setUTCHours(0,0,0,0);var de=(0,u.default)(ee,w),ue=new Date(0);ue.setUTCFullYear(Z,0,ce),ue.setUTCHours(0,0,0,0);var Ee=(0,u.default)(ue,w);return J.getTime()>=de.getTime()?Z+1:J.getTime()>=Ee.getTime()?Z:Z-1}e.exports=t.default})(Y1,Y1.exports);var az=Y1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var i=n(az),s=n(Ko),u=n($T),d=n(Td),o=Cd;function m(y,w){var S,A,I,z,U,j,F,H;(0,s.default)(1,arguments);var J=(0,o.getDefaultOptions)(),Z=(0,d.default)((S=(A=(I=(z=w==null?void 0:w.firstWeekContainsDate)!==null&&z!==void 0?z:w==null||(U=w.locale)===null||U===void 0||(j=U.options)===null||j===void 0?void 0:j.firstWeekContainsDate)!==null&&I!==void 0?I:J.firstWeekContainsDate)!==null&&A!==void 0?A:(F=J.locale)===null||F===void 0||(H=F.options)===null||H===void 0?void 0:H.firstWeekContainsDate)!==null&&S!==void 0?S:1),Y=(0,i.default)(y,w),ce=new Date(0);ce.setUTCFullYear(Y,0,Z),ce.setUTCHours(0,0,0,0);var ee=(0,u.default)(ce,w);return ee}e.exports=t.default})(Z1,Z1.exports);var dG=Z1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var i=n(Ga),s=n($T),u=n(dG),d=n(Ko),o=6048e5;function m(y,w){(0,d.default)(1,arguments);var S=(0,i.default)(y),A=(0,s.default)(S,w).getTime()-(0,u.default)(S,w).getTime();return Math.round(A/o)+1}e.exports=t.default})(G1,G1.exports);var hG=G1.exports,X1={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i,s){for(var u=i<0?"-":"",d=Math.abs(i).toString();d.length<s;)d="0"+d;return u+d}e.exports=t.default})(X1,X1.exports);var lz=X1.exports,K1={exports:{}};(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(lz),s={y:function(o,m){var y=o.getUTCFullYear(),w=y>0?y:1-y;return(0,i.default)(m==="yy"?w%100:w,m.length)},M:function(o,m){var y=o.getUTCMonth();return m==="M"?String(y+1):(0,i.default)(y+1,2)},d:function(o,m){return(0,i.default)(o.getUTCDate(),m.length)},a:function(o,m){var y=o.getUTCHours()/12>=1?"pm":"am";switch(m){case"a":case"aa":return y.toUpperCase();case"aaa":return y;case"aaaaa":return y[0];case"aaaa":default:return y==="am"?"a.m.":"p.m."}},h:function(o,m){return(0,i.default)(o.getUTCHours()%12||12,m.length)},H:function(o,m){return(0,i.default)(o.getUTCHours(),m.length)},m:function(o,m){return(0,i.default)(o.getUTCMinutes(),m.length)},s:function(o,m){return(0,i.default)(o.getUTCSeconds(),m.length)},S:function(o,m){var y=m.length,w=o.getUTCMilliseconds(),S=Math.floor(w*Math.pow(10,y-3));return(0,i.default)(S,m.length)}},u=s;t.default=u,e.exports=t.default})(K1,K1.exports);var fG=K1.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(sG),s=n(lG),u=n(oz),d=n(hG),o=n(az),m=n(lz),y=n(fG),w={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},S={G:function(F,H,J){var Z=F.getUTCFullYear()>0?1:0;switch(H){case"G":case"GG":case"GGG":return J.era(Z,{width:"abbreviated"});case"GGGGG":return J.era(Z,{width:"narrow"});case"GGGG":default:return J.era(Z,{width:"wide"})}},y:function(F,H,J){if(H==="yo"){var Z=F.getUTCFullYear(),Y=Z>0?Z:1-Z;return J.ordinalNumber(Y,{unit:"year"})}return y.default.y(F,H)},Y:function(F,H,J,Z){var Y=(0,o.default)(F,Z),ce=Y>0?Y:1-Y;if(H==="YY"){var ee=ce%100;return(0,m.default)(ee,2)}return H==="Yo"?J.ordinalNumber(ce,{unit:"year"}):(0,m.default)(ce,H.length)},R:function(F,H){var J=(0,u.default)(F);return(0,m.default)(J,H.length)},u:function(F,H){var J=F.getUTCFullYear();return(0,m.default)(J,H.length)},Q:function(F,H,J){var Z=Math.ceil((F.getUTCMonth()+1)/3);switch(H){case"Q":return String(Z);case"QQ":return(0,m.default)(Z,2);case"Qo":return J.ordinalNumber(Z,{unit:"quarter"});case"QQQ":return J.quarter(Z,{width:"abbreviated",context:"formatting"});case"QQQQQ":return J.quarter(Z,{width:"narrow",context:"formatting"});case"QQQQ":default:return J.quarter(Z,{width:"wide",context:"formatting"})}},q:function(F,H,J){var Z=Math.ceil((F.getUTCMonth()+1)/3);switch(H){case"q":return String(Z);case"qq":return(0,m.default)(Z,2);case"qo":return J.ordinalNumber(Z,{unit:"quarter"});case"qqq":return J.quarter(Z,{width:"abbreviated",context:"standalone"});case"qqqqq":return J.quarter(Z,{width:"narrow",context:"standalone"});case"qqqq":default:return J.quarter(Z,{width:"wide",context:"standalone"})}},M:function(F,H,J){var Z=F.getUTCMonth();switch(H){case"M":case"MM":return y.default.M(F,H);case"Mo":return J.ordinalNumber(Z+1,{unit:"month"});case"MMM":return J.month(Z,{width:"abbreviated",context:"formatting"});case"MMMMM":return J.month(Z,{width:"narrow",context:"formatting"});case"MMMM":default:return J.month(Z,{width:"wide",context:"formatting"})}},L:function(F,H,J){var Z=F.getUTCMonth();switch(H){case"L":return String(Z+1);case"LL":return(0,m.default)(Z+1,2);case"Lo":return J.ordinalNumber(Z+1,{unit:"month"});case"LLL":return J.month(Z,{width:"abbreviated",context:"standalone"});case"LLLLL":return J.month(Z,{width:"narrow",context:"standalone"});case"LLLL":default:return J.month(Z,{width:"wide",context:"standalone"})}},w:function(F,H,J,Z){var Y=(0,d.default)(F,Z);return H==="wo"?J.ordinalNumber(Y,{unit:"week"}):(0,m.default)(Y,H.length)},I:function(F,H,J){var Z=(0,s.default)(F);return H==="Io"?J.ordinalNumber(Z,{unit:"week"}):(0,m.default)(Z,H.length)},d:function(F,H,J){return H==="do"?J.ordinalNumber(F.getUTCDate(),{unit:"date"}):y.default.d(F,H)},D:function(F,H,J){var Z=(0,i.default)(F);return H==="Do"?J.ordinalNumber(Z,{unit:"dayOfYear"}):(0,m.default)(Z,H.length)},E:function(F,H,J){var Z=F.getUTCDay();switch(H){case"E":case"EE":case"EEE":return J.day(Z,{width:"abbreviated",context:"formatting"});case"EEEEE":return J.day(Z,{width:"narrow",context:"formatting"});case"EEEEEE":return J.day(Z,{width:"short",context:"formatting"});case"EEEE":default:return J.day(Z,{width:"wide",context:"formatting"})}},e:function(F,H,J,Z){var Y=F.getUTCDay(),ce=(Y-Z.weekStartsOn+8)%7||7;switch(H){case"e":return String(ce);case"ee":return(0,m.default)(ce,2);case"eo":return J.ordinalNumber(ce,{unit:"day"});case"eee":return J.day(Y,{width:"abbreviated",context:"formatting"});case"eeeee":return J.day(Y,{width:"narrow",context:"formatting"});case"eeeeee":return J.day(Y,{width:"short",context:"formatting"});case"eeee":default:return J.day(Y,{width:"wide",context:"formatting"})}},c:function(F,H,J,Z){var Y=F.getUTCDay(),ce=(Y-Z.weekStartsOn+8)%7||7;switch(H){case"c":return String(ce);case"cc":return(0,m.default)(ce,H.length);case"co":return J.ordinalNumber(ce,{unit:"day"});case"ccc":return J.day(Y,{width:"abbreviated",context:"standalone"});case"ccccc":return J.day(Y,{width:"narrow",context:"standalone"});case"cccccc":return J.day(Y,{width:"short",context:"standalone"});case"cccc":default:return J.day(Y,{width:"wide",context:"standalone"})}},i:function(F,H,J){var Z=F.getUTCDay(),Y=Z===0?7:Z;switch(H){case"i":return String(Y);case"ii":return(0,m.default)(Y,H.length);case"io":return J.ordinalNumber(Y,{unit:"day"});case"iii":return J.day(Z,{width:"abbreviated",context:"formatting"});case"iiiii":return J.day(Z,{width:"narrow",context:"formatting"});case"iiiiii":return J.day(Z,{width:"short",context:"formatting"});case"iiii":default:return J.day(Z,{width:"wide",context:"formatting"})}},a:function(F,H,J){var Z=F.getUTCHours(),Y=Z/12>=1?"pm":"am";switch(H){case"a":case"aa":return J.dayPeriod(Y,{width:"abbreviated",context:"formatting"});case"aaa":return J.dayPeriod(Y,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return J.dayPeriod(Y,{width:"narrow",context:"formatting"});case"aaaa":default:return J.dayPeriod(Y,{width:"wide",context:"formatting"})}},b:function(F,H,J){var Z=F.getUTCHours(),Y;switch(Z===12?Y=w.noon:Z===0?Y=w.midnight:Y=Z/12>=1?"pm":"am",H){case"b":case"bb":return J.dayPeriod(Y,{width:"abbreviated",context:"formatting"});case"bbb":return J.dayPeriod(Y,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return J.dayPeriod(Y,{width:"narrow",context:"formatting"});case"bbbb":default:return J.dayPeriod(Y,{width:"wide",context:"formatting"})}},B:function(F,H,J){var Z=F.getUTCHours(),Y;switch(Z>=17?Y=w.evening:Z>=12?Y=w.afternoon:Z>=4?Y=w.morning:Y=w.night,H){case"B":case"BB":case"BBB":return J.dayPeriod(Y,{width:"abbreviated",context:"formatting"});case"BBBBB":return J.dayPeriod(Y,{width:"narrow",context:"formatting"});case"BBBB":default:return J.dayPeriod(Y,{width:"wide",context:"formatting"})}},h:function(F,H,J){if(H==="ho"){var Z=F.getUTCHours()%12;return Z===0&&(Z=12),J.ordinalNumber(Z,{unit:"hour"})}return y.default.h(F,H)},H:function(F,H,J){return H==="Ho"?J.ordinalNumber(F.getUTCHours(),{unit:"hour"}):y.default.H(F,H)},K:function(F,H,J){var Z=F.getUTCHours()%12;return H==="Ko"?J.ordinalNumber(Z,{unit:"hour"}):(0,m.default)(Z,H.length)},k:function(F,H,J){var Z=F.getUTCHours();return Z===0&&(Z=24),H==="ko"?J.ordinalNumber(Z,{unit:"hour"}):(0,m.default)(Z,H.length)},m:function(F,H,J){return H==="mo"?J.ordinalNumber(F.getUTCMinutes(),{unit:"minute"}):y.default.m(F,H)},s:function(F,H,J){return H==="so"?J.ordinalNumber(F.getUTCSeconds(),{unit:"second"}):y.default.s(F,H)},S:function(F,H){return y.default.S(F,H)},X:function(F,H,J,Z){var Y=Z._originalDate||F,ce=Y.getTimezoneOffset();if(ce===0)return"Z";switch(H){case"X":return I(ce);case"XXXX":case"XX":return z(ce);case"XXXXX":case"XXX":default:return z(ce,":")}},x:function(F,H,J,Z){var Y=Z._originalDate||F,ce=Y.getTimezoneOffset();switch(H){case"x":return I(ce);case"xxxx":case"xx":return z(ce);case"xxxxx":case"xxx":default:return z(ce,":")}},O:function(F,H,J,Z){var Y=Z._originalDate||F,ce=Y.getTimezoneOffset();switch(H){case"O":case"OO":case"OOO":return"GMT"+A(ce,":");case"OOOO":default:return"GMT"+z(ce,":")}},z:function(F,H,J,Z){var Y=Z._originalDate||F,ce=Y.getTimezoneOffset();switch(H){case"z":case"zz":case"zzz":return"GMT"+A(ce,":");case"zzzz":default:return"GMT"+z(ce,":")}},t:function(F,H,J,Z){var Y=Z._originalDate||F,ce=Math.floor(Y.getTime()/1e3);return(0,m.default)(ce,H.length)},T:function(F,H,J,Z){var Y=Z._originalDate||F,ce=Y.getTime();return(0,m.default)(ce,H.length)}};function A(j,F){var H=j>0?"-":"+",J=Math.abs(j),Z=Math.floor(J/60),Y=J%60;if(Y===0)return H+String(Z);var ce=F||"";return H+String(Z)+ce+(0,m.default)(Y,2)}function I(j,F){if(j%60===0){var H=j>0?"-":"+";return H+(0,m.default)(Math.abs(j)/60,2)}return z(j,F)}function z(j,F){var H=F||"",J=j>0?"-":"+",Z=Math.abs(j),Y=(0,m.default)(Math.floor(Z/60),2),ce=(0,m.default)(Z%60,2);return J+Y+H+ce}var U=S;t.default=U,e.exports=t.default})(N1,N1.exports);var pG=N1.exports,J1={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(m,y){switch(m){case"P":return y.date({width:"short"});case"PP":return y.date({width:"medium"});case"PPP":return y.date({width:"long"});case"PPPP":default:return y.date({width:"full"})}},i=function(m,y){switch(m){case"p":return y.time({width:"short"});case"pp":return y.time({width:"medium"});case"ppp":return y.time({width:"long"});case"pppp":default:return y.time({width:"full"})}},s=function(m,y){var w=m.match(/(P+)(p+)?/)||[],S=w[1],A=w[2];if(!A)return n(m,y);var I;switch(S){case"P":I=y.dateTime({width:"short"});break;case"PP":I=y.dateTime({width:"medium"});break;case"PPP":I=y.dateTime({width:"long"});break;case"PPPP":default:I=y.dateTime({width:"full"});break}return I.replace("{{date}}",n(S,y)).replace("{{time}}",i(A,y))},u={p:i,P:s},d=u;t.default=d,e.exports=t.default})(J1,J1.exports);var mG=J1.exports,Q1={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){var s=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return s.setUTCFullYear(i.getFullYear()),i.getTime()-s.getTime()}e.exports=t.default})(Q1,Q1.exports);var cz=Q1.exports;const iP=mg(cz);var gg={};Object.defineProperty(gg,"__esModule",{value:!0});gg.isProtectedDayOfYearToken=_G;gg.isProtectedWeekYearToken=yG;gg.throwProtectedError=xG;var gG=["D","DD"],vG=["YY","YYYY"];function _G(e){return gG.indexOf(e)!==-1}function yG(e){return vG.indexOf(e)!==-1}function xG(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ew={exports:{}},tw={exports:{}},nw={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},i=function(d,o,m){var y,w=n[d];return typeof w=="string"?y=w:o===1?y=w.one:y=w.other.replace("{{count}}",o.toString()),m!=null&&m.addSuffix?m.comparison&&m.comparison>0?"in "+y:y+" ago":y},s=i;t.default=s,e.exports=t.default})(nw,nw.exports);var bG=nw.exports,rw={exports:{}},iw={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){return function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=s.width?String(s.width):i.defaultWidth,d=i.formats[u]||i.formats[i.defaultWidth];return d}}e.exports=t.default})(iw,iw.exports);var wG=iw.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(wG),s={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},u={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},d={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o={date:(0,i.default)({formats:s,defaultWidth:"full"}),time:(0,i.default)({formats:u,defaultWidth:"full"}),dateTime:(0,i.default)({formats:d,defaultWidth:"full"})},m=o;t.default=m,e.exports=t.default})(rw,rw.exports);var TG=rw.exports,ow={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},i=function(d,o,m,y){return n[d]},s=i;t.default=s,e.exports=t.default})(ow,ow.exports);var CG=ow.exports,sw={exports:{}},aw={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){return function(s,u){var d=u!=null&&u.context?String(u.context):"standalone",o;if(d==="formatting"&&i.formattingValues){var m=i.defaultFormattingWidth||i.defaultWidth,y=u!=null&&u.width?String(u.width):m;o=i.formattingValues[y]||i.formattingValues[m]}else{var w=i.defaultWidth,S=u!=null&&u.width?String(u.width):i.defaultWidth;o=i.values[S]||i.values[w]}var A=i.argumentCallback?i.argumentCallback(s):s;return o[A]}}e.exports=t.default})(aw,aw.exports);var SG=aw.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(SG),s={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},u={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},d={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},m={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},y={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},w=function(z,U){var j=Number(z),F=j%100;if(F>20||F<10)switch(F%10){case 1:return j+"st";case 2:return j+"nd";case 3:return j+"rd"}return j+"th"},S={ordinalNumber:w,era:(0,i.default)({values:s,defaultWidth:"wide"}),quarter:(0,i.default)({values:u,defaultWidth:"wide",argumentCallback:function(z){return z-1}}),month:(0,i.default)({values:d,defaultWidth:"wide"}),day:(0,i.default)({values:o,defaultWidth:"wide"}),dayPeriod:(0,i.default)({values:m,defaultWidth:"wide",formattingValues:y,defaultFormattingWidth:"wide"})},A=S;t.default=A,e.exports=t.default})(sw,sw.exports);var EG=sw.exports,lw={exports:{}},cw={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(u){return function(d){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=o.width,y=m&&u.matchPatterns[m]||u.matchPatterns[u.defaultMatchWidth],w=d.match(y);if(!w)return null;var S=w[0],A=m&&u.parsePatterns[m]||u.parsePatterns[u.defaultParseWidth],I=Array.isArray(A)?s(A,function(j){return j.test(S)}):i(A,function(j){return j.test(S)}),z;z=u.valueCallback?u.valueCallback(I):I,z=o.valueCallback?o.valueCallback(z):z;var U=d.slice(S.length);return{value:z,rest:U}}}function i(u,d){for(var o in u)if(u.hasOwnProperty(o)&&d(u[o]))return o}function s(u,d){for(var o=0;o<u.length;o++)if(d(u[o]))return o}e.exports=t.default})(cw,cw.exports);var MG=cw.exports,uw={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){return function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=s.match(i.matchPattern);if(!d)return null;var o=d[0],m=s.match(i.parsePattern);if(!m)return null;var y=i.valueCallback?i.valueCallback(m[0]):m[0];y=u.valueCallback?u.valueCallback(y):y;var w=s.slice(o.length);return{value:y,rest:w}}}e.exports=t.default})(uw,uw.exports);var PG=uw.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(MG),s=n(PG),u=/^(\d+)(th|st|nd|rd)?/i,d=/\d+/i,o={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},m={any:[/^b/i,/^(a|c)/i]},y={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},w={any:[/1/i,/2/i,/3/i,/4/i]},S={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},A={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},I={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},U={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},j={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},F={ordinalNumber:(0,s.default)({matchPattern:u,parsePattern:d,valueCallback:function(Z){return parseInt(Z,10)}}),era:(0,i.default)({matchPatterns:o,defaultMatchWidth:"wide",parsePatterns:m,defaultParseWidth:"any"}),quarter:(0,i.default)({matchPatterns:y,defaultMatchWidth:"wide",parsePatterns:w,defaultParseWidth:"any",valueCallback:function(Z){return Z+1}}),month:(0,i.default)({matchPatterns:S,defaultMatchWidth:"wide",parsePatterns:A,defaultParseWidth:"any"}),day:(0,i.default)({matchPatterns:I,defaultMatchWidth:"wide",parsePatterns:z,defaultParseWidth:"any"}),dayPeriod:(0,i.default)({matchPatterns:U,defaultMatchWidth:"any",parsePatterns:j,defaultParseWidth:"any"})},H=F;t.default=H,e.exports=t.default})(lw,lw.exports);var AG=lw.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(bG),s=n(TG),u=n(CG),d=n(EG),o=n(AG),m={code:"en-US",formatDistance:i.default,formatLong:s.default,formatRelative:u.default,localize:d.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},y=m;t.default=y,e.exports=t.default})(tw,tw.exports);var kG=tw.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(kG),s=i.default;t.default=s,e.exports=t.default})(ew,ew.exports);var DG=ew.exports;(function(e,t){var n=zi.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=J;var i=n(nG),s=n(oG),u=n(Ga),d=n(pG),o=n(mG),m=n(cz),y=gg,w=n(Td),S=n(Ko),A=Cd,I=n(DG),z=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,U=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j=/^'([^]*?)'?$/,F=/''/g,H=/[a-zA-Z]/;function J(Y,ce,ee){var de,ue,Ee,ze,xe,qe,Qe,Be,st,it,Pt,Ke,ut,jt,on,En,Dn,Je;(0,S.default)(2,arguments);var yt=String(ce),wt=(0,A.getDefaultOptions)(),Lt=(de=(ue=ee==null?void 0:ee.locale)!==null&&ue!==void 0?ue:wt.locale)!==null&&de!==void 0?de:I.default,Ct=(0,w.default)((Ee=(ze=(xe=(qe=ee==null?void 0:ee.firstWeekContainsDate)!==null&&qe!==void 0?qe:ee==null||(Qe=ee.locale)===null||Qe===void 0||(Be=Qe.options)===null||Be===void 0?void 0:Be.firstWeekContainsDate)!==null&&xe!==void 0?xe:wt.firstWeekContainsDate)!==null&&ze!==void 0?ze:(st=wt.locale)===null||st===void 0||(it=st.options)===null||it===void 0?void 0:it.firstWeekContainsDate)!==null&&Ee!==void 0?Ee:1);if(!(Ct>=1&&Ct<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Yt=(0,w.default)((Pt=(Ke=(ut=(jt=ee==null?void 0:ee.weekStartsOn)!==null&&jt!==void 0?jt:ee==null||(on=ee.locale)===null||on===void 0||(En=on.options)===null||En===void 0?void 0:En.weekStartsOn)!==null&&ut!==void 0?ut:wt.weekStartsOn)!==null&&Ke!==void 0?Ke:(Dn=wt.locale)===null||Dn===void 0||(Je=Dn.options)===null||Je===void 0?void 0:Je.weekStartsOn)!==null&&Pt!==void 0?Pt:0);if(!(Yt>=0&&Yt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Lt.localize)throw new RangeError("locale must contain localize property");if(!Lt.formatLong)throw new RangeError("locale must contain formatLong property");var ln=(0,u.default)(Y);if(!(0,i.default)(ln))throw new RangeError("Invalid time value");var he=(0,m.default)(ln),Me=(0,s.default)(ln,he),Ue={firstWeekContainsDate:Ct,weekStartsOn:Yt,locale:Lt,_originalDate:ln},lt=yt.match(U).map(function(gt){var Ne=gt[0];if(Ne==="p"||Ne==="P"){var ht=o.default[Ne];return ht(gt,Lt.formatLong)}return gt}).join("").match(z).map(function(gt){if(gt==="''")return"'";var Ne=gt[0];if(Ne==="'")return Z(gt);var ht=d.default[Ne];if(ht)return!(ee!=null&&ee.useAdditionalWeekYearTokens)&&(0,y.isProtectedWeekYearToken)(gt)&&(0,y.throwProtectedError)(gt,ce,String(Y)),!(ee!=null&&ee.useAdditionalDayOfYearTokens)&&(0,y.isProtectedDayOfYearToken)(gt)&&(0,y.throwProtectedError)(gt,ce,String(Y)),ht(Me,gt,Lt.localize,Ue);if(Ne.match(H))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ne+"`");return gt}).join("");return lt}function Z(Y){var ce=Y.match(j);return ce?ce[1].replace(F,"'"):Y}e.exports=t.default})(I1,I1.exports);var IG=I1.exports;const zG=mg(IG);function oP(e,t,n){var i=LG(e,n.timeZone,n.locale);return i.formatToParts?RG(i,t):OG(i,t)}function RG(e,t){for(var n=e.formatToParts(t),i=n.length-1;i>=0;--i)if(n[i].type==="timeZoneName")return n[i].value}function OG(e,t){var n=e.format(t).replace(/\u200E/g,""),i=/ [\w-+ ]+$/.exec(n);return i?i[0].substr(1):""}function LG(e,t,n){if(n&&!n.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function BG(e,t){var n=UG(t);return n.formatToParts?$G(n,e):NG(n,e)}var FG={year:0,month:1,day:2,hour:3,minute:4,second:5};function $G(e,t){try{for(var n=e.formatToParts(t),i=[],s=0;s<n.length;s++){var u=FG[n[s].type];u>=0&&(i[u]=parseInt(n[s].value,10))}return i}catch(d){if(d instanceof RangeError)return[NaN];throw d}}function NG(e,t){var n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[i[3],i[1],i[2],i[4],i[5],i[6]]}var _b={};function UG(e){if(!_b[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";_b[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return _b[e]}function uz(e,t,n,i,s,u,d){var o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(i,s,u,d),o}var sP=36e5,VG=6e4,yb={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function NT(e,t,n){var i,s;if(!e||(i=yb.timezoneZ.exec(e),i))return 0;var u;if(i=yb.timezoneHH.exec(e),i)return u=parseInt(i[1],10),aP(u)?-(u*sP):NaN;if(i=yb.timezoneHHMM.exec(e),i){u=parseInt(i[1],10);var d=parseInt(i[2],10);return aP(u,d)?(s=Math.abs(u)*sP+d*VG,u>0?-s:s):NaN}if(HG(e)){t=new Date(t||Date.now());var o=n?t:jG(t),m=dw(o,e),y=n?m:WG(t,m,e);return-y}return NaN}function jG(e){return uz(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function dw(e,t){var n=BG(e,t),i=uz(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),u=s%1e3;return s-=u>=0?u:1e3+u,i-s}function WG(e,t,n){var i=e.getTime(),s=i-t,u=dw(new Date(s),n);if(t===u)return t;s-=u-t;var d=dw(new Date(s),n);return u===d?u:Math.max(u,d)}function aP(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var lP={};function HG(e){if(lP[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),lP[e]=!0,!0}catch{return!1}}var GG=60*1e3,qG={X:function(e,t,n,i){var s=xb(i.timeZone,i._originalDate||e);if(s===0)return"Z";switch(t){case"X":return cP(s);case"XXXX":case"XX":return $h(s);case"XXXXX":case"XXX":default:return $h(s,":")}},x:function(e,t,n,i){var s=xb(i.timeZone,i._originalDate||e);switch(t){case"x":return cP(s);case"xxxx":case"xx":return $h(s);case"xxxxx":case"xxx":default:return $h(s,":")}},O:function(e,t,n,i){var s=xb(i.timeZone,i._originalDate||e);switch(t){case"O":case"OO":case"OOO":return"GMT"+ZG(s,":");case"OOOO":default:return"GMT"+$h(s,":")}},z:function(e,t,n,i){var s=i._originalDate||e;switch(t){case"z":case"zz":case"zzz":return oP("short",s,i);case"zzzz":default:return oP("long",s,i)}}};function xb(e,t){var n=e?NT(e,t,!0)/GG:t.getTimezoneOffset();if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function ky(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}function $h(e,t){var n=t||"",i=e>0?"-":"+",s=Math.abs(e),u=ky(Math.floor(s/60),2),d=ky(Math.floor(s%60),2);return i+u+n+d}function cP(e,t){if(e%60===0){var n=e>0?"-":"+";return n+ky(Math.abs(e)/60,2)}return $h(e,t)}function ZG(e,t){var n=e>0?"-":"+",i=Math.abs(e),s=Math.floor(i/60),u=i%60;if(u===0)return n+String(s);var d=t||"";return n+String(s)+d+ky(u,2)}const YG=qG;var XG=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,bb=36e5,uP=6e4,KG=2,Go={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:XG};function dz(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},i=n.additionalDigits==null?KG:rG(n.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=JG(e),u=QG(s.date,i),d=u.year,o=u.restDateString,m=eq(o,d);if(isNaN(m))return new Date(NaN);if(m){var y=m.getTime(),w=0,S;if(s.time&&(w=tq(s.time),isNaN(w)))return new Date(NaN);if(s.timeZone||n.timeZone){if(S=NT(s.timeZone||n.timeZone,new Date(y+w)),isNaN(S))return new Date(NaN)}else S=iP(new Date(y+w)),S=iP(new Date(y+w+S));return new Date(y+w+S)}else return new Date(NaN)}function JG(e){var t={},n=Go.dateTimePattern.exec(e),i;if(n?(t.date=n[1],i=n[3]):(n=Go.datePattern.exec(e),n?(t.date=n[1],i=n[2]):(t.date=null,i=e)),i){var s=Go.timeZone.exec(i);s?(t.time=i.replace(s[1],""),t.timeZone=s[1].trim()):t.time=i}return t}function QG(e,t){var n=Go.YYY[t],i=Go.YYYYY[t],s;if(s=Go.YYYY.exec(e)||i.exec(e),s){var u=s[1];return{year:parseInt(u,10),restDateString:e.slice(u.length)}}if(s=Go.YY.exec(e)||n.exec(e),s){var d=s[1];return{year:parseInt(d,10)*100,restDateString:e.slice(d.length)}}return{year:null}}function eq(e,t){if(t===null)return null;var n,i,s,u;if(e.length===0)return i=new Date(0),i.setUTCFullYear(t),i;if(n=Go.MM.exec(e),n)return i=new Date(0),s=parseInt(n[1],10)-1,hP(t,s)?(i.setUTCFullYear(t,s),i):new Date(NaN);if(n=Go.DDD.exec(e),n){i=new Date(0);var d=parseInt(n[1],10);return iq(t,d)?(i.setUTCFullYear(t,0,d),i):new Date(NaN)}if(n=Go.MMDD.exec(e),n){i=new Date(0),s=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return hP(t,s,o)?(i.setUTCFullYear(t,s,o),i):new Date(NaN)}if(n=Go.Www.exec(e),n)return u=parseInt(n[1],10)-1,fP(t,u)?dP(t,u):new Date(NaN);if(n=Go.WwwD.exec(e),n){u=parseInt(n[1],10)-1;var m=parseInt(n[2],10)-1;return fP(t,u,m)?dP(t,u,m):new Date(NaN)}return null}function tq(e){var t,n,i;if(t=Go.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),wb(n)?n%24*bb:NaN;if(t=Go.HHMM.exec(e),t)return n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),wb(n,i)?n%24*bb+i*uP:NaN;if(t=Go.HHMMSS.exec(e),t){n=parseInt(t[1],10),i=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return wb(n,i,s)?n%24*bb+i*uP+s*1e3:NaN}return null}function dP(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var s=i.getUTCDay()||7,u=t*7+n+1-s;return i.setUTCDate(i.getUTCDate()+u),i}var nq=[31,28,31,30,31,30,31,31,30,31,30,31],rq=[31,29,31,30,31,30,31,31,30,31,30,31];function hz(e){return e%400===0||e%4===0&&e%100!==0}function hP(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var i=hz(e);if(i&&n>rq[t]||!i&&n>nq[t])return!1}return!0}function iq(e,t){if(t<1)return!1;var n=hz(e);return!(n&&t>366||!n&&t>365)}function fP(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function wb(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}var oq=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function sq(e,t,n){var i=String(t),s=n||{},u=i.match(oq);if(u){var d=dz(e,s);i=u.reduce(function(o,m){if(m[0]==="'")return o;var y=o.indexOf(m),w=o[y-1]==="'",S=o.replace(m,"'"+YG[m[0]](d,m,null,s)+"'");return w?S.substring(0,y-1)+S.substring(y+1):S},i)}return zG(e,i,s)}function aq(e,t,n){var i=dz(e,n),s=NT(t,i,!0),u=new Date(i.getTime()-s),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}function lq(e,t,n,i){var s=eG(i);return s.timeZone=t,sq(aq(e,t),n,s)}const am={amHours:["00","01","02","03","04","05","06","07","08","09","10","11"],pmHours:["12","01","02","03","04","05","06","07","08","09","10","11"],hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],seconds:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],period:["AM","PM"]};function Tb(e){return`00${e}`.slice(-2)}function lm(e,t,n){return Array.isArray(t)?(n==="am"?t.filter(i=>i<12):n==="pm"?t.filter(i=>i>=12).map(i=>i===12?12:i-12):t).map(i=>Tb(i)):typeof t=="number"?n==="am"?e.filter(i=>{const s=Number(i);return s<12&&s%t===0}):n==="pm"?e.filter(i=>{const s=Number(i);return s>=12&&s%t===0}).map(i=>{const s=Number(i);return Tb(s===12?12:s-12)}):e.filter(i=>Number(i)%t===0):n==="am"?e.filter(i=>Number(i)<12):n==="pm"?e.map(i=>Number(i)).filter(i=>Number(i)>=12).map(i=>Tb(i===12?12:i-12)):e}function w_(e,t,n){return n?typeof n=="number"?e%n===0:n.includes(e):!0}function cq(e,t,n){const i=lm(am[t],n).map(Number);let s,u;for(let d=0;d<i.length;++d){const o=i[d];if(o===e)return o;if(o>e){u=o;break}s=o}return s===void 0?(u||Qy("time-picker","Please set 'hours' or 'minutes' or 'seconds' props"),u):u===void 0||u-e>e-s?s:u}function uq(e){return xc(e)<12?"am":"pm"}const fz="n-time-picker",T_=pn({name:"TimePickerPanelCol",props:{clsPrefix:{type:String,required:!0},data:{type:Array,required:!0},activeValue:{type:Number,default:null},onItemClick:Function},render(){const{activeValue:e,onItemClick:t,clsPrefix:n}=this;return this.data.map(i=>{const{label:s,disabled:u,value:d}=i,o=e===d;return V("div",{key:s,"data-active":o?"":null,class:[`${n}-time-picker-col__item`,o&&`${n}-time-picker-col__item--active`,u&&`${n}-time-picker-col__item--disabled`],onClick:t&&!u?()=>t(d):void 0},s)})}}),dq={actions:{type:Array,default:()=>["now","confirm"]},showHour:{type:Boolean,default:!0},showMinute:{type:Boolean,default:!0},showSecond:{type:Boolean,default:!0},showPeriod:{type:Boolean,default:!0},isHourInvalid:Boolean,isMinuteInvalid:Boolean,isSecondInvalid:Boolean,isAmPmInvalid:Boolean,isValueInvalid:Boolean,hourValue:{type:Number,default:null},minuteValue:{type:Number,default:null},secondValue:{type:Number,default:null},amPmValue:{type:String,default:null},isHourDisabled:Function,isMinuteDisabled:Function,isSecondDisabled:Function,onHourClick:{type:Function,required:!0},onMinuteClick:{type:Function,required:!0},onSecondClick:{type:Function,required:!0},onAmPmClick:{type:Function,required:!0},onNowClick:Function,nowText:String,confirmText:String,transitionDisabled:Boolean,onConfirmClick:Function,onFocusin:Function,onFocusout:Function,onFocusDetectorFocus:Function,onKeydown:Function,hours:[Number,Array],minutes:[Number,Array],seconds:[Number,Array],use12Hours:Boolean},hq=pn({name:"TimePickerPanel",props:dq,setup(e){const{mergedThemeRef:t,mergedClsPrefixRef:n}=fr(fz),i=Le(()=>{const{isHourDisabled:o,hours:m,use12Hours:y,amPmValue:w}=e;if(y){const S=w??uq(Date.now());return lm(am.hours,m,S).map(A=>{const I=Number(A),z=S==="pm"&&I!==12?I+12:I;return{label:A,value:z,disabled:o?o(z):!1}})}else return lm(am.hours,m).map(S=>({label:S,value:Number(S),disabled:o?o(Number(S)):!1}))}),s=Le(()=>{const{isMinuteDisabled:o,minutes:m}=e;return lm(am.minutes,m).map(y=>({label:y,value:Number(y),disabled:o?o(Number(y),e.hourValue):!1}))}),u=Le(()=>{const{isSecondDisabled:o,seconds:m}=e;return lm(am.seconds,m).map(y=>({label:y,value:Number(y),disabled:o?o(Number(y),e.minuteValue,e.hourValue):!1}))}),d=Le(()=>{const{isHourDisabled:o}=e;let m=!0,y=!0;for(let w=0;w<12;++w)if(!(o!=null&&o(w))){m=!1;break}for(let w=12;w<24;++w)if(!(o!=null&&o(w))){y=!1;break}return[{label:"AM",value:"am",disabled:m},{label:"PM",value:"pm",disabled:y}]});return{mergedTheme:t,mergedClsPrefix:n,hours:i,minutes:s,seconds:u,amPm:d,hourScrollRef:He(null),minuteScrollRef:He(null),secondScrollRef:He(null),amPmScrollRef:He(null)}},render(){var e,t,n;const{mergedClsPrefix:i,mergedTheme:s}=this;return V("div",{tabindex:0,class:`${i}-time-picker-panel`,onFocusin:this.onFocusin,onFocusout:this.onFocusout,onKeydown:this.onKeydown},V("div",{class:`${i}-time-picker-cols`},this.showHour?V("div",{class:[`${i}-time-picker-col`,this.isHourInvalid&&`${i}-time-picker-col--invalid`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`]},V(xs,{ref:"hourScrollRef",theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar},{default:()=>[V(T_,{clsPrefix:i,data:this.hours,activeValue:this.hourValue,onItemClick:this.onHourClick}),V("div",{class:`${i}-time-picker-col__padding`})]})):null,this.showMinute?V("div",{class:[`${i}-time-picker-col`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`,this.isMinuteInvalid&&`${i}-time-picker-col--invalid`]},V(xs,{ref:"minuteScrollRef",theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar},{default:()=>[V(T_,{clsPrefix:i,data:this.minutes,activeValue:this.minuteValue,onItemClick:this.onMinuteClick}),V("div",{class:`${i}-time-picker-col__padding`})]})):null,this.showSecond?V("div",{class:[`${i}-time-picker-col`,this.isSecondInvalid&&`${i}-time-picker-col--invalid`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`]},V(xs,{ref:"secondScrollRef",theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar},{default:()=>[V(T_,{clsPrefix:i,data:this.seconds,activeValue:this.secondValue,onItemClick:this.onSecondClick}),V("div",{class:`${i}-time-picker-col__padding`})]})):null,this.use12Hours?V("div",{class:[`${i}-time-picker-col`,this.isAmPmInvalid&&`${i}-time-picker-col--invalid`,this.transitionDisabled&&`${i}-time-picker-col--transition-disabled`]},V(xs,{ref:"amPmScrollRef",theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar},{default:()=>[V(T_,{clsPrefix:i,data:this.amPm,activeValue:this.amPmValue,onItemClick:this.onAmPmClick}),V("div",{class:`${i}-time-picker-col__padding`})]})):null),!((e=this.actions)===null||e===void 0)&&e.length?V("div",{class:`${i}-time-picker-actions`},!((t=this.actions)===null||t===void 0)&&t.includes("now")?V(yo,{size:"tiny",theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:this.onNowClick},{default:()=>this.nowText}):null,!((n=this.actions)===null||n===void 0)&&n.includes("confirm")?V(yo,{size:"tiny",type:"primary",class:`${i}-time-picker-actions__confirm`,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,disabled:this.isValueInvalid,onClick:this.onConfirmClick},{default:()=>this.confirmText}):null):null,V($c,{onFocus:this.onFocusDetectorFocus}))}}),fq=Ze([It("time-picker",`
 z-index: auto;
 position: relative;
 `,[It("time-picker-icon",`
 color: var(--n-icon-color-override);
 transition: color .3s var(--n-bezier);
 `),Nt("disabled",[It("time-picker-icon",`
 color: var(--n-icon-color-disabled-override);
 `)])]),It("time-picker-panel",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 outline: none;
 font-size: var(--n-item-font-size);
 border-radius: var(--n-border-radius);
 margin: 4px 0;
 min-width: 104px;
 overflow: hidden;
 background-color: var(--n-panel-color);
 box-shadow: var(--n-panel-box-shadow);
 `,[af(),It("time-picker-actions",`
 padding: var(--n-panel-action-padding);
 align-items: center;
 display: flex;
 justify-content: space-evenly;
 `),It("time-picker-cols",`
 height: calc(var(--n-item-height) * 6);
 display: flex;
 position: relative;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-panel-divider-color);
 `),It("time-picker-col",`
 flex-grow: 1;
 min-width: var(--n-item-width);
 height: calc(var(--n-item-height) * 6);
 flex-direction: column;
 transition: box-shadow .3s var(--n-bezier);
 `,[Nt("transition-disabled",[xt("item","transition: none;",[Ze("&::before","transition: none;")])]),xt("padding",`
 height: calc(var(--n-item-height) * 5);
 `),Ze("&:first-child","min-width: calc(var(--n-item-width) + 4px);",[xt("item",[Ze("&::before","left: 4px;")])]),xt("item",`
 cursor: pointer;
 height: var(--n-item-height);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier);
 background: #0000;
 text-decoration-color: #0000;
 color: var(--n-item-text-color);
 z-index: 0;
 box-sizing: border-box;
 padding-top: 4px;
 position: relative;
 `,[Ze("&::before",`
 content: "";
 transition: background-color .3s var(--n-bezier);
 z-index: -1;
 position: absolute;
 left: 0;
 right: 4px;
 top: 4px;
 bottom: 0;
 border-radius: var(--n-item-border-radius);
 `),ai("disabled",[Ze("&:hover::before",`
 background-color: var(--n-item-color-hover);
 `)]),Nt("active",`
 color: var(--n-item-text-color-active);
 `,[Ze("&::before",`
 background-color: var(--n-item-color-hover);
 `)]),Nt("disabled",`
 opacity: var(--n-item-opacity-disabled);
 cursor: not-allowed;
 `)]),Nt("invalid",[xt("item",[Nt("active",`
 text-decoration: line-through;
 text-decoration-color: var(--n-item-text-color-active);
 `)])])])])]);function Cb(e,t){return e===void 0?!0:Array.isArray(e)?e.every(n=>n>=0&&n<=t):e>=0&&e<=t}const pq=Object.assign(Object.assign({},ur.props),{to:Xo.propTo,bordered:{type:Boolean,default:void 0},actions:Array,defaultValue:{type:Number,default:null},defaultFormattedValue:String,placeholder:String,placement:{type:String,default:"bottom-start"},value:Number,format:{type:String,default:"HH:mm:ss"},valueFormat:String,formattedValue:String,isHourDisabled:Function,size:String,isMinuteDisabled:Function,isSecondDisabled:Function,inputReadonly:Boolean,clearable:Boolean,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onUpdateFormattedValue:[Function,Array],"onUpdate:formattedValue":[Function,Array],onBlur:[Function,Array],onConfirm:[Function,Array],onClear:Function,onFocus:[Function,Array],timeZone:String,showIcon:{type:Boolean,default:!0},disabled:{type:Boolean,default:void 0},show:{type:Boolean,default:void 0},hours:{type:[Number,Array],validator:e=>Cb(e,23)},minutes:{type:[Number,Array],validator:e=>Cb(e,59)},seconds:{type:[Number,Array],validator:e=>Cb(e,59)},use12Hours:Boolean,stateful:{type:Boolean,default:!0},onChange:[Function,Array]}),hw=pn({name:"TimePicker",props:pq,setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:n,namespaceRef:i,inlineThemeDisabled:s}=Ki(e),{localeRef:u,dateLocaleRef:d}=fg("TimePicker"),o=dg(e),{mergedSizeRef:m,mergedDisabledRef:y,mergedStatusRef:w}=o,S=ur("TimePicker","-time-picker",fq,tz,e,n),A=ED(),I=He(null),z=He(null),U=Le(()=>({locale:d.value.locale}));function j(et){return et===null?null:ds(et,e.valueFormat||e.format,new Date,U.value).getTime()}const{defaultValue:F,defaultFormattedValue:H}=e,J=He(H!==void 0?j(H):F),Z=Le(()=>{const{formattedValue:et}=e;if(et!==void 0)return j(et);const{value:Gt}=e;return Gt!==void 0?Gt:J.value}),Y=Le(()=>{const{timeZone:et}=e;return et?(Gt,sn,On)=>lq(Gt,et,sn,On):(Gt,sn,On)=>mi(Gt,sn,On)}),ce=He("");xr(()=>e.timeZone,()=>{const et=Z.value;ce.value=et===null?"":Y.value(et,e.format,U.value)},{immediate:!0});const ee=He(!1),de=nr(e,"show"),ue=ad(de,ee),Ee=He(Z.value),ze=He(!1),xe=Le(()=>u.value.now),qe=Le(()=>e.placeholder!==void 0?e.placeholder:u.value.placeholder),Qe=Le(()=>u.value.negativeText),Be=Le(()=>u.value.positiveText),st=Le(()=>/H|h|K|k/.test(e.format)),it=Le(()=>e.format.includes("m")),Pt=Le(()=>e.format.includes("s")),Ke=Le(()=>{const{isHourDisabled:et}=e;return Je.value===null?!1:w_(Je.value,"hours",e.hours)?et?et(Je.value):!1:!0}),ut=Le(()=>{const{value:et}=yt,{value:Gt}=Je;if(et===null||Gt===null)return!1;if(!w_(et,"minutes",e.minutes))return!0;const{isMinuteDisabled:sn}=e;return sn?sn(et,Gt):!1}),jt=Le(()=>{const{value:et}=yt,{value:Gt}=Je,{value:sn}=wt;if(sn===null||et===null||Gt===null)return!1;if(!w_(sn,"seconds",e.seconds))return!0;const{isSecondDisabled:On}=e;return On?On(sn,et,Gt):!1}),on=Le(()=>Ke.value||ut.value||jt.value),En=Le(()=>e.format.length+4),Dn=Le(()=>{const{value:et}=Z;return et===null?null:xc(et)<12?"am":"pm"}),Je=Le(()=>{const{value:et}=Z;return et===null?null:Number(Y.value(et,"HH",U.value))}),yt=Le(()=>{const{value:et}=Z;return et===null?null:Number(Y.value(et,"mm",U.value))}),wt=Le(()=>{const{value:et}=Z;return et===null?null:Number(Y.value(et,"ss",U.value))});function Lt(et,Gt){const{onUpdateFormattedValue:sn,"onUpdate:formattedValue":On}=e;sn&&Un(sn,et,Gt),On&&Un(On,et,Gt)}function Ct(et){return et===null?null:Y.value(et,e.valueFormat||e.format)}function Yt(et){const{onUpdateValue:Gt,"onUpdate:value":sn,onChange:On}=e,{nTriggerFormChange:xi,nTriggerFormInput:ri}=o,oe=Ct(et);Gt&&Un(Gt,et,oe),sn&&Un(sn,et,oe),On&&Un(On,et,oe),Lt(oe,et),J.value=et,xi(),ri()}function ln(et){const{onFocus:Gt}=e,{nTriggerFormFocus:sn}=o;Gt&&Un(Gt,et),sn()}function he(et){const{onBlur:Gt}=e,{nTriggerFormBlur:sn}=o;Gt&&Un(Gt,et),sn()}function Me(){const{onConfirm:et}=e;et&&Un(et,Z.value,Ct(Z.value))}function Ue(et){var Gt;et.stopPropagation(),Yt(null),Jt(null),(Gt=e.onClear)===null||Gt===void 0||Gt.call(e)}function lt(){dr({returnFocus:!0})}function gt(et){et.key==="Escape"&&ue.value&&jm(et)}function Ne(et){var Gt;switch(et.key){case"Escape":ue.value&&(jm(et),dr({returnFocus:!0}));break;case"Tab":A.shift&&et.target===((Gt=z.value)===null||Gt===void 0?void 0:Gt.$el)&&(et.preventDefault(),dr({returnFocus:!0}));break}}function ht(){ze.value=!0,Yi(()=>{ze.value=!1})}function At(et){y.value||Qh(et,"clear")||ue.value||li()}function Et(et){typeof et!="string"&&(Z.value===null?Yt(fn(Ou(yH(new Date),et))):Yt(fn(Ou(Z.value,et))))}function Oe(et){typeof et!="string"&&(Z.value===null?Yt(fn(cb(J8(new Date),et))):Yt(fn(cb(Z.value,et))))}function vt(et){typeof et!="string"&&(Z.value===null?Yt(fn(ub(DT(new Date),et))):Yt(fn(ub(Z.value,et))))}function Wt(et){const{value:Gt}=Z;if(Gt===null){const sn=new Date,On=xc(sn);et==="pm"&&On<12?Yt(fn(Ou(sn,On+12))):et==="am"&&On>=12&&Yt(fn(Ou(sn,On-12))),Yt(fn(sn))}else{const sn=xc(Gt);et==="pm"&&sn<12?Yt(fn(Ou(Gt,sn+12))):et==="am"&&sn>=12&&Yt(fn(Ou(Gt,sn-12)))}}function Jt(et){et===void 0&&(et=Z.value),et===null?ce.value="":ce.value=Y.value(et,e.format,U.value)}function wn(et){sr(et)||ln(et)}function Cn(et){var Gt;if(!sr(et))if(ue.value){const sn=(Gt=z.value)===null||Gt===void 0?void 0:Gt.$el;sn!=null&&sn.contains(et.relatedTarget)||(Jt(),he(et),dr({returnFocus:!1}))}else Jt(),he(et)}function Fn(){y.value||ue.value||li()}function $n(){y.value||(Jt(),dr({returnFocus:!1}))}function Zn(){if(!z.value)return;const{hourScrollRef:et,minuteScrollRef:Gt,secondScrollRef:sn,amPmScrollRef:On}=z.value;[et,Gt,sn,On].forEach(xi=>{var ri;if(!xi)return;const oe=(ri=xi.contentRef)===null||ri===void 0?void 0:ri.querySelector("[data-active]");oe&&xi.scrollTo({top:oe.offsetTop})})}function pr(et){ee.value=et;const{onUpdateShow:Gt,"onUpdate:show":sn}=e;Gt&&Un(Gt,et),sn&&Un(sn,et)}function sr(et){var Gt,sn,On;return!!(!((sn=(Gt=I.value)===null||Gt===void 0?void 0:Gt.wrapperElRef)===null||sn===void 0)&&sn.contains(et.relatedTarget)||!((On=z.value)===null||On===void 0)&&On.$el.contains(et.relatedTarget))}function li(){Ee.value=Z.value,pr(!0),Yi(Zn)}function br(et){var Gt,sn;ue.value&&!(!((sn=(Gt=I.value)===null||Gt===void 0?void 0:Gt.wrapperElRef)===null||sn===void 0)&&sn.contains(Dc(et)))&&dr({returnFocus:!1})}function dr({returnFocus:et}){var Gt;ue.value&&(pr(!1),et&&((Gt=I.value)===null||Gt===void 0||Gt.focus()))}function rr(et){if(et===""){Yt(null);return}const Gt=ds(et,e.format,new Date,U.value);if(ce.value=et,Ls(Gt)){const{value:sn}=Z;if(sn!==null){const On=Co(sn,{hours:xc(Gt),minutes:Ty(Gt),seconds:Cy(Gt)});Yt(fn(On))}else Yt(fn(Gt))}}function Ae(){Yt(Ee.value),pr(!1)}function mt(){const et=new Date,Gt={hours:xc,minutes:Ty,seconds:Cy},[sn,On,xi]=["hours","minutes","seconds"].map(oe=>!e[oe]||w_(Gt[oe](et),oe,e[oe])?Gt[oe](et):cq(Gt[oe](et),oe,e[oe])),ri=ub(cb(Ou(Z.value?Z.value:fn(et),sn),On),xi);Yt(fn(ri))}function Vt(){Jt(),Me(),dr({returnFocus:!0})}function gn(et){sr(et)||(Jt(),he(et),dr({returnFocus:!1}))}xr(Z,et=>{Jt(et),ht(),Yi(Zn)}),xr(ue,()=>{on.value&&Yt(Ee.value)}),Hi(fz,{mergedThemeRef:S,mergedClsPrefixRef:n});const hn={focus:()=>{var et;(et=I.value)===null||et===void 0||et.focus()},blur:()=>{var et;(et=I.value)===null||et===void 0||et.blur()}},Fe=Le(()=>{const{common:{cubicBezierEaseInOut:et},self:{iconColor:Gt,iconColorDisabled:sn}}=S.value;return{"--n-icon-color-override":Gt,"--n-icon-color-disabled-override":sn,"--n-bezier":et}}),Rt=s?Xi("time-picker-trigger",void 0,Fe,e):void 0,Qt=Le(()=>{const{self:{panelColor:et,itemTextColor:Gt,itemTextColorActive:sn,itemColorHover:On,panelDividerColor:xi,panelBoxShadow:ri,itemOpacityDisabled:oe,borderRadius:L,itemFontSize:G,itemWidth:ne,itemHeight:pe,panelActionPadding:we,itemBorderRadius:Re},common:{cubicBezierEaseInOut:$e}}=S.value;return{"--n-bezier":$e,"--n-border-radius":L,"--n-item-color-hover":On,"--n-item-font-size":G,"--n-item-height":pe,"--n-item-opacity-disabled":oe,"--n-item-text-color":Gt,"--n-item-text-color-active":sn,"--n-item-width":ne,"--n-panel-action-padding":we,"--n-panel-box-shadow":ri,"--n-panel-color":et,"--n-panel-divider-color":xi,"--n-item-border-radius":Re}}),An=s?Xi("time-picker",void 0,Qt,e):void 0;return{focus:hn.focus,blur:hn.blur,mergedStatus:w,mergedBordered:t,mergedClsPrefix:n,namespace:i,uncontrolledValue:J,mergedValue:Z,isMounted:gd(),inputInstRef:I,panelInstRef:z,adjustedTo:Xo(e),mergedShow:ue,localizedNow:xe,localizedPlaceholder:qe,localizedNegativeText:Qe,localizedPositiveText:Be,hourInFormat:st,minuteInFormat:it,secondInFormat:Pt,mergedAttrSize:En,displayTimeString:ce,mergedSize:m,mergedDisabled:y,isValueInvalid:on,isHourInvalid:Ke,isMinuteInvalid:ut,isSecondInvalid:jt,transitionDisabled:ze,hourValue:Je,minuteValue:yt,secondValue:wt,amPmValue:Dn,handleInputKeydown:gt,handleTimeInputFocus:wn,handleTimeInputBlur:Cn,handleNowClick:mt,handleConfirmClick:Vt,handleTimeInputUpdateValue:rr,handleMenuFocusOut:gn,handleCancelClick:Ae,handleClickOutside:br,handleTimeInputActivate:Fn,handleTimeInputDeactivate:$n,handleHourClick:Et,handleMinuteClick:Oe,handleSecondClick:vt,handleAmPmClick:Wt,handleTimeInputClear:Ue,handleFocusDetectorFocus:lt,handleMenuKeydown:Ne,handleTriggerClick:At,mergedTheme:S,triggerCssVars:s?void 0:Fe,triggerThemeClass:Rt==null?void 0:Rt.themeClass,triggerOnRender:Rt==null?void 0:Rt.onRender,cssVars:s?void 0:Qt,themeClass:An==null?void 0:An.themeClass,onRender:An==null?void 0:An.onRender}},render(){const{mergedClsPrefix:e,$slots:t,triggerOnRender:n}=this;return n==null||n(),V("div",{class:[`${e}-time-picker`,this.triggerThemeClass],style:this.triggerCssVars},V(lg,null,{default:()=>[V(cg,null,{default:()=>V(lf,{ref:"inputInstRef",status:this.mergedStatus,value:this.displayTimeString,bordered:this.mergedBordered,passivelyActivated:!0,attrSize:this.mergedAttrSize,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,stateful:this.stateful,size:this.mergedSize,placeholder:this.localizedPlaceholder,clearable:this.clearable,disabled:this.mergedDisabled,textDecoration:this.isValueInvalid?"line-through":void 0,onFocus:this.handleTimeInputFocus,onBlur:this.handleTimeInputBlur,onActivate:this.handleTimeInputActivate,onDeactivate:this.handleTimeInputDeactivate,onUpdateValue:this.handleTimeInputUpdateValue,onClear:this.handleTimeInputClear,internalDeactivateOnEnter:!0,internalForceFocus:this.mergedShow,readonly:this.inputReadonly||this.mergedDisabled,onClick:this.handleTriggerClick,onKeydown:this.handleInputKeydown},this.showIcon?{[this.clearable?"clear-icon-placeholder":"suffix"]:()=>V($s,{clsPrefix:e,class:`${e}-time-picker-icon`},{default:()=>t.icon?t.icon():V(AH,null)})}:null)}),V(ug,{teleportDisabled:this.adjustedTo===Xo.tdkey,show:this.mergedShow,to:this.adjustedTo,containerClass:this.namespace,placement:this.placement},{default:()=>V(Yo,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var i;return this.mergedShow?((i=this.onRender)===null||i===void 0||i.call(this),Wa(V(hq,{ref:"panelInstRef",actions:this.actions,class:this.themeClass,style:this.cssVars,seconds:this.seconds,minutes:this.minutes,hours:this.hours,transitionDisabled:this.transitionDisabled,hourValue:this.hourValue,showHour:this.hourInFormat,isHourInvalid:this.isHourInvalid,isHourDisabled:this.isHourDisabled,minuteValue:this.minuteValue,showMinute:this.minuteInFormat,isMinuteInvalid:this.isMinuteInvalid,isMinuteDisabled:this.isMinuteDisabled,secondValue:this.secondValue,amPmValue:this.amPmValue,showSecond:this.secondInFormat,isSecondInvalid:this.isSecondInvalid,isSecondDisabled:this.isSecondDisabled,isValueInvalid:this.isValueInvalid,nowText:this.localizedNow,confirmText:this.localizedPositiveText,use12Hours:this.use12Hours,onFocusout:this.handleMenuFocusOut,onKeydown:this.handleMenuKeydown,onHourClick:this.handleHourClick,onMinuteClick:this.handleMinuteClick,onSecondClick:this.handleSecondClick,onAmPmClick:this.handleAmPmClick,onNowClick:this.handleNowClick,onConfirmClick:this.handleConfirmClick,onFocusDetectorFocus:this.handleFocusDetectorFocus}),[[ld,this.handleClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),mq="HH:mm:ss",pz={active:Boolean,dateFormat:String,timeFormat:{type:String,value:mq},value:{type:[Array,Number],default:null},shortcuts:Object,defaultTime:[Number,String,Array],onClear:Function,onConfirm:Function,onClose:Function,onTabOut:Function,onUpdateValue:{type:Function,required:!0},themeClass:String,onRender:Function,panel:Boolean};function mz(e){const{dateLocaleRef:t,timePickerSizeRef:n,timePickerPropsRef:i,localeRef:s,mergedClsPrefixRef:u,mergedThemeRef:d}=fr(a0),o=Le(()=>({locale:t.value.locale})),m=He(null),y=ED();function w(){const{onClear:xe}=e;xe&&xe()}function S(){const{onConfirm:xe,value:qe}=e;xe&&xe(qe)}function A(xe,qe){const{onUpdateValue:Qe}=e;Qe(xe,qe)}function I(xe=!1){const{onClose:qe}=e;qe&&qe(xe)}function z(){const{onTabOut:xe}=e;xe&&xe()}function U(){A(null,!0),I(!0),w()}function j(){z()}function F(){(e.active||e.panel)&&Yi(()=>{const{value:xe}=m;if(!xe)return;const qe=xe.querySelectorAll("[data-n-date]");qe.forEach(Qe=>{Qe.classList.add("transition-disabled")}),xe.offsetWidth,qe.forEach(Qe=>{Qe.classList.remove("transition-disabled")})})}function H(xe){xe.key==="Tab"&&xe.target===m.value&&y.shift&&(xe.preventDefault(),z())}function J(xe){const{value:qe}=m;y.tab&&xe.target===qe&&(qe!=null&&qe.contains(xe.relatedTarget))&&z()}let Z=null,Y=!1;function ce(){Z=e.value,Y=!0}function ee(){Y=!1}function de(){Y&&(A(Z,!1),Y=!1)}function ue(xe){return typeof xe=="function"?xe():xe}const Ee=He(!1);function ze(){Ee.value=!Ee.value}return{mergedTheme:d,mergedClsPrefix:u,dateFnsOptions:o,timePickerSize:n,timePickerProps:i,selfRef:m,locale:s,doConfirm:S,doClose:I,doUpdateValue:A,doTabOut:z,handleClearClick:U,handleFocusDetectorFocus:j,disableTransitionOneTick:F,handlePanelKeyDown:H,handlePanelFocus:J,cachePendingValue:ce,clearPendingValue:ee,restorePendingValue:de,getShortcutValue:ue,handleShortcutMouseleave:de,showMonthYearPanel:Ee,handleOpenQuickSelectMonthPanel:ze}}const UT=Object.assign(Object.assign({},pz),{actions:{type:Array,default:()=>["now","clear","confirm"]}});function VT(e,t){const n=mz(e),{isValueInvalidRef:i,isDateDisabledRef:s,isDateInvalidRef:u,isTimeInvalidRef:d,isDateTimeInvalidRef:o,isHourDisabledRef:m,isMinuteDisabledRef:y,isSecondDisabledRef:w,localeRef:S,firstDayOfWeekRef:A,datePickerSlots:I}=fr(a0),z={isValueInvalid:i,isDateDisabled:s,isDateInvalid:u,isTimeInvalid:d,isDateTimeInvalid:o,isHourDisabled:m,isMinuteDisabled:y,isSecondDisabled:w},U=Le(()=>e.dateFormat||S.value.dateFormat),j=He(e.value===null||Array.isArray(e.value)?"":mi(e.value,U.value)),F=He(e.value===null||Array.isArray(e.value)?Date.now():e.value),H=He(null),J=He(null),Z=He(null),Y=He(Date.now()),ce=Le(()=>{var Ne;return E1(F.value,e.value,Y.value,(Ne=A.value)!==null&&Ne!==void 0?Ne:S.value.firstDayOfWeek)}),ee=Le(()=>{const{value:Ne}=e;return M1(F.value,Array.isArray(Ne)?null:Ne,Y.value)}),de=Le(()=>{const{value:Ne}=e;return A1(Array.isArray(Ne)?null:Ne,Y.value)}),ue=Le(()=>{const{value:Ne}=e;return P1(F.value,Array.isArray(Ne)?null:Ne,Y.value)}),Ee=Le(()=>ce.value.slice(0,7).map(Ne=>{const{ts:ht}=Ne;return mi(ht,S.value.dayFormat,n.dateFnsOptions.value)})),ze=Le(()=>mi(F.value,S.value.monthFormat,n.dateFnsOptions.value)),xe=Le(()=>mi(F.value,S.value.yearFormat,n.dateFnsOptions.value));xr(F,(Ne,ht)=>{(t==="date"||t==="datetime")&&(i0(Ne,ht)||n.disableTransitionOneTick())}),xr(Le(()=>e.value),Ne=>{Ne!==null&&!Array.isArray(Ne)?(j.value=mi(Ne,U.value,n.dateFnsOptions.value),F.value=Ne):j.value=""});function qe(Ne){return fn(t==="datetime"?DT(Ne):t==="month"?vl(Ne):t==="year"?MT(Ne):t==="quarter"?Zm(Ne):by(Ne))}function Qe(Ne){const{isDateDisabled:{value:ht}}=z;return ht?ht(Ne):!1}function Be(Ne){const ht=ds(Ne,U.value,new Date,n.dateFnsOptions.value);if(Ls(ht)){if(e.value===null)n.doUpdateValue(fn(qe(Date.now())),e.panel);else if(!Array.isArray(e.value)){const At=Co(e.value,{year:ki(ht),month:fi(ht),date:na(ht)});n.doUpdateValue(fn(qe(fn(At))),e.panel)}}else j.value=Ne}function st(){const Ne=ds(j.value,U.value,new Date,n.dateFnsOptions.value);if(Ls(Ne)){if(e.value===null)n.doUpdateValue(fn(qe(Date.now())),!1);else if(!Array.isArray(e.value)){const ht=Co(e.value,{year:ki(Ne),month:fi(Ne),date:na(Ne)});n.doUpdateValue(fn(qe(fn(ht))),!1)}}else on()}function it(){n.doUpdateValue(null,!0),j.value="",n.doClose(!0),n.handleClearClick()}function Pt(){n.doUpdateValue(fn(qe(Date.now())),!0);const Ne=Date.now();F.value=Ne,n.doClose(!0),e.panel&&(t==="month"||t==="quarter"||t==="year")&&(n.disableTransitionOneTick(),lt(Ne))}function Ke(Ne){if(Qe(Ne.ts))return;let ht;if(e.value!==null&&!Array.isArray(e.value)?ht=e.value:ht=Date.now(),t==="datetime"&&e.defaultTime!==null&&!Array.isArray(e.defaultTime)){const At=W_(e.defaultTime);At&&(ht=fn(Co(ht,At)))}switch(ht=fn(Ne.type==="quarter"&&Ne.dateObject.quarter?xH(HM(ht,Ne.dateObject.year),Ne.dateObject.quarter):Co(ht,Ne.dateObject)),n.doUpdateValue(qe(ht),e.panel||t==="date"||t==="year"),t){case"date":n.doClose();break;case"year":e.panel&&n.disableTransitionOneTick(),n.doClose();break;case"month":n.disableTransitionOneTick(),lt(ht);break;case"quarter":n.disableTransitionOneTick(),lt(ht);break}}function ut(Ne,ht){let At;e.value!==null&&!Array.isArray(e.value)?At=e.value:At=Date.now(),At=fn(Ne.type==="month"?IT(At,Ne.dateObject.month):HM(At,Ne.dateObject.year)),ht(At),lt(At)}function jt(Ne){F.value=Ne}function on(Ne){if(e.value===null||Array.isArray(e.value)){j.value="";return}Ne===void 0&&(Ne=e.value),j.value=mi(Ne,U.value,n.dateFnsOptions.value)}function En(){z.isDateInvalid.value||z.isTimeInvalid.value||(n.doConfirm(),Dn())}function Dn(){e.active&&n.doClose()}function Je(){F.value=fn(b1(F.value,1))}function yt(){F.value=fn(b1(F.value,-1))}function wt(){F.value=fn(To(F.value,1))}function Lt(){F.value=fn(To(F.value,-1))}function Ct(){const{value:Ne}=H;return Ne==null?void 0:Ne.listElRef}function Yt(){const{value:Ne}=H;return Ne==null?void 0:Ne.itemsElRef}function ln(Ne){var ht;(ht=J.value)===null||ht===void 0||ht.sync()}function he(Ne){Ne!==null&&n.doUpdateValue(Ne,e.panel)}function Me(Ne){n.cachePendingValue();const ht=n.getShortcutValue(Ne);typeof ht=="number"&&n.doUpdateValue(ht,!1)}function Ue(Ne){const ht=n.getShortcutValue(Ne);typeof ht=="number"&&(n.doUpdateValue(ht,e.panel),n.clearPendingValue(),En())}function lt(Ne){const{value:ht}=e;if(Z.value){const At=fi(Ne===void 0?ht===null?Date.now():ht:Ne);Z.value.scrollTo({top:At*dd})}if(H.value){const At=ki(Ne===void 0?ht===null?Date.now():ht:Ne)-Ay;H.value.scrollTo({top:At*dd})}}const gt={monthScrollbarRef:Z,yearScrollbarRef:J,yearVlRef:H};return Object.assign(Object.assign(Object.assign(Object.assign({dateArray:ce,monthArray:ee,yearArray:de,quarterArray:ue,calendarYear:xe,calendarMonth:ze,weekdays:Ee,mergedIsDateDisabled:Qe,nextYear:Je,prevYear:yt,nextMonth:wt,prevMonth:Lt,handleNowClick:Pt,handleConfirmClick:En,handleSingleShortcutMouseenter:Me,handleSingleShortcutClick:Ue},z),n),gt),{handleDateClick:Ke,handleDateInputBlur:st,handleDateInput:Be,handleTimePickerChange:he,clearSelectedDateTime:it,virtualListContainer:Ct,virtualListContent:Yt,handleVirtualListScroll:ln,timePickerSize:n.timePickerSize,dateInputValue:j,datePickerSlots:I,handleQuickMonthClick:ut,justifyColumnsScrollState:lt,calendarValue:F,onUpdateCalendarValue:jt})}const gz=pn({name:"MonthPanel",props:Object.assign(Object.assign({},UT),{type:{type:String,required:!0},useAsQuickJump:Boolean}),setup(e){const t=VT(e,e.type),n=u=>{switch(u.type){case"year":return u.dateObject.year;case"month":return u.dateObject.month+1;case"quarter":return`Q${u.dateObject.quarter}`}},{useAsQuickJump:i}=e,s=(u,d,o)=>{const{mergedIsDateDisabled:m,handleDateClick:y,handleQuickMonthClick:w}=t;return V("div",{"data-n-date":!0,key:d,class:[`${o}-date-panel-month-calendar__picker-col-item`,{[`${o}-date-panel-month-calendar__picker-col-item--current`]:u.isCurrent,[`${o}-date-panel-month-calendar__picker-col-item--selected`]:u.selected,[`${o}-date-panel-month-calendar__picker-col-item--disabled`]:!i&&m(u.ts)}],onClick:()=>{i?w(u,S=>e.onUpdateValue(S,!1)):y(u)}},n(u))};return Si(()=>{t.justifyColumnsScrollState()}),Object.assign(Object.assign({},t),{renderItem:s})},render(){const{mergedClsPrefix:e,mergedTheme:t,shortcuts:n,actions:i,renderItem:s,type:u,onRender:d}=this;return d==null||d(),V("div",{ref:"selfRef",tabindex:0,class:[`${e}-date-panel`,`${e}-date-panel--month`,!this.panel&&`${e}-date-panel--shadow`,this.themeClass],onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},V("div",{class:`${e}-date-panel-month-calendar`},V(xs,{ref:"yearScrollbarRef",class:`${e}-date-panel-month-calendar__picker-col`,theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,container:this.virtualListContainer,content:this.virtualListContent,horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>V(my,{ref:"yearVlRef",items:this.yearArray,itemSize:dd,showScrollbar:!1,keyField:"ts",onScroll:this.handleVirtualListScroll,paddingBottom:4},{default:({item:o,index:m})=>s(o,m,e)})}),u==="month"||u==="quarter"?V("div",{class:`${e}-date-panel-month-calendar__picker-col`},V(xs,{ref:"monthScrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar},{default:()=>[(u==="month"?this.monthArray:this.quarterArray).map((o,m)=>s(o,m,e)),V("div",{class:`${e}-date-panel-${u}-calendar__padding`})]})):null),this.datePickerSlots.footer?V("div",{class:`${e}-date-panel-footer`},{default:this.datePickerSlots.footer}):null,i!=null&&i.length||n?V("div",{class:`${e}-date-panel-actions`},V("div",{class:`${e}-date-panel-actions__prefix`},n&&Object.keys(n).map(o=>{const m=n[o];return Array.isArray(m)?null:V(Pc,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(m)},onClick:()=>{this.handleSingleShortcutClick(m)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o})})),V("div",{class:`${e}-date-panel-actions__suffix`},i!=null&&i.includes("clear")?V(yo,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,i!=null&&i.includes("now")?V(yo,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,i!=null&&i.includes("confirm")?V(yo,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,V($c,{onFocus:this.handleFocusDetectorFocus}))}}),cf=pn({props:{mergedClsPrefix:{type:String,required:!0},value:Number,monthBeforeYear:{type:Boolean,required:!0},calendarMonth:{type:String,required:!0},calendarYear:{type:String,required:!0},onUpdateValue:{type:Function,required:!0}},setup(){const e=He(null),t=He(null),n=He(!1);function i(u){var d;n.value&&!(!((d=e.value)===null||d===void 0)&&d.contains(Dc(u)))&&(n.value=!1)}function s(){n.value=!n.value}return{show:n,triggerRef:e,monthPanelRef:t,handleHeaderClick:s,handleClickOutside:i}},render(){const{handleClickOutside:e,mergedClsPrefix:t}=this;return V("div",{class:`${t}-date-panel-month__month-year`,ref:"triggerRef"},V(lg,null,{default:()=>[V(cg,null,{default:()=>V("div",{class:[`${t}-date-panel-month__text`,this.show&&`${t}-date-panel-month__text--active`],onClick:this.handleHeaderClick},this.monthBeforeYear?[this.calendarMonth," ",this.calendarYear]:[this.calendarYear," ",this.calendarMonth])}),V(ug,{show:this.show,teleportDisabled:!0},{default:()=>V(Yo,{name:"fade-in-scale-up-transition",appear:!0},{default:()=>this.show?Wa(V(gz,{ref:"monthPanelRef",onUpdateValue:this.onUpdateValue,actions:[],type:"month",key:"month",useAsQuickJump:!0,value:this.value}),[[ld,e,void 0,{capture:!0}]]):null})})]}))}}),gq=pn({name:"DateTimePanel",props:UT,setup(e){return VT(e,"datetime")},render(){var e,t,n,i;const{mergedClsPrefix:s,mergedTheme:u,shortcuts:d,timePickerProps:o,onRender:m,$slots:y}=this;return m==null||m(),V("div",{ref:"selfRef",tabindex:0,class:[`${s}-date-panel`,`${s}-date-panel--datetime`,!this.panel&&`${s}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},V("div",{class:`${s}-date-panel-header`},V(lf,{value:this.dateInputValue,theme:u.peers.Input,themeOverrides:u.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${s}-date-panel-date-input`,textDecoration:this.isDateInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleDateInputBlur,onUpdateValue:this.handleDateInput}),V(hw,Object.assign({size:this.timePickerSize,placeholder:this.locale.selectTime,format:this.timeFormat},Array.isArray(o)?void 0:o,{showIcon:!1,to:!1,theme:u.peers.TimePicker,themeOverrides:u.peerOverrides.TimePicker,value:Array.isArray(this.value)?null:this.value,isHourDisabled:this.isHourDisabled,isMinuteDisabled:this.isMinuteDisabled,isSecondDisabled:this.isSecondDisabled,onUpdateValue:this.handleTimePickerChange,stateful:!1}))),V("div",{class:`${s}-date-panel-calendar`},V("div",{class:`${s}-date-panel-month`},V("div",{class:`${s}-date-panel-month__fast-prev`,onClick:this.prevYear},kr(y["prev-year"],()=>[V(rf,null)])),V("div",{class:`${s}-date-panel-month__prev`,onClick:this.prevMonth},kr(y["prev-month"],()=>[V(nf,null)])),V(cf,{monthBeforeYear:this.locale.monthBeforeYear,value:this.calendarValue,onUpdateValue:this.onUpdateCalendarValue,mergedClsPrefix:s,calendarMonth:this.calendarMonth,calendarYear:this.calendarYear}),V("div",{class:`${s}-date-panel-month__next`,onClick:this.nextMonth},kr(y["next-month"],()=>[V(sf,null)])),V("div",{class:`${s}-date-panel-month__fast-next`,onClick:this.nextYear},kr(y["next-year"],()=>[V(of,null)]))),V("div",{class:`${s}-date-panel-weekdays`},this.weekdays.map(w=>V("div",{key:w,class:`${s}-date-panel-weekdays__day`},w))),V("div",{class:`${s}-date-panel-dates`},this.dateArray.map((w,S)=>V("div",{"data-n-date":!0,key:S,class:[`${s}-date-panel-date`,{[`${s}-date-panel-date--current`]:w.isCurrentDate,[`${s}-date-panel-date--selected`]:w.selected,[`${s}-date-panel-date--excluded`]:!w.inCurrentMonth,[`${s}-date-panel-date--disabled`]:this.mergedIsDateDisabled(w.ts)}],onClick:()=>this.handleDateClick(w)},V("div",{class:`${s}-date-panel-date__trigger`}),w.dateObject.date,w.isCurrentDate?V("div",{class:`${s}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?V("div",{class:`${s}-date-panel-footer`},this.datePickerSlots.footer()):null,!((e=this.actions)===null||e===void 0)&&e.length||d?V("div",{class:`${s}-date-panel-actions`},V("div",{class:`${s}-date-panel-actions__prefix`},d&&Object.keys(d).map(w=>{const S=d[w];return Array.isArray(S)?null:V(Pc,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(S)},onClick:()=>{this.handleSingleShortcutClick(S)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>w})})),V("div",{class:`${s}-date-panel-actions__suffix`},!((t=this.actions)===null||t===void 0)&&t.includes("clear")?V(yo,{theme:u.peers.Button,themeOverrides:u.peerOverrides.Button,size:"tiny",onClick:this.clearSelectedDateTime},{default:()=>this.locale.clear}):null,!((n=this.actions)===null||n===void 0)&&n.includes("now")?V(yo,{theme:u.peers.Button,themeOverrides:u.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,!((i=this.actions)===null||i===void 0)&&i.includes("confirm")?V(yo,{theme:u.peers.Button,themeOverrides:u.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,V($c,{onFocus:this.handleFocusDetectorFocus}))}}),jT=Object.assign(Object.assign({},pz),{defaultCalendarStartTime:Number,defaultCalendarEndTime:Number,bindCalendarMonths:Boolean,actions:{type:Array,default:()=>["clear","confirm"]}});function WT(e,t){var n,i;const{isDateDisabledRef:s,isStartHourDisabledRef:u,isEndHourDisabledRef:d,isStartMinuteDisabledRef:o,isEndMinuteDisabledRef:m,isStartSecondDisabledRef:y,isEndSecondDisabledRef:w,isStartDateInvalidRef:S,isEndDateInvalidRef:A,isStartTimeInvalidRef:I,isEndTimeInvalidRef:z,isStartValueInvalidRef:U,isEndValueInvalidRef:j,isRangeInvalidRef:F,localeRef:H,rangesRef:J,closeOnSelectRef:Z,updateValueOnCloseRef:Y,firstDayOfWeekRef:ce,datePickerSlots:ee}=fr(a0),de={isDateDisabled:s,isStartHourDisabled:u,isEndHourDisabled:d,isStartMinuteDisabled:o,isEndMinuteDisabled:m,isStartSecondDisabled:y,isEndSecondDisabled:w,isStartDateInvalid:S,isEndDateInvalid:A,isStartTimeInvalid:I,isEndTimeInvalid:z,isStartValueInvalid:U,isEndValueInvalid:j,isRangeInvalid:F},ue=mz(e),Ee=He(null),ze=He(null),xe=He(null),qe=He(null),Qe=He(null),Be=He(null),st=He(null),it=He(null),{value:Pt}=e,Ke=(n=e.defaultCalendarStartTime)!==null&&n!==void 0?n:Array.isArray(Pt)&&typeof Pt[0]=="number"?Pt[0]:Date.now(),ut=He(Ke),jt=He((i=e.defaultCalendarEndTime)!==null&&i!==void 0?i:Array.isArray(Pt)&&typeof Pt[1]=="number"?Pt[1]:fn(To(Ke,1)));Cn(!0);const on=He(Date.now()),En=He(!1),Dn=He(0),Je=Le(()=>e.dateFormat||H.value.dateFormat),yt=He(Array.isArray(Pt)?mi(Pt[0],Je.value,ue.dateFnsOptions.value):""),wt=He(Array.isArray(Pt)?mi(Pt[1],Je.value,ue.dateFnsOptions.value):""),Lt=Le(()=>En.value?"end":"start"),Ct=Le(()=>{var ye;return E1(ut.value,e.value,on.value,(ye=ce.value)!==null&&ye!==void 0?ye:H.value.firstDayOfWeek)}),Yt=Le(()=>{var ye;return E1(jt.value,e.value,on.value,(ye=ce.value)!==null&&ye!==void 0?ye:H.value.firstDayOfWeek)}),ln=Le(()=>Ct.value.slice(0,7).map(ye=>{const{ts:pt}=ye;return mi(pt,H.value.dayFormat,ue.dateFnsOptions.value)})),he=Le(()=>mi(ut.value,H.value.monthFormat,ue.dateFnsOptions.value)),Me=Le(()=>mi(jt.value,H.value.monthFormat,ue.dateFnsOptions.value)),Ue=Le(()=>mi(ut.value,H.value.yearFormat,ue.dateFnsOptions.value)),lt=Le(()=>mi(jt.value,H.value.yearFormat,ue.dateFnsOptions.value)),gt=Le(()=>{const{value:ye}=e;return Array.isArray(ye)?ye[0]:null}),Ne=Le(()=>{const{value:ye}=e;return Array.isArray(ye)?ye[1]:null}),ht=Le(()=>{const{shortcuts:ye}=e;return ye||J.value}),At=Le(()=>A1(Oh(e.value,"start"),on.value)),Et=Le(()=>A1(Oh(e.value,"end"),on.value)),Oe=Le(()=>{const ye=Oh(e.value,"start");return P1(ye??Date.now(),ye,on.value)}),vt=Le(()=>{const ye=Oh(e.value,"end");return P1(ye??Date.now(),ye,on.value)}),Wt=Le(()=>{const ye=Oh(e.value,"start");return M1(ye??Date.now(),ye,on.value)}),Jt=Le(()=>{const ye=Oh(e.value,"end");return M1(ye??Date.now(),ye,on.value)});xr(Le(()=>e.value),ye=>{if(ye!==null&&Array.isArray(ye)){const[pt,kt]=ye;yt.value=mi(pt,Je.value,ue.dateFnsOptions.value),wt.value=mi(kt,Je.value,ue.dateFnsOptions.value),En.value||Vt(ye)}else yt.value="",wt.value=""});function wn(ye,pt){(t==="daterange"||t==="datetimerange")&&(ki(ye)!==ki(pt)||fi(ye)!==fi(pt))&&ue.disableTransitionOneTick()}xr(ut,wn),xr(jt,wn);function Cn(ye){const pt=vl(ut.value),kt=vl(jt.value);(e.bindCalendarMonths||pt>=kt)&&(ye?jt.value=fn(To(pt,1)):ut.value=fn(To(kt,-1)))}function Fn(){ut.value=fn(To(ut.value,12)),Cn(!0)}function $n(){ut.value=fn(To(ut.value,-12)),Cn(!0)}function Zn(){ut.value=fn(To(ut.value,1)),Cn(!0)}function pr(){ut.value=fn(To(ut.value,-1)),Cn(!0)}function sr(){jt.value=fn(To(jt.value,12)),Cn(!1)}function li(){jt.value=fn(To(jt.value,-12)),Cn(!1)}function br(){jt.value=fn(To(jt.value,1)),Cn(!1)}function dr(){jt.value=fn(To(jt.value,-1)),Cn(!1)}function rr(ye){ut.value=ye,Cn(!0)}function Ae(ye){jt.value=ye,Cn(!1)}function mt(ye){const pt=s.value;if(!pt)return!1;if(!Array.isArray(e.value)||Lt.value==="start")return pt(ye,"start",null);{const{value:kt}=Dn;return ye<Dn.value?pt(ye,"start",[kt,kt]):pt(ye,"end",[kt,kt])}}function Vt(ye){if(ye===null)return;const[pt,kt]=ye;ut.value=pt,vl(kt)<=vl(pt)?jt.value=fn(vl(To(pt,1))):jt.value=fn(vl(kt))}function gn(ye){if(!En.value)En.value=!0,Dn.value=ye.ts,et(ye.ts,ye.ts,"done");else{En.value=!1;const{value:pt}=e;e.panel&&Array.isArray(pt)?et(pt[0],pt[1],"done"):Z.value&&t==="daterange"&&(Y.value?Rt():Fe())}}function hn(ye){if(En.value){if(mt(ye.ts))return;ye.ts>=Dn.value?et(Dn.value,ye.ts,"wipPreview"):et(ye.ts,Dn.value,"wipPreview")}}function Fe(){F.value||(ue.doConfirm(),Rt())}function Rt(){En.value=!1,e.active&&ue.doClose()}function Qt(ye){typeof ye!="number"&&(ye=fn(ye)),e.value===null?ue.doUpdateValue([ye,ye],e.panel):Array.isArray(e.value)&&ue.doUpdateValue([ye,Math.max(e.value[1],ye)],e.panel)}function An(ye){typeof ye!="number"&&(ye=fn(ye)),e.value===null?ue.doUpdateValue([ye,ye],e.panel):Array.isArray(e.value)&&ue.doUpdateValue([Math.min(e.value[0],ye),ye],e.panel)}function et(ye,pt,kt){if(typeof ye!="number"&&(ye=fn(ye)),kt!=="shortcutPreview"){let en,yn;if(t==="datetimerange"){const{defaultTime:vn}=e;Array.isArray(vn)?(en=W_(vn[0]),yn=W_(vn[1])):(en=W_(vn),yn=en)}en&&(ye=fn(Co(ye,en))),yn&&(pt=fn(Co(pt,yn)))}ue.doUpdateValue([ye,pt],e.panel&&kt==="done")}function Gt(ye){return fn(t==="datetimerange"?DT(ye):t==="monthrange"?vl(ye):by(ye))}function sn(ye){const pt=ds(ye,Je.value,new Date,ue.dateFnsOptions.value);if(Ls(pt))if(e.value){if(Array.isArray(e.value)){const kt=Co(e.value[0],{year:ki(pt),month:fi(pt),date:na(pt)});Qt(Gt(fn(kt)))}}else{const kt=Co(new Date,{year:ki(pt),month:fi(pt),date:na(pt)});Qt(Gt(fn(kt)))}else yt.value=ye}function On(ye){const pt=ds(ye,Je.value,new Date,ue.dateFnsOptions.value);if(Ls(pt)){if(e.value===null){const kt=Co(new Date,{year:ki(pt),month:fi(pt),date:na(pt)});An(Gt(fn(kt)))}else if(Array.isArray(e.value)){const kt=Co(e.value[1],{year:ki(pt),month:fi(pt),date:na(pt)});An(Gt(fn(kt)))}}else wt.value=ye}function xi(){const ye=ds(yt.value,Je.value,new Date,ue.dateFnsOptions.value),{value:pt}=e;if(Ls(ye)){if(pt===null){const kt=Co(new Date,{year:ki(ye),month:fi(ye),date:na(ye)});Qt(Gt(fn(kt)))}else if(Array.isArray(pt)){const kt=Co(pt[0],{year:ki(ye),month:fi(ye),date:na(ye)});Qt(Gt(fn(kt)))}}else oe()}function ri(){const ye=ds(wt.value,Je.value,new Date,ue.dateFnsOptions.value),{value:pt}=e;if(Ls(ye)){if(pt===null){const kt=Co(new Date,{year:ki(ye),month:fi(ye),date:na(ye)});An(Gt(fn(kt)))}else if(Array.isArray(pt)){const kt=Co(pt[1],{year:ki(ye),month:fi(ye),date:na(ye)});An(Gt(fn(kt)))}}else oe()}function oe(ye){const{value:pt}=e;if(pt===null||!Array.isArray(pt)){yt.value="",wt.value="";return}ye===void 0&&(ye=pt),yt.value=mi(ye[0],Je.value,ue.dateFnsOptions.value),wt.value=mi(ye[1],Je.value,ue.dateFnsOptions.value)}function L(ye){ye!==null&&Qt(ye)}function G(ye){ye!==null&&An(ye)}function ne(ye){ue.cachePendingValue();const pt=ue.getShortcutValue(ye);Array.isArray(pt)&&et(pt[0],pt[1],"shortcutPreview")}function pe(ye){const pt=ue.getShortcutValue(ye);Array.isArray(pt)&&(et(pt[0],pt[1],"done"),ue.clearPendingValue(),Fe())}function we(ye,pt){const kt=ye===void 0?e.value:ye;if(ye===void 0||pt==="start"){if(st.value){const en=Array.isArray(kt)?fi(kt[0]):fi(Date.now());st.value.scrollTo({debounce:!1,index:en,elSize:dd})}if(Qe.value){const en=(Array.isArray(kt)?ki(kt[0]):ki(Date.now()))-Ay;Qe.value.scrollTo({index:en,debounce:!1})}}if(ye===void 0||pt==="end"){if(it.value){const en=Array.isArray(kt)?fi(kt[1]):fi(Date.now());it.value.scrollTo({debounce:!1,index:en,elSize:dd})}if(Be.value){const en=(Array.isArray(kt)?ki(kt[1]):ki(Date.now()))-Ay;Be.value.scrollTo({index:en,debounce:!1})}}}function Re(ye,pt){const{value:kt}=e,en=!Array.isArray(kt),yn=ye.type==="year"&&t!=="yearrange"?en?Co(ye.ts,{month:fi(t==="quarterrange"?Zm(new Date):new Date)}).valueOf():Co(ye.ts,{month:fi(t==="quarterrange"?Zm(kt[pt==="start"?0:1]):kt[pt==="start"?0:1])}).valueOf():ye.ts;if(en){const Sn=Gt(yn),ar=[Sn,Sn];ue.doUpdateValue(ar,e.panel),we(ar,"start"),we(ar,"end"),ue.disableTransitionOneTick();return}const vn=[kt[0],kt[1]];let Yn=!1;switch(pt==="start"?(vn[0]=Gt(yn),vn[0]>vn[1]&&(vn[1]=vn[0],Yn=!0)):(vn[1]=Gt(yn),vn[0]>vn[1]&&(vn[0]=vn[1],Yn=!0)),ue.doUpdateValue(vn,e.panel),t){case"monthrange":case"quarterrange":ue.disableTransitionOneTick(),Yn?(we(vn,"start"),we(vn,"end")):we(vn,pt);break;case"yearrange":ue.disableTransitionOneTick(),we(vn,"start"),we(vn,"end")}}function $e(){var ye;(ye=xe.value)===null||ye===void 0||ye.sync()}function De(){var ye;(ye=qe.value)===null||ye===void 0||ye.sync()}function je(ye){var pt,kt;return ye==="start"?(pt=Qe.value)===null||pt===void 0?void 0:pt.listElRef:(kt=Be.value)===null||kt===void 0?void 0:kt.listElRef}function bt(ye){var pt,kt;return ye==="start"?(pt=Qe.value)===null||pt===void 0?void 0:pt.itemsElRef:(kt=Be.value)===null||kt===void 0?void 0:kt.itemsElRef}const Zt={startYearVlRef:Qe,endYearVlRef:Be,startMonthScrollbarRef:st,endMonthScrollbarRef:it,startYearScrollbarRef:xe,endYearScrollbarRef:qe};return Object.assign(Object.assign(Object.assign(Object.assign({startDatesElRef:Ee,endDatesElRef:ze,handleDateClick:gn,handleColItemClick:Re,handleDateMouseEnter:hn,handleConfirmClick:Fe,startCalendarPrevYear:$n,startCalendarPrevMonth:pr,startCalendarNextYear:Fn,startCalendarNextMonth:Zn,endCalendarPrevYear:li,endCalendarPrevMonth:dr,endCalendarNextMonth:br,endCalendarNextYear:sr,mergedIsDateDisabled:mt,changeStartEndTime:et,ranges:J,startCalendarMonth:he,startCalendarYear:Ue,endCalendarMonth:Me,endCalendarYear:lt,weekdays:ln,startDateArray:Ct,endDateArray:Yt,startYearArray:At,startMonthArray:Wt,startQuarterArray:Oe,endYearArray:Et,endMonthArray:Jt,endQuarterArray:vt,isSelecting:En,handleRangeShortcutMouseenter:ne,handleRangeShortcutClick:pe},ue),de),Zt),{startDateDisplayString:yt,endDateInput:wt,timePickerSize:ue.timePickerSize,startTimeValue:gt,endTimeValue:Ne,datePickerSlots:ee,shortcuts:ht,startCalendarDateTime:ut,endCalendarDateTime:jt,justifyColumnsScrollState:we,handleFocusDetectorFocus:ue.handleFocusDetectorFocus,handleStartTimePickerChange:L,handleEndTimePickerChange:G,handleStartDateInput:sn,handleStartDateInputBlur:xi,handleEndDateInput:On,handleEndDateInputBlur:ri,handleStartYearVlScroll:$e,handleEndYearVlScroll:De,virtualListContainer:je,virtualListContent:bt,onUpdateStartCalendarValue:rr,onUpdateEndCalendarValue:Ae})}const vq=pn({name:"DateTimeRangePanel",props:jT,setup(e){return WT(e,"datetimerange")},render(){var e,t,n;const{mergedClsPrefix:i,mergedTheme:s,shortcuts:u,timePickerProps:d,onRender:o,$slots:m}=this;return o==null||o(),V("div",{ref:"selfRef",tabindex:0,class:[`${i}-date-panel`,`${i}-date-panel--datetimerange`,!this.panel&&`${i}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},V("div",{class:`${i}-date-panel-header`},V(lf,{value:this.startDateDisplayString,theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,size:this.timePickerSize,stateful:!1,class:`${i}-date-panel-date-input`,textDecoration:this.isStartValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleStartDateInputBlur,onUpdateValue:this.handleStartDateInput}),V(hw,Object.assign({placeholder:this.locale.selectTime,format:this.timeFormat,size:this.timePickerSize},Array.isArray(d)?d[0]:d,{value:this.startTimeValue,to:!1,showIcon:!1,disabled:this.isSelecting,theme:s.peers.TimePicker,themeOverrides:s.peerOverrides.TimePicker,stateful:!1,isHourDisabled:this.isStartHourDisabled,isMinuteDisabled:this.isStartMinuteDisabled,isSecondDisabled:this.isStartSecondDisabled,onUpdateValue:this.handleStartTimePickerChange})),V(lf,{value:this.endDateInput,theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${i}-date-panel-date-input`,textDecoration:this.isEndValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleEndDateInputBlur,onUpdateValue:this.handleEndDateInput}),V(hw,Object.assign({placeholder:this.locale.selectTime,format:this.timeFormat,size:this.timePickerSize},Array.isArray(d)?d[1]:d,{disabled:this.isSelecting,showIcon:!1,theme:s.peers.TimePicker,themeOverrides:s.peerOverrides.TimePicker,to:!1,stateful:!1,value:this.endTimeValue,isHourDisabled:this.isEndHourDisabled,isMinuteDisabled:this.isEndMinuteDisabled,isSecondDisabled:this.isEndSecondDisabled,onUpdateValue:this.handleEndTimePickerChange}))),V("div",{ref:"startDatesElRef",class:`${i}-date-panel-calendar ${i}-date-panel-calendar--start`},V("div",{class:`${i}-date-panel-month`},V("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},kr(m["prev-year"],()=>[V(rf,null)])),V("div",{class:`${i}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},kr(m["prev-month"],()=>[V(nf,null)])),V(cf,{monthBeforeYear:this.locale.monthBeforeYear,value:this.startCalendarDateTime,onUpdateValue:this.onUpdateStartCalendarValue,mergedClsPrefix:i,calendarMonth:this.startCalendarMonth,calendarYear:this.startCalendarYear}),V("div",{class:`${i}-date-panel-month__next`,onClick:this.startCalendarNextMonth},kr(m["next-month"],()=>[V(sf,null)])),V("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},kr(m["next-year"],()=>[V(of,null)]))),V("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(y=>V("div",{key:y,class:`${i}-date-panel-weekdays__day`},y))),V("div",{class:`${i}-date-panel__divider`}),V("div",{class:`${i}-date-panel-dates`},this.startDateArray.map((y,w)=>{const S=this.mergedIsDateDisabled(y.ts);return V("div",{"data-n-date":!0,key:w,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--excluded`]:!y.inCurrentMonth,[`${i}-date-panel-date--current`]:y.isCurrentDate,[`${i}-date-panel-date--selected`]:y.selected,[`${i}-date-panel-date--covered`]:y.inSpan,[`${i}-date-panel-date--start`]:y.startOfSpan,[`${i}-date-panel-date--end`]:y.endOfSpan,[`${i}-date-panel-date--disabled`]:S}],onClick:S?void 0:()=>this.handleDateClick(y),onMouseenter:S?void 0:()=>this.handleDateMouseEnter(y)},V("div",{class:`${i}-date-panel-date__trigger`}),y.dateObject.date,y.isCurrentDate?V("div",{class:`${i}-date-panel-date__sup`}):null)}))),V("div",{class:`${i}-date-panel__vertical-divider`}),V("div",{ref:"endDatesElRef",class:`${i}-date-panel-calendar ${i}-date-panel-calendar--end`},V("div",{class:`${i}-date-panel-month`},V("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},kr(m["prev-year"],()=>[V(rf,null)])),V("div",{class:`${i}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},kr(m["prev-month"],()=>[V(nf,null)])),V(cf,{monthBeforeYear:this.locale.monthBeforeYear,value:this.endCalendarDateTime,onUpdateValue:this.onUpdateEndCalendarValue,mergedClsPrefix:i,calendarMonth:this.endCalendarMonth,calendarYear:this.endCalendarYear}),V("div",{class:`${i}-date-panel-month__next`,onClick:this.endCalendarNextMonth},kr(m["next-month"],()=>[V(sf,null)])),V("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},kr(m["next-year"],()=>[V(of,null)]))),V("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(y=>V("div",{key:y,class:`${i}-date-panel-weekdays__day`},y))),V("div",{class:`${i}-date-panel__divider`}),V("div",{class:`${i}-date-panel-dates`},this.endDateArray.map((y,w)=>{const S=this.mergedIsDateDisabled(y.ts);return V("div",{"data-n-date":!0,key:w,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--excluded`]:!y.inCurrentMonth,[`${i}-date-panel-date--current`]:y.isCurrentDate,[`${i}-date-panel-date--selected`]:y.selected,[`${i}-date-panel-date--covered`]:y.inSpan,[`${i}-date-panel-date--start`]:y.startOfSpan,[`${i}-date-panel-date--end`]:y.endOfSpan,[`${i}-date-panel-date--disabled`]:S}],onClick:S?void 0:()=>this.handleDateClick(y),onMouseenter:S?void 0:()=>this.handleDateMouseEnter(y)},V("div",{class:`${i}-date-panel-date__trigger`}),y.dateObject.date,y.isCurrentDate?V("div",{class:`${i}-date-panel-date__sup`}):null)}))),this.datePickerSlots.footer?V("div",{class:`${i}-date-panel-footer`},this.datePickerSlots.footer()):null,!((e=this.actions)===null||e===void 0)&&e.length||u?V("div",{class:`${i}-date-panel-actions`},V("div",{class:`${i}-date-panel-actions__prefix`},u&&Object.keys(u).map(y=>{const w=u[y];return Array.isArray(w)||typeof w=="function"?V(Pc,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(w)},onClick:()=>{this.handleRangeShortcutClick(w)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>y}):null})),V("div",{class:`${i}-date-panel-actions__suffix`},!((t=this.actions)===null||t===void 0)&&t.includes("clear")?V(yo,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,!((n=this.actions)===null||n===void 0)&&n.includes("confirm")?V(yo,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid||this.isSelecting,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,V($c,{onFocus:this.handleFocusDetectorFocus}))}}),_q=pn({name:"DatePanel",props:UT,setup(e){return VT(e,"date")},render(){var e,t,n;const{mergedClsPrefix:i,mergedTheme:s,shortcuts:u,onRender:d,$slots:o}=this;return d==null||d(),V("div",{ref:"selfRef",tabindex:0,class:[`${i}-date-panel`,`${i}-date-panel--date`,!this.panel&&`${i}-date-panel--shadow`,this.themeClass],onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},V("div",{class:`${i}-date-panel-calendar`},V("div",{class:`${i}-date-panel-month`},V("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.prevYear},kr(o["prev-year"],()=>[V(rf,null)])),V("div",{class:`${i}-date-panel-month__prev`,onClick:this.prevMonth},kr(o["prev-month"],()=>[V(nf,null)])),V(cf,{monthBeforeYear:this.locale.monthBeforeYear,value:this.calendarValue,onUpdateValue:this.onUpdateCalendarValue,mergedClsPrefix:i,calendarMonth:this.calendarMonth,calendarYear:this.calendarYear}),V("div",{class:`${i}-date-panel-month__next`,onClick:this.nextMonth},kr(o["next-month"],()=>[V(sf,null)])),V("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.nextYear},kr(o["next-year"],()=>[V(of,null)]))),V("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(m=>V("div",{key:m,class:`${i}-date-panel-weekdays__day`},m))),V("div",{class:`${i}-date-panel-dates`},this.dateArray.map((m,y)=>V("div",{"data-n-date":!0,key:y,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--current`]:m.isCurrentDate,[`${i}-date-panel-date--selected`]:m.selected,[`${i}-date-panel-date--excluded`]:!m.inCurrentMonth,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(m.ts)}],onClick:()=>this.handleDateClick(m)},V("div",{class:`${i}-date-panel-date__trigger`}),m.dateObject.date,m.isCurrentDate?V("div",{class:`${i}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?V("div",{class:`${i}-date-panel-footer`},this.datePickerSlots.footer()):null,!((e=this.actions)===null||e===void 0)&&e.length||u?V("div",{class:`${i}-date-panel-actions`},V("div",{class:`${i}-date-panel-actions__prefix`},u&&Object.keys(u).map(m=>{const y=u[m];return Array.isArray(y)?null:V(Pc,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(y)},onClick:()=>{this.handleSingleShortcutClick(y)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>m})})),V("div",{class:`${i}-date-panel-actions__suffix`},!((t=this.actions)===null||t===void 0)&&t.includes("clear")?V(yo,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,!((n=this.actions)===null||n===void 0)&&n.includes("now")?V(yo,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null)):null,V($c,{onFocus:this.handleFocusDetectorFocus}))}}),yq=pn({name:"DateRangePanel",props:jT,setup(e){return WT(e,"daterange")},render(){var e,t,n;const{mergedClsPrefix:i,mergedTheme:s,shortcuts:u,onRender:d,$slots:o}=this;return d==null||d(),V("div",{ref:"selfRef",tabindex:0,class:[`${i}-date-panel`,`${i}-date-panel--daterange`,!this.panel&&`${i}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},V("div",{ref:"startDatesElRef",class:`${i}-date-panel-calendar ${i}-date-panel-calendar--start`},V("div",{class:`${i}-date-panel-month`},V("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},kr(o["prev-year"],()=>[V(rf,null)])),V("div",{class:`${i}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},kr(o["prev-month"],()=>[V(nf,null)])),V(cf,{monthBeforeYear:this.locale.monthBeforeYear,value:this.startCalendarDateTime,onUpdateValue:this.onUpdateStartCalendarValue,mergedClsPrefix:i,calendarMonth:this.startCalendarMonth,calendarYear:this.startCalendarYear}),V("div",{class:`${i}-date-panel-month__next`,onClick:this.startCalendarNextMonth},kr(o["next-month"],()=>[V(sf,null)])),V("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},kr(o["next-year"],()=>[V(of,null)]))),V("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(m=>V("div",{key:m,class:`${i}-date-panel-weekdays__day`},m))),V("div",{class:`${i}-date-panel__divider`}),V("div",{class:`${i}-date-panel-dates`},this.startDateArray.map((m,y)=>V("div",{"data-n-date":!0,key:y,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--excluded`]:!m.inCurrentMonth,[`${i}-date-panel-date--current`]:m.isCurrentDate,[`${i}-date-panel-date--selected`]:m.selected,[`${i}-date-panel-date--covered`]:m.inSpan,[`${i}-date-panel-date--start`]:m.startOfSpan,[`${i}-date-panel-date--end`]:m.endOfSpan,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(m.ts)}],onClick:()=>this.handleDateClick(m),onMouseenter:()=>this.handleDateMouseEnter(m)},V("div",{class:`${i}-date-panel-date__trigger`}),m.dateObject.date,m.isCurrentDate?V("div",{class:`${i}-date-panel-date__sup`}):null)))),V("div",{class:`${i}-date-panel__vertical-divider`}),V("div",{ref:"endDatesElRef",class:`${i}-date-panel-calendar ${i}-date-panel-calendar--end`},V("div",{class:`${i}-date-panel-month`},V("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},kr(o["prev-year"],()=>[V(rf,null)])),V("div",{class:`${i}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},kr(o["prev-month"],()=>[V(nf,null)])),V(cf,{monthBeforeYear:this.locale.monthBeforeYear,value:this.endCalendarDateTime,onUpdateValue:this.onUpdateEndCalendarValue,mergedClsPrefix:i,calendarMonth:this.endCalendarMonth,calendarYear:this.endCalendarYear}),V("div",{class:`${i}-date-panel-month__next`,onClick:this.endCalendarNextMonth},kr(o["next-month"],()=>[V(sf,null)])),V("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},kr(o["next-year"],()=>[V(of,null)]))),V("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(m=>V("div",{key:m,class:`${i}-date-panel-weekdays__day`},m))),V("div",{class:`${i}-date-panel__divider`}),V("div",{class:`${i}-date-panel-dates`},this.endDateArray.map((m,y)=>V("div",{"data-n-date":!0,key:y,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--excluded`]:!m.inCurrentMonth,[`${i}-date-panel-date--current`]:m.isCurrentDate,[`${i}-date-panel-date--selected`]:m.selected,[`${i}-date-panel-date--covered`]:m.inSpan,[`${i}-date-panel-date--start`]:m.startOfSpan,[`${i}-date-panel-date--end`]:m.endOfSpan,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(m.ts)}],onClick:()=>this.handleDateClick(m),onMouseenter:()=>this.handleDateMouseEnter(m)},V("div",{class:`${i}-date-panel-date__trigger`}),m.dateObject.date,m.isCurrentDate?V("div",{class:`${i}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?V("div",{class:`${i}-date-panel-footer`},this.datePickerSlots.footer()):null,!((e=this.actions)===null||e===void 0)&&e.length||u?V("div",{class:`${i}-date-panel-actions`},V("div",{class:`${i}-date-panel-actions__prefix`},u&&Object.keys(u).map(m=>{const y=u[m];return Array.isArray(y)||typeof y=="function"?V(Pc,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(y)},onClick:()=>{this.handleRangeShortcutClick(y)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>m}):null})),V("div",{class:`${i}-date-panel-actions__suffix`},!((t=this.actions)===null||t===void 0)&&t.includes("clear")?V(yo,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,!((n=this.actions)===null||n===void 0)&&n.includes("confirm")?V(yo,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid||this.isSelecting,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,V($c,{onFocus:this.handleFocusDetectorFocus}))}}),xq=pn({name:"MonthRangePanel",props:Object.assign(Object.assign({},jT),{type:{type:String,required:!0}}),setup(e){const t=WT(e,e.type),n=(i,s,u,d)=>{const{handleColItemClick:o}=t,m=!1;return V("div",{"data-n-date":!0,key:s,class:[`${u}-date-panel-month-calendar__picker-col-item`,{[`${u}-date-panel-month-calendar__picker-col-item--current`]:i.isCurrent,[`${u}-date-panel-month-calendar__picker-col-item--selected`]:i.selected,[`${u}-date-panel-month-calendar__picker-col-item--disabled`]:m}],onClick:()=>{o(i,d)}},i.type==="month"?i.dateObject.month+1:i.type==="quarter"?`Q${i.dateObject.quarter}`:i.dateObject.year)};return Si(()=>{t.justifyColumnsScrollState()}),Object.assign(Object.assign({},t),{renderItem:n})},render(){var e,t,n;const{mergedClsPrefix:i,mergedTheme:s,shortcuts:u,type:d,renderItem:o,onRender:m}=this;return m==null||m(),V("div",{ref:"selfRef",tabindex:0,class:[`${i}-date-panel`,`${i}-date-panel--daterange`,!this.panel&&`${i}-date-panel--shadow`,this.themeClass],onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},V("div",{ref:"startDatesElRef",class:`${i}-date-panel-calendar ${i}-date-panel-calendar--start`},V("div",{class:`${i}-date-panel-month-calendar`},V(xs,{ref:"startYearScrollbarRef",class:`${i}-date-panel-month-calendar__picker-col`,theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar,container:()=>this.virtualListContainer("start"),content:()=>this.virtualListContent("start"),horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>V(my,{ref:"startYearVlRef",items:this.startYearArray,itemSize:dd,showScrollbar:!1,keyField:"ts",onScroll:this.handleStartYearVlScroll,paddingBottom:4},{default:({item:y,index:w})=>o(y,w,i,"start")})}),d==="monthrange"||d==="quarterrange"?V("div",{class:`${i}-date-panel-month-calendar__picker-col`},V(xs,{ref:"startMonthScrollbarRef",theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar},{default:()=>[(d==="monthrange"?this.startMonthArray:this.startQuarterArray).map((y,w)=>o(y,w,i,"start")),d==="monthrange"&&V("div",{class:`${i}-date-panel-month-calendar__padding`})]})):null)),V("div",{class:`${i}-date-panel__vertical-divider`}),V("div",{ref:"endDatesElRef",class:`${i}-date-panel-calendar ${i}-date-panel-calendar--end`},V("div",{class:`${i}-date-panel-month-calendar`},V(xs,{ref:"endYearScrollbarRef",class:`${i}-date-panel-month-calendar__picker-col`,theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar,container:()=>this.virtualListContainer("end"),content:()=>this.virtualListContent("end"),horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>V(my,{ref:"endYearVlRef",items:this.endYearArray,itemSize:dd,showScrollbar:!1,keyField:"ts",onScroll:this.handleEndYearVlScroll,paddingBottom:4},{default:({item:y,index:w})=>o(y,w,i,"end")})}),d==="monthrange"||d==="quarterrange"?V("div",{class:`${i}-date-panel-month-calendar__picker-col`},V(xs,{ref:"endMonthScrollbarRef",theme:s.peers.Scrollbar,themeOverrides:s.peerOverrides.Scrollbar},{default:()=>[(d==="monthrange"?this.endMonthArray:this.endQuarterArray).map((y,w)=>o(y,w,i,"end")),d==="monthrange"&&V("div",{class:`${i}-date-panel-month-calendar__padding`})]})):null)),this.datePickerSlots.footer?V("div",{class:`${i}-date-panel-footer`},eT(this.datePickerSlots,"footer")):null,!((e=this.actions)===null||e===void 0)&&e.length||u?V("div",{class:`${i}-date-panel-actions`},V("div",{class:`${i}-date-panel-actions__prefix`},u&&Object.keys(u).map(y=>{const w=u[y];return Array.isArray(w)||typeof w=="function"?V(Pc,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(w)},onClick:()=>{this.handleRangeShortcutClick(w)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>y}):null})),V("div",{class:`${i}-date-panel-actions__suffix`},!((t=this.actions)===null||t===void 0)&&t.includes("clear")?V(Pc,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,!((n=this.actions)===null||n===void 0)&&n.includes("confirm")?V(Pc,{theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,V($c,{onFocus:this.handleFocusDetectorFocus}))}}),bq=Ze([It("date-picker",`
 position: relative;
 z-index: auto;
 `,[It("date-picker-icon",`
 color: var(--n-icon-color-override);
 transition: color .3s var(--n-bezier);
 `),It("icon",`
 color: var(--n-icon-color-override);
 transition: color .3s var(--n-bezier);
 `),Nt("disabled",[It("date-picker-icon",`
 color: var(--n-icon-color-disabled-override);
 `),It("icon",`
 color: var(--n-icon-color-disabled-override);
 `)])]),It("date-panel",`
 width: fit-content;
 outline: none;
 margin: 4px 0;
 display: grid;
 grid-template-columns: 0fr;
 border-radius: var(--n-panel-border-radius);
 background-color: var(--n-panel-color);
 color: var(--n-panel-text-color);
 `,[af(),Nt("shadow",`
 box-shadow: var(--n-panel-box-shadow);
 `),It("date-panel-calendar",{padding:"var(--n-calendar-left-padding)",display:"grid",gridTemplateColumns:"1fr",gridArea:"left-calendar"},[Nt("end",{padding:"var(--n-calendar-right-padding)",gridArea:"right-calendar"})]),It("date-panel-month-calendar",{display:"flex",gridArea:"left-calendar"},[xt("picker-col",`
 min-width: var(--n-scroll-item-width);
 height: calc(var(--n-scroll-item-height) * 6);
 user-select: none;
 -webkit-user-select: none;
 `,[Ze("&:first-child",`
 min-width: calc(var(--n-scroll-item-width) + 4px);
 `,[xt("picker-col-item",[Ze("&::before","left: 4px;")])]),xt("padding",`
 height: calc(var(--n-scroll-item-height) * 5)
 `)]),xt("picker-col-item",`
 z-index: 0;
 cursor: pointer;
 height: var(--n-scroll-item-height);
 box-sizing: border-box;
 padding-top: 4px;
 display: flex;
 align-items: center;
 justify-content: center;
 position: relative;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background: #0000;
 color: var(--n-item-text-color);
 `,[Ze("&::before",`
 z-index: -1;
 content: "";
 position: absolute;
 left: 0;
 right: 4px;
 top: 4px;
 bottom: 0;
 border-radius: var(--n-scroll-item-border-radius);
 transition: 
 background-color .3s var(--n-bezier);
 `),ai("disabled",[Ze("&:hover::before",`
 background-color: var(--n-item-color-hover);
 `),Nt("selected",`
 color: var(--n-item-color-active);
 `,[Ze("&::before","background-color: var(--n-item-color-hover);")])]),Nt("disabled",`
 color: var(--n-item-text-color-disabled);
 cursor: not-allowed;
 `,[Nt("selected",[Ze("&::before",`
 background-color: var(--n-item-color-disabled);
 `)])])])]),Nt("date",{gridTemplateAreas:`
 "left-calendar"
 "footer"
 "action"
 `}),Nt("daterange",{gridTemplateAreas:`
 "left-calendar divider right-calendar"
 "footer footer footer"
 "action action action"
 `}),Nt("datetime",{gridTemplateAreas:`
 "header"
 "left-calendar"
 "footer"
 "action"
 `}),Nt("datetimerange",{gridTemplateAreas:`
 "header header header"
 "left-calendar divider right-calendar"
 "footer footer footer"
 "action action action"
 `}),Nt("month",{gridTemplateAreas:`
 "left-calendar"
 "footer"
 "action"
 `}),It("date-panel-footer",{gridArea:"footer"}),It("date-panel-actions",{gridArea:"action"}),It("date-panel-header",{gridArea:"header"}),It("date-panel-header",`
 box-sizing: border-box;
 width: 100%;
 align-items: center;
 padding: var(--n-panel-header-padding);
 display: flex;
 justify-content: space-between;
 border-bottom: 1px solid var(--n-panel-header-divider-color);
 `,[Ze(">",[Ze("*:not(:last-child)",{marginRight:"10px"}),Ze("*",{flex:1,width:0}),It("time-picker",{zIndex:1})])]),It("date-panel-month",`
 box-sizing: border-box;
 display: grid;
 grid-template-columns: var(--n-calendar-title-grid-template-columns);
 align-items: center;
 justify-items: center;
 padding: var(--n-calendar-title-padding);
 height: var(--n-calendar-title-height);
 `,[xt("prev, next, fast-prev, fast-next",`
 line-height: 0;
 cursor: pointer;
 width: var(--n-arrow-size);
 height: var(--n-arrow-size);
 color: var(--n-arrow-color);
 `),xt("month-year",`
 user-select: none;
 -webkit-user-select: none;
 flex-grow: 1;
 position: relative;
 `,[xt("text",`
 font-size: var(--n-calendar-title-font-size);
 line-height: var(--n-calendar-title-font-size);
 font-weight: var(--n-calendar-title-font-weight);
 padding: 6px 8px;
 text-align: center;
 color: var(--n-calendar-title-text-color);
 cursor: pointer;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-panel-border-radius);
 `,[Nt("active",`
 background-color: var(--n-calendar-title-color-hover);
 `),Ze("&:hover",`
 background-color: var(--n-calendar-title-color-hover);
 `)])])]),It("date-panel-weekdays",`
 display: grid;
 margin: auto;
 grid-template-columns: repeat(7, var(--n-item-cell-width));
 grid-template-rows: repeat(1, var(--n-item-cell-height));
 align-items: center;
 justify-items: center;
 margin-bottom: 4px;
 border-bottom: 1px solid var(--n-calendar-days-divider-color);
 `,[xt("day",`
 user-select: none;
 -webkit-user-select: none;
 line-height: 15px;
 width: var(--n-item-size);
 text-align: center;
 font-size: var(--n-calendar-days-font-size);
 color: var(--n-item-text-color);
 `)]),It("date-panel-dates",`
 margin: auto;
 display: grid;
 grid-template-columns: repeat(7, var(--n-item-cell-width));
 grid-template-rows: repeat(6, var(--n-item-cell-height));
 align-items: center;
 justify-items: center;
 flex-wrap: wrap;
 `,[It("date-panel-date",`
 user-select: none;
 -webkit-user-select: none;
 position: relative;
 width: var(--n-item-size);
 height: var(--n-item-size);
 line-height: var(--n-item-size);
 text-align: center;
 font-size: var(--n-item-font-size);
 border-radius: var(--n-item-border-radius);
 z-index: 0;
 cursor: pointer;
 transition:
 background-color .2s var(--n-bezier),
 color .2s var(--n-bezier);
 `,[xt("trigger",`
 position: absolute;
 left: calc(var(--n-item-size) / 2 - var(--n-item-cell-width) / 2);
 top: calc(var(--n-item-size) / 2 - var(--n-item-cell-height) / 2);
 width: var(--n-item-cell-width);
 height: var(--n-item-cell-height);
 `),ai("disabled",[ai("selected",[Ze("&:hover",{backgroundColor:"var(--n-item-color-hover)"})])]),Nt("current",[xt("sup",`
 position: absolute;
 top: 2px;
 right: 2px;
 content: "";
 height: 4px;
 width: 4px;
 border-radius: 2px;
 background-color: var(--n-item-color-active);
 transition:
 background-color .2s var(--n-bezier);
 `)]),Ze("&::after",`
 content: "";
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 transition: background-color .3s var(--n-bezier);
 `),Nt("covered, start, end",[ai("excluded",[Ze("&::before",`
 content: "";
 z-index: -2;
 position: absolute;
 left: calc((var(--n-item-size) - var(--n-item-cell-width)) / 2);
 right: calc((var(--n-item-size) - var(--n-item-cell-width)) / 2);
 top: 0;
 bottom: 0;
 background-color: var(--n-item-color-included);
 `),Ze("&:nth-child(7n + 1)::before",{borderTopLeftRadius:"var(--n-item-border-radius)",borderBottomLeftRadius:"var(--n-item-border-radius)"}),Ze("&:nth-child(7n + 7)::before",{borderTopRightRadius:"var(--n-item-border-radius)",borderBottomRightRadius:"var(--n-item-border-radius)"})])]),Nt("selected",{color:"var(--n-item-text-color-active)"},[Ze("&::after",{backgroundColor:"var(--n-item-color-active)"}),Nt("start",[Ze("&::before",{left:"50%"})]),Nt("end",[Ze("&::before",{right:"50%"})]),xt("sup",{backgroundColor:"var(--n-panel-color)"})]),Nt("excluded",{color:"var(--n-item-text-color-disabled)"},[Nt("selected",[Ze("&::after",{backgroundColor:"var(--n-item-color-disabled)"})])]),Nt("disabled",{cursor:"not-allowed",color:"var(--n-item-text-color-disabled)"},[Nt("covered",[Ze("&::before",{backgroundColor:"var(--n-item-color-disabled)"})]),Nt("selected",[Ze("&::before",{backgroundColor:"var(--n-item-color-disabled)"}),Ze("&::after",{backgroundColor:"var(--n-item-color-disabled)"})])])])]),xt("vertical-divider",`
 grid-area: divider;
 height: 100%;
 width: 1px;
 background-color: var(--n-calendar-divider-color);
 `),It("date-panel-footer",{borderTop:"1px solid var(--n-panel-action-divider-color)",padding:"var(--n-panel-extra-footer-padding)"}),It("date-panel-actions",`
 flex: 1;
 padding: var(--n-panel-action-padding);
 display: flex;
 align-items: center;
 justify-content: space-between;
 border-top: 1px solid var(--n-panel-action-divider-color);
 `,[xt("prefix, suffix",`
 display: flex;
 margin-bottom: -8px;
 `),xt("suffix",`
 align-self: flex-end;
 `),xt("prefix",`
 flex-wrap: wrap;
 `),It("button",`
 margin-bottom: 8px;
 `,[Ze("&:not(:last-child)",`
 margin-right: 8px;
 `)])])]),Ze("[data-n-date].transition-disabled",{transition:"none !important"},[Ze("&::before, &::after",{transition:"none !important"})])]),wq=Object.assign(Object.assign({},ur.props),{to:Xo.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,updateValueOnClose:Boolean,defaultValue:[Number,Array],defaultFormattedValue:[String,Array],defaultTime:[Number,String,Array],disabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom-start"},value:[Number,Array],formattedValue:[String,Array],size:String,type:{type:String,default:"date"},valueFormat:String,separator:String,placeholder:String,startPlaceholder:String,endPlaceholder:String,format:String,dateFormat:String,timeFormat:String,actions:Array,shortcuts:Object,isDateDisabled:Function,isTimeDisabled:Function,show:{type:Boolean,default:void 0},panel:Boolean,ranges:Object,firstDayOfWeek:Number,inputReadonly:Boolean,closeOnSelect:Boolean,status:String,timePickerProps:[Object,Array],onClear:Function,onConfirm:Function,defaultCalendarStartTime:Number,defaultCalendarEndTime:Number,bindCalendarMonths:Boolean,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:formattedValue":[Function,Array],onUpdateFormattedValue:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onChange:[Function,Array]}),Tq=pn({name:"DatePicker",props:wq,setup(e,{slots:t}){var n;const{localeRef:i,dateLocaleRef:s}=fg("DatePicker"),u=dg(e),{mergedSizeRef:d,mergedDisabledRef:o,mergedStatusRef:m}=u,{mergedComponentPropsRef:y,mergedClsPrefixRef:w,mergedBorderedRef:S,namespaceRef:A,inlineThemeDisabled:I}=Ki(e),z=He(null),U=He(null),j=He(null),F=He(!1),H=nr(e,"show"),J=ad(H,F),Z=Le(()=>({locale:s.value.locale})),Y=Le(()=>{const{format:Fe}=e;if(Fe)return Fe;switch(e.type){case"date":case"daterange":return i.value.dateFormat;case"datetime":case"datetimerange":return i.value.dateTimeFormat;case"year":case"yearrange":return i.value.yearTypeFormat;case"month":case"monthrange":return i.value.monthTypeFormat;case"quarter":case"quarterrange":return i.value.quarterFormat}}),ce=Le(()=>{var Fe;return(Fe=e.valueFormat)!==null&&Fe!==void 0?Fe:Y.value});function ee(Fe){if(Fe===null)return null;const{value:Rt}=ce,{value:Qt}=Z;return Array.isArray(Fe)?[ds(Fe[0],Rt,new Date,Qt).getTime(),ds(Fe[1],Rt,new Date,Qt).getTime()]:ds(Fe,Rt,new Date,Qt).getTime()}const{defaultFormattedValue:de,defaultValue:ue}=e,Ee=He((n=de!==void 0?ee(de):ue)!==null&&n!==void 0?n:null),ze=Le(()=>{const{formattedValue:Fe}=e;return Fe!==void 0?ee(Fe):e.value}),xe=ad(ze,Ee),qe=He(null);El(()=>{qe.value=xe.value});const Qe=He(""),Be=He(""),st=He(""),it=ur("DatePicker","-date-picker",bq,Z7,e,w),Pt=Le(()=>{var Fe,Rt;return((Rt=(Fe=y==null?void 0:y.value)===null||Fe===void 0?void 0:Fe.DatePicker)===null||Rt===void 0?void 0:Rt.timePickerSize)||"small"}),Ke=Le(()=>["daterange","datetimerange","monthrange","quarterrange","yearrange"].includes(e.type)),ut=Le(()=>{const{placeholder:Fe}=e;if(Fe===void 0){const{type:Rt}=e;switch(Rt){case"date":return i.value.datePlaceholder;case"datetime":return i.value.datetimePlaceholder;case"month":return i.value.monthPlaceholder;case"year":return i.value.yearPlaceholder;case"quarter":return i.value.quarterPlaceholder;default:return""}}else return Fe}),jt=Le(()=>e.startPlaceholder===void 0?e.type==="daterange"?i.value.startDatePlaceholder:e.type==="datetimerange"?i.value.startDatetimePlaceholder:e.type==="monthrange"?i.value.startMonthPlaceholder:"":e.startPlaceholder),on=Le(()=>e.endPlaceholder===void 0?e.type==="daterange"?i.value.endDatePlaceholder:e.type==="datetimerange"?i.value.endDatetimePlaceholder:e.type==="monthrange"?i.value.endMonthPlaceholder:"":e.endPlaceholder),En=Le(()=>{const{actions:Fe,type:Rt,clearable:Qt}=e;if(Fe===null)return[];if(Fe!==void 0)return Fe;const An=Qt?["clear"]:[];switch(Rt){case"date":return An.push("now"),An;case"datetime":return An.push("now","confirm"),An;case"daterange":return An.push("confirm"),An;case"datetimerange":return An.push("confirm"),An;case"month":return An.push("now","confirm"),An;case"year":return An.push("now"),An;case"quarter":return An.push("now","confirm"),An;case"monthrange":case"yearrange":case"quarterrange":return An.push("confirm"),An;default:{s1("date-picker","The type is wrong, n-date-picker's type only supports `date`, `datetime`, `daterange` and `datetimerange`.");break}}});function Dn(Fe){if(Fe===null)return null;if(Array.isArray(Fe)){const{value:Rt}=ce,{value:Qt}=Z;return[mi(Fe[0],Rt,Qt),mi(Fe[1],Rt,Z.value)]}else return mi(Fe,ce.value,Z.value)}function Je(Fe){qe.value=Fe}function yt(Fe,Rt){const{"onUpdate:formattedValue":Qt,onUpdateFormattedValue:An}=e;Qt&&Un(Qt,Fe,Rt),An&&Un(An,Fe,Rt)}function wt(Fe,Rt){const{"onUpdate:value":Qt,onUpdateValue:An,onChange:et}=e,{nTriggerFormChange:Gt,nTriggerFormInput:sn}=u,On=Dn(Fe);Rt.doConfirm&&Ct(Fe,On),An&&Un(An,Fe,On),Qt&&Un(Qt,Fe,On),et&&Un(et,Fe,On),Ee.value=Fe,yt(On,Fe),Gt(),sn()}function Lt(){const{onClear:Fe}=e;Fe==null||Fe()}function Ct(Fe,Rt){const{onConfirm:Qt}=e;Qt&&Qt(Fe,Rt)}function Yt(Fe){const{onFocus:Rt}=e,{nTriggerFormFocus:Qt}=u;Rt&&Un(Rt,Fe),Qt()}function ln(Fe){const{onBlur:Rt}=e,{nTriggerFormBlur:Qt}=u;Rt&&Un(Rt,Fe),Qt()}function he(Fe){const{"onUpdate:show":Rt,onUpdateShow:Qt}=e;Rt&&Un(Rt,Fe),Qt&&Un(Qt,Fe),F.value=Fe}function Me(Fe){Fe.key==="Escape"&&J.value&&(jm(Fe),br({returnFocus:!0}))}function Ue(Fe){Fe.key==="Escape"&&J.value&&jm(Fe)}function lt(){var Fe;he(!1),(Fe=j.value)===null||Fe===void 0||Fe.deactivate(),Lt()}function gt(){var Fe;(Fe=j.value)===null||Fe===void 0||Fe.deactivate(),Lt()}function Ne(){br({returnFocus:!0})}function ht(Fe){var Rt;J.value&&!(!((Rt=U.value)===null||Rt===void 0)&&Rt.contains(Dc(Fe)))&&br({returnFocus:!1})}function At(Fe){br({returnFocus:!0,disableUpdateOnClose:Fe})}function Et(Fe,Rt){Rt?wt(Fe,{doConfirm:!1}):Je(Fe)}function Oe(){const Fe=qe.value;wt(Array.isArray(Fe)?[Fe[0],Fe[1]]:Fe,{doConfirm:!0})}function vt(){const{value:Fe}=qe;Ke.value?(Array.isArray(Fe)||Fe===null)&&Jt(Fe):Array.isArray(Fe)||Wt(Fe)}function Wt(Fe){Fe===null?Qe.value="":Qe.value=mi(Fe,Y.value,Z.value)}function Jt(Fe){if(Fe===null)Be.value="",st.value="";else{const Rt=Z.value;Be.value=mi(Fe[0],Y.value,Rt),st.value=mi(Fe[1],Y.value,Rt)}}function wn(){J.value||li()}function Cn(Fe){var Rt;!((Rt=z.value)===null||Rt===void 0)&&Rt.$el.contains(Fe.relatedTarget)||(ln(Fe),vt(),br({returnFocus:!1}))}function Fn(){o.value||(vt(),br({returnFocus:!1}))}function $n(Fe){if(Fe===""){wt(null,{doConfirm:!1}),qe.value=null,Qe.value="";return}const Rt=ds(Fe,Y.value,new Date,Z.value);Ls(Rt)?(wt(fn(Rt),{doConfirm:!1}),vt()):Qe.value=Fe}function Zn(Fe){if(Fe[0]===""&&Fe[1]===""){wt(null,{doConfirm:!1}),qe.value=null,Be.value="",st.value="";return}const[Rt,Qt]=Fe,An=ds(Rt,Y.value,new Date,Z.value),et=ds(Qt,Y.value,new Date,Z.value);Ls(An)&&Ls(et)?(wt([fn(An),fn(et)],{doConfirm:!1}),vt()):[Be.value,st.value]=Fe}function pr(Fe){o.value||Qh(Fe,"clear")||J.value||li()}function sr(Fe){o.value||Yt(Fe)}function li(){o.value||J.value||he(!0)}function br({returnFocus:Fe,disableUpdateOnClose:Rt}){var Qt;J.value&&(he(!1),e.type!=="date"&&e.updateValueOnClose&&!Rt&&Oe(),Fe&&((Qt=j.value)===null||Qt===void 0||Qt.focus()))}xr(qe,()=>{vt()}),vt(),xr(J,Fe=>{Fe||(qe.value=xe.value)});const dr=Y7(e,qe),rr=X7(e,qe);Hi(a0,Object.assign(Object.assign(Object.assign({mergedClsPrefixRef:w,mergedThemeRef:it,timePickerSizeRef:Pt,localeRef:i,dateLocaleRef:s,firstDayOfWeekRef:nr(e,"firstDayOfWeek"),isDateDisabledRef:nr(e,"isDateDisabled"),rangesRef:nr(e,"ranges"),timePickerPropsRef:nr(e,"timePickerProps"),closeOnSelectRef:nr(e,"closeOnSelect"),updateValueOnCloseRef:nr(e,"updateValueOnClose")},dr),rr),{datePickerSlots:t}));const Ae={focus:()=>{var Fe;(Fe=j.value)===null||Fe===void 0||Fe.focus()},blur:()=>{var Fe;(Fe=j.value)===null||Fe===void 0||Fe.blur()}},mt=Le(()=>{const{common:{cubicBezierEaseInOut:Fe},self:{iconColor:Rt,iconColorDisabled:Qt}}=it.value;return{"--n-bezier":Fe,"--n-icon-color-override":Rt,"--n-icon-color-disabled-override":Qt}}),Vt=I?Xi("date-picker-trigger",void 0,mt,e):void 0,gn=Le(()=>{const{type:Fe}=e,{common:{cubicBezierEaseInOut:Rt},self:{calendarTitleFontSize:Qt,calendarDaysFontSize:An,itemFontSize:et,itemTextColor:Gt,itemColorDisabled:sn,itemColorIncluded:On,itemColorHover:xi,itemColorActive:ri,itemBorderRadius:oe,itemTextColorDisabled:L,itemTextColorActive:G,panelColor:ne,panelTextColor:pe,arrowColor:we,calendarTitleTextColor:Re,panelActionDividerColor:$e,panelHeaderDividerColor:De,calendarDaysDividerColor:je,panelBoxShadow:bt,panelBorderRadius:Zt,calendarTitleFontWeight:ye,panelExtraFooterPadding:pt,panelActionPadding:kt,itemSize:en,itemCellWidth:yn,itemCellHeight:vn,scrollItemWidth:Yn,scrollItemHeight:Sn,calendarTitlePadding:ar,calendarTitleHeight:yr,calendarDaysHeight:Jo,calendarDaysTextColor:Vo,arrowSize:ft,panelHeaderPadding:jo,calendarDividerColor:ii,calendarTitleGridTempateColumns:Qo,iconColor:Il,iconColorDisabled:Eo,scrollItemBorderRadius:Ts,calendarTitleColorHover:zl,[an("calendarLeftPadding",Fe)]:Cs,[an("calendarRightPadding",Fe)]:qt}}=it.value;return{"--n-bezier":Rt,"--n-panel-border-radius":Zt,"--n-panel-color":ne,"--n-panel-box-shadow":bt,"--n-panel-text-color":pe,"--n-panel-header-padding":jo,"--n-panel-header-divider-color":De,"--n-calendar-left-padding":Cs,"--n-calendar-right-padding":qt,"--n-calendar-title-color-hover":zl,"--n-calendar-title-height":yr,"--n-calendar-title-padding":ar,"--n-calendar-title-font-size":Qt,"--n-calendar-title-font-weight":ye,"--n-calendar-title-text-color":Re,"--n-calendar-title-grid-template-columns":Qo,"--n-calendar-days-height":Jo,"--n-calendar-days-divider-color":je,"--n-calendar-days-font-size":An,"--n-calendar-days-text-color":Vo,"--n-calendar-divider-color":ii,"--n-panel-action-padding":kt,"--n-panel-extra-footer-padding":pt,"--n-panel-action-divider-color":$e,"--n-item-font-size":et,"--n-item-border-radius":oe,"--n-item-size":en,"--n-item-cell-width":yn,"--n-item-cell-height":vn,"--n-item-text-color":Gt,"--n-item-color-included":On,"--n-item-color-disabled":sn,"--n-item-color-hover":xi,"--n-item-color-active":ri,"--n-item-text-color-disabled":L,"--n-item-text-color-active":G,"--n-scroll-item-width":Yn,"--n-scroll-item-height":Sn,"--n-scroll-item-border-radius":Ts,"--n-arrow-size":ft,"--n-arrow-color":we,"--n-icon-color":Il,"--n-icon-color-disabled":Eo}}),hn=I?Xi("date-picker",Le(()=>e.type),gn,e):void 0;return Object.assign(Object.assign({},Ae),{mergedStatus:m,mergedClsPrefix:w,mergedBordered:S,namespace:A,uncontrolledValue:Ee,pendingValue:qe,panelInstRef:z,triggerElRef:U,inputInstRef:j,isMounted:gd(),displayTime:Qe,displayStartTime:Be,displayEndTime:st,mergedShow:J,adjustedTo:Xo(e),isRange:Ke,localizedStartPlaceholder:jt,localizedEndPlaceholder:on,mergedSize:d,mergedDisabled:o,localizedPlacehoder:ut,isValueInvalid:dr.isValueInvalidRef,isStartValueInvalid:rr.isStartValueInvalidRef,isEndValueInvalid:rr.isEndValueInvalidRef,handleInputKeydown:Ue,handleClickOutside:ht,handleKeydown:Me,handleClear:lt,handlePanelClear:gt,handleTriggerClick:pr,handleInputActivate:wn,handleInputDeactivate:Fn,handleInputFocus:sr,handleInputBlur:Cn,handlePanelTabOut:Ne,handlePanelClose:At,handleRangeUpdateValue:Zn,handleSingleUpdateValue:$n,handlePanelUpdateValue:Et,handlePanelConfirm:Oe,mergedTheme:it,actions:En,triggerCssVars:I?void 0:mt,triggerThemeClass:Vt==null?void 0:Vt.themeClass,triggerOnRender:Vt==null?void 0:Vt.onRender,cssVars:I?void 0:gn,themeClass:hn==null?void 0:hn.themeClass,onRender:hn==null?void 0:hn.onRender})},render(){const{clearable:e,triggerOnRender:t,mergedClsPrefix:n,$slots:i}=this,s={onUpdateValue:this.handlePanelUpdateValue,onTabOut:this.handlePanelTabOut,onClose:this.handlePanelClose,onClear:this.handlePanelClear,onKeydown:this.handleKeydown,onConfirm:this.handlePanelConfirm,ref:"panelInstRef",value:this.pendingValue,active:this.mergedShow,actions:this.actions,shortcuts:this.shortcuts,style:this.cssVars,defaultTime:this.defaultTime,themeClass:this.themeClass,panel:this.panel,onRender:this.onRender},u=()=>{const{type:o}=this;return o==="datetime"?V(gq,Object.assign({},s),i):o==="daterange"?V(yq,Object.assign({},s,{defaultCalendarStartTime:this.defaultCalendarStartTime,defaultCalendarEndTime:this.defaultCalendarEndTime,bindCalendarMonths:this.bindCalendarMonths}),i):o==="datetimerange"?V(vq,Object.assign({},s,{defaultCalendarStartTime:this.defaultCalendarStartTime,defaultCalendarEndTime:this.defaultCalendarEndTime,bindCalendarMonths:this.bindCalendarMonths}),i):o==="month"||o==="year"||o==="quarter"?V(gz,Object.assign({},s,{type:o,key:o})):o==="monthrange"||o==="yearrange"||o==="quarterrange"?V(xq,Object.assign({},s,{type:o})):V(_q,Object.assign({},s),i)};if(this.panel)return u();t==null||t();const d={bordered:this.mergedBordered,size:this.mergedSize,passivelyActivated:!0,disabled:this.mergedDisabled,readonly:this.inputReadonly||this.mergedDisabled,clearable:e,onClear:this.handleClear,onClick:this.handleTriggerClick,onKeydown:this.handleInputKeydown,onActivate:this.handleInputActivate,onDeactivate:this.handleInputDeactivate,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur};return V("div",{ref:"triggerElRef",class:[`${n}-date-picker`,this.mergedDisabled&&`${n}-date-picker--disabled`,this.isRange&&`${n}-date-picker--range`,this.triggerThemeClass],style:this.triggerCssVars,onKeydown:this.handleKeydown},V(lg,null,{default:()=>[V(cg,null,{default:()=>this.isRange?V(lf,Object.assign({ref:"inputInstRef",status:this.mergedStatus,value:[this.displayStartTime,this.displayEndTime],placeholder:[this.localizedStartPlaceholder,this.localizedEndPlaceholder],textDecoration:[this.isStartValueInvalid?"line-through":"",this.isEndValueInvalid?"line-through":""],pair:!0,onUpdateValue:this.handleRangeUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},d),{separator:()=>this.separator===void 0?kr(i.separator,()=>[V($s,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>V(zH,null)})]):this.separator,[e?"clear-icon-placeholder":"suffix"]:()=>kr(i["date-icon"],()=>[V($s,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>V(GM,null)})])}):V(lf,Object.assign({ref:"inputInstRef",status:this.mergedStatus,value:this.displayTime,placeholder:this.localizedPlacehoder,textDecoration:this.isValueInvalid&&!this.isRange?"line-through":"",onUpdateValue:this.handleSingleUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},d),{[e?"clear-icon-placeholder":"suffix"]:()=>V($s,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>kr(i["date-icon"],()=>[V(GM,null)])})})}),V(ug,{show:this.mergedShow,containerClass:this.namespace,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Xo.tdkey,placement:this.placement},{default:()=>V(Yo,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?Wa(u(),[[ld,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),Cq=e=>{const{textColor1:t,dividerColor:n,fontWeightStrong:i}=e;return{textColor:t,color:n,fontWeight:i}},Sq={name:"Divider",common:xo,self:Cq},Eq=Sq,Mq=It("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[ai("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[ai("no-title",`
 display: flex;
 align-items: center;
 `)]),xt("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),Nt("title-position-left",[xt("line",[Nt("left",{width:"28px"})])]),Nt("title-position-right",[xt("line",[Nt("right",{width:"28px"})])]),Nt("dashed",[xt("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),Nt("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),xt("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),ai("dashed",[xt("line",{backgroundColor:"var(--n-color)"})]),Nt("dashed",[xt("line",{borderColor:"var(--n-color)"})]),Nt("vertical",{backgroundColor:"var(--n-color)"})]),Pq=Object.assign(Object.assign({},ur.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),pP=pn({name:"Divider",props:Pq,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=Ki(e),i=ur("Divider","-divider",Mq,Eq,e,t),s=Le(()=>{const{common:{cubicBezierEaseInOut:d},self:{color:o,textColor:m,fontWeight:y}}=i.value;return{"--n-bezier":d,"--n-color":o,"--n-text-color":m,"--n-font-weight":y}}),u=n?Xi("divider",void 0,s,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:s,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var e;const{$slots:t,titlePlacement:n,vertical:i,dashed:s,cssVars:u,mergedClsPrefix:d}=this;return(e=this.onRender)===null||e===void 0||e.call(this),V("div",{role:"separator",class:[`${d}-divider`,this.themeClass,{[`${d}-divider--vertical`]:i,[`${d}-divider--no-title`]:!t.default,[`${d}-divider--dashed`]:s,[`${d}-divider--title-position-${n}`]:t.default&&n}],style:u},i?null:V("div",{class:`${d}-divider__line ${d}-divider__line--left`}),!i&&t.default?V(Vr,null,V("div",{class:`${d}-divider__title`},this.$slots),V("div",{class:`${d}-divider__line ${d}-divider__line--right`})):null)}}),Aq={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},kq=()=>Aq,Dq={name:"Space",self:kq},Iq=Dq;let Sb;const zq=()=>{if(!xf)return!0;if(Sb===void 0){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const t=e.scrollHeight===1;return document.body.removeChild(e),Sb=t}return Sb},Rq=Object.assign(Object.assign({},ur.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),HT=pn({name:"Space",props:Rq,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=Ki(e),i=ur("Space","-space",void 0,Iq,e,t),s=Fc("Space",n,t);return{useGap:zq(),rtlEnabled:s,mergedClsPrefix:t,margin:Le(()=>{const{size:u}=e;if(Array.isArray(u))return{horizontal:u[0],vertical:u[1]};if(typeof u=="number")return{horizontal:u,vertical:u};const{self:{[an("gap",u)]:d}}=i.value,{row:o,col:m}=a4(d);return{horizontal:Nm(m),vertical:Nm(o)}})}},render(){const{vertical:e,align:t,inline:n,justify:i,itemStyle:s,margin:u,wrap:d,mergedClsPrefix:o,rtlEnabled:m,useGap:y,wrapItem:w,internalUseGap:S}=this,A=Um(mD(this));if(!A.length)return null;const I=`${u.horizontal}px`,z=`${u.horizontal/2}px`,U=`${u.vertical}px`,j=`${u.vertical/2}px`,F=A.length-1,H=i.startsWith("space-");return V("div",{role:"none",class:[`${o}-space`,m&&`${o}-space--rtl`],style:{display:n?"inline-flex":"flex",flexDirection:e?"column":"row",justifyContent:["start","end"].includes(i)?"flex-"+i:i,flexWrap:!d||e?"nowrap":"wrap",marginTop:y||e?"":`-${j}`,marginBottom:y||e?"":`-${j}`,alignItems:t,gap:y?`${u.vertical}px ${u.horizontal}px`:""}},!w&&(y||S)?A:A.map((J,Z)=>V("div",{role:"none",style:[s,{maxWidth:"100%"},y?"":e?{marginBottom:Z!==F?U:""}:m?{marginLeft:H?i==="space-between"&&Z===F?"":z:Z!==F?I:"",marginRight:H?i==="space-between"&&Z===0?"":z:"",paddingTop:j,paddingBottom:j}:{marginRight:H?i==="space-between"&&Z===F?"":z:Z!==F?I:"",marginLeft:H?i==="space-between"&&Z===0?"":z:"",paddingTop:j,paddingBottom:j}]},J)))}}),mP=1,vz="n-grid",_z=1,Oq={span:{type:[Number,String],default:_z},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},gP=pn({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:Oq,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:n,overflowRef:i,layoutShiftDisabledRef:s}=fr(vz),u=md();return{overflow:i,itemStyle:n,layoutShiftDisabled:s,mergedXGap:Le(()=>oa(t.value||0)),deriveStyle:()=>{e.value;const{privateSpan:d=_z,privateShow:o=!0,privateColStart:m=void 0,privateOffset:y=0}=u.vnode.props,{value:w}=t,S=oa(w||0);return{display:o?"":"none",gridColumn:`${m??`span ${d}`} / span ${d}`,marginLeft:y?`calc((100% - (${d} - 1) * ${S}) / ${d} * ${y} + ${S} * ${y})`:""}}}},render(){var e,t;if(this.layoutShiftDisabled){const{span:n,offset:i,mergedXGap:s}=this;return V("div",{style:{gridColumn:`span ${n} / span ${n}`,marginLeft:i?`calc((100% - (${n} - 1) * ${s}) / ${n} * ${i} + ${s} * ${i})`:""}},this.$slots)}return V("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}}),Lq={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},yz=24,Eb="__ssr__",Bq={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:yz},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},vP=pn({name:"Grid",inheritAttrs:!1,props:Bq,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:n}=Ki(e),i=/^\d+$/,s=He(void 0),u=o$((n==null?void 0:n.value)||Lq),d=Fo(()=>!!(e.itemResponsive||!i.test(e.cols.toString())||!i.test(e.xGap.toString())||!i.test(e.yGap.toString()))),o=Le(()=>{if(d.value)return e.responsive==="self"?s.value:u.value}),m=Fo(()=>{var F;return(F=Number(qp(e.cols.toString(),o.value)))!==null&&F!==void 0?F:yz}),y=Fo(()=>qp(e.xGap.toString(),o.value)),w=Fo(()=>qp(e.yGap.toString(),o.value)),S=F=>{s.value=F.contentRect.width},A=F=>{cT(S,F)},I=He(!1),z=Le(()=>{if(e.responsive==="self")return A}),U=He(!1),j=He();return Si(()=>{const{value:F}=j;F&&F.hasAttribute(Eb)&&(F.removeAttribute(Eb),U.value=!0)}),Hi(vz,{layoutShiftDisabledRef:nr(e,"layoutShiftDisabled"),isSsrRef:U,itemStyleRef:nr(e,"itemStyle"),xGapRef:y,overflowRef:I}),{isSsr:!xf,contentEl:j,mergedClsPrefix:t,style:Le(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:oa(e.xGap),rowGap:oa(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${m.value}, minmax(0, 1fr))`,columnGap:oa(y.value),rowGap:oa(w.value)}),isResponsive:d,responsiveQuery:o,responsiveCols:m,handleResize:z,overflow:I}},render(){if(this.layoutShiftDisabled)return V("div",Yh({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var t,n,i,s,u,d,o;this.overflow=!1;const m=Um(mD(this)),y=[],{collapsed:w,collapsedRows:S,responsiveCols:A,responsiveQuery:I}=this;m.forEach(H=>{var J,Z,Y,ce;if(((J=H==null?void 0:H.type)===null||J===void 0?void 0:J.__GRID_ITEM__)!==!0)return;if(y4(H)){const ue=ca(H);ue.props?ue.props.privateShow=!1:ue.props={privateShow:!1},y.push({child:ue,rawChildSpan:0});return}H.dirs=((Z=H.dirs)===null||Z===void 0?void 0:Z.filter(({dir:ue})=>ue!==vf))||null;const ee=ca(H),de=Number((ce=qp((Y=ee.props)===null||Y===void 0?void 0:Y.span,I))!==null&&ce!==void 0?ce:mP);de!==0&&y.push({child:ee,rawChildSpan:de})});let z=0;const U=(t=y[y.length-1])===null||t===void 0?void 0:t.child;if(U!=null&&U.props){const H=(n=U.props)===null||n===void 0?void 0:n.suffix;H!==void 0&&H!==!1&&(z=(s=(i=U.props)===null||i===void 0?void 0:i.span)!==null&&s!==void 0?s:mP,U.props.privateSpan=z,U.props.privateColStart=A+1-z,U.props.privateShow=(u=U.props.privateShow)!==null&&u!==void 0?u:!0)}let j=0,F=!1;for(const{child:H,rawChildSpan:J}of y){if(F&&(this.overflow=!0),!F){const Z=Number((o=qp((d=H.props)===null||d===void 0?void 0:d.offset,I))!==null&&o!==void 0?o:0),Y=Math.min(J+Z,A);if(H.props?(H.props.privateSpan=Y,H.props.privateOffset=Z):H.props={privateSpan:Y,privateOffset:Z},w){const ce=j%A;Y+ce>A&&(j+=A-ce),Y+j+z>S*A?F=!0:j+=Y}}F&&(H.props?H.props.privateShow!==!0&&(H.props.privateShow=!1):H.props={privateShow:!1})}return V("div",Yh({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[Eb]:this.isSsr||void 0},this.$attrs),y.map(({child:H})=>H))};return this.isResponsive&&this.responsive==="self"?V(ef,{onResize:this.handleResize},{default:e}):e()}}),Fq={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"},$q=e=>{const{textColor2:t,closeIconColor:n,closeIconColorHover:i,closeIconColorPressed:s,infoColor:u,successColor:d,errorColor:o,warningColor:m,popoverColor:y,boxShadow2:w,primaryColor:S,lineHeight:A,borderRadius:I,closeColorHover:z,closeColorPressed:U}=e;return Object.assign(Object.assign({},Fq),{closeBorderRadius:I,textColor:t,textColorInfo:t,textColorSuccess:t,textColorError:t,textColorWarning:t,textColorLoading:t,color:y,colorInfo:y,colorSuccess:y,colorError:y,colorWarning:y,colorLoading:y,boxShadow:w,boxShadowInfo:w,boxShadowSuccess:w,boxShadowError:w,boxShadowWarning:w,boxShadowLoading:w,iconColor:t,iconColorInfo:u,iconColorSuccess:d,iconColorWarning:m,iconColorError:o,iconColorLoading:S,closeColorHover:z,closeColorPressed:U,closeIconColor:n,closeIconColorHover:i,closeIconColorPressed:s,closeColorHoverInfo:z,closeColorPressedInfo:U,closeIconColorInfo:n,closeIconColorHoverInfo:i,closeIconColorPressedInfo:s,closeColorHoverSuccess:z,closeColorPressedSuccess:U,closeIconColorSuccess:n,closeIconColorHoverSuccess:i,closeIconColorPressedSuccess:s,closeColorHoverError:z,closeColorPressedError:U,closeIconColorError:n,closeIconColorHoverError:i,closeIconColorPressedError:s,closeColorHoverWarning:z,closeColorPressedWarning:U,closeIconColorWarning:n,closeIconColorHoverWarning:i,closeIconColorPressedWarning:s,closeColorHoverLoading:z,closeColorPressedLoading:U,closeIconColorLoading:n,closeIconColorHoverLoading:i,closeIconColorPressedLoading:s,loadingColor:S,lineHeight:A,borderRadius:I})},Nq={name:"Message",common:xo,self:$q},Uq=Nq,Vq=e=>{const{primaryColor:t,errorColor:n}=e;return{colorError:n,colorLoading:t,height:"2px"}},jq={name:"LoadingBar",common:xo,self:Vq},Wq=jq,Hq=e=>{const{opacityDisabled:t,heightTiny:n,heightSmall:i,heightMedium:s,heightLarge:u,heightHuge:d,primaryColor:o,fontSize:m}=e;return{fontSize:m,textColor:o,sizeTiny:n,sizeSmall:i,sizeMedium:s,sizeLarge:u,sizeHuge:d,color:o,opacitySpinning:t}},Gq={name:"Spin",common:xo,self:Hq},qq=Gq,Zq={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"},Yq=e=>{const{dividerColor:t,cardColor:n,modalColor:i,popoverColor:s,tableHeaderColor:u,tableColorStriped:d,textColor1:o,textColor2:m,borderRadius:y,fontWeightStrong:w,lineHeight:S,fontSizeSmall:A,fontSizeMedium:I,fontSizeLarge:z}=e;return Object.assign(Object.assign({},Zq),{fontSizeSmall:A,fontSizeMedium:I,fontSizeLarge:z,lineHeight:S,borderRadius:y,borderColor:Rs(n,t),borderColorModal:Rs(i,t),borderColorPopover:Rs(s,t),tdColor:n,tdColorModal:i,tdColorPopover:s,tdColorStriped:Rs(n,d),tdColorStripedModal:Rs(i,d),tdColorStripedPopover:Rs(s,d),thColor:Rs(n,u),thColorModal:Rs(i,u),thColorPopover:Rs(s,u),thTextColor:o,tdTextColor:m,thFontWeight:w})},Xq={name:"Table",common:xo,self:Yq},Kq=Xq,Jq={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"},Qq=e=>{const{primaryColor:t,textColor2:n,borderColor:i,lineHeight:s,fontSize:u,borderRadiusSmall:d,dividerColor:o,fontWeightStrong:m,textColor1:y,textColor3:w,infoColor:S,warningColor:A,errorColor:I,successColor:z,codeColor:U}=e;return Object.assign(Object.assign({},Jq),{aTextColor:t,blockquoteTextColor:n,blockquotePrefixColor:i,blockquoteLineHeight:s,blockquoteFontSize:u,codeBorderRadius:d,liTextColor:n,liLineHeight:s,liFontSize:u,hrColor:o,headerFontWeight:m,headerTextColor:y,pTextColor:n,pTextColor1Depth:y,pTextColor2Depth:n,pTextColor3Depth:w,pLineHeight:s,pFontSize:u,headerBarColor:t,headerBarColorPrimary:t,headerBarColorInfo:S,headerBarColorError:I,headerBarColorWarning:A,headerBarColorSuccess:z,textColor:n,textColor1Depth:y,textColor2Depth:n,textColor3Depth:w,textColorPrimary:t,textColorInfo:S,textColorSuccess:z,textColorWarning:A,textColorError:I,codeTextColor:n,codeColor:U,codeBorder:"1px solid #0000"})},eZ={name:"Typography",common:xo,self:Qq},tZ=eZ,xz="n-loading-bar",bz="n-loading-bar-api",nZ=It("loading-bar-container",`
 z-index: 5999;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 height: 2px;
`,[OT({enterDuration:"0.3s",leaveDuration:"0.8s"}),It("loading-bar",`
 width: 100%;
 transition:
 max-width 4s linear,
 background .2s linear;
 height: var(--n-height);
 `,[Nt("starting",`
 background: var(--n-color-loading);
 `),Nt("finishing",`
 background: var(--n-color-loading);
 transition:
 max-width .2s linear,
 background .2s linear;
 `),Nt("error",`
 background: var(--n-color-error);
 transition:
 max-width .2s linear,
 background .2s linear;
 `)])]);var Mb=globalThis&&globalThis.__awaiter||function(e,t,n,i){function s(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function o(w){try{y(i.next(w))}catch(S){d(S)}}function m(w){try{y(i.throw(w))}catch(S){d(S)}}function y(w){w.done?u(w.value):s(w.value).then(o,m)}y((i=i.apply(e,t||[])).next())})};function C_(e,t){return`${t}-loading-bar ${t}-loading-bar--${e}`}const rZ=pn({name:"LoadingBar",props:{containerStyle:[String,Object]},setup(){const{inlineThemeDisabled:e}=Ki(),{props:t,mergedClsPrefixRef:n}=fr(xz),i=He(null),s=He(!1),u=He(!1),d=He(!1),o=He(!1);let m=!1;const y=He(!1),w=Le(()=>{const{loadingBarStyle:Y}=t;return Y?Y[y.value?"error":"loading"]:""});function S(){return Mb(this,void 0,void 0,function*(){s.value=!1,d.value=!1,m=!1,y.value=!1,o.value=!0,yield Yi(),o.value=!1})}function A(Y=0,ce=80,ee="starting"){return Mb(this,void 0,void 0,function*(){yield S(),d.value=!0,u.value=!0,yield Yi();const de=i.value;de&&(de.style.maxWidth=`${Y}%`,de.style.transition="none",de.offsetWidth,de.className=C_(ee,n.value),de.style.transition="",de.style.maxWidth=`${ce}%`)})}function I(){if(m||y.value||!d.value)return;m=!0;const Y=i.value;Y&&(Y.className=C_("finishing",n.value),Y.style.maxWidth="100%",Y.offsetWidth,d.value=!1)}function z(){if(!(m||y.value))if(!d.value)A(100,100,"error").then(()=>{y.value=!0;const Y=i.value;Y&&(Y.className=C_("error",n.value),Y.offsetWidth,d.value=!1)});else{y.value=!0;const Y=i.value;if(!Y)return;Y.className=C_("error",n.value),Y.style.maxWidth="100%",Y.offsetWidth,d.value=!1}}function U(){s.value=!0}function j(){s.value=!1}function F(){return Mb(this,void 0,void 0,function*(){yield S()})}const H=ur("LoadingBar","-loading-bar",nZ,Wq,t,n),J=Le(()=>{const{self:{height:Y,colorError:ce,colorLoading:ee}}=H.value;return{"--n-height":Y,"--n-color-loading":ee,"--n-color-error":ce}}),Z=e?Xi("loading-bar",void 0,J,t):void 0;return{mergedClsPrefix:n,loadingBarRef:i,started:u,loading:d,entering:s,transitionDisabled:o,start:A,error:z,finish:I,handleEnter:U,handleAfterEnter:j,handleAfterLeave:F,mergedLoadingBarStyle:w,cssVars:e?void 0:J,themeClass:Z==null?void 0:Z.themeClass,onRender:Z==null?void 0:Z.onRender}},render(){if(!this.started)return null;const{mergedClsPrefix:e}=this;return V(Yo,{name:"fade-in-transition",appear:!0,onEnter:this.handleEnter,onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave,css:!this.transitionDisabled},{default:()=>{var t;return(t=this.onRender)===null||t===void 0||t.call(this),Wa(V("div",{class:[`${e}-loading-bar-container`,this.themeClass],style:this.containerStyle},V("div",{ref:"loadingBarRef",class:[`${e}-loading-bar`],style:[this.cssVars,this.mergedLoadingBarStyle]})),[[vf,this.loading||!this.loading&&this.entering]])}})}}),iZ=Object.assign(Object.assign({},ur.props),{to:{type:[String,Object,Boolean],default:void 0},containerStyle:[String,Object],loadingBarStyle:{type:Object}}),oZ=pn({name:"LoadingBarProvider",props:iZ,setup(e){const t=gd(),n=He(null),i={start(){var u;t.value?(u=n.value)===null||u===void 0||u.start():Yi(()=>{var d;(d=n.value)===null||d===void 0||d.start()})},error(){var u;t.value?(u=n.value)===null||u===void 0||u.error():Yi(()=>{var d;(d=n.value)===null||d===void 0||d.error()})},finish(){var u;t.value?(u=n.value)===null||u===void 0||u.finish():Yi(()=>{var d;(d=n.value)===null||d===void 0||d.finish()})}},{mergedClsPrefixRef:s}=Ki(e);return Hi(bz,i),Hi(xz,{props:e,mergedClsPrefixRef:s}),Object.assign(i,{loadingBarRef:n})},render(){var e,t;return V(Vr,null,V(iT,{disabled:this.to===!1,to:this.to||"body"},V(rZ,{ref:"loadingBarRef",containerStyle:this.containerStyle})),(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e))}});function l0(){const e=fr(bz,null);return e===null&&Qy("use-loading-bar","No outer <n-loading-bar-provider /> founded."),e}const wz={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},Tz="n-message-api",Cz="n-message-provider",sZ=Ze([It("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[l7({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),It("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[xt("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),xt("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(e=>Nt(`${e}-type`,[Ze("> *",`
 color: var(--n-icon-color-${e});
 transition: color .3s var(--n-bezier);
 `)])),Ze("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Ym()])]),xt("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[Ze("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),Ze("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),It("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[Nt("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),Nt("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),Nt("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),Nt("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),Nt("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),Nt("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),aZ={info:()=>V(MH,null),success:()=>V(PH,null),warning:()=>V(kH,null),error:()=>V(EH,null),default:()=>null},lZ=pn({name:"Message",props:Object.assign(Object.assign({},wz),{render:Function}),setup(e){const{inlineThemeDisabled:t,mergedRtlRef:n}=Ki(e),{props:i,mergedClsPrefixRef:s}=fr(Cz),u=Fc("Message",n,s),d=ur("Message","-message",sZ,Uq,i,s),o=Le(()=>{const{type:y}=e,{common:{cubicBezierEaseInOut:w},self:{padding:S,margin:A,maxWidth:I,iconMargin:z,closeMargin:U,closeSize:j,iconSize:F,fontSize:H,lineHeight:J,borderRadius:Z,iconColorInfo:Y,iconColorSuccess:ce,iconColorWarning:ee,iconColorError:de,iconColorLoading:ue,closeIconSize:Ee,closeBorderRadius:ze,[an("textColor",y)]:xe,[an("boxShadow",y)]:qe,[an("color",y)]:Qe,[an("closeColorHover",y)]:Be,[an("closeColorPressed",y)]:st,[an("closeIconColor",y)]:it,[an("closeIconColorPressed",y)]:Pt,[an("closeIconColorHover",y)]:Ke}}=d.value;return{"--n-bezier":w,"--n-margin":A,"--n-padding":S,"--n-max-width":I,"--n-font-size":H,"--n-icon-margin":z,"--n-icon-size":F,"--n-close-icon-size":Ee,"--n-close-border-radius":ze,"--n-close-size":j,"--n-close-margin":U,"--n-text-color":xe,"--n-color":Qe,"--n-box-shadow":qe,"--n-icon-color-info":Y,"--n-icon-color-success":ce,"--n-icon-color-warning":ee,"--n-icon-color-error":de,"--n-icon-color-loading":ue,"--n-close-color-hover":Be,"--n-close-color-pressed":st,"--n-close-icon-color":it,"--n-close-icon-color-pressed":Pt,"--n-close-icon-color-hover":Ke,"--n-line-height":J,"--n-border-radius":Z}}),m=t?Xi("message",Le(()=>e.type[0]),o,{}):void 0;return{mergedClsPrefix:s,rtlEnabled:u,messageProviderProps:i,handleClose(){var y;(y=e.onClose)===null||y===void 0||y.call(e)},cssVars:t?void 0:o,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender,placement:i.placement}},render(){const{render:e,type:t,closable:n,content:i,mergedClsPrefix:s,cssVars:u,themeClass:d,onRender:o,icon:m,handleClose:y,showIcon:w}=this;o==null||o();let S;return V("div",{class:[`${s}-message-wrapper`,d],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},u]},e?e(this.$props):V("div",{class:[`${s}-message ${s}-message--${t}-type`,this.rtlEnabled&&`${s}-message--rtl`]},(S=cZ(m,t,s))&&w?V("div",{class:`${s}-message__icon ${s}-message__icon--${t}-type`},V(o0,null,{default:()=>S})):null,V("div",{class:`${s}-message__content`},Ju(i)),n?V(BI,{clsPrefix:s,class:`${s}-message__close`,onClick:y,absolute:!0}):null))}});function cZ(e,t,n){if(typeof e=="function")return e();{const i=t==="loading"?V(pg,{clsPrefix:n,strokeWidth:24,scale:.85}):aZ[t]();return i?V($s,{clsPrefix:n,key:t},{default:()=>i}):null}}const uZ=pn({name:"MessageEnvironment",props:Object.assign(Object.assign({},wz),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(e){let t=null;const n=He(!0);Si(()=>{i()});function i(){const{duration:w}=e;w&&(t=window.setTimeout(d,w))}function s(w){w.currentTarget===w.target&&t!==null&&(window.clearTimeout(t),t=null)}function u(w){w.currentTarget===w.target&&i()}function d(){const{onHide:w}=e;n.value=!1,t&&(window.clearTimeout(t),t=null),w&&w()}function o(){const{onClose:w}=e;w&&w(),d()}function m(){const{onAfterLeave:w,onInternalAfterLeave:S,onAfterHide:A,internalKey:I}=e;w&&w(),S&&S(I),A&&A()}function y(){d()}return{show:n,hide:d,handleClose:o,handleAfterLeave:m,handleMouseleave:u,handleMouseenter:s,deactivate:y}},render(){return V(zT,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?V(lZ,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),dZ=Object.assign(Object.assign({},ur.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerStyle:[String,Object]}),hZ=pn({name:"MessageProvider",props:dZ,setup(e){const{mergedClsPrefixRef:t}=Ki(e),n=He([]),i=He({}),s={create(m,y){return u(m,Object.assign({type:"default"},y))},info(m,y){return u(m,Object.assign(Object.assign({},y),{type:"info"}))},success(m,y){return u(m,Object.assign(Object.assign({},y),{type:"success"}))},warning(m,y){return u(m,Object.assign(Object.assign({},y),{type:"warning"}))},error(m,y){return u(m,Object.assign(Object.assign({},y),{type:"error"}))},loading(m,y){return u(m,Object.assign(Object.assign({},y),{type:"loading"}))},destroyAll:o};Hi(Cz,{props:e,mergedClsPrefixRef:t}),Hi(Tz,s);function u(m,y){const w=pD(),S=pd(Object.assign(Object.assign({},y),{content:m,key:w,destroy:()=>{var I;(I=i.value[w])===null||I===void 0||I.hide()}})),{max:A}=e;return A&&n.value.length>=A&&n.value.shift(),n.value.push(S),S}function d(m){n.value.splice(n.value.findIndex(y=>y.key===m),1),delete i.value[m]}function o(){Object.values(i.value).forEach(m=>{m.hide()})}return Object.assign({mergedClsPrefix:t,messageRefs:i,messageList:n,handleAfterLeave:d},s)},render(){var e,t,n;return V(Vr,null,(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e),this.messageList.length?V(iT,{to:(n=this.to)!==null&&n!==void 0?n:"body"},V("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`],key:"message-container",style:this.containerStyle},this.messageList.map(i=>V(uZ,Object.assign({ref:s=>{s&&(this.messageRefs[i.key]=s)},internalKey:i.key,onInternalAfterLeave:this.handleAfterLeave},v4(i,["destroy"],void 0),{duration:i.duration===void 0?this.duration:i.duration,keepAliveOnHover:i.keepAliveOnHover===void 0?this.keepAliveOnHover:i.keepAliveOnHover,closable:i.closable===void 0?this.closable:i.closable}))))):null)}});function Sz(){const e=fr(Tz,null);return e===null&&Qy("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}const fZ=Object.assign(Object.assign({},ur.props),{trigger:String,xScrollable:Boolean,onScroll:Function}),pZ=pn({name:"Scrollbar",props:fZ,setup(){const e=He(null);return Object.assign(Object.assign({},{scrollTo:(...n)=>{var i;(i=e.value)===null||i===void 0||i.scrollTo(n[0],n[1])},scrollBy:(...n)=>{var i;(i=e.value)===null||i===void 0||i.scrollBy(n[0],n[1])}}),{scrollbarInstRef:e})},render(){return V(xs,Object.assign({ref:"scrollbarInstRef"},this.$props),this.$slots)}}),mZ=pZ,gZ=Ze([Ze("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),It("spin-container",{position:"relative"},[It("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[OT()])]),It("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),It("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[Nt("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),It("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),It("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[Nt("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),vZ={small:20,medium:18,large:16},_Z=Object.assign(Object.assign({},ur.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),yZ=pn({name:"Spin",props:_Z,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=Ki(e),i=ur("Spin","-spin",gZ,qq,e,t),s=Le(()=>{const{size:d}=e,{common:{cubicBezierEaseInOut:o},self:m}=i.value,{opacitySpinning:y,color:w,textColor:S}=m,A=typeof d=="number"?oa(d):m[an("size",d)];return{"--n-bezier":o,"--n-opacity-spinning":y,"--n-size":A,"--n-color":w,"--n-text-color":S}}),u=n?Xi("spin",Le(()=>{const{size:d}=e;return typeof d=="number"?String(d):d[0]}),s,e):void 0;return{mergedClsPrefix:t,compitableShow:uT(e,["spinning","show"]),mergedStrokeWidth:Le(()=>{const{strokeWidth:d}=e;if(d!==void 0)return d;const{size:o}=e;return vZ[typeof o=="number"?"medium":o]}),cssVars:n?void 0:s,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var e,t;const{$slots:n,mergedClsPrefix:i,description:s}=this,u=n.icon&&this.rotate,d=(s||n.description)&&V("div",{class:`${i}-spin-description`},s||((e=n.description)===null||e===void 0?void 0:e.call(n))),o=n.icon?V("div",{class:[`${i}-spin-body`,this.themeClass]},V("div",{class:[`${i}-spin`,u&&`${i}-spin--rotate`],style:n.default?"":this.cssVars},n.icon()),d):V("div",{class:[`${i}-spin-body`,this.themeClass]},V(pg,{clsPrefix:i,style:n.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${i}-spin`}),d);return(t=this.onRender)===null||t===void 0||t.call(this),n.default?V("div",{class:[`${i}-spin-container`,this.themeClass],style:this.cssVars},V("div",{class:[`${i}-spin-content`,this.compitableShow&&`${i}-spin-content--spinning`]},n),V(Yo,{name:"fade-in-transition"},{default:()=>this.compitableShow?o:null})):o}}),xZ=Ze([It("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[Ze("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[Ze("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),Ze("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[Ze("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),Nt("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[Ze("tr",[Ze("&:last-child",[Ze("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),Nt("single-line",[Ze("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),Ze("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),Nt("single-column",[Ze("tr",[Ze("&:not(:last-child)",[Ze("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),Nt("striped",[Ze("tr:nth-of-type(even)",[Ze("td","background-color: var(--n-td-color-striped)")])]),ai("bottom-bordered",[Ze("tr",[Ze("&:last-child",[Ze("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),U4(It("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[Ze("th",`
 background-color: var(--n-th-color-modal);
 `),Ze("td",`
 background-color: var(--n-td-color-modal);
 `)])),V4(It("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[Ze("th",`
 background-color: var(--n-th-color-popover);
 `),Ze("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),bZ=Object.assign(Object.assign({},ur.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),Xm=pn({name:"Table",props:bZ,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:i}=Ki(e),s=ur("Table","-table",xZ,Kq,e,t),u=Fc("Table",i,t),d=Le(()=>{const{size:m}=e,{self:{borderColor:y,tdColor:w,tdColorModal:S,tdColorPopover:A,thColor:I,thColorModal:z,thColorPopover:U,thTextColor:j,tdTextColor:F,borderRadius:H,thFontWeight:J,lineHeight:Z,borderColorModal:Y,borderColorPopover:ce,tdColorStriped:ee,tdColorStripedModal:de,tdColorStripedPopover:ue,[an("fontSize",m)]:Ee,[an("tdPadding",m)]:ze,[an("thPadding",m)]:xe},common:{cubicBezierEaseInOut:qe}}=s.value;return{"--n-bezier":qe,"--n-td-color":w,"--n-td-color-modal":S,"--n-td-color-popover":A,"--n-td-text-color":F,"--n-border-color":y,"--n-border-color-modal":Y,"--n-border-color-popover":ce,"--n-border-radius":H,"--n-font-size":Ee,"--n-th-color":I,"--n-th-color-modal":z,"--n-th-color-popover":U,"--n-th-font-weight":J,"--n-th-text-color":j,"--n-line-height":Z,"--n-td-padding":ze,"--n-th-padding":xe,"--n-td-color-striped":ee,"--n-td-color-striped-modal":de,"--n-td-color-striped-popover":ue}}),o=n?Xi("table",Le(()=>e.size[0]),d,e):void 0;return{rtlEnabled:u,mergedClsPrefix:t,cssVars:n?void 0:d,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),V("table",{class:[`${t}-table`,this.themeClass,{[`${t}-table--rtl`]:this.rtlEnabled,[`${t}-table--bottom-bordered`]:this.bottomBordered,[`${t}-table--bordered`]:this.bordered,[`${t}-table--single-line`]:this.singleLine,[`${t}-table--single-column`]:this.singleColumn,[`${t}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),wZ=It("h",`
 font-size: var(--n-font-size);
 font-weight: var(--n-font-weight);
 margin: var(--n-margin);
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[Ze("&:first-child",{marginTop:0}),Nt("prefix-bar",{position:"relative",paddingLeft:"var(--n-prefix-width)"},[Nt("align-text",{paddingLeft:0},[Ze("&::before",{left:"calc(-1 * var(--n-prefix-width))"})]),Ze("&::before",`
 content: "";
 width: var(--n-bar-width);
 border-radius: calc(var(--n-bar-width) / 2);
 transition: background-color .3s var(--n-bezier);
 left: 0;
 top: 0;
 bottom: 0;
 position: absolute;
 `),Ze("&::before",{backgroundColor:"var(--n-bar-color)"})])]),TZ=Object.assign(Object.assign({},ur.props),{type:{type:String,default:"default"},prefix:String,alignText:Boolean}),Tf=e=>pn({name:`H${e}`,props:TZ,setup(t){const{mergedClsPrefixRef:n,inlineThemeDisabled:i}=Ki(t),s=ur("Typography","-h",wZ,tZ,t,n),u=Le(()=>{const{type:o}=t,{common:{cubicBezierEaseInOut:m},self:{headerFontWeight:y,headerTextColor:w,[an("headerPrefixWidth",e)]:S,[an("headerFontSize",e)]:A,[an("headerMargin",e)]:I,[an("headerBarWidth",e)]:z,[an("headerBarColor",o)]:U}}=s.value;return{"--n-bezier":m,"--n-font-size":A,"--n-margin":I,"--n-bar-color":U,"--n-bar-width":z,"--n-font-weight":y,"--n-text-color":w,"--n-prefix-width":S}}),d=i?Xi(`h${e}`,Le(()=>t.type[0]),u,t):void 0;return{mergedClsPrefix:n,cssVars:i?void 0:u,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){var t;const{prefix:n,alignText:i,mergedClsPrefix:s,cssVars:u,$slots:d}=this;return(t=this.onRender)===null||t===void 0||t.call(this),V(`h${e}`,{class:[`${s}-h`,`${s}-h${e}`,this.themeClass,{[`${s}-h--prefix-bar`]:n,[`${s}-h--align-text`]:i}],style:u},d)}}),_P=Tf("1"),vg=Tf("2");Tf("3");Tf("4");Tf("5");Tf("6");const CZ=pn({__name:"App",setup(e){return(t,n)=>(si(),qo(cr(mZ),{style:{"max-height":"100vh"}},{default:Gr(()=>[tr(cr(oZ),null,{default:Gr(()=>[tr(cr(hZ),null,{default:Gr(()=>[tr(cr(hD))]),_:1})]),_:1})]),_:1}))}});function Ez(e,t){return function(){return e.apply(t,arguments)}}const{toString:SZ}=Object.prototype,{getPrototypeOf:GT}=Object,c0=(e=>t=>{const n=SZ.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qa=e=>(e=e.toLowerCase(),t=>c0(t)===e),u0=e=>t=>typeof t===e,{isArray:Cf}=Array,Km=u0("undefined");function EZ(e){return e!==null&&!Km(e)&&e.constructor!==null&&!Km(e.constructor)&&Ns(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Mz=qa("ArrayBuffer");function MZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Mz(e.buffer),t}const PZ=u0("string"),Ns=u0("function"),Pz=u0("number"),d0=e=>e!==null&&typeof e=="object",AZ=e=>e===!0||e===!1,H_=e=>{if(c0(e)!=="object")return!1;const t=GT(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kZ=qa("Date"),DZ=qa("File"),IZ=qa("Blob"),zZ=qa("FileList"),RZ=e=>d0(e)&&Ns(e.pipe),OZ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ns(e.append)&&((t=c0(e))==="formdata"||t==="object"&&Ns(e.toString)&&e.toString()==="[object FormData]"))},LZ=qa("URLSearchParams"),BZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _g(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),Cf(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{const u=n?Object.getOwnPropertyNames(e):Object.keys(e),d=u.length;let o;for(i=0;i<d;i++)o=u[i],t.call(null,e[o],o,e)}}function Az(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const kz=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Dz=e=>!Km(e)&&e!==kz;function fw(){const{caseless:e}=Dz(this)&&this||{},t={},n=(i,s)=>{const u=e&&Az(t,s)||s;H_(t[u])&&H_(i)?t[u]=fw(t[u],i):H_(i)?t[u]=fw({},i):Cf(i)?t[u]=i.slice():t[u]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&_g(arguments[i],n);return t}const FZ=(e,t,n,{allOwnKeys:i}={})=>(_g(t,(s,u)=>{n&&Ns(s)?e[u]=Ez(s,n):e[u]=s},{allOwnKeys:i}),e),$Z=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),NZ=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},UZ=(e,t,n,i)=>{let s,u,d;const o={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)d=s[u],(!i||i(d,e,t))&&!o[d]&&(t[d]=e[d],o[d]=!0);e=n!==!1&&GT(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},VZ=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},jZ=e=>{if(!e)return null;if(Cf(e))return e;let t=e.length;if(!Pz(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},WZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&GT(Uint8Array)),HZ=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const u=s.value;t.call(e,u[0],u[1])}},GZ=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},qZ=qa("HTMLFormElement"),ZZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),yP=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),YZ=qa("RegExp"),Iz=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};_g(n,(s,u)=>{t(s,u,e)!==!1&&(i[u]=s)}),Object.defineProperties(e,i)},XZ=e=>{Iz(e,(t,n)=>{if(Ns(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Ns(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},KZ=(e,t)=>{const n={},i=s=>{s.forEach(u=>{n[u]=!0})};return Cf(e)?i(e):i(String(e).split(t)),n},JZ=()=>{},QZ=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Pb="abcdefghijklmnopqrstuvwxyz",xP="0123456789",zz={DIGIT:xP,ALPHA:Pb,ALPHA_DIGIT:Pb+Pb.toUpperCase()+xP},eY=(e=16,t=zz.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function tY(e){return!!(e&&Ns(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const nY=e=>{const t=new Array(10),n=(i,s)=>{if(d0(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const u=Cf(i)?[]:{};return _g(i,(d,o)=>{const m=n(d,s+1);!Km(m)&&(u[o]=m)}),t[s]=void 0,u}}return i};return n(e,0)},rY=qa("AsyncFunction"),iY=e=>e&&(d0(e)||Ns(e))&&Ns(e.then)&&Ns(e.catch),Ft={isArray:Cf,isArrayBuffer:Mz,isBuffer:EZ,isFormData:OZ,isArrayBufferView:MZ,isString:PZ,isNumber:Pz,isBoolean:AZ,isObject:d0,isPlainObject:H_,isUndefined:Km,isDate:kZ,isFile:DZ,isBlob:IZ,isRegExp:YZ,isFunction:Ns,isStream:RZ,isURLSearchParams:LZ,isTypedArray:WZ,isFileList:zZ,forEach:_g,merge:fw,extend:FZ,trim:BZ,stripBOM:$Z,inherits:NZ,toFlatObject:UZ,kindOf:c0,kindOfTest:qa,endsWith:VZ,toArray:jZ,forEachEntry:HZ,matchAll:GZ,isHTMLForm:qZ,hasOwnProperty:yP,hasOwnProp:yP,reduceDescriptors:Iz,freezeMethods:XZ,toObjectSet:KZ,toCamelCase:ZZ,noop:JZ,toFiniteNumber:QZ,findKey:Az,global:kz,isContextDefined:Dz,ALPHABET:zz,generateString:eY,isSpecCompliantForm:tY,toJSONObject:nY,isAsyncFn:rY,isThenable:iY};function Lr(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}Ft.inherits(Lr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ft.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Rz=Lr.prototype,Oz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Oz[e]={value:e}});Object.defineProperties(Lr,Oz);Object.defineProperty(Rz,"isAxiosError",{value:!0});Lr.from=(e,t,n,i,s,u)=>{const d=Object.create(Rz);return Ft.toFlatObject(e,d,function(m){return m!==Error.prototype},o=>o!=="isAxiosError"),Lr.call(d,e.message,t,n,i,s),d.cause=e,d.name=e.name,u&&Object.assign(d,u),d};const oY=null;function pw(e){return Ft.isPlainObject(e)||Ft.isArray(e)}function Lz(e){return Ft.endsWith(e,"[]")?e.slice(0,-2):e}function bP(e,t,n){return e?e.concat(t).map(function(s,u){return s=Lz(s),!n&&u?"["+s+"]":s}).join(n?".":""):t}function sY(e){return Ft.isArray(e)&&!e.some(pw)}const aY=Ft.toFlatObject(Ft,{},null,function(t){return/^is[A-Z]/.test(t)});function h0(e,t,n){if(!Ft.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ft.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,j){return!Ft.isUndefined(j[U])});const i=n.metaTokens,s=n.visitor||w,u=n.dots,d=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&Ft.isSpecCompliantForm(t);if(!Ft.isFunction(s))throw new TypeError("visitor must be a function");function y(z){if(z===null)return"";if(Ft.isDate(z))return z.toISOString();if(!m&&Ft.isBlob(z))throw new Lr("Blob is not supported. Use a Buffer instead.");return Ft.isArrayBuffer(z)||Ft.isTypedArray(z)?m&&typeof Blob=="function"?new Blob([z]):Buffer.from(z):z}function w(z,U,j){let F=z;if(z&&!j&&typeof z=="object"){if(Ft.endsWith(U,"{}"))U=i?U:U.slice(0,-2),z=JSON.stringify(z);else if(Ft.isArray(z)&&sY(z)||(Ft.isFileList(z)||Ft.endsWith(U,"[]"))&&(F=Ft.toArray(z)))return U=Lz(U),F.forEach(function(J,Z){!(Ft.isUndefined(J)||J===null)&&t.append(d===!0?bP([U],Z,u):d===null?U:U+"[]",y(J))}),!1}return pw(z)?!0:(t.append(bP(j,U,u),y(z)),!1)}const S=[],A=Object.assign(aY,{defaultVisitor:w,convertValue:y,isVisitable:pw});function I(z,U){if(!Ft.isUndefined(z)){if(S.indexOf(z)!==-1)throw Error("Circular reference detected in "+U.join("."));S.push(z),Ft.forEach(z,function(F,H){(!(Ft.isUndefined(F)||F===null)&&s.call(t,F,Ft.isString(H)?H.trim():H,U,A))===!0&&I(F,U?U.concat(H):[H])}),S.pop()}}if(!Ft.isObject(e))throw new TypeError("data must be an object");return I(e),t}function wP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function qT(e,t){this._pairs=[],e&&h0(e,this,t)}const Bz=qT.prototype;Bz.append=function(t,n){this._pairs.push([t,n])};Bz.toString=function(t){const n=t?function(i){return t.call(this,i,wP)}:wP;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function lY(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fz(e,t,n){if(!t)return e;const i=n&&n.encode||lY,s=n&&n.serialize;let u;if(s?u=s(t,n):u=Ft.isURLSearchParams(t)?t.toString():new qT(t,n).toString(i),u){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class cY{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ft.forEach(this.handlers,function(i){i!==null&&t(i)})}}const TP=cY,$z={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uY=typeof URLSearchParams<"u"?URLSearchParams:qT,dY=typeof FormData<"u"?FormData:null,hY=typeof Blob<"u"?Blob:null,fY=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),pY=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),$a={isBrowser:!0,classes:{URLSearchParams:uY,FormData:dY,Blob:hY},isStandardBrowserEnv:fY,isStandardBrowserWebWorkerEnv:pY,protocols:["http","https","file","blob","url","data"]};function mY(e,t){return h0(e,new $a.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,u){return $a.isNode&&Ft.isBuffer(n)?(this.append(i,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function gY(e){return Ft.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function vY(e){const t={},n=Object.keys(e);let i;const s=n.length;let u;for(i=0;i<s;i++)u=n[i],t[u]=e[u];return t}function Nz(e){function t(n,i,s,u){let d=n[u++];const o=Number.isFinite(+d),m=u>=n.length;return d=!d&&Ft.isArray(s)?s.length:d,m?(Ft.hasOwnProp(s,d)?s[d]=[s[d],i]:s[d]=i,!o):((!s[d]||!Ft.isObject(s[d]))&&(s[d]=[]),t(n,i,s[d],u)&&Ft.isArray(s[d])&&(s[d]=vY(s[d])),!o)}if(Ft.isFormData(e)&&Ft.isFunction(e.entries)){const n={};return Ft.forEachEntry(e,(i,s)=>{t(gY(i),s,n,0)}),n}return null}const _Y={"Content-Type":void 0};function yY(e,t,n){if(Ft.isString(e))try{return(t||JSON.parse)(e),Ft.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const f0={transitional:$z,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,u=Ft.isObject(t);if(u&&Ft.isHTMLForm(t)&&(t=new FormData(t)),Ft.isFormData(t))return s&&s?JSON.stringify(Nz(t)):t;if(Ft.isArrayBuffer(t)||Ft.isBuffer(t)||Ft.isStream(t)||Ft.isFile(t)||Ft.isBlob(t))return t;if(Ft.isArrayBufferView(t))return t.buffer;if(Ft.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return mY(t,this.formSerializer).toString();if((o=Ft.isFileList(t))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return h0(o?{"files[]":t}:t,m&&new m,this.formSerializer)}}return u||s?(n.setContentType("application/json",!1),yY(t)):t}],transformResponse:[function(t){const n=this.transitional||f0.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&Ft.isString(t)&&(i&&!this.responseType||s)){const d=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(o){if(d)throw o.name==="SyntaxError"?Lr.from(o,Lr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$a.classes.FormData,Blob:$a.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ft.forEach(["delete","get","head"],function(t){f0.headers[t]={}});Ft.forEach(["post","put","patch"],function(t){f0.headers[t]=Ft.merge(_Y)});const ZT=f0,xY=Ft.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bY=e=>{const t={};let n,i,s;return e&&e.split(`
`).forEach(function(d){s=d.indexOf(":"),n=d.substring(0,s).trim().toLowerCase(),i=d.substring(s+1).trim(),!(!n||t[n]&&xY[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},CP=Symbol("internals");function Qp(e){return e&&String(e).trim().toLowerCase()}function G_(e){return e===!1||e==null?e:Ft.isArray(e)?e.map(G_):String(e)}function wY(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const TY=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ab(e,t,n,i,s){if(Ft.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!Ft.isString(t)){if(Ft.isString(i))return t.indexOf(i)!==-1;if(Ft.isRegExp(i))return i.test(t)}}function CY(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function SY(e,t){const n=Ft.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(s,u,d){return this[i].call(this,t,s,u,d)},configurable:!0})})}class p0{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function u(o,m,y){const w=Qp(m);if(!w)throw new Error("header name must be a non-empty string");const S=Ft.findKey(s,w);(!S||s[S]===void 0||y===!0||y===void 0&&s[S]!==!1)&&(s[S||m]=G_(o))}const d=(o,m)=>Ft.forEach(o,(y,w)=>u(y,w,m));return Ft.isPlainObject(t)||t instanceof this.constructor?d(t,n):Ft.isString(t)&&(t=t.trim())&&!TY(t)?d(bY(t),n):t!=null&&u(n,t,i),this}get(t,n){if(t=Qp(t),t){const i=Ft.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return wY(s);if(Ft.isFunction(n))return n.call(this,s,i);if(Ft.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Qp(t),t){const i=Ft.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Ab(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function u(d){if(d=Qp(d),d){const o=Ft.findKey(i,d);o&&(!n||Ab(i,i[o],o,n))&&(delete i[o],s=!0)}}return Ft.isArray(t)?t.forEach(u):u(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const u=n[i];(!t||Ab(this,this[u],u,t,!0))&&(delete this[u],s=!0)}return s}normalize(t){const n=this,i={};return Ft.forEach(this,(s,u)=>{const d=Ft.findKey(i,u);if(d){n[d]=G_(s),delete n[u];return}const o=t?CY(u):String(u).trim();o!==u&&delete n[u],n[o]=G_(s),i[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ft.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&Ft.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[CP]=this[CP]={accessors:{}}).accessors,s=this.prototype;function u(d){const o=Qp(d);i[o]||(SY(s,d),i[o]=!0)}return Ft.isArray(t)?t.forEach(u):u(t),this}}p0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ft.freezeMethods(p0.prototype);Ft.freezeMethods(p0);const Cl=p0;function kb(e,t){const n=this||ZT,i=t||n,s=Cl.from(i.headers);let u=i.data;return Ft.forEach(e,function(o){u=o.call(n,u,s.normalize(),t?t.status:void 0)}),s.normalize(),u}function Uz(e){return!!(e&&e.__CANCEL__)}function yg(e,t,n){Lr.call(this,e??"canceled",Lr.ERR_CANCELED,t,n),this.name="CanceledError"}Ft.inherits(yg,Lr,{__CANCEL__:!0});function EY(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Lr("Request failed with status code "+n.status,[Lr.ERR_BAD_REQUEST,Lr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const MY=$a.isStandardBrowserEnv?function(){return{write:function(n,i,s,u,d,o){const m=[];m.push(n+"="+encodeURIComponent(i)),Ft.isNumber(s)&&m.push("expires="+new Date(s).toGMTString()),Ft.isString(u)&&m.push("path="+u),Ft.isString(d)&&m.push("domain="+d),o===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function PY(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function AY(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Vz(e,t){return e&&!PY(t)?AY(e,t):t}const kY=$a.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(u){let d=u;return t&&(n.setAttribute("href",d),d=n.href),n.setAttribute("href",d),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(d){const o=Ft.isString(d)?s(d):d;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function DY(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function IY(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s=0,u=0,d;return t=t!==void 0?t:1e3,function(m){const y=Date.now(),w=i[u];d||(d=y),n[s]=m,i[s]=y;let S=u,A=0;for(;S!==s;)A+=n[S++],S=S%e;if(s=(s+1)%e,s===u&&(u=(u+1)%e),y-d<t)return;const I=w&&y-w;return I?Math.round(A*1e3/I):void 0}}function SP(e,t){let n=0;const i=IY(50,250);return s=>{const u=s.loaded,d=s.lengthComputable?s.total:void 0,o=u-n,m=i(o),y=u<=d;n=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:o,rate:m||void 0,estimated:m&&d&&y?(d-u)/m:void 0,event:s};w[t?"download":"upload"]=!0,e(w)}}const zY=typeof XMLHttpRequest<"u",RY=zY&&function(e){return new Promise(function(n,i){let s=e.data;const u=Cl.from(e.headers).normalize(),d=e.responseType;let o;function m(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}Ft.isFormData(s)&&($a.isStandardBrowserEnv||$a.isStandardBrowserWebWorkerEnv?u.setContentType(!1):u.setContentType("multipart/form-data;",!1));let y=new XMLHttpRequest;if(e.auth){const I=e.auth.username||"",z=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa(I+":"+z))}const w=Vz(e.baseURL,e.url);y.open(e.method.toUpperCase(),Fz(w,e.params,e.paramsSerializer),!0),y.timeout=e.timeout;function S(){if(!y)return;const I=Cl.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),U={data:!d||d==="text"||d==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:I,config:e,request:y};EY(function(F){n(F),m()},function(F){i(F),m()},U),y=null}if("onloadend"in y?y.onloadend=S:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(S)},y.onabort=function(){y&&(i(new Lr("Request aborted",Lr.ECONNABORTED,e,y)),y=null)},y.onerror=function(){i(new Lr("Network Error",Lr.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let z=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const U=e.transitional||$z;e.timeoutErrorMessage&&(z=e.timeoutErrorMessage),i(new Lr(z,U.clarifyTimeoutError?Lr.ETIMEDOUT:Lr.ECONNABORTED,e,y)),y=null},$a.isStandardBrowserEnv){const I=(e.withCredentials||kY(w))&&e.xsrfCookieName&&MY.read(e.xsrfCookieName);I&&u.set(e.xsrfHeaderName,I)}s===void 0&&u.setContentType(null),"setRequestHeader"in y&&Ft.forEach(u.toJSON(),function(z,U){y.setRequestHeader(U,z)}),Ft.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),d&&d!=="json"&&(y.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&y.addEventListener("progress",SP(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",SP(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=I=>{y&&(i(!I||I.type?new yg(null,e,y):I),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const A=DY(w);if(A&&$a.protocols.indexOf(A)===-1){i(new Lr("Unsupported protocol "+A+":",Lr.ERR_BAD_REQUEST,e));return}y.send(s||null)})},q_={http:oY,xhr:RY};Ft.forEach(q_,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const OY={getAdapter:e=>{e=Ft.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let s=0;s<t&&(n=e[s],!(i=Ft.isString(n)?q_[n.toLowerCase()]:n));s++);if(!i)throw i===!1?new Lr(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ft.hasOwnProp(q_,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!Ft.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:q_};function Db(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yg(null,e)}function EP(e){return Db(e),e.headers=Cl.from(e.headers),e.data=kb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),OY.getAdapter(e.adapter||ZT.adapter)(e).then(function(i){return Db(e),i.data=kb.call(e,e.transformResponse,i),i.headers=Cl.from(i.headers),i},function(i){return Uz(i)||(Db(e),i&&i.response&&(i.response.data=kb.call(e,e.transformResponse,i.response),i.response.headers=Cl.from(i.response.headers))),Promise.reject(i)})}const MP=e=>e instanceof Cl?e.toJSON():e;function uf(e,t){t=t||{};const n={};function i(y,w,S){return Ft.isPlainObject(y)&&Ft.isPlainObject(w)?Ft.merge.call({caseless:S},y,w):Ft.isPlainObject(w)?Ft.merge({},w):Ft.isArray(w)?w.slice():w}function s(y,w,S){if(Ft.isUndefined(w)){if(!Ft.isUndefined(y))return i(void 0,y,S)}else return i(y,w,S)}function u(y,w){if(!Ft.isUndefined(w))return i(void 0,w)}function d(y,w){if(Ft.isUndefined(w)){if(!Ft.isUndefined(y))return i(void 0,y)}else return i(void 0,w)}function o(y,w,S){if(S in t)return i(y,w);if(S in e)return i(void 0,y)}const m={url:u,method:u,data:u,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:o,headers:(y,w)=>s(MP(y),MP(w),!0)};return Ft.forEach(Object.keys(Object.assign({},e,t)),function(w){const S=m[w]||s,A=S(e[w],t[w],w);Ft.isUndefined(A)&&S!==o||(n[w]=A)}),n}const jz="1.4.0",YT={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{YT[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const PP={};YT.transitional=function(t,n,i){function s(u,d){return"[Axios v"+jz+"] Transitional option '"+u+"'"+d+(i?". "+i:"")}return(u,d,o)=>{if(t===!1)throw new Lr(s(d," has been removed"+(n?" in "+n:"")),Lr.ERR_DEPRECATED);return n&&!PP[d]&&(PP[d]=!0,console.warn(s(d," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,d,o):!0}};function LY(e,t,n){if(typeof e!="object")throw new Lr("options must be an object",Lr.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const u=i[s],d=t[u];if(d){const o=e[u],m=o===void 0||d(o,u,e);if(m!==!0)throw new Lr("option "+u+" must be "+m,Lr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Lr("Unknown option "+u,Lr.ERR_BAD_OPTION)}}const mw={assertOptions:LY,validators:YT},mc=mw.validators;class Dy{constructor(t){this.defaults=t,this.interceptors={request:new TP,response:new TP}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=uf(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:u}=n;i!==void 0&&mw.assertOptions(i,{silentJSONParsing:mc.transitional(mc.boolean),forcedJSONParsing:mc.transitional(mc.boolean),clarifyTimeoutError:mc.transitional(mc.boolean)},!1),s!=null&&(Ft.isFunction(s)?n.paramsSerializer={serialize:s}:mw.assertOptions(s,{encode:mc.function,serialize:mc.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d;d=u&&Ft.merge(u.common,u[n.method]),d&&Ft.forEach(["delete","get","head","post","put","patch","common"],z=>{delete u[z]}),n.headers=Cl.concat(d,u);const o=[];let m=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(n)===!1||(m=m&&U.synchronous,o.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let w,S=0,A;if(!m){const z=[EP.bind(this),void 0];for(z.unshift.apply(z,o),z.push.apply(z,y),A=z.length,w=Promise.resolve(n);S<A;)w=w.then(z[S++],z[S++]);return w}A=o.length;let I=n;for(S=0;S<A;){const z=o[S++],U=o[S++];try{I=z(I)}catch(j){U.call(this,j);break}}try{w=EP.call(this,I)}catch(z){return Promise.reject(z)}for(S=0,A=y.length;S<A;)w=w.then(y[S++],y[S++]);return w}getUri(t){t=uf(this.defaults,t);const n=Vz(t.baseURL,t.url);return Fz(n,t.params,t.paramsSerializer)}}Ft.forEach(["delete","get","head","options"],function(t){Dy.prototype[t]=function(n,i){return this.request(uf(i||{},{method:t,url:n,data:(i||{}).data}))}});Ft.forEach(["post","put","patch"],function(t){function n(i){return function(u,d,o){return this.request(uf(o||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Dy.prototype[t]=n(),Dy.prototype[t+"Form"]=n(!0)});const Z_=Dy;class XT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const i=this;this.promise.then(s=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](s);i._listeners=null}),this.promise.then=s=>{let u;const d=new Promise(o=>{i.subscribe(o),u=o}).then(s);return d.cancel=function(){i.unsubscribe(u)},d},t(function(u,d,o){i.reason||(i.reason=new yg(u,d,o),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new XT(function(s){t=s}),cancel:t}}}const BY=XT;function FY(e){return function(n){return e.apply(null,n)}}function $Y(e){return Ft.isObject(e)&&e.isAxiosError===!0}const gw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gw).forEach(([e,t])=>{gw[t]=e});const NY=gw;function Wz(e){const t=new Z_(e),n=Ez(Z_.prototype.request,t);return Ft.extend(n,Z_.prototype,t,{allOwnKeys:!0}),Ft.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Wz(uf(e,s))},n}const so=Wz(ZT);so.Axios=Z_;so.CanceledError=yg;so.CancelToken=BY;so.isCancel=Uz;so.VERSION=jz;so.toFormData=h0;so.AxiosError=Lr;so.Cancel=so.CanceledError;so.all=function(t){return Promise.all(t)};so.spread=FY;so.isAxiosError=$Y;so.mergeConfig=uf;so.AxiosHeaders=Cl;so.formToJSON=e=>Nz(Ft.isHTMLForm(e)?new FormData(e):e);so.HttpStatusCode=NY;so.default=so;const Sd=so,UY=()=>{const t='SELECT * FROM "cb596deb-3a28-45ce-aa78-de71e75550fd" LIMIT 7';return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${t}`).then(n=>n.data.result.records).catch(n=>null)},VY=()=>{const t='SELECT * FROM "cb596deb-3a28-45ce-aa78-de71e75550fd" LIMIT 1';return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${t}`).then(n=>n.data.result.records[0]).catch(n=>null)},jY=e=>{const n=`SELECT * FROM "cb596deb-3a28-45ce-aa78-de71e75550fd" WHERE data = '${e}'`;return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${n}`).then(i=>i.data.result.records[0]).catch(i=>null)},Hz=e=>{const n=`SELECT * FROM "d81b5f7d-20b8-4e3e-95cf-fbe3459dc1d2" WHERE data = '${e}'`;return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${n}`).then(i=>i.data.result.records).catch(i=>null)},Gz=()=>{const e="b301f327-7504-4efc-8b4a-5f4a29f9d0ff",t=new Date,n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),i=`SELECT * FROM "${e}" WHERE fine_operativita > '${n}'`;return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${i}`).then(s=>s.data.result.records).catch(s=>null)},WY=e=>{const n=`SELECT inquinanti FROM "b301f327-7504-4efc-8b4a-5f4a29f9d0ff" WHERE _id = '${e}'`;return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${n}`).then(i=>i.data.result.records[0].inquinanti.split(", ")).catch(i=>null)},HY=(e,t)=>{const i=`SELECT stazione_id, inquinante, valore, data FROM "d81b5f7d-20b8-4e3e-95cf-fbe3459dc1d2" 
                   WHERE stazione_id = '${e}' AND inquinante = '${t}' ORDER BY data`;return Sd.get(`https://dati.comune.milano.it/api/3/action/datastore_search_sql?sql=${i}`).then(s=>s.data.result.records).catch(s=>null)},GY=Tn("thead",null,[Tn("tr",null,[Tn("th",null,"Data"),Tn("th",null,"Descrizione"),Tn("th",null,"Previsione"),Tn("th",null,"Tendenza")])],-1),qY=Tn("thead",null,[Tn("tr",null,[Tn("th",null,"Data"),Tn("th",null,"Stazione"),Tn("th",null,"Inquinante"),Tn("th",null,"Valore")])],-1),ZY=pn({__name:"LastReport",setup(e){const t=l0(),n=He(!1),i=He(null),s=He(null),u=He(!1),d=He("Mostra dettagli"),o=y=>new Date(y).toLocaleDateString("it-IT"),m=async y=>{!s.value&&!u.value?(t.start(),s.value=await Hz(y),u.value=!0,d.value="Nascondi dettagli",s.value?t.finish():t.error()):s.value&&!u.value?(u.value=!0,d.value="Nascondi dettagli"):(u.value=!1,d.value="Mostra dettagli")};return Si(async()=>{t.start(),i.value=await VY(),i.value?(t.finish(),n.value=!0):t.error()}),(y,w)=>{const S=QS("n-grid-item"),A=QS("n-grid");return si(),Fs(Vr,null,[n.value?Fa("",!0):(si(),qo(A,{key:0,cols:"1",style:{padding:"100px"}},{default:Gr(()=>[tr(S,{span:"1"},{default:Gr(()=>[tr(cr(HT),{justify:"center"},{default:Gr(()=>[tr(cr(yZ),{size:"small"})]),_:1})]),_:1})]),_:1})),tr(cr(vg),null,{default:Gr(()=>[Ui("Report pi recente "),tr(cr(E7),{value:"Last"})]),_:1}),i.value?(si(),qo(cr(Xm),{key:1,bordered:!0,"single-line":!1},{default:Gr(()=>[GY,Tn("tbody",null,[Tn("tr",null,[Tn("td",null,Di(o(i.value.data)),1),Tn("td",null,Di(i.value.descrizione),1),Tn("td",null,Di(i.value.previsione),1),Tn("td",null,Di(i.value.tendenza),1)])])]),_:1})):Fa("",!0),i.value?(si(),qo(cr(yo),{key:2,onClick:w[0]||(w[0]=I=>m(i.value.data)),style:{margin:"8px 0"}},{default:Gr(()=>[Ui(Di(d.value),1)]),_:1})):Fa("",!0),u.value?(si(),qo(cr(Xm),{key:3,bordered:!0,"single-line":!1},{default:Gr(()=>[qY,Tn("tbody",null,[(si(!0),Fs(Vr,null,Qw(s.value,I=>(si(),Fs("tr",{key:I._id},[Tn("td",null,Di(o(I.data)),1),Tn("td",null,Di(I.stazione_id),1),Tn("td",null,Di(I.inquinante),1),Tn("td",null,Di(I.valore),1)]))),128))])]),_:1})):Fa("",!0)],64)}}}),YY=Tn("p",null,"Clicca per vedere i report degli ultimi sette giorni.",-1),XY=Tn("thead",null,[Tn("tr",null,[Tn("th",null,"Data"),Tn("th",null,"Descrizione"),Tn("th",null,"Previsione"),Tn("th",null,"Tendenza")])],-1),KY=pn({__name:"RecentReports",setup(e){const t=l0(),n=He(null),i=He(!1),s=He("Mostra dati"),u=o=>new Date(o).toLocaleDateString("it-IT"),d=async()=>{!n.value&&!i.value?(t.start(),n.value=await UY(),i.value=!0,s.value="Nascondi dati",n.value?t.finish():t.error()):n.value&&!i.value?(i.value=!0,s.value="Nascondi dati"):(i.value=!1,s.value="Mostra dati")};return(o,m)=>(si(),Fs(Vr,null,[tr(cr(vg),{style:{"margin-top":"50px"}},{default:Gr(()=>[Ui("Ultimi sette report")]),_:1}),YY,tr(cr(yo),{onClick:d,type:"primary",ghost:"",style:{margin:"8px 0"}},{default:Gr(()=>[Ui(Di(s.value),1)]),_:1}),i.value?(si(),qo(cr(Xm),{key:0,bordered:!0,"single-line":!1},{default:Gr(()=>[XY,Tn("tbody",null,[(si(!0),Fs(Vr,null,Qw(n.value,y=>(si(),Fs("tr",{key:y._id},[Tn("td",null,Di(u(y.data)),1),Tn("td",null,Di(y.descrizione),1),Tn("td",null,Di(y.previsione),1),Tn("td",null,Di(y.tendenza),1)]))),128))])]),_:1})):Fa("",!0)],64))}}),JY=Tn("thead",null,[Tn("tr",null,[Tn("th",null,"Data"),Tn("th",null,"Descrizione"),Tn("th",null,"Previsione"),Tn("th",null,"Tendenza")])],-1),QY=Tn("thead",null,[Tn("tr",null,[Tn("th",null,"Data"),Tn("th",null,"Stazione"),Tn("th",null,"Inquinante"),Tn("th",null,"Valore")])],-1),eX=pn({__name:"SearchReport",setup(e){const t=l0(),n=Sz(),i=He(null),s=He(null),u=I=>{const z=new Date(I).getFullYear(),U=new Date().getFullYear();return z!==U},d=He(null),o=He(null),m=He(!1),y=He("Mostra dettagli"),w=I=>new Date(I).toLocaleDateString("it-IT"),S=async()=>{var I;s.value?(t.start(),d.value=await jY(s.value),d.value?(t.finish(),o.value=null):t.error()):(n.warning("Nessuna data inserita per la ricerca di un report!"),(I=i.value)==null||I.focus())},A=async I=>{!o.value&&!m.value?(t.start(),o.value=await Hz(I),m.value=!0,y.value="Nascondi dettagli",o.value?t.finish():t.error()):o.value&&!m.value?(m.value=!0,y.value="Nascondi dettagli"):(m.value=!1,y.value="Mostra dettagli")};return(I,z)=>(si(),Fs(Vr,null,[tr(cr(vg),{style:{"margin-top":"50px"}},{default:Gr(()=>[Ui("Cerca un report tramite data")]),_:1}),tr(cr(HT),{style:{"margin-bottom":"10px"}},{default:Gr(()=>[tr(cr(Tq),{ref_key:"datePickerRef",ref:i,"formatted-value":s.value,"onUpdate:formattedValue":z[0]||(z[0]=U=>s.value=U),"value-format":"yyyy-MM-dd",type:"date","is-date-disabled":u,placeholder:"Scegli una data",clearable:""},null,8,["formatted-value"]),tr(cr(yo),{onClick:S,type:"primary",ghost:""},{default:Gr(()=>[Ui("Cerca dati")]),_:1})]),_:1}),d.value?(si(),qo(cr(Xm),{key:0,bordered:!0,"single-line":!1},{default:Gr(()=>[JY,Tn("tbody",null,[Tn("tr",null,[Tn("td",null,Di(w(d.value.data)),1),Tn("td",null,Di(d.value.descrizione),1),Tn("td",null,Di(d.value.previsione),1),Tn("td",null,Di(d.value.tendenza),1)])])]),_:1})):Fa("",!0),d.value?(si(),qo(cr(yo),{key:1,onClick:z[1]||(z[1]=U=>A(d.value.data)),style:{margin:"8px 0"}},{default:Gr(()=>[Ui(Di(y.value),1)]),_:1})):Fa("",!0),m.value?(si(),qo(cr(Xm),{key:2,bordered:!0,"single-line":!1},{default:Gr(()=>[QY,Tn("tbody",null,[(si(!0),Fs(Vr,null,Qw(o.value,U=>(si(),Fs("tr",{key:U._id},[Tn("td",null,Di(w(U.data)),1),Tn("td",null,Di(U.stazione_id),1),Tn("td",null,Di(U.inquinante),1),Tn("td",null,Di(U.valore),1)]))),128))])]),_:1})):Fa("",!0),d.value?Fa("",!0):(si(),qo(cr(VI),{key:3,description:"Nessun dato trovato.",style:{padding:"30px 0"}}))],64))}});var qz={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(K7,function(){var n,i,s;function u(o,m){if(!n)n=m;else if(!i)i=m;else{var y="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",w={};n(w),s=m(w),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([y],{type:"text/javascript"})))}}u(["exports"],function(o){var m=typeof self<"u"?self:{},y="2.14.1";let w;const S={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(w==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{w={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):a}catch{w=a}}return w},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!S.API_URL)return null;try{const a=new URL(S.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},A={supported:!1,testSupport:function(a){!U&&z&&(j?F(a):I=a)}};let I,z,U=!1,j=!1;function F(a){const r=a.createTexture();a.bindTexture(a.TEXTURE_2D,r);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,z),a.isContextLost())return;A.supported=!0}catch{}a.deleteTexture(r),U=!0}m.document&&(z=m.document.createElement("img"),z.onload=function(){I&&F(I),I=null,j=!0},z.onerror=function(){U=!0,I=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const H="01";var J=Z;function Z(a,r,l,h){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=l,this.p2y=h}Z.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,h=0;h<8;h++){var p=this.sampleCurveX(l)-a;if(Math.abs(p)<r)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=p/v}var x=0,T=1;for(l=a,h=0;h<20&&(p=this.sampleCurveX(l),!(Math.abs(p-a)<r));h++)a>p?x=l:T=l,l=.5*(T-x)+x;return l},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var Y=ce;function ce(a,r){this.x=a,this.y=r}ce.prototype={clone:function(){return new ce(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,l=a.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),l=Math.sin(a),h=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=h,this},_rotateAround:function(a,r){var l=Math.cos(a),h=Math.sin(a),p=r.y+h*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-h*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ce.convert=function(a){return a instanceof ce?a:Array.isArray(a)?new ce(a[0],a[1]):a};const ee=Math.PI/180,de=180/Math.PI;function ue(a){return a*ee}function Ee(a){return a*de}const ze=[[0,0],[1,0],[1,1],[0,1]];function xe(a){if(a<=0)return 0;if(a>=1)return 1;const r=a*a,l=r*a;return 4*(a<.5?l:3*(a-r)+l-.75)}function qe(a,r,l,h){const p=new J(a,r,l,h);return function(v){return p.solve(v)}}const Qe=qe(.25,.1,.25,1);function Be(a,r,l){return Math.min(l,Math.max(r,a))}function st(a,r,l){return(l=Be((l-a)/(r-a),0,1))*l*(3-2*l)}function it(a,r,l){const h=l-r,p=((a-r)%h+h)%h+r;return p===r?l:p}function Pt(a,r,l){if(!a.length)return l(null,[]);let h=a.length;const p=new Array(a.length);let v=null;a.forEach((x,T)=>{r(x,(E,M)=>{E&&(v=E),p[T]=M,--h==0&&l(v,p)})})}function Ke(a){const r=[];for(const l in a)r.push(a[l]);return r}function ut(a,...r){for(const l of r)for(const h in l)a[h]=l[h];return a}let jt=1;function on(){return jt++}function En(){return function a(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function Dn(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Je(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function yt(a,r){a.forEach(l=>{r[l]&&(r[l]=r[l].bind(r))})}function wt(a,r){return a.indexOf(r,a.length-r.length)!==-1}function Lt(a,r,l){const h={};for(const p in a)h[p]=r.call(l||this,a[p],p,a);return h}function Ct(a,r,l){const h={};for(const p in a)r.call(l||this,a[p],p,a)&&(h[p]=a[p]);return h}function Yt(a){return Array.isArray(a)?a.map(Yt):typeof a=="object"&&a?Lt(a,Yt):a}const ln={};function he(a){ln[a]||(typeof console<"u"&&console.warn(a),ln[a]=!0)}function Me(a,r,l){return(l.y-a.y)*(r.x-a.x)>(r.y-a.y)*(l.x-a.x)}function Ue(a){let r=0;for(let l,h,p=0,v=a.length,x=v-1;p<v;x=p++)l=a[p],h=a[x],r+=(h.x-l.x)*(l.y+h.y);return r}function lt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function gt(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,p,v)=>{const x=p||v;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r}let Ne=null;function ht(a){if(Ne==null){const r=a.navigator?a.navigator.userAgent:null;Ne=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ne}function At(a){try{const r=m[a];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}function Et(a,r){return[a[4*r],a[4*r+1],a[4*r+2],a[4*r+3]]}const Oe="mapbox-tiles";let vt,Wt,Jt=500,wn=50;function Cn(){try{return m.caches}catch{}}function Fn(){Cn()&&!vt&&(vt=m.caches.open(Oe))}function $n(a){const r=a.indexOf("?");if(r<0)return a;const l=function(p){const v=p.indexOf("?");return v>0?p.slice(v+1).split("&"):[]}(a),h=l.filter(p=>{const v=p.split("=");return v[0]==="language"||v[0]==="worldview"});return h.length?`${a.slice(0,r)}?${h.join("&")}`:a.slice(0,r)}let Zn=1/0;const pr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(pr);class sr extends Error{constructor(r,l,h){l===401&&Rt(h)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=l,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const li=lt()?()=>self.worker&&self.worker.referrer:()=>(m.location.protocol==="blob:"?m.parent:m).location.href,br=function(a,r){if(!(/^file:/.test(l=a.url)||/^file:/.test(li())&&!/^\w+:/.test(l))){if(m.fetch&&m.Request&&m.AbortController&&m.Request.prototype.hasOwnProperty("signal"))return function(h,p){const v=new m.AbortController,x=new m.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:li(),referrerPolicy:h.referrerPolicy,signal:v.signal});let T=!1,E=!1;const M=(D=x.url).indexOf("sku=")>0&&Rt(D);var D;h.type==="json"&&x.headers.set("Accept","application/json");const O=(W,q,K)=>{if(E)return;if(W&&W.message!=="SecurityError"&&he(W),q&&K)return B(q);const re=Date.now();m.fetch(x).then(me=>{if(me.ok){const Te=M?me.clone():null;return B(me,Te,re)}return p(new sr(me.statusText,me.status,h.url))}).catch(me=>{me.name!=="AbortError"&&p(new Error(`${me.message} ${h.url}`))})},B=(W,q,K)=>{(h.type==="arrayBuffer"?W.arrayBuffer():h.type==="json"?W.json():W.text()).then(re=>{E||(q&&K&&function(me,Te,fe){if(Fn(),!vt)return;const be={status:Te.status,statusText:Te.statusText,headers:new m.Headers};Te.headers.forEach((nt,Ye)=>be.headers.set(Ye,nt));const Pe=gt(Te.headers.get("Cache-Control")||"");if(Pe["no-store"])return;Pe["max-age"]&&be.headers.set("Expires",new Date(fe+1e3*Pe["max-age"]).toUTCString());const Ce=be.headers.get("Expires");Ce&&(new Date(Ce).getTime()-fe<42e4||function(nt,Ye){if(Wt===void 0)try{new Response(new ReadableStream),Wt=!0}catch{Wt=!1}Wt?Ye(nt.body):nt.blob().then(Ye)}(Te,nt=>{const Ye=new m.Response(nt,be);Fn(),vt&&vt.then(_t=>_t.put($n(me.url),Ye)).catch(_t=>he(_t.message))}))}(x,q,K),T=!0,p(null,re,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(re=>{E||p(new Error(re.message))})};return M?function(W,q){if(Fn(),!vt)return q(null);const K=$n(W.url);vt.then(re=>{re.match(K).then(me=>{const Te=function(fe){if(!fe)return!1;const be=new Date(fe.headers.get("Expires")||0),Pe=gt(fe.headers.get("Cache-Control")||"");return be>Date.now()&&!Pe["no-cache"]}(me);re.delete(K),Te&&re.put(K,me.clone()),q(null,me,Te)}).catch(q)}).catch(q)}(x,O):O(null,null),{cancel:()=>{E=!0,T||v.abort()}}}(a,r);if(lt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var l;return function(h,p){const v=new m.XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(T){return p(T)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else p(new sr(v.statusText,v.status,h.url))},v.send(h.body),{cancel:()=>v.abort()}}(a,r)},dr=function(a,r){return br(ut(a,{type:"arrayBuffer"}),r)};function rr(a){const r=m.document.createElement("a");return r.href=a,r.protocol===m.document.location.protocol&&r.host===m.document.location.host}const Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let mt,Vt;mt=[],Vt=0;const gn=function(a,r){if(A.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Vt>=S.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:a,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return mt.push(v),v}Vt++;let l=!1;const h=()=>{if(!l)for(l=!0,Vt--;mt.length&&Vt<S.MAX_PARALLEL_IMAGE_REQUESTS;){const v=mt.shift(),{requestParameters:x,callback:T,cancelled:E}=v;E||(v.cancel=gn(x,T).cancel)}},p=dr(a,(v,x,T,E)=>{h(),v?r(v):x&&(m.createImageBitmap?function(M,D){const O=new m.Blob([new Uint8Array(M)],{type:"image/png"});m.createImageBitmap(O).then(B=>{D(null,B)}).catch(B=>{D(new Error(`Could not load image because of ${B.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(M,D)=>r(M,D,T,E)):function(M,D){const O=new m.Image,B=m.URL;O.onload=()=>{D(null,O),B.revokeObjectURL(O.src),O.onload=null,m.requestAnimationFrame(()=>{O.src=Ae})},O.onerror=()=>D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const W=new m.Blob([new Uint8Array(M)],{type:"image/png"});O.src=M.byteLength?B.createObjectURL(W):Ae}(x,(M,D)=>r(M,D,T,E)))});return{cancel:()=>{p.cancel(),h()}}},hn="NO_ACCESS_TOKEN";function Fe(a){return a.indexOf("mapbox:")===0}function Rt(a){return S.API_URL_REGEX.test(a)}function Qt(a){return S.API_CDN_URL_REGEX.test(a)}function An(a){return S.API_STYLE_REGEX.test(a)&&!et(a)}function et(a){return S.API_SPRITE_REGEX.test(a)}const Gt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function sn(a){const r=a.match(Gt);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function On(a){const r=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${r}`}function xi(a){if(!a)return null;const r=a.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(m.atob(r[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ri{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){const l=xi(S.ACCESS_TOKEN);let h="";return h=l&&l.u?m.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(p,v)=>String.fromCharCode(+("0x"+v)))):S.ACCESS_TOKEN||"",r?`mapbox.eventData.${r}:${h}`:`mapbox.eventData:${h}`}fetchEventData(){const r=At("localStorage"),l=this.getStorageKey(),h=this.getStorageKey("uuid");if(r)try{const p=m.localStorage.getItem(l);p&&(this.eventData=JSON.parse(p));const v=m.localStorage.getItem(h);v&&(this.anonId=v)}catch{he("Unable to read from LocalStorage")}}saveEventData(){const r=At("localStorage"),l=this.getStorageKey(),h=this.getStorageKey("uuid");if(r)try{m.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&m.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{he("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,l,h,p){if(!S.EVENTS_URL)return;const v=sn(S.EVENTS_URL);v.params.push(`access_token=${p||S.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(r).toISOString()},T=l?ut(x,l):x,E={url:On(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([T])};this.pendingRequest=function(M,D){return br(ut(M,{method:"POST"}),D)}(E,M=>{this.pendingRequest=null,h(M),this.saveEventData(),this.processRequests(p)})}queueRequest(r,l){this.queue.push(r),this.processRequests(l)}}const oe=new class extends ri{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,r){S.EVENTS_URL&&S.ACCESS_TOKEN&&Array.isArray(a)&&a.some(l=>Fe(l)||Rt(l))&&this.queueRequest(Date.now(),r)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=xi(S.ACCESS_TOKEN),l=r?r.u:S.ACCESS_TOKEN;let h=l!==this.eventData.tokenU;Je(this.anonId)||(this.anonId=En(),h=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),x=new Date(p),T=(p-this.eventData.lastSuccess)/864e5;h=h||T>=1||T<-1||v.getDate()!==x.getDate()}else h=!0;h?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:y,skuId:H,"enabled.telemetry":!1,userId:this.anonId},v=>{v||(this.eventData.lastSuccess=p,this.eventData.tokenU=l)},a):this.processRequests()}},L=oe.postTurnstileEvent.bind(oe),G=new class extends ri{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,r,l,h){this.skuToken=r,this.errorCb=h,S.EVENTS_URL&&(l||S.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(hn)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:l}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),Je(this.anonId)||(this.anonId=En()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:y,skuId:H,skuToken:this.skuToken,userId:this.anonId},h=>{h?this.errorCb(h):r&&(this.success[r]=!0)},a))}},ne=G.postMapLoadEvent.bind(G),pe=new class extends ri{constructor(){super("gljs.performance")}postPerformanceEvent(a,r){S.EVENTS_URL&&(a||S.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:r},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:r,performanceData:l}=this.queue.shift(),h=function(p){const v=m.performance.getEntriesByType("resource"),x=m.performance.getEntriesByType("mark"),T=function(B){const W={};if(B){for(const q in B)if(q!=="other")for(const K of B[q]){const re=`${q}ResolveRangeMin`,me=`${q}ResolveRangeMax`,Te=`${q}RequestCount`,fe=`${q}RequestCachedCount`;W[re]=Math.min(W[re]||1/0,K.startTime),W[me]=Math.max(W[me]||-1/0,K.responseEnd);const be=Pe=>{W[Pe]===void 0&&(W[Pe]=0),++W[Pe]};K.transferSize!==void 0&&K.transferSize===0&&be(fe),be(Te)}}return W}(function(B,W){const q={};if(B)for(const K of B){const re=W(K);q[re]===void 0&&(q[re]=[]),q[re].push(K)}return q}(v,Zt)),E=m.devicePixelRatio,M=m.navigator.connection||m.navigator.mozConnection||m.navigator.webkitConnection,D={counters:[],metadata:[],attributes:[]},O=(B,W,q)=>{q!=null&&B.push({name:W,value:q.toString()})};for(const B in T)O(D.counters,B,T[B]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(O(D.counters,"interactionRangeMin",p.interactionRange[0]),O(D.counters,"interactionRangeMax",p.interactionRange[1])),x)for(const B of Object.keys(je)){const W=je[B],q=x.find(K=>K.name===W);q&&O(D.counters,W,q.startTime)}return O(D.counters,"visibilityHidden",p.visibilityHidden),O(D.attributes,"style",function(B){if(B)for(const W of B){const q=W.name.split("?")[0];if(An(q)){const K=q.split("/").slice(-2);if(K.length===2)return`mapbox://styles/${K[0]}/${K[1]}`}}}(v)),O(D.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),O(D.attributes,"fogEnabled",p.fogEnabled?"true":"false"),O(D.attributes,"projection",p.projection),O(D.attributes,"zoom",p.zoom),O(D.metadata,"devicePixelRatio",E),O(D.metadata,"connectionEffectiveType",M?M.effectiveType:void 0),O(D.metadata,"navigatorUserAgent",m.navigator.userAgent),O(D.metadata,"screenWidth",m.screen.width),O(D.metadata,"screenHeight",m.screen.height),O(D.metadata,"windowWidth",m.innerWidth),O(D.metadata,"windowHeight",m.innerHeight),O(D.metadata,"mapWidth",p.width/E),O(D.metadata,"mapHeight",p.height/E),O(D.metadata,"webglRenderer",p.renderer),O(D.metadata,"webglVendor",p.vendor),O(D.metadata,"sdkVersion",y),O(D.metadata,"sdkIdentifier","mapbox-gl-js"),D}(l);for(const p of h.metadata);for(const p of h.counters);for(const p of h.attributes);this.postEvent(r,h,()=>{},a)}},we=pe.postPerformanceEvent.bind(pe),Re=new class extends ri{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,r,l,h){if(!S.API_URL||!S.SESSION_PATH)return;const p=sn(S.API_URL+S.SESSION_PATH);p.params.push(`sku=${r||""}`),p.params.push(`access_token=${h||S.ACCESS_TOKEN||""}`);const v={url:On(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(x,T){return br(ut(x,{method:"GET"}),T)}(v,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(h)})}getSessionAPI(a,r,l,h){this.skuToken=r,this.errorCb=h,S.SESSION_PATH&&S.API_URL&&(l||S.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(hn)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:l}=this.queue.shift();r&&this.success[r]||this.getSession(l,this.skuToken,h=>{h?this.errorCb(h):r&&(this.success[r]=!0)},a)}},$e=Re.getSessionAPI.bind(Re),De=new Set,je={create:"create",load:"load",fullLoad:"fullLoad"},bt={mark(a){m.performance.mark(a)},measure(a,r,l){m.performance.measure(a,r,l)}};function Zt(a){const r=a.name.split("?")[0];return Qt(r)&&r.includes("mapbox-gl.js")?"javascript":Qt(r)&&r.includes("mapbox-gl.css")?"css":function(l){return S.API_FONTS_REGEX.test(l)}(r)?"fontRange":et(r)?"sprite":An(r)?"style":function(l){return S.API_TILEJSON_REGEX.test(l)}(r)?"tilejson":"other"}const ye=m.performance;function pt(a){const r=a?a.url.toString():void 0;return ye.getEntriesByName(r)}let kt,en,yn,vn;const Yn={now:()=>yn!==void 0?yn:m.performance.now(),setNow(a){yn=a},restoreNow(){yn=void 0},frame(a){const r=m.requestAnimationFrame(a);return{cancel:()=>m.cancelAnimationFrame(r)}},getImageData(a,r=0){const{width:l,height:h}=a;vn||(vn=m.document.createElement("canvas"));const p=vn.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(l>vn.width||h>vn.height)&&(vn.width=l,vn.height=h),p.clearRect(-r,-r,l+2*r,h+2*r),p.drawImage(a,0,0,l,h),p.getImageData(-r,-r,l+2*r,h+2*r)},resolveURL:a=>(kt||(kt=m.document.createElement("a")),kt.href=a,kt.href),get devicePixelRatio(){return m.devicePixelRatio},get prefersReducedMotion(){return!!m.matchMedia&&(en==null&&(en=m.matchMedia("(prefers-reduced-motion: reduce)")),en.matches)}};function Sn(a,r,l){l[a]&&l[a].indexOf(r)!==-1||(l[a]=l[a]||[],l[a].push(r))}function ar(a,r,l){if(l&&l[a]){const h=l[a].indexOf(r);h!==-1&&l[a].splice(h,1)}}class yr{constructor(r,l={}){ut(this,l),this.type=r}}class Jo extends yr{constructor(r,l={}){super("error",ut({error:r},l))}}class Vo{on(r,l){return this._listeners=this._listeners||{},Sn(r,l,this._listeners),this}off(r,l){return ar(r,l,this._listeners),ar(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Sn(r,l,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,l){typeof r=="string"&&(r=new yr(r,l||{}));const h=r.type;if(this.listens(h)){r.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of p)T.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of v)ar(h,T,this._oneTimeListeners),T.call(this,r);const x=this._eventedParent;x&&(ut(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Jo&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var ft=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function jo(a,...r){for(const l of r)for(const h in l)a[h]=l[h];return a}function ii(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Qo(a){if(Array.isArray(a))return a.map(Qo);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const l in a)r[l]=Qo(a[l]);return r}return ii(a)}class Il extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}var Eo=Il;class Ts{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[h,p]of l)this.bindings[h]=p}concat(r){return new Ts(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}var zl=Ts;const Cs={kind:"null"},qt={kind:"number"},Xn={kind:"string"},Hn={kind:"boolean"},es={kind:"color"},Vs={kind:"object"},Wn={kind:"value"},Za={kind:"collator"},da={kind:"formatted"},ha={kind:"resolvedImage"};function Ji(a,r){return{kind:"array",itemType:a,N:r}}function Ir(a){if(a.kind==="array"){const r=Ir(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const Md=[Cs,qt,Xn,Hn,es,da,Vs,Ji(Wn),ha];function ao(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!ao(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const l of Md)if(!ao(l,r))return null}}return`Expected ${Ir(a)} but found ${Ir(r)} instead.`}function Uc(a,r){return r.some(l=>l.kind===a.kind)}function js(a,r){return r.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}var Vc,Rl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ya(a){return(a=Math.round(a))<0?0:a>255?255:a}function Xa(a){return Ya(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function Ol(a){return(r=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:r>1?1:r;var r}function Sf(a,r,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?a+(r-a)*l*6:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}try{Vc={}.parseCSSColor=function(a){var r,l=a.replace(/ /g,"").toLowerCase();if(l in Rl)return Rl[l].slice();if(l[0]==="#")return l.length===4?(r=parseInt(l.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:l.length===7&&(r=parseInt(l.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var h=l.indexOf("("),p=l.indexOf(")");if(h!==-1&&p+1===l.length){var v=l.substr(0,h),x=l.substr(h+1,p-(h+1)).split(","),T=1;switch(v){case"rgba":if(x.length!==4)return null;T=Ol(x.pop());case"rgb":return x.length!==3?null:[Xa(x[0]),Xa(x[1]),Xa(x[2]),T];case"hsla":if(x.length!==4)return null;T=Ol(x.pop());case"hsl":if(x.length!==3)return null;var E=(parseFloat(x[0])%360+360)%360/360,M=Ol(x[1]),D=Ol(x[2]),O=D<=.5?D*(M+1):D+M-D*M,B=2*D-O;return[Ya(255*Sf(B,O,E+1/3)),Ya(255*Sf(B,O,E)),Ya(255*Sf(B,O,E-1/3)),T];default:return null}}return null}}catch{}class Mo{constructor(r,l,h,p=1){this.r=r,this.g=l,this.b=h,this.a=p}static parse(r){if(!r)return;if(r instanceof Mo)return r;if(typeof r!="string")return;const l=Vc(r);return l?new Mo(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[r,l,h,p]=this.toArray();return`rgba(${Math.round(r)},${Math.round(l)},${Math.round(h)},${p})`}toArray(){const{r,g:l,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*r/p,255*l/p,255*h/p,p]}toArray01(){const{r,g:l,b:h,a:p}=this;return p===0?[0,0,0,0]:[r/p,l/p,h/p,p]}toArray01PremultipliedAlpha(){const{r,g:l,b:h,a:p}=this;return[r,l,h,p]}}Mo.black=new Mo(0,0,0,1),Mo.white=new Mo(1,1,1,1),Mo.transparent=new Mo(0,0,0,0),Mo.red=new Mo(1,0,0,1),Mo.blue=new Mo(0,0,1,1);var bi=Mo;class Pd{constructor(r,l,h){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class jc{constructor(r,l,h,p,v){this.text=r.normalize?r.normalize():r,this.image=l,this.scale=h,this.fontStack=p,this.textColor=v}}class Po{constructor(r){this.sections=r}static fromString(r){return new Po([new jc(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Po?r:Po.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const l of this.sections){if(l.image){r.push(["image",l.image.name]);continue}r.push(l.text);const h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toArray())),r.push(h)}return r}}class bo{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new bo({name:r,available:!1}):null}serialize(){return["image",this.name]}}function Tg(a,r,l,h){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,r,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,r,l,h]:[a,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ad(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof bi||a instanceof Pd||a instanceof Po||a instanceof bo)return!0;if(Array.isArray(a)){for(const r of a)if(!Ad(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!Ad(a[r]))return!1;return!0}return!1}function Ri(a){if(a===null)return Cs;if(typeof a=="string")return Xn;if(typeof a=="boolean")return Hn;if(typeof a=="number")return qt;if(a instanceof bi)return es;if(a instanceof Pd)return Za;if(a instanceof Po)return da;if(a instanceof bo)return ha;if(Array.isArray(a)){const r=a.length;let l;for(const h of a){const p=Ri(h);if(l){if(l===p)continue;l=Wn;break}l=p}return Ji(l||Wn,r)}return Vs}function Wc(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof bi||a instanceof Po||a instanceof bo?a.toString():JSON.stringify(a)}class Ef{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ad(r[1]))return l.error("invalid value");const h=r[1];let p=Ri(h);const v=l.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Ef(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof bi?["rgba"].concat(this.value.toArray()):this.value instanceof Po?this.value.serialize():this.value}}var Hc=Ef,Qi=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const kd={string:Xn,number:qt,boolean:Hn,object:Vs};class Ll{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let h,p=1;const v=r[0];if(v==="array"){let T,E;if(r.length>2){const M=r[1];if(typeof M!="string"||!(M in kd)||M==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);T=kd[M],p++}else T=Wn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=r[2],p++}h=Ji(T,E)}else h=kd[v];const x=[];for(;p<r.length;p++){const T=l.parse(r[p],p,Wn);if(!T)return null;x.push(T)}return new Ll(h,x)}evaluate(r){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(r);if(!ao(this.type,Ri(h)))return h;if(l===this.args.length-1)throw new Qi(`Expected value to be of type ${Ir(this.type)}, but found ${Ir(Ri(h))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,l=[r.kind];if(r.kind==="array"){const h=r.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){l.push(h.kind);const p=r.N;(typeof p=="number"||this.args.length>1)&&l.push(p)}}return l.concat(this.args.map(h=>h.serialize()))}}var Ws=Ll;class Gc{constructor(r){this.type=da,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=r.length-1;++x){const T=r[x];if(v&&typeof T=="object"&&!Array.isArray(T)){v=!1;let E=null;if(T["font-scale"]&&(E=l.parse(T["font-scale"],1,qt),!E))return null;let M=null;if(T["text-font"]&&(M=l.parse(T["text-font"],1,Ji(Xn)),!M))return null;let D=null;if(T["text-color"]&&(D=l.parse(T["text-color"],1,es),!D))return null;const O=p[p.length-1];O.scale=E,O.font=M,O.textColor=D}else{const E=l.parse(r[x],1,Wn);if(!E)return null;const M=E.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:E,scale:null,font:null,textColor:null})}}return new Gc(p)}evaluate(r){return new Po(this.sections.map(l=>{const h=l.content.evaluate(r);return Ri(h)===ha?new jc("",h,null,null,null):new jc(Wc(h),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const l of this.sections){r.push(l.content.serialize());const h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),r.push(h)}return r}}class Dd{constructor(r){this.type=ha,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const h=l.parse(r[1],1,Xn);return h?new Dd(h):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),h=bo.fromString(l);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(l)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const x0={"to-boolean":Hn,"to-color":es,"to-number":qt,"to-string":Xn};class Mf{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const h=r[0];if((h==="to-boolean"||h==="to-string")&&r.length!==2)return l.error("Expected one argument.");const p=x0[h],v=[];for(let x=1;x<r.length;x++){const T=l.parse(r[x],x,Wn);if(!T)return null;v.push(T)}return new Mf(p,v)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let l,h;for(const p of this.args){if(l=p.evaluate(r),h=null,l instanceof bi)return l;if(typeof l=="string"){const v=r.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Tg(l[0],l[1],l[2],l[3]),!h))return new bi(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Qi(h||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const h of this.args){if(l=h.evaluate(r),l===null)return 0;const p=Number(l);if(!isNaN(p))return p}throw new Qi(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?Po.fromString(Wc(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?bo.fromString(Wc(this.args[0].evaluate(r))):Wc(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Gc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Dd(this.args[0]).serialize();const r=[`to-${this.type.kind}`];return this.eachChild(l=>{r.push(l.serialize())}),r}}var Bl=Mf;const Cg=["Unknown","Point","LineString","Polygon"];var qc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:l,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*r-a[0])+this.featureDistanceData.bearing[1]*(h*r-a[1])}return 0}parseColor(a){let r=this._parseColorCache[a];return r||(r=this._parseColorCache[a]=bi.parse(a)),r}};class Fl{constructor(r,l,h,p){this.name=r,this.type=l,this._evaluate=h,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,l){const h=r[0],p=Fl.definitions[h];if(!p)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,T=x.filter(([M])=>!Array.isArray(M)||M.length===r.length-1);let E=null;for(const[M,D]of T){E=new zf(l.registry,l.path,null,l.scope);const O=[];let B=!1;for(let W=1;W<r.length;W++){const q=r[W],K=Array.isArray(M)?M[W-1]:M.type,re=E.parse(q,1+O.length,K);if(!re){B=!0;break}O.push(re)}if(!B)if(Array.isArray(M)&&M.length!==O.length)E.error(`Expected ${M.length} arguments, but found ${O.length} instead.`);else{for(let W=0;W<O.length;W++){const q=Array.isArray(M)?M[W]:M.type,K=O[W];E.concat(W+1).checkSubtype(q,K.type)}if(E.errors.length===0)return new Fl(h,v,D,O)}}if(T.length===1)l.errors.push(...E.errors);else{const M=(T.length?T:x).map(([O])=>{return B=O,Array.isArray(B)?`(${B.map(Ir).join(", ")})`:`(${Ir(B.type)}...)`;var B}).join(" | "),D=[];for(let O=1;O<r.length;O++){const B=l.parse(r[O],1+D.length);if(!B)return null;D.push(Ir(B.type))}l.error(`Expected arguments of type ${M}, but found (${D.join(", ")}) instead.`)}return null}static register(r,l){Fl.definitions=l;for(const h in l)r[h]=Fl}}var fa=Fl;class Id{constructor(r,l,h){this.type=Za,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const p=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Hn);if(!p)return null;const v=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Hn);if(!v)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,Xn),!x)?null:new Id(p,v,x)}evaluate(r){return new Pd(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}const pa=8192;function ts(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function Zc(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function Sg(a,r){const l=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(l*p*pa),Math.round(h*p*pa)]}function Eg(a,r,l){const h=a[0]-r[0],p=a[1]-r[1],v=a[0]-l[0],x=a[1]-l[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function zd(a,r){let l=!1;for(let x=0,T=r.length;x<T;x++){const E=r[x];for(let M=0,D=E.length;M<D-1;M++){if(Eg(a,E[M],E[M+1]))return!1;(p=E[M])[1]>(h=a)[1]!=(v=E[M+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(l=!l)}}var h,p,v;return l}function Mg(a,r){for(let l=0;l<r.length;l++)if(zd(a,r[l]))return!0;return!1}function Pf(a,r,l,h){const p=h[0]-l[0],v=h[1]-l[1],x=(a[0]-l[0])*v-p*(a[1]-l[1]),T=(r[0]-l[0])*v-p*(r[1]-l[1]);return x>0&&T<0||x<0&&T>0}function Af(a,r,l){for(const M of l)for(let D=0;D<M.length-1;++D)if((T=[(x=M[D+1])[0]-(v=M[D])[0],x[1]-v[1]])[0]*(E=[(p=r)[0]-(h=a)[0],p[1]-h[1]])[1]-T[1]*E[0]!=0&&Pf(h,p,v,x)&&Pf(v,x,h,p))return!0;var h,p,v,x,T,E;return!1}function $l(a,r){for(let l=0;l<a.length;++l)if(!zd(a[l],r))return!1;for(let l=0;l<a.length-1;++l)if(Af(a[l],a[l+1],r))return!1;return!0}function Pg(a,r){for(let l=0;l<r.length;l++)if($l(a,r[l]))return!0;return!1}function Rd(a,r,l){const h=[];for(let p=0;p<a.length;p++){const v=[];for(let x=0;x<a[p].length;x++){const T=Sg(a[p][x],l);ts(r,T),v.push(T)}h.push(v)}return h}function Od(a,r,l){const h=[];for(let p=0;p<a.length;p++){const v=Rd(a[p],r,l);h.push(v)}return h}function kf(a,r,l,h){if(a[0]<l[0]||a[0]>l[2]){const p=.5*h;let v=a[0]-l[0]>p?-h:l[0]-a[0]>p?h:0;v===0&&(v=a[0]-l[2]>p?-h:l[2]-a[0]>p?h:0),a[0]+=v}ts(r,a)}function Ka(a,r,l,h){const p=Math.pow(2,h.z)*pa,v=[h.x*pa,h.y*pa],x=[];if(!a)return x;for(const T of a)for(const E of T){const M=[E.x+v[0],E.y+v[1]];kf(M,r,l,p),x.push(M)}return x}function wr(a,r,l,h){const p=Math.pow(2,h.z)*pa,v=[h.x*pa,h.y*pa],x=[];if(!a)return x;for(const E of a){const M=[];for(const D of E){const O=[D.x+v[0],D.y+v[1]];ts(r,O),M.push(O)}x.push(M)}if(r[2]-r[0]<=p/2){(T=r)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const E of x)for(const M of E)kf(M,r,l,p)}var T;return x}class Yc{constructor(r,l){this.type=Hn,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ad(r[1])){const h=r[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Yc(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Yc(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Yc(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const T=Rd(h.coordinates,v,x),E=Ka(l.geometry(),p,v,x);if(!Zc(p,v))return!1;for(const M of E)if(!zd(M,T))return!1}if(h.type==="MultiPolygon"){const T=Od(h.coordinates,v,x),E=Ka(l.geometry(),p,v,x);if(!Zc(p,v))return!1;for(const M of E)if(!Mg(M,T))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const T=Rd(h.coordinates,v,x),E=wr(l.geometry(),p,v,x);if(!Zc(p,v))return!1;for(const M of E)if(!$l(M,T))return!1}if(h.type==="MultiPolygon"){const T=Od(h.coordinates,v,x),E=wr(l.geometry(),p,v,x);if(!Zc(p,v))return!1;for(const M of E)if(!Pg(M,T))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Df=Yc;function Xc(a){if(a instanceof fa&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Df)return!1;let r=!0;return a.eachChild(l=>{r&&!Xc(l)&&(r=!1)}),r}function Kc(a){if(a instanceof fa&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(l=>{r&&!Kc(l)&&(r=!1)}),r}function Ld(a,r){if(a instanceof fa&&r.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(h=>{l&&!Ld(h,r)&&(l=!1)}),l}class Bd{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=r[1];return l.scope.has(h)?new Bd(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var If=Bd;class Fd{constructor(r,l=[],h,p=new zl,v=[]){this.registry=r,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h}parse(r,l,h,p,v={}){return l?this.concat(l,h,p)._parse(r,v):this._parse(r,v)}_parse(r,l){function h(p,v,x){return x==="assert"?new Ws(v,[p]):x==="coerce"?new Bl(v,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const T=this.expectedType,E=x.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||E.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(T,E))return null}else x=h(x,T,l.typeAnnotation||"coerce");else x=h(x,T,l.typeAnnotation||"assert")}if(!(x instanceof Hc)&&x.type.kind!=="resolvedImage"&&ma(x)){const T=new qc;try{x=new Hc(x.type,x.evaluate(T))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,h){const p=typeof r=="number"?this.path.concat(r):this.path,v=h?this.scope.concat(h):this.scope;return new Fd(this.registry,p,l||null,v,this.errors)}error(r,...l){const h=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new Eo(h,r))}checkSubtype(r,l){const h=ao(r,l);return h&&this.error(h),h}}var zf=Fd;function ma(a){if(a instanceof If)return ma(a.boundExpression);if(a instanceof fa&&a.name==="error"||a instanceof Id||a instanceof Df)return!1;const r=a instanceof Bl||a instanceof Ws;let l=!0;return a.eachChild(h=>{l=r?l&&ma(h):l&&h instanceof Hc}),!!l&&Xc(a)&&Ld(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ja(a,r){const l=a.length-1;let h,p,v=0,x=l,T=0;for(;v<=x;)if(T=Math.floor((v+x)/2),h=a[T],p=a[T+1],h<=r){if(T===l||r<p)return T;v=T+1}else{if(!(h>r))throw new Qi("Input is not a number.");x=T-1}return 0}class $d{constructor(r,l,h){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(r[1],1,qt);if(!h)return null;const p=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<r.length;x+=2){const T=x===1?-1/0:r[x],E=r[x+1],M=x,D=x+1;if(typeof T!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(p.length&&p[p.length-1][0]>=T)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const O=l.parse(E,D,v);if(!O)return null;v=v||O.type,p.push([T,O])}return new $d(v,h,p)}evaluate(r){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(r);const p=this.input.evaluate(r);if(p<=l[0])return h[0].evaluate(r);const v=l.length;return p>=l[v-1]?h[v-1].evaluate(r):h[Ja(l,p)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&r.push(this.labels[l]),r.push(this.outputs[l].serialize());return r}}var Rf=$d;function hr(a,r,l){return a*(1-l)+r*l}var Jc=Object.freeze({__proto__:null,number:hr,color:function(a,r,l){return new bi(hr(a.r,r.r,l),hr(a.g,r.g,l),hr(a.b,r.b,l),hr(a.a,r.a,l))},array:function(a,r,l){return a.map((h,p)=>hr(h,r[p],l))}});const Ag=.95047,kg=1.08883,Of=4/29,Lf=6/29,Bf=3*Lf*Lf,Dg=Math.PI/180,b0=180/Math.PI;function Nd(a){return a>.008856451679035631?Math.pow(a,1/3):a/Bf+Of}function Ff(a){return a>Lf?a*a*a:Bf*(a-Of)}function Ud(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Vd(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ig(a){const r=Vd(a.r),l=Vd(a.g),h=Vd(a.b),p=Nd((.4124564*r+.3575761*l+.1804375*h)/Ag),v=Nd((.2126729*r+.7151522*l+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-Nd((.0193339*r+.119192*l+.9503041*h)/kg)),alpha:a.a}}function zg(a){let r=(a.l+16)/116,l=isNaN(a.a)?r:r+a.a/500,h=isNaN(a.b)?r:r-a.b/200;return r=1*Ff(r),l=Ag*Ff(l),h=kg*Ff(h),new bi(Ud(3.2404542*l-1.5371385*r-.4985314*h),Ud(-.969266*l+1.8760108*r+.041556*h),Ud(.0556434*l-.2040259*r+1.0572252*h),a.alpha)}function w0(a,r,l){const h=r-a;return a+l*(h>180||h<-180?h-360*Math.round(h/360):h)}const Qc={forward:Ig,reverse:zg,interpolate:function(a,r,l){return{l:hr(a.l,r.l,l),a:hr(a.a,r.a,l),b:hr(a.b,r.b,l),alpha:hr(a.alpha,r.alpha,l)}}},eu={forward:function(a){const{l:r,a:l,b:h}=Ig(a),p=Math.atan2(h,l)*b0;return{h:p<0?p+360:p,c:Math.sqrt(l*l+h*h),l:r,alpha:a.a}},reverse:function(a){const r=a.h*Dg,l=a.c;return zg({l:a.l,a:Math.cos(r)*l,b:Math.sin(r)*l,alpha:a.alpha})},interpolate:function(a,r,l){return{h:w0(a.h,r.h,l),c:hr(a.c,r.c,l),l:hr(a.l,r.l,l),alpha:hr(a.alpha,r.alpha,l)}}};var Rg=Object.freeze({__proto__:null,lab:Qc,hcl:eu});class tu{constructor(r,l,h,p,v){this.type=r,this.operator=l,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,T]of v)this.labels.push(x),this.outputs.push(T)}static interpolationFactor(r,l,h,p){let v=0;if(r.name==="exponential")v=$f(l,r.base,h,p);else if(r.name==="linear")v=$f(l,1,h,p);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new J(x[0],x[1],x[2],x[3]).solve($f(l,1,h,p))}return v}static parse(r,l){let[h,p,v,...x]=r;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const M=p[1];if(typeof M!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:M}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const M=p.slice(1);if(M.length!==4||M.some(D=>typeof D!="number"||D<0||D>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:M}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,qt),!v)return null;const T=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=es:l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType);for(let M=0;M<x.length;M+=2){const D=x[M],O=x[M+1],B=M+3,W=M+4;if(typeof D!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(T.length&&T[T.length-1][0]>=D)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const q=l.parse(O,W,E);if(!q)return null;E=E||q.type,T.push([D,q])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new tu(E,h,p,v,T):l.error(`Type ${Ir(E)} is not interpolatable.`)}evaluate(r){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(r);const p=this.input.evaluate(r);if(p<=l[0])return h[0].evaluate(r);const v=l.length;if(p>=l[v-1])return h[v-1].evaluate(r);const x=Ja(l,p),T=tu.interpolationFactor(this.interpolation,p,l[x],l[x+1]),E=h[x].evaluate(r),M=h[x+1].evaluate(r);return this.operator==="interpolate"?Jc[this.type.kind.toLowerCase()](E,M,T):this.operator==="interpolate-hcl"?eu.reverse(eu.interpolate(eu.forward(E),eu.forward(M),T)):Qc.reverse(Qc.interpolate(Qc.forward(E),Qc.forward(M),T))}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,r,this.input.serialize()];for(let h=0;h<this.labels.length;h++)l.push(this.labels[h],this.outputs[h].serialize());return l}}function $f(a,r,l,h){const p=h-l,v=a-l;return p===0?0:r===1?v/p:(Math.pow(r,v)-1)/(Math.pow(r,p)-1)}var Ss=tu;class Nf{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let h=null;const p=l.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const T of r.slice(1)){const E=l.parse(T,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,v.push(E)}const x=p&&v.some(T=>ao(p,T.type));return new Nf(x?Wn:h,v)}evaluate(r){let l,h=null,p=0;for(const v of this.args){if(p++,h=v.evaluate(r),h&&h instanceof bo&&!h.available&&(l||(l=h),h=null,p===this.args.length))return l;if(h!==null)break}return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(l=>{r.push(l.serialize())}),r}}var Og=Nf;class jd{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const T=l.parse(r[v+1],v+1);if(!T)return null;h.push([x,T])}const p=l.parse(r[r.length-1],r.length-1,l.expectedType,h);return p?new jd(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[l,h]of this.bindings)r.push(l,h.serialize());return r.push(this.result.serialize()),r}}var Uf=jd;class Wd{constructor(r,l,h){this.type=r,this.index=l,this.input=h}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,qt),p=l.parse(r[2],2,Ji(l.expectedType||Wn));return h&&p?new Wd(p.type.itemType,h,p):null}evaluate(r){const l=this.index.evaluate(r),h=this.input.evaluate(r);if(l<0)throw new Qi(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new Qi(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new Qi(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var T0=Wd;class Vf{constructor(r,l){this.type=Hn,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Wn),p=l.parse(r[2],2,Wn);return h&&p?Uc(h.type,[Hn,Xn,qt,Cs,Wn])?new Vf(h,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(h.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(h==null)return!1;if(!js(l,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(Ri(l))} instead.`);if(!js(h,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${Ir(Ri(h))} instead.`);return h.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Lg=Vf;class nu{constructor(r,l,h){this.type=qt,this.needle=r,this.haystack=l,this.fromIndex=h}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Wn),p=l.parse(r[2],2,Wn);if(!h||!p)return null;if(!Uc(h.type,[Hn,Xn,qt,Cs,Wn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(h.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,qt);return v?new nu(h,p,v):null}return new nu(h,p)}evaluate(r){const l=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!js(l,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(Ri(l))} instead.`);if(!js(h,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${Ir(Ri(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return h.indexOf(l,p)}return h.indexOf(l)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Bg=nu;class jf{constructor(r,l,h,p,v,x){this.inputType=r,this.type=l,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let h,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const v={},x=[];for(let M=2;M<r.length-1;M+=2){let D=r[M];const O=r[M+1];Array.isArray(D)||(D=[D]);const B=l.concat(M);if(D.length===0)return B.error("Expected at least one branch label.");for(const q of D){if(typeof q!="number"&&typeof q!="string")return B.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return B.error("Numeric branch labels must be integer values.");if(h){if(B.checkSubtype(h,Ri(q)))return null}else h=Ri(q);if(v[String(q)]!==void 0)return B.error("Branch labels must be unique.");v[String(q)]=x.length}const W=l.parse(O,M,p);if(!W)return null;p=p||W.type,x.push(W)}const T=l.parse(r[1],1,Wn);if(!T)return null;const E=l.parse(r[r.length-1],r.length-1,p);return E?T.type.kind!=="value"&&l.concat(1).checkSubtype(h,T.type)?null:new jf(h,p,T,v,x,E):null}evaluate(r){const l=this.input.evaluate(r);return(Ri(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),h=[],p={};for(const x of l){const T=p[this.cases[x]];T===void 0?(p[this.cases[x]]=h.length,h.push([this.cases[x],[x]])):h[T][1].push(x)}const v=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,T]of h)r.push(T.length===1?v(T[0]):T.map(v)),r.push(this.outputs[x].serialize());return r.push(this.otherwise.serialize()),r}}var C0=jf;class Wf{constructor(r,l,h){this.type=r,this.branches=l,this.otherwise=h}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const p=[];for(let x=1;x<r.length-1;x+=2){const T=l.parse(r[x],x,Hn);if(!T)return null;const E=l.parse(r[x+1],x+1,h);if(!E)return null;p.push([T,E]),h=h||E.type}const v=l.parse(r[r.length-1],r.length-1,h);return v?new Wf(h,p,v):null}evaluate(r){for(const[l,h]of this.branches)if(l.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,h]of this.branches)r(l),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(l=>{r.push(l.serialize())}),r}}var S0=Wf;class Qa{constructor(r,l,h,p){this.type=r,this.input=l,this.beginIndex=h,this.endIndex=p}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Wn),p=l.parse(r[2],2,qt);if(!h||!p)return null;if(!Uc(h.type,[Ji(Wn),Xn,Wn]))return l.error(`Expected first argument to be of type array or string, but found ${Ir(h.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,qt);return v?new Qa(h.type,h,p,v):null}return new Qa(h.type,h,p)}evaluate(r){const l=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!js(l,["string","array"]))throw new Qi(`Expected first argument to be of type array or string, but found ${Ir(Ri(l))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return l.slice(h,p)}return l.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Fg=Qa;function Hf(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function $g(a,r,l,h){return h.compare(r,l)===0}function Nl(a,r,l){const h=a!=="=="&&a!=="!=";return class Zz{constructor(v,x,T){this.type=Hn,this.lhs=v,this.rhs=x,this.collator=T,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const T=v[0];let E=x.parse(v[1],1,Wn);if(!E)return null;if(!Hf(T,E.type))return x.concat(1).error(`"${T}" comparisons are not supported for type '${Ir(E.type)}'.`);let M=x.parse(v[2],2,Wn);if(!M)return null;if(!Hf(T,M.type))return x.concat(2).error(`"${T}" comparisons are not supported for type '${Ir(M.type)}'.`);if(E.type.kind!==M.type.kind&&E.type.kind!=="value"&&M.type.kind!=="value")return x.error(`Cannot compare types '${Ir(E.type)}' and '${Ir(M.type)}'.`);h&&(E.type.kind==="value"&&M.type.kind!=="value"?E=new Ws(M.type,[E]):E.type.kind!=="value"&&M.type.kind==="value"&&(M=new Ws(E.type,[M])));let D=null;if(v.length===4){if(E.type.kind!=="string"&&M.type.kind!=="string"&&E.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(D=x.parse(v[3],3,Za),!D)return null}return new Zz(E,M,D)}evaluate(v){const x=this.lhs.evaluate(v),T=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const E=Ri(x),M=Ri(T);if(E.kind!==M.kind||E.kind!=="string"&&E.kind!=="number")throw new Qi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${E.kind}, ${M.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=Ri(x),M=Ri(T);if(E.kind!=="string"||M.kind!=="string")return r(v,x,T)}return this.collator?l(v,x,T,this.collator.evaluate(v)):r(v,x,T)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[a];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const E0=Nl("==",function(a,r,l){return r===l},$g),Ng=Nl("!=",function(a,r,l){return r!==l},function(a,r,l,h){return!$g(0,r,l,h)}),Ug=Nl("<",function(a,r,l){return r<l},function(a,r,l,h){return h.compare(r,l)<0}),Vg=Nl(">",function(a,r,l){return r>l},function(a,r,l,h){return h.compare(r,l)>0}),Gf=Nl("<=",function(a,r,l){return r<=l},function(a,r,l,h){return h.compare(r,l)<=0}),M0=Nl(">=",function(a,r,l){return r>=l},function(a,r,l,h){return h.compare(r,l)>=0});class qf{constructor(r,l,h,p,v,x){this.type=Xn,this.number=r,this.locale=l,this.currency=h,this.unit=p,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const h=l.parse(r[1],1,qt);if(!h)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=l.parse(p.locale,1,Xn),!v))return null;let x=null;if(p.currency&&(x=l.parse(p.currency,1,Xn),!x))return null;let T=null;if(p.unit&&(T=l.parse(p.unit,1,Xn),!T))return null;let E=null;if(p["min-fraction-digits"]&&(E=l.parse(p["min-fraction-digits"],1,qt),!E))return null;let M=null;return p["max-fraction-digits"]&&(M=l.parse(p["max-fraction-digits"],1,qt),!M)?null:new qf(h,v,x,T,E,M)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Zf{constructor(r){this.type=qt,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=l.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Ir(h.type)} instead.`):new Zf(h):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Qi(`Expected value to be of type string or array, but found ${Ir(Ri(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(l=>{r.push(l.serialize())}),r}}const jg={"==":E0,"!=":Ng,">":Vg,"<":Ug,">=":M0,"<=":Gf,array:Ws,at:T0,boolean:Ws,case:S0,coalesce:Og,collator:Id,format:Gc,image:Dd,in:Lg,"index-of":Bg,interpolate:Ss,"interpolate-hcl":Ss,"interpolate-lab":Ss,length:Zf,let:Uf,literal:Hc,match:C0,number:Ws,"number-format":qf,object:Ws,slice:Fg,step:Rf,string:Ws,"to-boolean":Bl,"to-color":Bl,"to-number":Bl,"to-string":Bl,var:If,within:Df};function Wg(a,[r,l,h,p]){r=r.evaluate(a),l=l.evaluate(a),h=h.evaluate(a);const v=p?p.evaluate(a):1,x=Tg(r,l,h,v);if(x)throw new Qi(x);return new bi(r/255*v,l/255*v,h/255*v,v)}function Hg(a,r){return a in r}function Yf(a,r){const l=r[a];return l===void 0?null:l}function ga(a){return{type:a}}fa.register(jg,{error:[{kind:"error"},[Xn],(a,[r])=>{throw new Qi(r.evaluate(a))}],typeof:[Xn,[Wn],(a,[r])=>Ir(Ri(r.evaluate(a)))],"to-rgba":[Ji(qt,4),[es],(a,[r])=>r.evaluate(a).toArray()],rgb:[es,[qt,qt,qt],Wg],rgba:[es,[qt,qt,qt,qt],Wg],has:{type:Hn,overloads:[[[Xn],(a,[r])=>Hg(r.evaluate(a),a.properties())],[[Xn,Vs],(a,[r,l])=>Hg(r.evaluate(a),l.evaluate(a))]]},get:{type:Wn,overloads:[[[Xn],(a,[r])=>Yf(r.evaluate(a),a.properties())],[[Xn,Vs],(a,[r,l])=>Yf(r.evaluate(a),l.evaluate(a))]]},"feature-state":[Wn,[Xn],(a,[r])=>Yf(r.evaluate(a),a.featureState||{})],properties:[Vs,[],a=>a.properties()],"geometry-type":[Xn,[],a=>a.geometryType()],id:[Wn,[],a=>a.id()],zoom:[qt,[],a=>a.globals.zoom],pitch:[qt,[],a=>a.globals.pitch||0],"distance-from-center":[qt,[],a=>a.distanceFromCenter()],"heatmap-density":[qt,[],a=>a.globals.heatmapDensity||0],"line-progress":[qt,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[qt,[],a=>a.globals.skyRadialProgress||0],accumulated:[Wn,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[qt,ga(qt),(a,r)=>{let l=0;for(const h of r)l+=h.evaluate(a);return l}],"*":[qt,ga(qt),(a,r)=>{let l=1;for(const h of r)l*=h.evaluate(a);return l}],"-":{type:qt,overloads:[[[qt,qt],(a,[r,l])=>r.evaluate(a)-l.evaluate(a)],[[qt],(a,[r])=>-r.evaluate(a)]]},"/":[qt,[qt,qt],(a,[r,l])=>r.evaluate(a)/l.evaluate(a)],"%":[qt,[qt,qt],(a,[r,l])=>r.evaluate(a)%l.evaluate(a)],ln2:[qt,[],()=>Math.LN2],pi:[qt,[],()=>Math.PI],e:[qt,[],()=>Math.E],"^":[qt,[qt,qt],(a,[r,l])=>Math.pow(r.evaluate(a),l.evaluate(a))],sqrt:[qt,[qt],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[qt,[qt],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[qt,[qt],(a,[r])=>Math.log(r.evaluate(a))],log2:[qt,[qt],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[qt,[qt],(a,[r])=>Math.sin(r.evaluate(a))],cos:[qt,[qt],(a,[r])=>Math.cos(r.evaluate(a))],tan:[qt,[qt],(a,[r])=>Math.tan(r.evaluate(a))],asin:[qt,[qt],(a,[r])=>Math.asin(r.evaluate(a))],acos:[qt,[qt],(a,[r])=>Math.acos(r.evaluate(a))],atan:[qt,[qt],(a,[r])=>Math.atan(r.evaluate(a))],min:[qt,ga(qt),(a,r)=>Math.min(...r.map(l=>l.evaluate(a)))],max:[qt,ga(qt),(a,r)=>Math.max(...r.map(l=>l.evaluate(a)))],abs:[qt,[qt],(a,[r])=>Math.abs(r.evaluate(a))],round:[qt,[qt],(a,[r])=>{const l=r.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[qt,[qt],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[qt,[qt],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[Hn,[Xn,Wn],(a,[r,l])=>a.properties()[r.value]===l.value],"filter-id-==":[Hn,[Wn],(a,[r])=>a.id()===r.value],"filter-type-==":[Hn,[Xn],(a,[r])=>a.geometryType()===r.value],"filter-<":[Hn,[Xn,Wn],(a,[r,l])=>{const h=a.properties()[r.value],p=l.value;return typeof h==typeof p&&h<p}],"filter-id-<":[Hn,[Wn],(a,[r])=>{const l=a.id(),h=r.value;return typeof l==typeof h&&l<h}],"filter->":[Hn,[Xn,Wn],(a,[r,l])=>{const h=a.properties()[r.value],p=l.value;return typeof h==typeof p&&h>p}],"filter-id->":[Hn,[Wn],(a,[r])=>{const l=a.id(),h=r.value;return typeof l==typeof h&&l>h}],"filter-<=":[Hn,[Xn,Wn],(a,[r,l])=>{const h=a.properties()[r.value],p=l.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[Hn,[Wn],(a,[r])=>{const l=a.id(),h=r.value;return typeof l==typeof h&&l<=h}],"filter->=":[Hn,[Xn,Wn],(a,[r,l])=>{const h=a.properties()[r.value],p=l.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[Hn,[Wn],(a,[r])=>{const l=a.id(),h=r.value;return typeof l==typeof h&&l>=h}],"filter-has":[Hn,[Wn],(a,[r])=>r.value in a.properties()],"filter-has-id":[Hn,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Hn,[Ji(Xn)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[Hn,[Ji(Wn)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[Hn,[Xn,Ji(Wn)],(a,[r,l])=>l.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[Hn,[Xn,Ji(Wn)],(a,[r,l])=>function(h,p,v,x){for(;v<=x;){const T=v+x>>1;if(p[T]===h)return!0;p[T]>h?x=T-1:v=T+1}return!1}(a.properties()[r.value],l.value,0,l.value.length-1)],all:{type:Hn,overloads:[[[Hn,Hn],(a,[r,l])=>r.evaluate(a)&&l.evaluate(a)],[ga(Hn),(a,r)=>{for(const l of r)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Hn,overloads:[[[Hn,Hn],(a,[r,l])=>r.evaluate(a)||l.evaluate(a)],[ga(Hn),(a,r)=>{for(const l of r)if(l.evaluate(a))return!0;return!1}]]},"!":[Hn,[Hn],(a,[r])=>!r.evaluate(a)],"is-supported-script":[Hn,[Xn],(a,[r])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(r.evaluate(a))}],upcase:[Xn,[Xn],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[Xn,[Xn],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[Xn,ga(Wn),(a,r)=>r.map(l=>Wc(l.evaluate(a))).join("")],"resolved-locale":[Xn,[Za],(a,[r])=>r.evaluate(a).resolvedLocale()]});var Ul=jg;function ru(a){return{result:"success",value:a}}function Vl(a){return{result:"error",value:a}}function jl(a){return a["property-type"]==="data-driven"}function Hs(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Hd(a){return!!a.expression&&a.expression.interpolated}function lr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Gd(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function P0(a){return a}function Xf(a,r){const l=r.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",p=h||!(h||a.property!==void 0),v=a.type||(Hd(r)?"exponential":"interval");if(l&&((a=jo({},a)).stops&&(a.stops=a.stops.map(M=>[M[0],bi.parse(M[1])])),a.default=bi.parse(a.default?a.default:r.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Rg[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let x,T,E;if(v==="exponential")x=qd;else if(v==="interval")x=Gg;else if(v==="categorical"){x=Kf,T=Object.create(null);for(const M of a.stops)T[M[0]]=M[1];E=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=qg}if(h){const M={},D=[];for(let W=0;W<a.stops.length;W++){const q=a.stops[W],K=q[0].zoom;M[K]===void 0&&(M[K]={zoom:K,type:a.type,property:a.property,default:a.default,stops:[]},D.push(K)),M[K].stops.push([q[0].value,q[1]])}const O=[];for(const W of D)O.push([M[W].zoom,Xf(M[W],r)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:Ss.interpolationFactor.bind(void 0,B),zoomStops:O.map(W=>W[0]),evaluate:({zoom:W},q)=>qd({stops:O,base:a.base},r,W).evaluate(W,q)}}if(p){const M=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Ss.interpolationFactor.bind(void 0,M),zoomStops:a.stops.map(D=>D[0]),evaluate:({zoom:D})=>x(a,r,D,T,E)}}return{kind:"source",evaluate(M,D){const O=D&&D.properties?D.properties[a.property]:void 0;return O===void 0?iu(a.default,r.default):x(a,r,O,T,E)}}}function iu(a,r,l){return a!==void 0?a:r!==void 0?r:l!==void 0?l:void 0}function Kf(a,r,l,h,p){return iu(typeof l===p?h[l]:void 0,a.default,r.default)}function Gg(a,r,l){if(lr(l)!=="number")return iu(a.default,r.default);const h=a.stops.length;if(h===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[h-1][0])return a.stops[h-1][1];const p=Ja(a.stops.map(v=>v[0]),l);return a.stops[p][1]}function qd(a,r,l){const h=a.base!==void 0?a.base:1;if(lr(l)!=="number")return iu(a.default,r.default);const p=a.stops.length;if(p===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[p-1][0])return a.stops[p-1][1];const v=Ja(a.stops.map(D=>D[0]),l),x=function(D,O,B,W){const q=W-B,K=D-B;return q===0?0:O===1?K/q:(Math.pow(O,K)-1)/(Math.pow(O,q)-1)}(l,h,a.stops[v][0],a.stops[v+1][0]),T=a.stops[v][1],E=a.stops[v+1][1];let M=Jc[r.type]||P0;if(a.colorSpace&&a.colorSpace!=="rgb"){const D=Rg[a.colorSpace];M=(O,B)=>D.reverse(D.interpolate(D.forward(O),D.forward(B),x))}return typeof T.evaluate=="function"?{evaluate(...D){const O=T.evaluate.apply(void 0,D),B=E.evaluate.apply(void 0,D);if(O!==void 0&&B!==void 0)return M(O,B,x)}}:M(T,E,x)}function qg(a,r,l){return r.type==="color"?l=bi.parse(l):r.type==="formatted"?l=Po.fromString(l.toString()):r.type==="resolvedImage"?l=bo.fromString(l.toString()):lr(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0),iu(l,a.default,r.default)}class Zd{constructor(r,l){this.expression=r,this._warningHistory={},this._evaluator=new qc,this._defaultValue=l?function(h){return h.type==="color"&&(Gd(h.default)||Array.isArray(h.default))?new bi(0,0,0,0):h.type==="color"?bi.parse(h.default)||null:h.default===void 0?null:h.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,h,p,v,x,T,E){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=p||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=T||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(r,l,h,p,v,x,T,E){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=T||null,this._evaluator.featureDistanceData=E||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Qi(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Wl(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Ul}function Hl(a,r){const l=new zf(Ul,[],r?function(p){const v={color:es,string:Xn,number:qt,enum:Xn,boolean:Hn,formatted:da,resolvedImage:ha};return p.type==="array"?Ji(v[p.value]||Wn,p.length):v[p.type]}(r):void 0),h=l.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?ru(new Zd(h,r)):Vl(l.errors)}class Yd{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!Kc(l.expression)}evaluateWithoutErrorHandling(r,l,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,l,h,p,v,x)}evaluate(r,l,h,p,v,x){return this._styleExpression.evaluate(r,l,h,p,v,x)}}class el{constructor(r,l,h,p){this.kind=r,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!Kc(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,l,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,l,h,p,v,x)}evaluate(r,l,h,p,v,x){return this._styleExpression.evaluate(r,l,h,p,v,x)}interpolationFactor(r,l,h){return this.interpolationType?Ss.interpolationFactor(this.interpolationType,r,l,h):0}}function tl(a,r){if((a=Hl(a,r)).result==="error")return a;const l=a.value.expression,h=Xc(l);if(!h&&!jl(r))return Vl([new Eo("","data expressions not supported")]);const p=Ld(l,["zoom","pitch","distance-from-center"]);if(!p&&!Hs(r))return Vl([new Eo("","zoom expressions not supported")]);const v=su(l);return v||p?v instanceof Eo?Vl([v]):v instanceof Ss&&!Hd(r)?Vl([new Eo("",'"interpolate" expressions cannot be used with this property')]):ru(v?new el(h?"camera":"composite",a.value,v.labels,v instanceof Ss?v.interpolation:void 0):new Yd(h?"constant":"source",a.value)):Vl([new Eo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ou{constructor(r,l){this._parameters=r,this._specification=l,jo(this,Xf(this._parameters,this._specification))}static deserialize(r){return new ou(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function su(a){let r=null;if(a instanceof Uf)r=su(a.result);else if(a instanceof Og){for(const l of a.args)if(r=su(l),r)break}else(a instanceof Rf||a instanceof Ss)&&a.input instanceof fa&&a.input.name==="zoom"&&(r=a);return r instanceof Eo||a.eachChild(l=>{const h=su(l);h instanceof Eo?r=h:!r&&h?r=new Eo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Eo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}class nn{constructor(r,l,h,p){this.message=(r?`${r}: `:"")+h,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function ns(a){const r=a.key,l=a.value,h=a.valueSpec||{},p=a.objectElementValidators||{},v=a.style,x=a.styleSpec;let T=[];const E=lr(l);if(E!=="object")return[new nn(r,l,`object expected, ${E} found`)];for(const M in l){const D=M.split(".")[0],O=h[D]||h["*"];let B;p[D]?B=p[D]:h[D]?B=lo:p["*"]?B=p["*"]:h["*"]&&(B=lo),B?T=T.concat(B({key:(r&&`${r}.`)+M,value:l[M],valueSpec:O,style:v,styleSpec:x,object:l,objectKey:M},l)):T.push(new nn(r,l[M],`unknown property "${M}"`))}for(const M in h)p[M]||h[M].required&&h[M].default===void 0&&l[M]===void 0&&T.push(new nn(r,l,`missing required property "${M}"`));return T}function Zg(a){const r=a.value,l=a.valueSpec,h=a.style,p=a.styleSpec,v=a.key,x=a.arrayElementValidator||lo;if(lr(r)!=="array")return[new nn(v,r,`array expected, ${lr(r)} found`)];if(l.length&&r.length!==l.length)return[new nn(v,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new nn(v,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let T={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};p.$version<7&&(T.function=l.function),lr(l.value)==="object"&&(T=l.value);let E=[];for(let M=0;M<r.length;M++)E=E.concat(x({array:r,arrayIndex:M,value:r[M],valueSpec:T,style:h,styleSpec:p,key:`${v}[${M}]`}));return E}function Jf(a){const r=a.key,l=a.value,h=a.valueSpec;let p=lr(l);if(p==="number"&&l!=l&&(p="NaN"),p!=="number")return[new nn(r,l,`number expected, ${p} found`)];if("minimum"in h){let v=h.minimum;if(lr(h.minimum)==="array"&&(v=h.minimum[a.arrayIndex]),l<v)return[new nn(r,l,`${l} is less than the minimum value ${v}`)]}if("maximum"in h){let v=h.maximum;if(lr(h.maximum)==="array"&&(v=h.maximum[a.arrayIndex]),l>v)return[new nn(r,l,`${l} is greater than the maximum value ${v}`)]}return[]}function au(a){const r=a.valueSpec,l=ii(a.value.type);let h,p,v,x={};const T=l!=="categorical"&&a.value.property===void 0,E=!T,M=lr(a.value.stops)==="array"&&lr(a.value.stops[0])==="array"&&lr(a.value.stops[0][0])==="object",D=ns({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(W){if(l==="identity")return[new nn(W.key,W.value,'identity function may not have a "stops" property')];let q=[];const K=W.value;return q=q.concat(Zg({key:W.key,value:K,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:O})),lr(K)==="array"&&K.length===0&&q.push(new nn(W.key,K,"array must have at least one stop")),q},default:function(W){return lo({key:W.key,value:W.value,valueSpec:r,style:W.style,styleSpec:W.styleSpec})}}});return l==="identity"&&T&&D.push(new nn(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||D.push(new nn(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!Hd(a.valueSpec)&&D.push(new nn(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(E&&!jl(a.valueSpec)?D.push(new nn(a.key,a.value,"property functions not supported")):T&&!Hs(a.valueSpec)&&D.push(new nn(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!M||a.value.property!==void 0||D.push(new nn(a.key,a.value,'"property" property is required')),D;function O(W){let q=[];const K=W.value,re=W.key;if(lr(K)!=="array")return[new nn(re,K,`array expected, ${lr(K)} found`)];if(K.length!==2)return[new nn(re,K,`array length 2 expected, length ${K.length} found`)];if(M){if(lr(K[0])!=="object")return[new nn(re,K,`object expected, ${lr(K[0])} found`)];if(K[0].zoom===void 0)return[new nn(re,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new nn(re,K,"object stop key must have value")];const me=ii(K[0].zoom);if(typeof me!="number")return[new nn(re,K[0].zoom,"stop zoom values must be numbers")];if(v&&v>me)return[new nn(re,K[0].zoom,"stop zoom values must appear in ascending order")];me!==v&&(v=me,p=void 0,x={}),q=q.concat(ns({key:`${re}[0]`,value:K[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Jf,value:B}}))}else q=q.concat(B({key:`${re}[0]`,value:K[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},K));return Wl(Qo(K[1]))?q.concat([new nn(`${re}[1]`,K[1],"expressions are not allowed in function stops.")]):q.concat(lo({key:`${re}[1]`,value:K[1],valueSpec:r,style:W.style,styleSpec:W.styleSpec}))}function B(W,q){const K=lr(W.value),re=ii(W.value),me=W.value!==null?W.value:q;if(h){if(K!==h)return[new nn(W.key,me,`${K} stop domain type must match previous stop domain type ${h}`)]}else h=K;if(K!=="number"&&K!=="string"&&K!=="boolean"&&typeof re!="number"&&typeof re!="string"&&typeof re!="boolean")return[new nn(W.key,me,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&l!=="categorical"){let Te=`number expected, ${K} found`;return jl(r)&&l===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nn(W.key,me,Te)]}return l!=="categorical"||K!=="number"||typeof re=="number"&&isFinite(re)&&Math.floor(re)===re?l!=="categorical"&&K==="number"&&typeof re=="number"&&typeof p=="number"&&p!==void 0&&re<p?[new nn(W.key,me,"stop domain values must appear in ascending order")]:(p=re,l==="categorical"&&re in x?[new nn(W.key,me,"stop domain values must be unique")]:(x[re]=!0,[])):[new nn(W.key,me,`integer expected, found ${String(re)}`)]}}function Gl(a){const r=(a.expressionContext==="property"?tl:Hl)(Qo(a.value),a.valueSpec);if(r.result==="error")return r.value.map(h=>new nn(`${a.key}${h.key}`,a.value,h.message));const l=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new nn(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Kc(l))return[new nn(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return Yg(l,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Ld(l,["zoom","feature-state"]))return[new nn(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Xc(l))return[new nn(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Yg(a,r){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const p of r.valueSpec.expression.parameters)l.delete(p);if(l.size===0)return[];const h=[];return a instanceof fa&&l.has(a.name)?[new nn(r.key,r.value,`["${a.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(a.eachChild(p=>{h.push(...Yg(p,r))}),h)}function Xd(a){const r=a.key,l=a.value,h=a.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(ii(l))===-1&&p.push(new nn(r,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(ii(l))===-1&&p.push(new nn(r,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function Qf(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!Qf(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function Kd(a,r="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Qf(a)||(a=Qd(a));const l=a;let h=!0;try{h=function(M){if(!Zi(M))return M;let D=Qo(M);return cu(D),D=lu(D),D}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const p=ft[`filter_${r}`],v=Hl(h,p);let x=null;if(v.result==="error")throw new Error(v.value.map(M=>`${M.key}: ${M.message}`).join(", "));x=(M,D,O)=>v.value.evaluate(M,D,{},O);let T=null,E=null;if(h!==l){const M=Hl(l,p);if(M.result==="error")throw new Error(M.value.map(D=>`${D.key}: ${D.message}`).join(", "));T=(D,O,B,W,q)=>M.value.evaluate(D,O,{},B,void 0,void 0,W,q),E=!Xc(M.value.expression)}return{filter:x,dynamicFilter:T||void 0,needGeometry:Xg(h),needFeature:!!E}}function lu(a){if(!Array.isArray(a))return a;const r=function(l){if(Jd.has(l[0])){for(let h=1;h<l.length;h++)if(Zi(l[h]))return!0}return l}(a);return r===!0?r:r.map(l=>lu(l))}function cu(a){let r=!1;const l=[];if(a[0]==="case"){for(let h=1;h<a.length-1;h+=2)r=r||Zi(a[h]),l.push(a[h+1]);l.push(a[a.length-1])}else if(a[0]==="match"){r=r||Zi(a[1]);for(let h=2;h<a.length-1;h+=2)l.push(a[h+1]);l.push(a[a.length-1])}else if(a[0]==="step"){r=r||Zi(a[1]);for(let h=1;h<a.length-1;h+=2)l.push(a[h+1])}r&&(a.length=0,a.push("any",...l));for(let h=1;h<a.length;h++)cu(a[h])}function Zi(a){if(!Array.isArray(a))return!1;if((r=a[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let l=1;l<a.length;l++)if(Zi(a[l]))return!0;return!1}const Jd=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function A0(a,r){return a<r?-1:a>r?1:0}function Xg(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let r=1;r<a.length;r++)if(Xg(a[r]))return!0;return!1}function Qd(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?ep(a[1],a[2],"=="):r==="!="?ql(ep(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?ep(a[1],a[2],r):r==="any"?(l=a.slice(1),["any"].concat(l.map(Qd))):r==="all"?["all"].concat(a.slice(1).map(Qd)):r==="none"?["all"].concat(a.slice(1).map(Qd).map(ql)):r==="in"?eh(a[1],a.slice(2)):r==="!in"?ql(eh(a[1],a.slice(2))):r==="has"?Kg(a[1]):r==="!has"?ql(Kg(a[1])):r!=="within"||a;var l}function ep(a,r,l){switch(a){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,a,r]}}function eh(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",a,["literal",r.sort(A0)]]:["filter-in-small",a,["literal",r]]}}function Kg(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function ql(a){return["!",a]}function tp(a){return Qf(Qo(a.value))?Gl(jo({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):Jg(a)}function Jg(a){const r=a.value,l=a.key;if(lr(r)!=="array")return[new nn(l,r,`array expected, ${lr(r)} found`)];const h=a.styleSpec;let p,v=[];if(r.length<1)return[new nn(l,r,"filter array must have at least 1 element")];switch(v=v.concat(Xd({key:`${l}[0]`,value:r[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),ii(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&ii(r[1])==="$type"&&v.push(new nn(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new nn(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=lr(r[1]),p!=="string"&&v.push(new nn(`${l}[1]`,r[1],`string expected, ${p} found`)));for(let x=2;x<r.length;x++)p=lr(r[x]),ii(r[1])==="$type"?v=v.concat(Xd({key:`${l}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new nn(`${l}[${x}]`,r[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(Jg({key:`${l}[${x}]`,value:r[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=lr(r[1]),r.length!==2?v.push(new nn(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new nn(`${l}[1]`,r[1],`string expected, ${p} found`));break;case"within":p=lr(r[1]),r.length!==2?v.push(new nn(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new nn(`${l}[1]`,r[1],`object expected, ${p} found`))}return v}function th(a,r){const l=a.key,h=a.style,p=a.styleSpec,v=a.value,x=a.objectKey,T=p[`${r}_${a.layerType}`];if(!T)return[];const E=x.match(/^(.*)-transition$/);if(r==="paint"&&E&&T[E[1]]&&T[E[1]].transition)return lo({key:l,value:v,valueSpec:p.transition,style:h,styleSpec:p});const M=a.valueSpec||T[x];if(!M)return[new nn(l,v,`unknown property "${x}"`)];let D;if(lr(v)==="string"&&jl(M)&&!M.tokens&&(D=/^{([^}]+)}$/.exec(v))){const B=`\`{ "type": "identity", "property": ${D?JSON.stringify(D[1]):'"_"'} }\``;return[new nn(l,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: ${B}.`)]}const O=[];return a.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&O.push(new nn(l,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Gd(Qo(v))&&ii(v.type)==="identity"&&O.push(new nn(l,v,'"text-font" does not support identity functions'))),O.concat(lo({key:a.key,value:v,valueSpec:M,style:h,styleSpec:p,expressionContext:"property",propertyType:r,propertyKey:x}))}function Qg(a){return th(a,"paint")}function np(a){return th(a,"layout")}function rp(a){let r=[];const l=a.value,h=a.key,p=a.style,v=a.styleSpec;l.type||l.ref||r.push(new nn(h,l,'either "type" or "ref" is required'));let x=ii(l.type);const T=ii(l.ref);if(l.id){const E=ii(l.id);for(let M=0;M<a.arrayIndex;M++){const D=p.layers[M];ii(D.id)===E&&r.push(new nn(h,l.id,`duplicate layer id "${l.id}", previously used at line ${D.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(M=>{M in l&&r.push(new nn(h,l[M],`"${M}" is prohibited for ref layers`))}),p.layers.forEach(M=>{ii(M.id)===T&&(E=M)}),E?E.ref?r.push(new nn(h,l.ref,"ref cannot reference another ref layer")):x=ii(E.type):typeof T=="string"&&r.push(new nn(h,l.ref,`ref layer "${T}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const E=p.sources&&p.sources[l.source],M=E&&ii(E.type);E?M==="vector"&&x==="raster"?r.push(new nn(h,l.source,`layer "${l.id}" requires a raster source`)):M==="raster"&&x!=="raster"?r.push(new nn(h,l.source,`layer "${l.id}" requires a vector source`)):M!=="vector"||l["source-layer"]?M==="raster-dem"&&x!=="hillshade"?r.push(new nn(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||M==="geojson"&&E.lineMetrics||r.push(new nn(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new nn(h,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new nn(h,l.source,`source "${l.source}" not found`))}else r.push(new nn(h,l,'missing required property "source"'));return r=r.concat(ns({key:h,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>lo({key:`${h}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,object:l,objectKey:"type"}),filter:E=>tp(jo({layerType:x},E)),layout:E=>ns({layer:l,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":M=>np(jo({layerType:x},M))}}),paint:E=>ns({layer:l,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":M=>Qg(jo({layerType:x},M))}})}})),r}function Zl(a){const r=a.value,l=a.key,h=lr(r);return h!=="string"?[new nn(l,r,`string expected, ${h} found`)]:[]}const nh={promoteId:function({key:a,value:r}){if(lr(r)==="string")return Zl({key:a,value:r});{const l=[];for(const h in r)l.push(...Zl({key:`${a}.${h}`,value:r[h]}));return l}}};function uu(a){const r=a.value,l=a.key,h=a.styleSpec,p=a.style;if(!r.type)return[new nn(l,r,'"type" is required')];const v=ii(r.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=ns({key:l,value:r,valueSpec:h[`source_${v.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:nh}),x;case"geojson":if(x=ns({key:l,value:r,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:nh}),r.cluster)for(const T in r.clusterProperties){const[E,M]=r.clusterProperties[T],D=typeof E=="string"?[E,["accumulated"],["get",T]]:E;x.push(...Gl({key:`${l}.${T}.map`,value:M,expressionContext:"cluster-map"})),x.push(...Gl({key:`${l}.${T}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return x;case"video":return ns({key:l,value:r,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return ns({key:l,value:r,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new nn(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xd({key:`${l}.type`,value:r.type,valueSpec:{values:ev(h)},style:p,styleSpec:h})}}function ev(a){return a.source.reduce((r,l)=>{const h=a[l];return h.type.type==="enum"&&(r=r.concat(Object.keys(h.type.values))),r},[])}function tv(a){const r=a.value,l=a.styleSpec,h=l.light,p=a.style;let v=[];const x=lr(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new nn("light",r,`object expected, ${x} found`)]),v;for(const T in r){const E=T.match(/^(.*)-transition$/);v=v.concat(E&&h[E[1]]&&h[E[1]].transition?lo({key:T,value:r[T],valueSpec:l.transition,style:p,styleSpec:l}):h[T]?lo({key:T,value:r[T],valueSpec:h[T],style:p,styleSpec:l}):[new nn(T,r[T],`unknown property "${T}"`)])}return v}function ip(a){const r=a.value,l=a.key,h=a.style,p=a.styleSpec,v=p.terrain;let x=[];const T=lr(r);if(r===void 0)return x;if(T!=="object")return x=x.concat([new nn("terrain",r,`object expected, ${T} found`)]),x;for(const E in r){const M=E.match(/^(.*)-transition$/);x=x.concat(M&&v[M[1]]&&v[M[1]].transition?lo({key:E,value:r[E],valueSpec:p.transition,style:h,styleSpec:p}):v[E]?lo({key:E,value:r[E],valueSpec:v[E],style:h,styleSpec:p}):[new nn(E,r[E],`unknown property "${E}"`)])}if(r.source){const E=h.sources&&h.sources[r.source],M=E&&ii(E.type);E?M!=="raster-dem"&&x.push(new nn(l,r.source,`terrain cannot be used with a source of type ${String(M)}, it only be used with a "raster-dem" source type`)):x.push(new nn(l,r.source,`source "${r.source}" not found`))}else x.push(new nn(l,r,'terrain is missing required property "source"'));return x}function nv(a){const r=a.value,l=a.style,h=a.styleSpec,p=h.fog;let v=[];const x=lr(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new nn("fog",r,`object expected, ${x} found`)]),v;for(const T in r){const E=T.match(/^(.*)-transition$/);v=v.concat(E&&p[E[1]]&&p[E[1]].transition?lo({key:T,value:r[T],valueSpec:h.transition,style:l,styleSpec:h}):p[T]?lo({key:T,value:r[T],valueSpec:p[T],style:l,styleSpec:h}):[new nn(T,r[T],`unknown property "${T}"`)])}return v}const rh={"*":()=>[],array:Zg,boolean:function(a){const r=a.value,l=a.key,h=lr(r);return h!=="boolean"?[new nn(l,r,`boolean expected, ${h} found`)]:[]},number:Jf,color:function(a){const r=a.key,l=a.value,h=lr(l);return h!=="string"?[new nn(r,l,`color expected, ${h} found`)]:Vc(l)===null?[new nn(r,l,`color expected, "${l}" found`)]:[]},enum:Xd,filter:tp,function:au,layer:rp,object:ns,source:uu,light:tv,terrain:ip,fog:nv,string:Zl,formatted:function(a){return Zl(a).length===0?[]:Gl(a)},resolvedImage:function(a){return Zl(a).length===0?[]:Gl(a)},projection:function(a){const r=a.value,l=a.styleSpec,h=l.projection,p=a.style;let v=[];const x=lr(r);if(x==="object")for(const T in r)v=v.concat(lo({key:T,value:r[T],valueSpec:h[T],style:p,styleSpec:l}));else x!=="string"&&(v=v.concat([new nn("projection",r,`object or string expected, ${x} found`)]));return v}};function lo(a){const r=a.value,l=a.valueSpec,h=a.styleSpec;return l.expression&&Gd(ii(r))?au(a):l.expression&&Wl(Qo(r))?Gl(a):l.type&&rh[l.type]?rh[l.type](a):ns(jo({},a,{valueSpec:l.type?h[l.type]:l}))}function k0(a){const r=a.value,l=a.key,h=Zl(a);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new nn(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new nn(l,r,'"glyphs" url must include a "{range}" token'))),h}function rv(a,r=ft){return Gs(lo({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,objectElementValidators:{glyphs:k0,"*":()=>[]}}))}const D0=a=>Gs(Qg(a)),iv=a=>Gs(np(a));function Gs(a){return a.slice().sort((r,l)=>r.line&&l.line?r.line-l.line:0)}function ov(a,r){let l=!1;if(r&&r.length)for(const h of r)a.fire(new Jo(new Error(h.message))),l=!0;return l}var Yl=Es;function Es(a,r,l){var h=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var p=new Int32Array(this.arrayBuffer);a=p[0],this.d=(r=p[1])+2*(l=p[2]);for(var v=0;v<this.d*this.d;v++){var x=p[3+v],T=p[3+v+1];h.push(x===T?null:p.subarray(x,T))}var E=p[3+h.length+1];this.keys=p.subarray(p[3+h.length],E),this.bboxes=p.subarray(E),this.insert=this._insertReadonly}else{this.d=r+2*l;for(var M=0;M<this.d*this.d;M++)h.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=a,this.padding=l,this.scale=r/a,this.uid=0;var D=l/r*a;this.min=-D,this.max=a+D}Es.prototype.insert=function(a,r,l,h,p){this._forEachCell(r,l,h,p,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(r),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p)},Es.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Es.prototype._insertCell=function(a,r,l,h,p,v){this.cells[p].push(v)},Es.prototype.query=function(a,r,l,h,p){var v=this.min,x=this.max;if(a<=v&&r<=v&&x<=l&&x<=h&&!p)return Array.prototype.slice.call(this.keys);var T=[];return this._forEachCell(a,r,l,h,this._queryCell,T,{},p),T},Es.prototype._queryCell=function(a,r,l,h,p,v,x,T){var E=this.cells[p];if(E!==null)for(var M=this.keys,D=this.bboxes,O=0;O<E.length;O++){var B=E[O];if(x[B]===void 0){var W=4*B;(T?T(D[W+0],D[W+1],D[W+2],D[W+3]):a<=D[W+2]&&r<=D[W+3]&&l>=D[W+0]&&h>=D[W+1])?(x[B]=!0,v.push(M[B])):x[B]=!1}}},Es.prototype._forEachCell=function(a,r,l,h,p,v,x,T){for(var E=this._convertToCellCoord(a),M=this._convertToCellCoord(r),D=this._convertToCellCoord(l),O=this._convertToCellCoord(h),B=E;B<=D;B++)for(var W=M;W<=O;W++){var q=this.d*W+B;if((!T||T(this._convertFromCellCoord(B),this._convertFromCellCoord(W),this._convertFromCellCoord(B+1),this._convertFromCellCoord(W+1)))&&p.call(this,a,r,l,h,q,v,x,T))return}},Es.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},Es.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},Es.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,r=3+this.cells.length+1+1,l=0,h=0;h<this.cells.length;h++)l+=this.cells[h].length;var p=new Int32Array(r+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var v=r,x=0;x<a.length;x++){var T=a[x];p[3+x]=v,p.set(T,v),v+=T.length}return p[3+a.length]=v,p.set(this.keys,v),p[3+a.length+1]=v+=this.keys.length,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer};const ih={};function un(a,r,l={}){Object.defineProperty(a,"_classRegistryKey",{value:r,writeable:!1}),ih[r]={klass:a,omit:l.omit||[]}}un(Object,"Object"),Yl.serialize=function(a,r){const l=a.toArrayBuffer();return r&&r.push(l),{buffer:l}},Yl.deserialize=function(a){return new Yl(a.buffer)},Object.defineProperty(Yl,"name",{value:"Grid"}),un(Yl,"Grid"),un(bi,"Color"),un(Error,"Error"),un(sr,"AJAXError"),un(bo,"ResolvedImage"),un(ou,"StylePropertyFunction"),un(Zd,"StyleExpression",{omit:["_evaluator"]}),un(el,"ZoomDependentExpression"),un(Yd,"ZoomConstantExpression"),un(fa,"CompoundExpression",{omit:["_evaluate"]});for(const a in Ul)ih[Ul[a]._classRegistryKey]||un(Ul[a],`Expression${a}`);function sv(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function du(a){return m.ImageBitmap&&a instanceof m.ImageBitmap}function hu(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(sv(a)||du(a))return r&&r.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return r&&r.push(l.buffer),l}if(a instanceof m.ImageData)return r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const h of a)l.push(hu(h,r));return l}if(typeof a=="object"){const l=a.constructor,h=l._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const p=l.serialize?l.serialize(a,r):{};if(!l.serialize){for(const v in a)a.hasOwnProperty(v)&&(ih[h].omit.indexOf(v)>=0||(p[v]=hu(a[v],r)));a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof a)}function fu(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||sv(a)||du(a)||ArrayBuffer.isView(a)||a instanceof m.ImageData)return a;if(Array.isArray(a))return a.map(fu);if(typeof a=="object"){const r=a.$name||"Object",{klass:l}=ih[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(a);const h=Object.create(l.prototype);for(const p of Object.keys(a))p!=="$name"&&(h[p]=fu(a[p]));return h}throw new Error("can't deserialize object of type "+typeof a)}const pu=a=>a>=1536&&a<=1791,av=a=>a>=1872&&a<=1919,op=a=>a>=2208&&a<=2303,lv=a=>a>=11904&&a<=12031,sp=a=>a>=12032&&a<=12255,ap=a=>a>=12272&&a<=12287,mu=a=>a>=12288&&a<=12351,oh=a=>a>=12352&&a<=12447,Xl=a=>a>=12448&&a<=12543,sh=a=>a>=12544&&a<=12591,cv=a=>a>=12704&&a<=12735,uv=a=>a>=12736&&a<=12783,lp=a=>a>=12784&&a<=12799,dv=a=>a>=12800&&a<=13055,hv=a=>a>=13056&&a<=13311,fv=a=>a>=13312&&a<=19903,cp=a=>a>=19968&&a<=40959,pv=a=>a>=40960&&a<=42127,mv=a=>a>=42128&&a<=42191,gv=a=>a>=44032&&a<=55215,vv=a=>a>=63744&&a<=64255,ah=a=>a>=64336&&a<=65023,gu=a=>a>=65040&&a<=65055,g=a=>a>=65072&&a<=65103,c=a=>a>=65104&&a<=65135,f=a=>a>=65136&&a<=65279,_=a=>a>=65280&&a<=65519;function b(a){for(const r of a)if(k(r.charCodeAt(0)))return!0;return!1}function C(a){for(const r of a)if(!P(r.charCodeAt(0)))return!1;return!0}function P(a){return!(pu(a)||av(a)||op(a)||ah(a)||f(a))}function k(a){return!(a!==746&&a!==747&&(a<4352||!(cv(a)||sh(a)||g(a)&&!(a>=65097&&a<=65103)||vv(a)||hv(a)||lv(a)||uv(a)||!(!mu(a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||fv(a)||cp(a)||dv(a)||(r=>r>=12592&&r<=12687)(a)||(r=>r>=43360&&r<=43391)(a)||(r=>r>=55216&&r<=55295)(a)||(r=>r>=4352&&r<=4607)(a)||gv(a)||oh(a)||ap(a)||(r=>r>=12688&&r<=12703)(a)||sp(a)||lp(a)||Xl(a)&&a!==12540||!(!_(a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!c(a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||(r=>r>=5120&&r<=5759)(a)||(r=>r>=6320&&r<=6399)(a)||gu(a)||(r=>r>=19904&&r<=19967)(a)||pv(a)||mv(a))))}function R(a){return!(k(a)||function(r){return!!((l=>l>=128&&l<=255)(r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||(l=>l>=8192&&l<=8303)(r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||(l=>l>=8448&&l<=8527)(r)||(l=>l>=8528&&l<=8591)(r)||(l=>l>=8960&&l<=9215)(r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||(l=>l>=9216&&l<=9279)(r)&&r!==9251||(l=>l>=9280&&l<=9311)(r)||(l=>l>=9312&&l<=9471)(r)||(l=>l>=9632&&l<=9727)(r)||(l=>l>=9728&&l<=9983)(r)&&!(r>=9754&&r<=9759)||(l=>l>=11008&&l<=11263)(r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||mu(r)||Xl(r)||(l=>l>=57344&&l<=63743)(r)||g(r)||c(r)||_(r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function N(a){return a>=1424&&a<=2303||ah(a)||f(a)}function $(a,r){return!(!r&&N(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||(l=>l>=6016&&l<=6143)(a))}function X(a){for(const r of a)if(N(r.charCodeAt(0)))return!0;return!1}const te="deferred",ie="loading",se="loaded";let ae=null,le="unavailable",Q=null;const ve=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(le="error"),ae&&ae(a)};function ge(){_e.fire(new yr("pluginStateChange",{pluginStatus:le,pluginURL:Q}))}const _e=new Vo,ke=function(){return le},Se=function(){if(le!==te||!Q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");le=ie,ge(),Q&&dr({url:Q},a=>{a?ve(a):(le=se,ge())})},Ie={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>le===se||Ie.applyArabicShaping!=null,isLoading:()=>le===ie,setState(a){le=a.pluginStatus,Q=a.pluginURL},isParsed:()=>Ie.applyArabicShaping!=null&&Ie.processBidirectionalText!=null&&Ie.processStyledBidirectionalText!=null,getPluginURL:()=>Q};class We{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(l,h){for(const p of l)if(!$(p.charCodeAt(0),h))return!1;return!0}(r,Ie.isLoaded())}}class Xe{constructor(r,l){this.property=r,this.value=l,this.expression=function(h,p){if(Gd(h))return new ou(h,p);if(Wl(h)){const v=tl(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return typeof h=="string"&&p.type==="color"&&(v=bi.parse(h)),{kind:"constant",evaluate:()=>v}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,h){return this.property.possiblyEvaluate(this,r,l,h)}}class rt{constructor(r){this.property=r,this.value=new Xe(r,void 0)}transitioned(r,l){return new Ge(this.property,this.value,l,ut({},r.transition,this.transition),r.now)}untransitioned(){return new Ge(this.property,this.value,null,{},0)}}class Ht{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Yt(this._values[r].value.value)}setValue(r,l){this._values.hasOwnProperty(r)||(this._values[r]=new rt(this._values[r].property)),this._values[r].value=new Xe(this._values[r].property,l===null?void 0:Yt(l))}getTransition(r){return Yt(this._values[r].transition)}setTransition(r,l){this._values.hasOwnProperty(r)||(this._values[r]=new rt(this._values[r].property)),this._values[r].transition=Yt(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(r[l]=h);const p=this.getTransition(l);p!==void 0&&(r[`${l}-transition`]=p)}return r}transitioned(r,l){const h=new St(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(r,l._values[p]);return h}untransitioned(){const r=new St(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class Ge{constructor(r,l,h,p,v){const x=p.delay||0,T=p.duration||0;v=v||0,this.property=r,this.value=l,this.begin=v+x,this.end=this.begin+T,r.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(r,l,h){const p=r.now||0,v=this.value.possiblyEvaluate(r,l,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(r,l,h);{const T=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,l,h),v,xe(T))}}return v}}class St{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,h){const p=new tt(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(r,l,h);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class dt{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return Yt(this._values[r].value)}setValue(r,l){this._values[r]=new Xe(this._values[r].property,l===null?void 0:Yt(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(r[l]=h)}return r}possiblyEvaluate(r,l,h){const p=new tt(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(r,l,h);return p}}class zt{constructor(r,l,h){this.property=r,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,h,p){return this.property.evaluate(this.value,this.parameters,r,l,h,p)}}class tt{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Ve{constructor(r){this.specification=r}possiblyEvaluate(r,l){return r.expression.evaluate(l)}interpolate(r,l,h){const p=Jc[this.specification.type];return p?p(r,l,h):r}}class ot{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,h,p){return new zt(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},h,p)}:r.expression,l)}interpolate(r,l,h){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new zt(this,{kind:"constant",value:void 0},r.parameters);const p=Jc[this.specification.type];return p?new zt(this,{kind:"constant",value:p(r.value.value,l.value.value,h)},r.parameters):r}evaluate(r,l,h,p,v,x){return r.kind==="constant"?r.value:r.evaluate(l,h,p,v,x)}}class Dt{constructor(r){this.specification=r}possiblyEvaluate(r,l,h,p){return!!r.expression.evaluate(l,null,{},h,p)}interpolate(){return!1}}class Bt{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new We(0,{});for(const h in r){const p=r[h];p.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new Xe(p,void 0),x=this.defaultTransitionablePropertyValues[h]=new rt(p);this.defaultTransitioningPropertyValues[h]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate(l)}}}function _n(a,r){return 256*(a=Be(Math.floor(a),0,255))+Be(Math.floor(r),0,255)}un(ot,"DataDrivenProperty"),un(Ve,"DataConstantProperty"),un(Dt,"ColorRampProperty");const Vn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dn{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class rn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function xn(a,r=1){let l=0,h=0;return{members:a.map(p=>{const v=Vn[p.type].BYTES_PER_ELEMENT,x=l=Jn(l,Math.max(r,v)),T=p.components||1;return h=Math.max(h,v),l+=v*T,{name:p.name,type:p.type,components:T,offset:x}}),size:Jn(l,Math.max(h,r)),alignment:r}}function Jn(a,r){return Math.ceil(a/r)*r}class Mn extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const h=this.length;return this.resize(h+1),this.emplace(h,r,l)}emplace(r,l,h){const p=2*r;return this.int16[p+0]=l,this.int16[p+1]=h,r}}Mn.prototype.bytesPerElement=4,un(Mn,"StructArrayLayout2i4");class Tr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,l,h)}emplace(r,l,h,p){const v=3*r;return this.int16[v+0]=l,this.int16[v+1]=h,this.int16[v+2]=p,r}}Tr.prototype.bytesPerElement=6,un(Tr,"StructArrayLayout3i6");class Sr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,h,p)}emplace(r,l,h,p,v){const x=4*r;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,r}}Sr.prototype.bytesPerElement=8,un(Sr,"StructArrayLayout4i8");class jr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x,T){const E=this.length;return this.resize(E+1),this.emplace(E,r,l,h,p,v,x,T)}emplace(r,l,h,p,v,x,T,E){const M=6*r,D=12*r,O=3*r;return this.int16[M+0]=l,this.int16[M+1]=h,this.uint8[D+4]=p,this.uint8[D+5]=v,this.uint8[D+6]=x,this.uint8[D+7]=T,this.float32[O+2]=E,r}}jr.prototype.bytesPerElement=12,un(jr,"StructArrayLayout2i4ub1f12");class Nr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,h,p)}emplace(r,l,h,p,v){const x=4*r;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,r}}Nr.prototype.bytesPerElement=16,un(Nr,"StructArrayLayout4f16");class Ei extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,l,h,p,v)}emplace(r,l,h,p,v,x){const T=6*r,E=3*r;return this.uint16[T+0]=l,this.uint16[T+1]=h,this.uint16[T+2]=p,this.uint16[T+3]=v,this.float32[E+2]=x,r}}Ei.prototype.bytesPerElement=12,un(Ei,"StructArrayLayout4ui1f12");class Ao extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,h,p)}emplace(r,l,h,p,v){const x=4*r;return this.uint16[x+0]=l,this.uint16[x+1]=h,this.uint16[x+2]=p,this.uint16[x+3]=v,r}}Ao.prototype.bytesPerElement=8,un(Ao,"StructArrayLayout4ui8");class ps extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,r,l,h,p,v,x)}emplace(r,l,h,p,v,x,T){const E=6*r;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=p,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=T,r}}ps.prototype.bytesPerElement=12,un(ps,"StructArrayLayout6i12");class qs extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x,T,E,M,D,O,B){const W=this.length;return this.resize(W+1),this.emplace(W,r,l,h,p,v,x,T,E,M,D,O,B)}emplace(r,l,h,p,v,x,T,E,M,D,O,B,W){const q=12*r;return this.int16[q+0]=l,this.int16[q+1]=h,this.int16[q+2]=p,this.int16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=T,this.uint16[q+6]=E,this.uint16[q+7]=M,this.int16[q+8]=D,this.int16[q+9]=O,this.int16[q+10]=B,this.int16[q+11]=W,r}}qs.prototype.bytesPerElement=24,un(qs,"StructArrayLayout4i4ui4i24");class Kr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,r,l,h,p,v,x)}emplace(r,l,h,p,v,x,T){const E=10*r,M=5*r;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=p,this.float32[M+2]=v,this.float32[M+3]=x,this.float32[M+4]=T,r}}Kr.prototype.bytesPerElement=20,un(Kr,"StructArrayLayout3i3f20");class Ur extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}Ur.prototype.bytesPerElement=4,un(Ur,"StructArrayLayout1ul4");class vr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x,T,E,M,D,O,B,W){const q=this.length;return this.resize(q+1),this.emplace(q,r,l,h,p,v,x,T,E,M,D,O,B,W)}emplace(r,l,h,p,v,x,T,E,M,D,O,B,W,q){const K=20*r,re=10*r;return this.int16[K+0]=l,this.int16[K+1]=h,this.int16[K+2]=p,this.int16[K+3]=v,this.int16[K+4]=x,this.float32[re+3]=T,this.float32[re+4]=E,this.float32[re+5]=M,this.float32[re+6]=D,this.int16[K+14]=O,this.uint32[re+8]=B,this.uint16[K+18]=W,this.uint16[K+19]=q,r}}vr.prototype.bytesPerElement=40,un(vr,"StructArrayLayout5i4f1i1ul2ui40");class di extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x,T){const E=this.length;return this.resize(E+1),this.emplace(E,r,l,h,p,v,x,T)}emplace(r,l,h,p,v,x,T,E){const M=8*r;return this.int16[M+0]=l,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+4]=v,this.int16[M+5]=x,this.int16[M+6]=T,this.int16[M+7]=E,r}}di.prototype.bytesPerElement=16,un(di,"StructArrayLayout3i2i2i16");class co extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,l,h,p,v)}emplace(r,l,h,p,v,x){const T=4*r,E=8*r;return this.float32[T+0]=l,this.float32[T+1]=h,this.float32[T+2]=p,this.int16[E+6]=v,this.int16[E+7]=x,r}}co.prototype.bytesPerElement=16,un(co,"StructArrayLayout2f1f2i16");class Zr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,h,p)}emplace(r,l,h,p,v){const x=12*r,T=3*r;return this.uint8[x+0]=l,this.uint8[x+1]=h,this.float32[T+1]=p,this.float32[T+2]=v,r}}Zr.prototype.bytesPerElement=12,un(Zr,"StructArrayLayout2ub2f12");class uo extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,l,h)}emplace(r,l,h,p){const v=3*r;return this.float32[v+0]=l,this.float32[v+1]=h,this.float32[v+2]=p,r}}uo.prototype.bytesPerElement=12,un(uo,"StructArrayLayout3f12");class ho extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h){const p=this.length;return this.resize(p+1),this.emplace(p,r,l,h)}emplace(r,l,h,p){const v=3*r;return this.uint16[v+0]=l,this.uint16[v+1]=h,this.uint16[v+2]=p,r}}ho.prototype.bytesPerElement=6,un(ho,"StructArrayLayout3ui6");class va extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re,me,Te,fe,be,Pe){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re,me,Te,fe,be,Pe)}emplace(r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re,me,Te,fe,be,Pe,Ce){const nt=30*r,Ye=15*r,_t=60*r;return this.int16[nt+0]=l,this.int16[nt+1]=h,this.int16[nt+2]=p,this.float32[Ye+2]=v,this.float32[Ye+3]=x,this.uint16[nt+8]=T,this.uint16[nt+9]=E,this.uint32[Ye+5]=M,this.uint32[Ye+6]=D,this.uint32[Ye+7]=O,this.uint16[nt+16]=B,this.uint16[nt+17]=W,this.uint16[nt+18]=q,this.float32[Ye+10]=K,this.float32[Ye+11]=re,this.uint8[_t+48]=me,this.uint8[_t+49]=Te,this.uint8[_t+50]=fe,this.uint32[Ye+13]=be,this.int16[nt+28]=Pe,this.uint8[_t+58]=Ce,r}}va.prototype.bytesPerElement=60,un(va,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Kl extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re,me,Te,fe,be,Pe,Ce,nt,Ye,_t,$t,at,Tt,Mt,Ot){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re,me,Te,fe,be,Pe,Ce,nt,Ye,_t,$t,at,Tt,Mt,Ot)}emplace(r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re,me,Te,fe,be,Pe,Ce,nt,Ye,_t,$t,at,Tt,Mt,Ot,Ut){const ct=38*r,Xt=19*r;return this.int16[ct+0]=l,this.int16[ct+1]=h,this.int16[ct+2]=p,this.float32[Xt+2]=v,this.float32[Xt+3]=x,this.int16[ct+8]=T,this.int16[ct+9]=E,this.int16[ct+10]=M,this.int16[ct+11]=D,this.int16[ct+12]=O,this.int16[ct+13]=B,this.uint16[ct+14]=W,this.uint16[ct+15]=q,this.uint16[ct+16]=K,this.uint16[ct+17]=re,this.uint16[ct+18]=me,this.uint16[ct+19]=Te,this.uint16[ct+20]=fe,this.uint16[ct+21]=be,this.uint16[ct+22]=Pe,this.uint16[ct+23]=Ce,this.uint16[ct+24]=nt,this.uint16[ct+25]=Ye,this.uint16[ct+26]=_t,this.uint16[ct+27]=$t,this.uint16[ct+28]=at,this.uint32[Xt+15]=Tt,this.float32[Xt+16]=Mt,this.float32[Xt+17]=Ot,this.float32[Xt+18]=Ut,r}}Kl.prototype.bytesPerElement=76,un(Kl,"StructArrayLayout3i2f6i15ui1ul3f76");class Wo extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}Wo.prototype.bytesPerElement=4,un(Wo,"StructArrayLayout1f4");class rs extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,l,h,p,v)}emplace(r,l,h,p,v,x){const T=5*r;return this.float32[T+0]=l,this.float32[T+1]=h,this.float32[T+2]=p,this.float32[T+3]=v,this.float32[T+4]=x,r}}rs.prototype.bytesPerElement=20,un(rs,"StructArrayLayout5f20");class Zs extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,h,p)}emplace(r,l,h,p,v){const x=6*r;return this.uint32[3*r+0]=l,this.uint16[x+2]=h,this.uint16[x+3]=p,this.uint16[x+4]=v,r}}Zs.prototype.bytesPerElement=12,un(Zs,"StructArrayLayout1ul3ui12");class _a extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const h=this.length;return this.resize(h+1),this.emplace(h,r,l)}emplace(r,l,h){const p=2*r;return this.uint16[p+0]=l,this.uint16[p+1]=h,r}}_a.prototype.bytesPerElement=4,un(_a,"StructArrayLayout2ui4");class ya extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}ya.prototype.bytesPerElement=2,un(ya,"StructArrayLayout1ui2");class Jl extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const h=this.length;return this.resize(h+1),this.emplace(h,r,l)}emplace(r,l,h){const p=2*r;return this.float32[p+0]=l,this.float32[p+1]=h,r}}Jl.prototype.bytesPerElement=8,un(Jl,"StructArrayLayout2f8");class fC extends dn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}fC.prototype.size=40;class I0 extends vr{get(r){return new fC(this,r)}}un(I0,"CollisionBoxArray");class pC extends dn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}pC.prototype.size=60;class mC extends va{get(r){return new pC(this,r)}}un(mC,"PlacedSymbolArray");class gC extends dn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}gC.prototype.size=76;class vC extends Kl{get(r){return new gC(this,r)}}un(vC,"SymbolInstanceArray");class _C extends Wo{getoffsetX(r){return this.float32[1*r+0]}}un(_C,"GlyphOffsetArray");class yC extends Mn{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}un(yC,"SymbolLineVertexArray");class xC extends dn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}xC.prototype.size=12;class bC extends Zs{get(r){return new xC(this,r)}}un(bC,"FeatureIndexArray");class wC extends _a{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}un(wC,"FillExtrusionCentroidArray");const qR=xn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ZR=xn([{name:"a_dash",components:4,type:"Uint16"}]);var vu={},YR={get exports(){return vu},set exports(a){vu=a}},z0={};({get exports(){return z0},set exports(a){z0=a}}).exports=function(a,r){var l,h,p,v,x,T,E,M;for(h=a.length-(l=3&a.length),p=r,x=3432918353,T=461845907,M=0;M<h;)E=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,p=27492+(65535&(v=5*(65535&(p=(p^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*T+(((E>>>16)*T&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,l){case 3:E^=(255&a.charCodeAt(M+2))<<16;case 2:E^=(255&a.charCodeAt(M+1))<<8;case 1:p^=E=(65535&(E=(E=(65535&(E^=255&a.charCodeAt(M)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*T+(((E>>>16)*T&65535)<<16)&4294967295}return p^=a.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var R0={};({get exports(){return R0},set exports(a){R0=a}}).exports=function(a,r){for(var l,h=a.length,p=r^h,v=0;h>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&a.charCodeAt(v+2))<<16;case 2:p^=(255&a.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&a.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var TC=z0,XR=R0;YR.exports=TC,vu.murmur3=TC,vu.murmur2=XR;class _v{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,h,p){this.ids.push(CC(r)),this.positions.push(l,h,p)}getPositions(r){const l=CC(r);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=l?p=x:h=x+1}const v=[];for(;this.ids[h]===l;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(r,l){const h=new Float64Array(r.ids),p=new Uint32Array(r.positions);return O0(h,p,0,h.length-1),l&&l.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(r){const l=new _v;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function CC(a){const r=+a;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:vu(String(a))}function O0(a,r,l,h){for(;l<h;){const p=a[l+h>>1];let v=l-1,x=h+1;for(;;){do v++;while(a[v]<p);do x--;while(a[x]>p);if(v>=x)break;yv(a,v,x),yv(r,3*v,3*x),yv(r,3*v+1,3*x+1),yv(r,3*v+2,3*x+2)}x-l<h-x?(O0(a,r,l,x),l=x+1):(O0(a,r,x+1,h),h=x)}}function yv(a,r,l){const h=a[r];a[r]=a[l],a[l]=h}un(_v,"FeaturePositionMap");class nl{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,l),this.initialized=!0),!!this.location}}class xv extends nl{constructor(r){super(r),this.current=0}set(r,l,h){this.fetchUniformLocation(r,l)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class SC extends nl{constructor(r){super(r),this.current=[0,0,0,0]}set(r,l,h){this.fetchUniformLocation(r,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class EC extends nl{constructor(r){super(r),this.current=bi.transparent}set(r,l,h){this.fetchUniformLocation(r,l)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const KR=new Float32Array(16),JR=new Float32Array(9),QR=new Float32Array(4);function L0(a){return[_n(255*a.r,255*a.g),_n(255*a.b,255*a.a)]}class up{constructor(r,l,h){this.value=r,this.uniformNames=l.map(p=>`u_${p}`),this.type=h}setUniform(r,l,h,p,v){l.set(r,v,p.constantOr(this.value))}getBinding(r,l){return this.type==="color"?new EC(r):new xv(r)}}class lh{constructor(r,l){this.uniformNames=l.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,l,h,p,v){const x=v==="u_pattern"||v==="u_dash"?this.pattern:v==="u_pixel_ratio"?this.pixelRatio:null;x&&l.set(r,v,x)}getBinding(r,l){return l==="u_pattern"||l==="u_dash"?new SC(r):new xv(r)}}class rl{constructor(r,l,h,p){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,l,h,p,v,x){const T=this.paintVertexArray.length,E=this.expression.evaluate(new We(0),l,{},v,p,x);this.paintVertexArray.resize(r),this._setPaintValue(T,r,E)}updatePaintArray(r,l,h,p,v){const x=this.expression.evaluate({zoom:0},h,p,void 0,v);this._setPaintValue(r,l,x)}_setPaintValue(r,l,h){if(this.type==="color"){const p=L0(h);for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=r;p<l;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ys{constructor(r,l,h,p,v,x){this.expression=r,this.uniformNames=l.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,l,h,p,v,x){const T=this.expression.evaluate(new We(this.zoom),l,{},v,p,x),E=this.expression.evaluate(new We(this.zoom+1),l,{},v,p,x),M=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(M,r,T,E)}updatePaintArray(r,l,h,p,v){const x=this.expression.evaluate({zoom:this.zoom},h,p,void 0,v),T=this.expression.evaluate({zoom:this.zoom+1},h,p,void 0,v);this._setPaintValue(r,l,x,T)}_setPaintValue(r,l,h,p){if(this.type==="color"){const v=L0(h),x=L0(p);for(let T=r;T<l;T++)this.paintVertexArray.emplace(T,v[0],v[1],x[0],x[1])}else{for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l,h,p,v){const x=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,T=Be(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(r,v,T)}getBinding(r,l){return new xv(r)}}class Ql{constructor(r,l,h,p,v){this.expression=r,this.layerId=v,this.paintVertexAttributes=(h==="array"?ZR:qR).members;for(let x=0;x<l.length;++x);this.paintVertexArray=new p}populatePaintArray(r,l,h){const p=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(p,r,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(r,l,h,p,v,x){this._setPaintValues(r,l,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(r,l,h,p){if(!p||!h)return;const v=p[h];if(!v)return;const{tl:x,br:T,pixelRatio:E}=v;for(let M=r;M<l;M++)this.paintVertexArray.emplace(M,x[0],x[1],T[0],T[1],E)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ec{constructor(r,l,h=()=>!0){this.binders={},this._buffers=[];const p=[];for(const v in r.paint._values){if(!h(v))continue;const x=r.paint.get(v);if(!(x instanceof zt&&jl(x.property.specification)))continue;const T=tO(v,r.type),E=x.value,M=x.property.specification.type,D=!!x.property.useIntegerZoom,O=v==="line-dasharray"||v.endsWith("pattern"),B=v==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||B)if(E.kind==="source"||B||O){const W=MC(v,M,"source");this.binders[v]=O?new Ql(E,T,M,W,r.id):new rl(E,T,M,W),p.push(`/a_${v}`)}else{const W=MC(v,M,"composite");this.binders[v]=new Ys(E,T,M,D,l,W),p.push(`/z_${v}`)}else this.binders[v]=O?new lh(E.value,T):new up(E.value,T,M),p.push(`/u_${v}`)}this.cacheKey=p.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof rl||l instanceof Ys?l.maxValue:0}populatePaintArrays(r,l,h,p,v,x){for(const T in this.binders){const E=this.binders[T];(E instanceof rl||E instanceof Ys||E instanceof Ql)&&E.populatePaintArray(r,l,h,p,v,x)}}setConstantPatternPositions(r){for(const l in this.binders){const h=this.binders[l];h instanceof lh&&h.setConstantPatternPositions(r)}}updatePaintArrays(r,l,h,p,v,x){let T=!1;for(const E in r){const M=l.getPositions(E);for(const D of M){const O=h.feature(D.index);for(const B in this.binders){const W=this.binders[B];if((W instanceof rl||W instanceof Ys||W instanceof Ql)&&W.expression.isStateDependent===!0){const q=p.paint.get(B);W.expression=q.value,W.updatePaintArray(D.start,D.end,O,r[E],v,x),T=!0}}}}return T}defines(){const r=[];for(const l in this.binders){const h=this.binders[l];(h instanceof up||h instanceof lh)&&r.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof rl||h instanceof Ys||h instanceof Ql)for(let p=0;p<h.paintVertexAttributes.length;p++)r.push(h.paintVertexAttributes[p].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof up||h instanceof lh||h instanceof Ys)for(const p of h.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const l=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof up||p instanceof lh||p instanceof Ys)for(const v of p.uniformNames)l.push({name:v,property:h,binding:p.getBinding(r,v)})}return l}setUniforms(r,l,h,p,v){for(const{name:x,property:T,binding:E}of h)this.binders[T].setUniform(r,E,v,p.get(T),x)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const l=this.binders[r];(l instanceof rl||l instanceof Ys||l instanceof Ql)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(r){for(const l in this.binders){const h=this.binders[l];(h instanceof rl||h instanceof Ys||h instanceof Ql)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof rl||l instanceof Ys||l instanceof Ql)&&l.destroy()}}}class _u{constructor(r,l,h=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new ec(p,l,h);this.needsUpload=!1,this._featureMap=new _v,this._bufferOffset=0}populatePaintArrays(r,l,h,p,v,x,T){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(r,l,p,v,x,T);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,h,p,v){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(r,this._featureMap,l,x,p,v)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const eO={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function tO(a,r){return eO[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}const nO={"line-pattern":{source:Ei,composite:Ei},"fill-pattern":{source:Ei,composite:Ei},"fill-extrusion-pattern":{source:Ei,composite:Ei},"line-dasharray":{source:Ao,composite:Ao}},rO={color:{source:Jl,composite:Nr},number:{source:Wo,composite:Jl}};function MC(a,r,l){const h=nO[a];return h&&h[l]||rO[r][l]}un(up,"ConstantBinder"),un(lh,"PatternConstantBinder"),un(rl,"SourceExpressionBinder"),un(Ql,"PatternCompositeBinder"),un(Ys,"CompositeExpressionBinder"),un(ec,"ProgramConfiguration",{omit:["_buffers"]}),un(_u,"ProgramConfigurationSet");const bv="-transition";class Xs extends Vo{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new dt(l.layout)),l.paint)){this._transitionablePaint=new Ht(l.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tt(l.paint)}}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,h={}){l!=null&&this._validate(iv,`layers.${this.id}.layout.${r}`,r,l,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return wt(r,bv)?this._transitionablePaint.getTransition(r.slice(0,-bv.length)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,h={}){if(l!=null&&this._validate(D0,`layers.${this.id}.paint.${r}`,r,l,h))return!1;if(wt(r,bv))return this._transitionablePaint.setTransition(r.slice(0,-bv.length),l||void 0),!1;{const p=this._transitionablePaint._values[r],v=p.value.isDataDriven(),x=p.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const T=this._transitionablePaint._values[r].value,E=T.isDataDriven(),M=wt(r,"pattern")||r==="line-dasharray";return E||v||M||this._handleOverridablePaintPropertyUpdate(r,x,T)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,l,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Ct(r,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(r,l,h,p,v={}){return(!v||v.validate!==!1)&&ov(this,r.call(rv,{key:l,layerType:this.type,objectKey:h,value:p,styleSpec:ft,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof zt&&jl(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Kd(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const iO=xn([{name:"a_pos",components:2,type:"Int16"}],4),oO=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Mi{constructor(r=[]){this.segments=r}prepareSegment(r,l,h,p){let v=this.segments[this.segments.length-1];return r>Mi.MAX_VERTEX_ARRAY_LENGTH&&he(`Max vertices per segment is ${Mi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>Mi.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,h,p){return new Mi([{vertexOffset:r,primitiveOffset:l,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}Mi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,un(Mi,"SegmentVector");var Rn=8192;class tc{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof mr?new mr(r.lng,r.lat):mr.convert(r),this}setSouthWest(r){return this._sw=r instanceof mr?new mr(r.lng,r.lat):mr.convert(r),this}extend(r){const l=this._sw,h=this._ne;let p,v;if(r instanceof mr)p=r,v=r;else{if(!(r instanceof tc))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(tc.convert(r)):this.extend(mr.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(mr.convert(r)):this;if(p=r._sw,v=r._ne,!p||!v)return this}return l||h?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new mr(p.lng,p.lat),this._ne=new mr(v.lng,v.lat)),this}getCenter(){return new mr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new mr(this.getWest(),this.getNorth())}getSouthEast(){return new mr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:h}=mr.convert(r);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(r){return!r||r instanceof tc?r:new tc(r)}}var wv=1e-6,is=typeof Float32Array<"u"?Float32Array:Array;function PC(){var a=new is(9);return is!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function AC(a,r,l){var h=r[0],p=r[1],v=r[2],x=r[3],T=r[4],E=r[5],M=r[6],D=r[7],O=r[8],B=l[0],W=l[1],q=l[2],K=l[3],re=l[4],me=l[5],Te=l[6],fe=l[7],be=l[8];return a[0]=B*h+W*x+q*M,a[1]=B*p+W*T+q*D,a[2]=B*v+W*E+q*O,a[3]=K*h+re*x+me*M,a[4]=K*p+re*T+me*D,a[5]=K*v+re*E+me*O,a[6]=Te*h+fe*x+be*M,a[7]=Te*p+fe*T+be*D,a[8]=Te*v+fe*E+be*O,a}function Ks(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function B0(a,r){var l=r[0],h=r[1],p=r[2],v=r[3],x=r[4],T=r[5],E=r[6],M=r[7],D=r[8],O=r[9],B=r[10],W=r[11],q=r[12],K=r[13],re=r[14],me=r[15],Te=l*T-h*x,fe=l*E-p*x,be=l*M-v*x,Pe=h*E-p*T,Ce=h*M-v*T,nt=p*M-v*E,Ye=D*K-O*q,_t=D*re-B*q,$t=D*me-W*q,at=O*re-B*K,Tt=O*me-W*K,Mt=B*me-W*re,Ot=Te*Mt-fe*Tt+be*at+Pe*$t-Ce*_t+nt*Ye;return Ot?(a[0]=(T*Mt-E*Tt+M*at)*(Ot=1/Ot),a[1]=(p*Tt-h*Mt-v*at)*Ot,a[2]=(K*nt-re*Ce+me*Pe)*Ot,a[3]=(B*Ce-O*nt-W*Pe)*Ot,a[4]=(E*$t-x*Mt-M*_t)*Ot,a[5]=(l*Mt-p*$t+v*_t)*Ot,a[6]=(re*be-q*nt-me*fe)*Ot,a[7]=(D*nt-B*be+W*fe)*Ot,a[8]=(x*Tt-T*$t+M*Ye)*Ot,a[9]=(h*$t-l*Tt-v*Ye)*Ot,a[10]=(q*Ce-K*be+me*Te)*Ot,a[11]=(O*be-D*Ce-W*Te)*Ot,a[12]=(T*_t-x*at-E*Ye)*Ot,a[13]=(l*at-h*_t+p*Ye)*Ot,a[14]=(K*fe-q*Pe-re*Te)*Ot,a[15]=(D*Pe-O*fe+B*Te)*Ot,a):null}function yu(a,r,l){var h=r[0],p=r[1],v=r[2],x=r[3],T=r[4],E=r[5],M=r[6],D=r[7],O=r[8],B=r[9],W=r[10],q=r[11],K=r[12],re=r[13],me=r[14],Te=r[15],fe=l[0],be=l[1],Pe=l[2],Ce=l[3];return a[0]=fe*h+be*T+Pe*O+Ce*K,a[1]=fe*p+be*E+Pe*B+Ce*re,a[2]=fe*v+be*M+Pe*W+Ce*me,a[3]=fe*x+be*D+Pe*q+Ce*Te,a[4]=(fe=l[4])*h+(be=l[5])*T+(Pe=l[6])*O+(Ce=l[7])*K,a[5]=fe*p+be*E+Pe*B+Ce*re,a[6]=fe*v+be*M+Pe*W+Ce*me,a[7]=fe*x+be*D+Pe*q+Ce*Te,a[8]=(fe=l[8])*h+(be=l[9])*T+(Pe=l[10])*O+(Ce=l[11])*K,a[9]=fe*p+be*E+Pe*B+Ce*re,a[10]=fe*v+be*M+Pe*W+Ce*me,a[11]=fe*x+be*D+Pe*q+Ce*Te,a[12]=(fe=l[12])*h+(be=l[13])*T+(Pe=l[14])*O+(Ce=l[15])*K,a[13]=fe*p+be*E+Pe*B+Ce*re,a[14]=fe*v+be*M+Pe*W+Ce*me,a[15]=fe*x+be*D+Pe*q+Ce*Te,a}function dp(a,r,l){var h,p,v,x,T,E,M,D,O,B,W,q,K=l[0],re=l[1],me=l[2];return r===a?(a[12]=r[0]*K+r[4]*re+r[8]*me+r[12],a[13]=r[1]*K+r[5]*re+r[9]*me+r[13],a[14]=r[2]*K+r[6]*re+r[10]*me+r[14],a[15]=r[3]*K+r[7]*re+r[11]*me+r[15]):(p=r[1],v=r[2],x=r[3],T=r[4],E=r[5],M=r[6],D=r[7],O=r[8],B=r[9],W=r[10],q=r[11],a[0]=h=r[0],a[1]=p,a[2]=v,a[3]=x,a[4]=T,a[5]=E,a[6]=M,a[7]=D,a[8]=O,a[9]=B,a[10]=W,a[11]=q,a[12]=h*K+T*re+O*me+r[12],a[13]=p*K+E*re+B*me+r[13],a[14]=v*K+M*re+W*me+r[14],a[15]=x*K+D*re+q*me+r[15]),a}function xu(a,r,l){var h=l[0],p=l[1],v=l[2];return a[0]=r[0]*h,a[1]=r[1]*h,a[2]=r[2]*h,a[3]=r[3]*h,a[4]=r[4]*p,a[5]=r[5]*p,a[6]=r[6]*p,a[7]=r[7]*p,a[8]=r[8]*v,a[9]=r[9]*v,a[10]=r[10]*v,a[11]=r[11]*v,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a}function F0(a,r,l){var h=Math.sin(l),p=Math.cos(l),v=r[4],x=r[5],T=r[6],E=r[7],M=r[8],D=r[9],O=r[10],B=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=v*p+M*h,a[5]=x*p+D*h,a[6]=T*p+O*h,a[7]=E*p+B*h,a[8]=M*p-v*h,a[9]=D*p-x*h,a[10]=O*p-T*h,a[11]=B*p-E*h,a}function Tv(a,r,l){var h=Math.sin(l),p=Math.cos(l),v=r[0],x=r[1],T=r[2],E=r[3],M=r[8],D=r[9],O=r[10],B=r[11];return r!==a&&(a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=v*p-M*h,a[1]=x*p-D*h,a[2]=T*p-O*h,a[3]=E*p-B*h,a[8]=v*h+M*p,a[9]=x*h+D*p,a[10]=T*h+O*p,a[11]=E*h+B*p,a}function kC(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function DC(a,r,l){var h,p,v,x=l[0],T=l[1],E=l[2],M=Math.hypot(x,T,E);return M<wv?null:(x*=M=1/M,T*=M,E*=M,h=Math.sin(r),p=Math.cos(r),a[0]=x*x*(v=1-p)+p,a[1]=T*x*v+E*h,a[2]=E*x*v-T*h,a[3]=0,a[4]=x*T*v-E*h,a[5]=T*T*v+p,a[6]=E*T*v+x*h,a[7]=0,a[8]=x*E*v+T*h,a[9]=T*E*v-x*h,a[10]=E*E*v+p,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var sO=yu;function $0(){var a=new is(3);return is!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function IC(a){var r=new is(3);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r}function hp(a){return Math.hypot(a[0],a[1],a[2])}function ch(a,r,l){var h=new is(3);return h[0]=a,h[1]=r,h[2]=l,h}function il(a,r,l){return a[0]=r[0]+l[0],a[1]=r[1]+l[1],a[2]=r[2]+l[2],a}function N0(a,r,l){return a[0]=r[0]-l[0],a[1]=r[1]-l[1],a[2]=r[2]-l[2],a}function zC(a,r,l){return a[0]=r[0]*l[0],a[1]=r[1]*l[1],a[2]=r[2]*l[2],a}function fp(a,r,l){return a[0]=Math.min(r[0],l[0]),a[1]=Math.min(r[1],l[1]),a[2]=Math.min(r[2],l[2]),a}function pp(a,r,l){return a[0]=Math.max(r[0],l[0]),a[1]=Math.max(r[1],l[1]),a[2]=Math.max(r[2],l[2]),a}function ms(a,r,l){return a[0]=r[0]*l,a[1]=r[1]*l,a[2]=r[2]*l,a}function mp(a,r,l,h){return a[0]=r[0]+l[0]*h,a[1]=r[1]+l[1]*h,a[2]=r[2]+l[2]*h,a}function ko(a,r){var l=r[0],h=r[1],p=r[2],v=l*l+h*h+p*p;return v>0&&(v=1/Math.sqrt(v)),a[0]=r[0]*v,a[1]=r[1]*v,a[2]=r[2]*v,a}function Ms(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]}function U0(a,r,l){var h=r[0],p=r[1],v=r[2],x=l[0],T=l[1],E=l[2];return a[0]=p*E-v*T,a[1]=v*x-h*E,a[2]=h*T-p*x,a}function wi(a,r,l){var h=r[0],p=r[1],v=r[2],x=l[3]*h+l[7]*p+l[11]*v+l[15];return a[0]=(l[0]*h+l[4]*p+l[8]*v+l[12])/(x=x||1),a[1]=(l[1]*h+l[5]*p+l[9]*v+l[13])/x,a[2]=(l[2]*h+l[6]*p+l[10]*v+l[14])/x,a}function RC(a,r,l){var h=l[0],p=l[1],v=l[2],x=r[0],T=r[1],E=r[2],M=p*E-v*T,D=v*x-h*E,O=h*T-p*x,B=p*O-v*D,W=v*M-h*O,q=h*D-p*M,K=2*l[3];return D*=K,O*=K,W*=2,q*=2,a[0]=x+(M*=K)+(B*=2),a[1]=T+D+W,a[2]=E+O+q,a}var gp,Js=N0,aO=zC,lO=hp;function OC(a,r,l){return a[0]=r[0]*l,a[1]=r[1]*l,a[2]=r[2]*l,a[3]=r[3]*l,a}function LC(a,r){var l=r[0],h=r[1],p=r[2],v=r[3],x=l*l+h*h+p*p+v*v;return x>0&&(x=1/Math.sqrt(x)),a[0]=l*x,a[1]=h*x,a[2]=p*x,a[3]=v*x,a}function bu(a,r,l){var h=r[0],p=r[1],v=r[2],x=r[3];return a[0]=l[0]*h+l[4]*p+l[8]*v+l[12]*x,a[1]=l[1]*h+l[5]*p+l[9]*v+l[13]*x,a[2]=l[2]*h+l[6]*p+l[10]*v+l[14]*x,a[3]=l[3]*h+l[7]*p+l[11]*v+l[15]*x,a}function BC(){var a=new is(4);return is!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function FC(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function $C(a,r,l){l*=.5;var h=r[0],p=r[1],v=r[2],x=r[3],T=Math.sin(l),E=Math.cos(l);return a[0]=h*E+x*T,a[1]=p*E+v*T,a[2]=v*E-p*T,a[3]=x*E-h*T,a}function NC(a,r,l){l*=.5;var h=r[0],p=r[1],v=r[2],x=r[3],T=Math.sin(l),E=Math.cos(l);return a[0]=h*E-v*T,a[1]=p*E+x*T,a[2]=v*E+h*T,a[3]=x*E-p*T,a}$0(),gp=new is(4),is!=Float32Array&&(gp[0]=0,gp[1]=0,gp[2]=0,gp[3]=0);var cO=LC;$0(),ch(1,0,0),ch(0,1,0),BC(),BC(),PC();const uO=xn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:UC}=uO,VC=xn([{name:"a_pos_3",components:3,type:"Int16"}]);var vp=xn([{name:"a_pos",type:"Int16",components:2}]);class V0{constructor(r,l){this.pos=r,this.dir=l}intersectsPlane(r,l,h){const p=Ms(l,this.dir);if(Math.abs(p)<1e-6)return!1;const v=((r[0]-this.pos[0])*l[0]+(r[1]-this.pos[1])*l[1]+(r[2]-this.pos[2])*l[2])/p;return h[0]=this.pos[0]+this.dir[0]*v,h[1]=this.pos[1]+this.dir[1]*v,h[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(r,l,h){if(function(W,q){var K=W[0],re=W[1],me=W[2],Te=q[0],fe=q[1],be=q[2];return Math.abs(K-Te)<=wv*Math.max(1,Math.abs(K),Math.abs(Te))&&Math.abs(re-fe)<=wv*Math.max(1,Math.abs(re),Math.abs(fe))&&Math.abs(me-be)<=wv*Math.max(1,Math.abs(me),Math.abs(be))}(this.pos,r)||l===0)return h[0]=h[1]=h[2]=0,!1;const[p,v,x]=this.dir,T=this.pos[0]-r[0],E=this.pos[1]-r[1],M=this.pos[2]-r[2],D=p*p+v*v+x*x,O=2*(T*p+E*v+M*x),B=O*O-4*D*(T*T+E*E+M*M-l*l);if(B<0){const W=Math.max(-O/2,0),q=T+p*W,K=E+v*W,re=M+x*W,me=Math.hypot(q,K,re);return h[0]=q*l/me,h[1]=K*l/me,h[2]=re*l/me,!1}{const W=(-O-Math.sqrt(B))/(2*D);if(W<0){const q=Math.hypot(T,E,M);return h[0]=T*l/q,h[1]=E*l/q,h[2]=M*l/q,!1}return h[0]=T+p*W,h[1]=E+v*W,h[2]=M+x*W,!0}}}class j0{constructor(r,l,h,p,v){this.TL=r,this.TR=l,this.BR=h,this.BL=p,this.horizon=v}static fromInvProjectionMatrix(r,l,h){const p=[-1,1,1],v=[1,1,1],x=[1,-1,1],T=[-1,-1,1],E=wi(p,p,r),M=wi(v,v,r),D=wi(x,x,r),O=wi(T,T,r);return new j0(E,M,D,O,l/h)}}class W0{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,h,p){const v=Math.pow(2,h),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const M=bu([],E,r),D=1/M[3]/l*v;return function(O,B,W){return O[0]=B[0]*W[0],O[1]=B[1]*W[1],O[2]=B[2]*W[2],O[3]=B[3]*W[3],O}(M,M,[D,D,p?1/M[3]:D,D])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const M=ko([],U0([],Js([],x[E[0]],x[E[1]]),Js([],x[E[2]],x[E[1]]))),D=-Ms(M,x[E[1]]);return M.concat(D)});return new W0(x,T)}}class Do{static fromPoints(r){const l=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const p of r)fp(l,l,p),pp(h,h,p);return new Do(l,h)}static applyTransform(r,l){const h=r.getCorners();for(let p=0;p<h.length;++p)wi(h[p],h[p],l);return Do.fromPoints(h)}constructor(r,l){this.min=r,this.max=l,this.center=ms([],il([],this.min,this.max),.5)}quadrant(r){const l=[r%2==0,r<2],h=IC(this.min),p=IC(this.max);for(let v=0;v<l.length;v++)h[v]=l[v]?this.min[v]:this.center[v],p[v]=l[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new Do(h,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,l=this.max;return[[r[0],r[1],r[2]],[l[0],r[1],r[2]],[l[0],l[1],r[2]],[r[0],l[1],r[2]],[r[0],r[1],l[2]],[l[0],r[1],l[2]],[l[0],l[1],l[2]],[r[0],l[1],l[2]]]}intersects(r){const l=this.getCorners();let h=!0;for(let p=0;p<r.planes.length;p++){const v=r.planes[p];let x=0;for(let T=0;T<l.length;T++)x+=Ms(v,l[T])+v[3]>=0;if(x===0)return 0;x!==l.length&&(h=!1)}if(h)return 2;for(let p=0;p<3;p++){let v=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let T=0;T<r.points.length;T++){const E=r.points[T][p]-this.min[p];v=Math.min(v,E),x=Math.max(x,E)}if(x<0||v>this.max[p]-this.min[p])return 0}return 1}}const xa=Rn/Math.PI/2,wu=64,_p=[wu,32,16],Ps=-xa,As=xa,dO=[new Do([Ps,Ps,Ps],[As,As,As]),new Do([Ps,Ps,Ps],[0,0,As]),new Do([0,Ps,Ps],[As,0,As]),new Do([Ps,0,Ps],[0,As,As]),new Do([0,0,Ps],[As,As,As])];function Cv(a){return a*xa/bp}function jC(a,r,l,h=!0){const p=ms([],a._camera.position,a.worldSize),v=[r,l,1,1];bu(v,v,a.pixelMatrixInverse),OC(v,v,1/v[3]);const x=ko([],Js([],v,p)),T=a.globeMatrix,E=[T[12],T[13],T[14]],M=Js([],E,p),D=hp(M),O=ko([],M),B=a.worldSize/(2*Math.PI),W=Ms(O,x),q=Math.asin(B/D);if(q<Math.acos(W)){if(!h)return null;const $t=[],at=[];ms($t,x,D/W),ko(at,Js(at,$t,M)),ko(x,il(x,M,ms(x,at,Math.tan(q)*D)))}const K=[];new V0(p,x).closestPointOnSphere(E,B,K);const re=ko([],Et(T,0)),me=ko([],Et(T,1)),Te=ko([],Et(T,2)),fe=Ms(re,K),be=Ms(me,K),Pe=Ms(Te,K),Ce=Ee(Math.asin(-be/B));let nt=Ee(Math.atan2(fe,Pe));nt=a.center.lng+function($t,at){const Tt=(at-$t+180)%360-180;return Tt<-180?Tt+360:Tt}(a.center.lng,nt);const Ye=wa(nt),_t=Be(Ta(Ce),0,1);return new fh(Ye,_t)}class hO{constructor(r,l,h){this.a=Js([],r,h),this.b=Js([],l,h),this.center=h;const p=ko([],this.a),v=ko([],this.b);this.angle=Math.acos(Ms(p,v))}}function H0(a,r){if(a.angle===0)return null;let l;return l=a.a[r]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[r]/a.a[r]/Math.sin(a.angle)-1/Math.tan(a.angle)),l<0||l>1?null:function(h,p,v,x){const T=Math.sin(v);return h*(Math.sin((1-x)*v)/T)+p*(Math.sin(x*v)/T)}(a.a[r],a.b[r],a.angle,Be(l,0,1))+a.center[r]}function ba(a){if(a.z<=1)return dO[a.z+2*a.y+a.x];const r=G0(Sv(a));return Do.fromPoints(r)}function Tu(a,r,l){return ms(a,a,1-l),mp(a,a,r,l)}function WC(a,r){const l=hh(r.zoom);if(l===0)return ba(a);const h=Sv(a),p=G0(h),v=wa(h.getWest())*r.worldSize,x=wa(h.getEast())*r.worldSize,T=Ta(h.getNorth())*r.worldSize,E=Ta(h.getSouth())*r.worldSize,M=[v,T,0],D=[x,T,0],O=[v,E,0],B=[x,E,0],W=B0([],r.globeMatrix);return wi(M,M,W),wi(D,D,W),wi(O,O,W),wi(B,B,W),p[0]=Tu(p[0],O,l),p[1]=Tu(p[1],B,l),p[2]=Tu(p[2],D,l),p[3]=Tu(p[3],M,l),Do.fromPoints(p)}function HC(a,r,l){for(const h of a)wi(h,h,r),ms(h,h,l)}function fO(a,r,l){const h=r/a.worldSize,p=a.globeMatrix;if(l.z<=1){const Ye=ba(l).getCorners();return HC(Ye,p,h),Do.fromPoints(Ye)}const v=Sv(l),x=G0(v);HC(x,p,h);const T=Number.MAX_VALUE,E=[-T,-T,-T],M=[T,T,T];if(v.contains(a.center)){for(const $t of x)fp(M,M,$t),pp(E,E,$t);E[2]=0;const Ye=a.point,_t=[Ye.x*h,Ye.y*h,0];return fp(M,M,_t),pp(E,E,_t),new Do(M,E)}const D=[p[12]*h,p[13]*h,p[14]*h],O=v.getCenter(),B=Be(a.center.lat,-po,po),W=Be(O.lat,-po,po),q=wa(a.center.lng),K=Ta(B);let re=q-wa(O.lng);const me=K-Ta(W);re>.5?re-=1:re<-.5&&(re+=1);let Te=0;Math.abs(re)>Math.abs(me)?Te=re>=0?1:3:(Te=me>=0?0:2,mp(D,D,[p[4]*h,p[5]*h,p[6]*h],-Math.sin(ue(me>=0?v.getSouth():v.getNorth()))*xa));const fe=x[Te],be=x[(Te+1)%4],Pe=new hO(fe,be,D),Ce=[H0(Pe,0)||fe[0],H0(Pe,1)||fe[1],H0(Pe,2)||fe[2]],nt=hh(a.zoom);if(nt>0){const Ye=function({x:$t,y:at,z:Tt},Mt,Ot,Ut,ct){const Xt=1/(1<<Tt);let kn=$t*Xt,tn=kn+Xt,mn=at*Xt,Kt=mn+Xt,In=0;const Qn=(kn+tn)/2-Ut;return Qn>.5?In=-1:Qn<-.5&&(In=1),kn=((kn+In)*Mt-(Ut*=Mt))*Ot+Ut,tn=((tn+In)*Mt-Ut)*Ot+Ut,mn=(mn*Mt-(ct*=Mt))*Ot+ct,Kt=(Kt*Mt-ct)*Ot+ct,[[kn,Kt,0],[tn,Kt,0],[tn,mn,0],[kn,mn,0]]}(l,r,a._pixelsPerMercatorPixel,q,K);for(let $t=0;$t<x.length;$t++)Tu(x[$t],Ye[$t],nt);const _t=il([],Ye[Te],Ye[(Te+1)%4]);ms(_t,_t,.5),Tu(Ce,_t,nt)}for(const Ye of x)fp(M,M,Ye),pp(E,E,Ye);return M[2]=Math.min(fe[2],be[2]),fp(M,M,Ce),pp(E,E,Ce),new Do(M,E)}function Sv({x:a,y:r,z:l}){const h=1/(1<<l),p=new mr(gs(a*h),fo((r+1)*h)),v=new mr(gs((a+1)*h),fo(r*h));return new tc(p,v)}function G0(a){const r=ue(a.getNorth()),l=ue(a.getSouth()),h=Math.cos(r),p=Math.cos(l),v=Math.sin(r),x=Math.sin(l),T=a.getWest(),E=a.getEast();return[uh(p,x,T),uh(p,x,E),uh(h,v,E),uh(h,v,T)]}function uh(a,r,l,h=xa){return l=ue(l),[a*Math.sin(l)*h,-r*h,a*Math.cos(l)*h]}function dh(a,r,l){return uh(Math.cos(ue(a)),Math.sin(ue(a)),r,l)}function yp(a,r,l,h){const p=1<<l.z,v=(a/Rn+l.x)/p;return dh(fo((r/Rn+l.y)/p),gs(v),h)}function Ev({min:a,max:r}){return 16383/Math.max(r[0]-a[0],r[1]-a[1],r[2]-a[2])}const GC=new Float64Array(16);function xp(a){const r=Ev(a),l=kC(GC,[r,r,r]);return dp(l,l,((h=[])[0]=-(p=a.min)[0],h[1]=-p[1],h[2]=-p[2],h));var h,p}function q0(a){const r=(h=a.min,(l=GC)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=h[0],l[13]=h[1],l[14]=h[2],l[15]=1,l);var l,h;const p=1/Ev(a);return xu(r,r,[p,p,p])}function qC(a,r,l,h,p){const v=function(E){const M=Rn/(2*Math.PI);return E/(2*Math.PI)/M}(l),x=[a,r,-l/(2*Math.PI)],T=Ks(new Float64Array(16));return dp(T,T,x),xu(T,T,[v,v,v]),F0(T,T,ue(-p)),Tv(T,T,ue(-h)),T}function hh(a){return st(5,6,a)}function ZC(a,r){const l=dh(r.lat,r.lng),h=function(q){const K=dh(q._center.lat,q._center.lng);let re=U0([],ch(0,1,0),K);const me=DC([],-q.angle,K);re=wi(re,re,me),DC(me,-q._pitch,re);const Te=ko([],K);return ms(Te,Te,Cv(q.cameraToCenterDistance/q.pixelsPerMeter)),wi(Te,Te,me),il([],K,Te)}(a);return x=(p=N0([],h,l))[0],T=p[1],E=p[2],M=(v=l)[0],D=v[1],O=v[2],W=(B=Math.sqrt(x*x+T*T+E*E)*Math.sqrt(M*M+D*D+O*O))&&Ms(p,v)/B,Math.acos(Math.min(Math.max(W,-1),1));var p,v,x,T,E,M,D,O,B,W}function Z0(a,r){return ZC(a,r)>Math.PI/2*1.01}const YC=ue(85),pO=Math.cos(YC),mO=Math.sin(YC),bp=63710088e-1,XC=2*Math.PI*bp;class mr{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new mr(it(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,h=this.lat*l,p=r.lat*l,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((r.lng-this.lng)*l);return bp*Math.acos(Math.min(v,1))}toBounds(r=0){const l=360*r/40075017,h=l/Math.cos(Math.PI/180*this.lat);return new tc(new mr(this.lng-h,this.lat-l),new mr(this.lng+h,this.lat+l))}toEcef(r){const l=Cv(r);return dh(this.lat,this.lng,xa+l)}static convert(r){if(r instanceof mr)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new mr(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new mr(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function Y0(a){return XC*Math.cos(a*Math.PI/180)}function wa(a){return(180+a)/360}function Ta(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Qs(a,r){return a/Y0(r)}function gs(a){return 360*a-180}function fo(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function KC(a,r){return a*Y0(fo(r))}const po=85.051129;function JC(a){return 1/Math.cos(a*Math.PI/180)}class fh{constructor(r,l,h=0){this.x=+r,this.y=+l,this.z=+h}static fromLngLat(r,l=0){const h=mr.convert(r);return new fh(wa(h.lng),Ta(h.lat),Qs(l,h.lat))}toLngLat(){return new mr(gs(this.x),fo(this.y))}toAltitude(){return KC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/XC*JC(fo(this.y))}}function X0(a,r,l,h,p,v,x,T,E){const M=(r+h)/2,D=(l+p)/2,O=new Y(M,D);T(O),function(B,W,q,K,re,me){const Te=q-re,fe=K-me;return Math.abs((K-W)*Te-(q-B)*fe)/Math.hypot(Te,fe)}(O.x,O.y,v.x,v.y,x.x,x.y)>=E?(X0(a,r,l,M,D,v,O,T,E),X0(a,M,D,h,p,O,x,T,E)):a.push(x)}function QC(a,r,l){let h=a[0],p=h.x,v=h.y;r(h);const x=[h];for(let T=1;T<a.length;T++){const E=a[T],{x:M,y:D}=E;r(E),X0(x,p,v,M,D,h,E,r,l),p=M,v=D,h=E}return x}function K0(a,r,l,h){if(h(r,l)){const p=r.add(l)._mult(.5);K0(a,r,p,h),K0(a,p,l,h)}else a.push(l)}function gO(a,r){let l=a[0];const h=[l];for(let p=1;p<a.length;p++){const v=a[p];K0(h,l,v,r),l=v}return h}const J0=Math.pow(2,14)-1,e2=-J0-1;function vO(a,r){const l=Math.round(a.x*r),h=Math.round(a.y*r);return a.x=Be(l,e2,J0),a.y=Be(h,e2,J0),(l<a.x||l>a.x+1||h<a.y||h>a.y+1)&&he("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function ol(a,r,l){const h=a.loadGeometry(),p=a.extent,v=Rn/p;if(r&&l&&l.projection.isReprojectedInTileSpace){const x=1<<r.z,{scale:T,x:E,y:M,projection:D}=l,O=B=>{const W=gs((r.x+B.x/p)/x),q=fo((r.y+B.y/p)/x),K=D.project(W,q);B.x=(K.x*T-E)*p,B.y=(K.y*T-M)*p};for(let B=0;B<h.length;B++)if(a.type!==1)h[B]=QC(h[B],O,1);else{const W=[];for(const q of h[B])q.x<0||q.x>=p||q.y<0||q.y>=p||(O(q),W.push(q));h[B]=W}}for(const x of h)for(const T of x)vO(T,v);return h}function Cu(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?ol(a):[]}}function Mv(a,r,l,h,p){a.emplaceBack(2*r+(h+1)/2,2*l+(p+1)/2)}function Pv(a,r,l){a.emplaceBack(r.x,r.y,r.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Q0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Mn,this.indexArray=new ho,this.segments=new Mi,this.programConfigurations=new _u(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,h,p){const v=this.layers[0],x=[];let T=null;v.type==="circle"&&(T=v.layout.get("circle-sort-key"));for(const{feature:M,id:D,index:O,sourceLayerIndex:B}of r){const W=this.layers[0]._featureFilter.needGeometry,q=Cu(M,W);if(!this.layers[0]._featureFilter.filter(new We(this.zoom),q,h))continue;const K=T?T.evaluate(q,{},h):void 0,re={id:D,properties:M.properties,type:M.type,sourceLayerIndex:B,index:O,geometry:W?q.geometry:ol(M,h,p),patterns:{},sortKey:K};x.push(re)}T&&x.sort((M,D)=>M.sortKey-D.sortKey);let E=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new ps,E=p.projection);for(const M of x){const{geometry:D,index:O,sourceLayerIndex:B}=M,W=r[O].feature;this.addFeature(M,D,O,l.availableImages,h,E),l.featureIndex.insert(W,D,O,B,this.index)}}update(r,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,iO.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,oO.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,l,h,p,v,x){for(const T of l)for(const E of T){const M=E.x,D=E.y;if(M<0||M>=Rn||D<0||D>=Rn)continue;if(x){const W=x.projectTilePoint(M,D,v),q=x.upVector(v,M,D),K=this.globeExtVertexArray;Pv(K,W,q),Pv(K,W,q),Pv(K,W,q),Pv(K,W,q)}const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),B=O.vertexLength;Mv(this.layoutVertexArray,M,D,-1,-1),Mv(this.layoutVertexArray,M,D,1,-1),Mv(this.layoutVertexArray,M,D,1,1),Mv(this.layoutVertexArray,M,D,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+2,B+3),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},p,v)}}function t2(a,r){for(let l=0;l<a.length;l++)if(Su(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(Su(a,r[l]))return!0;return!!ex(a,r)}function _O(a,r,l){return!!Su(a,r)||!!tx(r,a,l)}function n2(a,r){if(a.length===1)return i2(r,a[0]);for(let l=0;l<r.length;l++){const h=r[l];for(let p=0;p<h.length;p++)if(Su(a,h[p]))return!0}for(let l=0;l<a.length;l++)if(i2(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(ex(a,r[l]))return!0;return!1}function yO(a,r,l){if(a.length>1){if(ex(a,r))return!0;for(let h=0;h<r.length;h++)if(tx(r[h],a,l))return!0}for(let h=0;h<a.length;h++)if(tx(a[h],r,l))return!0;return!1}function ex(a,r){if(a.length===0||r.length===0)return!1;for(let l=0;l<a.length-1;l++){const h=a[l],p=a[l+1];for(let v=0;v<r.length-1;v++)if(xO(h,p,r[v],r[v+1]))return!0}return!1}function xO(a,r,l,h){return Me(a,l,h)!==Me(r,l,h)&&Me(a,r,l)!==Me(a,r,h)}function tx(a,r,l){const h=l*l;if(r.length===1)return a.distSqr(r[0])<h;for(let p=1;p<r.length;p++)if(r2(a,r[p-1],r[p])<h)return!0;return!1}function r2(a,r,l){const h=r.distSqr(l);if(h===0)return a.distSqr(r);const p=((a.x-r.x)*(l.x-r.x)+(a.y-r.y)*(l.y-r.y))/h;return a.distSqr(p<0?r:p>1?l:l.sub(r)._mult(p)._add(r))}function i2(a,r){let l,h,p,v=!1;for(let x=0;x<a.length;x++){l=a[x];for(let T=0,E=l.length-1;T<l.length;E=T++)h=l[T],p=l[E],h.y>r.y!=p.y>r.y&&r.x<(p.x-h.x)*(r.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Su(a,r){let l=!1;for(let h=0,p=a.length-1;h<a.length;p=h++){const v=a[h],x=a[p];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function o2(a,r,l,h,p){for(const x of a)if(r<=x.x&&l<=x.y&&h>=x.x&&p>=x.y)return!0;const v=[new Y(r,l),new Y(r,p),new Y(h,p),new Y(h,l)];if(a.length>2){for(const x of v)if(Su(a,x))return!0}for(let x=0;x<a.length-1;x++)if(bO(a[x],a[x+1],v))return!0;return!1}function bO(a,r,l){const h=l[0],p=l[2];if(a.x<h.x&&r.x<h.x||a.x>p.x&&r.x>p.x||a.y<h.y&&r.y<h.y||a.y>p.y&&r.y>p.y)return!1;const v=Me(a,r,l[0]);return v!==Me(a,r,l[1])||v!==Me(a,r,l[2])||v!==Me(a,r,l[3])}function ph(a,r,l){const h=r.paint.get(a).value;return h.kind==="constant"?h.value:l.programConfigurations.get(r.id).getMaxValue(a)}function Av(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function s2(a,r,l,h,p){if(!r[0]&&!r[1])return a;const v=Y.convert(r)._mult(p);l==="viewport"&&v._rotate(-h);const x=[];for(let T=0;T<a.length;T++)x.push(a[T].sub(v));return x}function a2(a,r,l,h){const p=Y.convert(a)._mult(h);return r==="viewport"&&p._rotate(-l),p}un(Q0,"CircleBucket",{omit:["layers"]});const wO=new Bt({"circle-sort-key":new ot(ft.layout_circle["circle-sort-key"])});var TO={paint:new Bt({"circle-radius":new ot(ft.paint_circle["circle-radius"]),"circle-color":new ot(ft.paint_circle["circle-color"]),"circle-blur":new ot(ft.paint_circle["circle-blur"]),"circle-opacity":new ot(ft.paint_circle["circle-opacity"]),"circle-translate":new Ve(ft.paint_circle["circle-translate"]),"circle-translate-anchor":new Ve(ft.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ve(ft.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ve(ft.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ot(ft.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ot(ft.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ot(ft.paint_circle["circle-stroke-opacity"])}),layout:wO};function l2(a,r,l,h,p,v,x,T,E){if(v&&a.queryGeometry.isAboveHorizon)return!1;v&&(E*=a.pixelToTileUnitsFactor);const M=a.tileID.canonical,D=l.projection.upVectorScale(M,l.center.lat,l.worldSize).metersToTile;for(const O of r)for(const B of O){const W=B.add(T),q=p&&l.elevation?l.elevation.exaggeration()*p.getElevationAt(W.x,W.y,!0):0,K=l.projection.projectTilePoint(W.x,W.y,M);if(q>0){const fe=l.projection.upVector(M,W.x,W.y);K.x+=fe[0]*D*q,K.y+=fe[1]*D*q,K.z+=fe[2]*D*q}const re=v?W:CO(K.x,K.y,K.z,h),me=v?a.tilespaceRays.map(fe=>EO(fe,q)):a.queryGeometry.screenGeometry,Te=bu([],[K.x,K.y,K.z,1],h);if(!x&&v?E*=Te[3]/l.cameraToCenterDistance:x&&!v&&(E*=l.cameraToCenterDistance/Te[3]),v){const fe=fo((B.y/Rn+M.y)/(1<<M.z));E/=l.projection.pixelsPerMeter(fe,1)/Qs(1,fe)}if(_O(me,re,E))return!0}return!1}function CO(a,r,l,h){const p=bu([],[a,r,l,1],h);return new Y(p[0]/p[3],p[1]/p[3])}const c2=ch(0,0,0),SO=ch(0,0,1);function EO(a,r){const l=$0();return c2[2]=r,a.intersectsPlane(c2,SO,l),new Y(l[0],l[1])}class u2 extends Q0{}function d2(a,{width:r,height:l},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*l*h)throw new RangeError("mismatched image size")}else p=new Uint8Array(r*l*h);return a.width=r,a.height=l,a.data=p,a}function h2(a,r,l){const{width:h,height:p}=r;h===a.width&&p===a.height||(nx(a,r,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,h),height:Math.min(a.height,p)},l),a.width=h,a.height=p,a.data=r.data)}function nx(a,r,l,h,p,v){if(p.width===0||p.height===0)return r;if(p.width>a.width||p.height>a.height||l.x>a.width-p.width||l.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||h.x>r.width-p.width||h.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,T=r.data;for(let E=0;E<p.height;E++){const M=((l.y+E)*a.width+l.x)*v,D=((h.y+E)*r.width+h.x)*v;for(let O=0;O<p.width*v;O++)T[D+O]=x[M+O]}return r}un(u2,"HeatmapBucket",{omit:["layers"]});class sl{constructor(r,l){d2(this,r,1,l)}resize(r){h2(this,new sl(r),1)}clone(){return new sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,h,p,v){nx(r,l,h,p,v,1)}}class os{constructor(r,l){d2(this,r,4,l)}resize(r){h2(this,new os(r),4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new os({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,h,p,v){nx(r,l,h,p,v,4)}}un(sl,"AlphaImage"),un(os,"RGBAImage");var MO={paint:new Bt({"heatmap-radius":new ot(ft.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ot(ft.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ve(ft.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dt(ft.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ve(ft.paint_heatmap["heatmap-opacity"])})};function rx(a){const r={},l=a.resolution||256,h=a.clips?a.clips.length:1,p=a.image||new os({width:l,height:h}),v=(x,T,E)=>{r[a.evaluationKey]=E;const M=a.expression.evaluate(r);p.data[x+T+0]=Math.floor(255*M.r/M.a),p.data[x+T+1]=Math.floor(255*M.g/M.a),p.data[x+T+2]=Math.floor(255*M.b/M.a),p.data[x+T+3]=Math.floor(255*M.a)};if(a.clips)for(let x=0,T=0;x<h;++x,T+=4*l)for(let E=0,M=0;E<l;E++,M+=4){const D=E/(l-1),{start:O,end:B}=a.clips[x];v(T,M,O*(1-D)+B*D)}else for(let x=0,T=0;x<l;x++,T+=4)v(0,T,x/(l-1));return p}var PO={paint:new Bt({"hillshade-illumination-direction":new Ve(ft.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ve(ft.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ve(ft.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ve(ft.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ve(ft.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ve(ft.paint_hillshade["hillshade-accent-color"])})};const AO=xn([{name:"a_pos",components:2,type:"Int16"}],4),{members:kO}=AO;var mh={};function kv(a,r,l){l=l||2;var h,p,v,x,T,E,M,D=r&&r.length,O=D?r[0]*l:a.length,B=f2(a,0,O,l,!0),W=[];if(!B||B.next===B.prev)return W;if(D&&(B=function(K,re,me,Te){var fe,be,Pe,Ce=[];for(fe=0,be=re.length;fe<be;fe++)(Pe=f2(K,re[fe]*Te,fe<be-1?re[fe+1]*Te:K.length,Te,!1))===Pe.next&&(Pe.steiner=!0),Ce.push(FO(Pe));for(Ce.sort(OO),fe=0;fe<Ce.length;fe++)me=LO(Ce[fe],me);return me}(a,r,B,l)),a.length>80*l){h=v=a[0],p=x=a[1];for(var q=l;q<O;q+=l)(T=a[q])<h&&(h=T),(E=a[q+1])<p&&(p=E),T>v&&(v=T),E>x&&(x=E);M=(M=Math.max(v-h,x-p))!==0?32767/M:0}return wp(B,W,l,h,p,M,0),W}function f2(a,r,l,h,p){var v,x;if(p===sx(a,r,l,h)>0)for(v=r;v<l;v+=h)x=g2(v,a[v],a[v+1],x);else for(v=l-h;v>=r;v-=h)x=g2(v,a[v],a[v+1],x);return x&&Dv(x,x.next)&&(Cp(x),x=x.next),x}function Eu(a,r){if(!a)return a;r||(r=a);var l,h=a;do if(l=!1,h.steiner||!Dv(h,h.next)&&Pi(h.prev,h,h.next)!==0)h=h.next;else{if(Cp(h),(h=r=h.prev)===h.next)break;l=!0}while(l||h!==r);return r}function wp(a,r,l,h,p,v,x){if(a){!x&&v&&function(D,O,B,W){var q=D;do q.z===0&&(q.z=ix(q.x,q.y,O,B,W)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==D);q.prevZ.nextZ=null,q.prevZ=null,function(K){var re,me,Te,fe,be,Pe,Ce,nt,Ye=1;do{for(me=K,K=null,be=null,Pe=0;me;){for(Pe++,Te=me,Ce=0,re=0;re<Ye&&(Ce++,Te=Te.nextZ);re++);for(nt=Ye;Ce>0||nt>0&&Te;)Ce!==0&&(nt===0||!Te||me.z<=Te.z)?(fe=me,me=me.nextZ,Ce--):(fe=Te,Te=Te.nextZ,nt--),be?be.nextZ=fe:K=fe,fe.prevZ=be,be=fe;me=Te}be.nextZ=null,Ye*=2}while(Pe>1)}(q)}(a,h,p,v);for(var T,E,M=a;a.prev!==a.next;)if(T=a.prev,E=a.next,v?IO(a,h,p,v):DO(a))r.push(T.i/l|0),r.push(a.i/l|0),r.push(E.i/l|0),Cp(a),a=E.next,M=E.next;else if((a=E)===M){x?x===1?wp(a=zO(Eu(a),r,l),r,l,h,p,v,2):x===2&&RO(a,r,l,h,p,v):wp(Eu(a),r,l,h,p,v,1);break}}}function DO(a){var r=a.prev,l=a,h=a.next;if(Pi(r,l,h)>=0)return!1;for(var p=r.x,v=l.x,x=h.x,T=r.y,E=l.y,M=h.y,D=p<v?p<x?p:x:v<x?v:x,O=T<E?T<M?T:M:E<M?E:M,B=p>v?p>x?p:x:v>x?v:x,W=T>E?T>M?T:M:E>M?E:M,q=h.next;q!==r;){if(q.x>=D&&q.x<=B&&q.y>=O&&q.y<=W&&gh(p,T,v,E,x,M,q.x,q.y)&&Pi(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function IO(a,r,l,h){var p=a.prev,v=a,x=a.next;if(Pi(p,v,x)>=0)return!1;for(var T=p.x,E=v.x,M=x.x,D=p.y,O=v.y,B=x.y,W=T<E?T<M?T:M:E<M?E:M,q=D<O?D<B?D:B:O<B?O:B,K=T>E?T>M?T:M:E>M?E:M,re=D>O?D>B?D:B:O>B?O:B,me=ix(W,q,r,l,h),Te=ix(K,re,r,l,h),fe=a.prevZ,be=a.nextZ;fe&&fe.z>=me&&be&&be.z<=Te;){if(fe.x>=W&&fe.x<=K&&fe.y>=q&&fe.y<=re&&fe!==p&&fe!==x&&gh(T,D,E,O,M,B,fe.x,fe.y)&&Pi(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,be.x>=W&&be.x<=K&&be.y>=q&&be.y<=re&&be!==p&&be!==x&&gh(T,D,E,O,M,B,be.x,be.y)&&Pi(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;fe&&fe.z>=me;){if(fe.x>=W&&fe.x<=K&&fe.y>=q&&fe.y<=re&&fe!==p&&fe!==x&&gh(T,D,E,O,M,B,fe.x,fe.y)&&Pi(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;be&&be.z<=Te;){if(be.x>=W&&be.x<=K&&be.y>=q&&be.y<=re&&be!==p&&be!==x&&gh(T,D,E,O,M,B,be.x,be.y)&&Pi(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function zO(a,r,l){var h=a;do{var p=h.prev,v=h.next.next;!Dv(p,v)&&p2(p,h,h.next,v)&&Tp(p,v)&&Tp(v,p)&&(r.push(p.i/l|0),r.push(h.i/l|0),r.push(v.i/l|0),Cp(h),Cp(h.next),h=a=v),h=h.next}while(h!==a);return Eu(h)}function RO(a,r,l,h,p,v){var x=a;do{for(var T=x.next.next;T!==x.prev;){if(x.i!==T.i&&$O(x,T)){var E=m2(x,T);return x=Eu(x,x.next),E=Eu(E,E.next),wp(x,r,l,h,p,v,0),void wp(E,r,l,h,p,v,0)}T=T.next}x=x.next}while(x!==a)}function OO(a,r){return a.x-r.x}function LO(a,r){var l=function(p,v){var x,T=v,E=p.x,M=p.y,D=-1/0;do{if(M<=T.y&&M>=T.next.y&&T.next.y!==T.y){var O=T.x+(M-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(O<=E&&O>D&&(D=O,x=T.x<T.next.x?T:T.next,O===E))return x}T=T.next}while(T!==v);if(!x)return null;var B,W=x,q=x.x,K=x.y,re=1/0;T=x;do E>=T.x&&T.x>=q&&E!==T.x&&gh(M<K?E:D,M,q,K,M<K?D:E,M,T.x,T.y)&&(B=Math.abs(M-T.y)/(E-T.x),Tp(T,p)&&(B<re||B===re&&(T.x>x.x||T.x===x.x&&BO(x,T)))&&(x=T,re=B)),T=T.next;while(T!==W);return x}(a,r);if(!l)return r;var h=m2(l,a);return Eu(h,h.next),Eu(l,l.next)}function BO(a,r){return Pi(a.prev,a,r.prev)<0&&Pi(r.next,a,a.next)<0}function ix(a,r,l,h,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function FO(a){var r=a,l=a;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==a);return l}function gh(a,r,l,h,p,v,x,T){return(p-x)*(r-T)>=(a-x)*(v-T)&&(a-x)*(h-T)>=(l-x)*(r-T)&&(l-x)*(v-T)>=(p-x)*(h-T)}function $O(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(l,h){var p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==h.i&&p.next.i!==h.i&&p2(p,p.next,l,h))return!0;p=p.next}while(p!==l);return!1}(a,r)&&(Tp(a,r)&&Tp(r,a)&&function(l,h){var p=l,v=!1,x=(l.x+h.x)/2,T=(l.y+h.y)/2;do p.y>T!=p.next.y>T&&p.next.y!==p.y&&x<(p.next.x-p.x)*(T-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==l);return v}(a,r)&&(Pi(a.prev,a,r.prev)||Pi(a,r.prev,r))||Dv(a,r)&&Pi(a.prev,a,a.next)>0&&Pi(r.prev,r,r.next)>0)}function Pi(a,r,l){return(r.y-a.y)*(l.x-r.x)-(r.x-a.x)*(l.y-r.y)}function Dv(a,r){return a.x===r.x&&a.y===r.y}function p2(a,r,l,h){var p=zv(Pi(a,r,l)),v=zv(Pi(a,r,h)),x=zv(Pi(l,h,a)),T=zv(Pi(l,h,r));return p!==v&&x!==T||!(p!==0||!Iv(a,l,r))||!(v!==0||!Iv(a,h,r))||!(x!==0||!Iv(l,a,h))||!(T!==0||!Iv(l,r,h))}function Iv(a,r,l){return r.x<=Math.max(a.x,l.x)&&r.x>=Math.min(a.x,l.x)&&r.y<=Math.max(a.y,l.y)&&r.y>=Math.min(a.y,l.y)}function zv(a){return a>0?1:a<0?-1:0}function Tp(a,r){return Pi(a.prev,a,a.next)<0?Pi(a,r,a.next)>=0&&Pi(a,a.prev,r)>=0:Pi(a,r,a.prev)<0||Pi(a,a.next,r)<0}function m2(a,r){var l=new ox(a.i,a.x,a.y),h=new ox(r.i,r.x,r.y),p=a.next,v=r.prev;return a.next=r,r.prev=a,l.next=p,p.prev=l,h.next=l,l.prev=h,v.next=h,h.prev=v,h}function g2(a,r,l,h){var p=new ox(a,r,l);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Cp(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function ox(a,r,l){this.i=a,this.x=r,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sx(a,r,l,h){for(var p=0,v=r,x=l-h;v<l;v+=h)p+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return p}function NO(a,r,l,h,p){v2(a,r,l||0,h||a.length-1,p||UO)}function v2(a,r,l,h,p){for(;h>l;){if(h-l>600){var v=h-l+1,x=r-l+1,T=Math.log(v),E=.5*Math.exp(2*T/3),M=.5*Math.sqrt(T*E*(v-E)/v)*(x-v/2<0?-1:1);v2(a,r,Math.max(l,Math.floor(r-x*E/v+M)),Math.min(h,Math.floor(r+(v-x)*E/v+M)),p)}var D=a[r],O=l,B=h;for(Sp(a,l,r),p(a[h],D)>0&&Sp(a,l,h);O<B;){for(Sp(a,O,B),O++,B--;p(a[O],D)<0;)O++;for(;p(a[B],D)>0;)B--}p(a[l],D)===0?Sp(a,l,B):Sp(a,++B,h),B<=r&&(l=B+1),r<=B&&(h=B-1)}}function Sp(a,r,l){var h=a[r];a[r]=a[l],a[l]=h}function UO(a,r){return a<r?-1:a>r?1:0}function ax(a,r){const l=a.length;if(l<=1)return[a];const h=[];let p,v;for(let x=0;x<l;x++){const T=Ue(a[x]);T!==0&&(a[x].area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(p&&h.push(p),p=[a[x]]):p.push(a[x]))}if(p&&h.push(p),r>1)for(let x=0;x<h.length;x++)h[x].length<=r||(NO(h[x],r,1,h[x].length-1,VO),h[x]=h[x].slice(0,r));return h}function VO(a,r){return r.area-a.area}function lx(a,r,l){const h=l.patternDependencies;let p=!1;for(const v of r){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(p=!0);const T=x.constantOr(null);T&&(p=!0,h[T]=!0)}return p}function cx(a,r,l,h,p){const v=p.patternDependencies;for(const x of r){const T=x.paint.get(`${a}-pattern`).value;if(T.kind!=="constant"){let E=T.evaluate({zoom:h},l,{},p.availableImages);E=E&&E.name?E.name:E,v[E]=!0,l.patterns[x.id]=E}}return l}({get exports(){return mh},set exports(a){mh=a}}).exports=kv,mh.default=kv,kv.deviation=function(a,r,l,h){var p=r&&r.length,v=Math.abs(sx(a,0,p?r[0]*l:a.length,l));if(p)for(var x=0,T=r.length;x<T;x++)v-=Math.abs(sx(a,r[x]*l,x<T-1?r[x+1]*l:a.length,l));var E=0;for(x=0;x<h.length;x+=3){var M=h[x]*l,D=h[x+1]*l,O=h[x+2]*l;E+=Math.abs((a[M]-a[O])*(a[D+1]-a[M+1])-(a[M]-a[D])*(a[O+1]-a[M+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},kv.flatten=function(a){for(var r=a[0][0].length,l={vertices:[],holes:[],dimensions:r},h=0,p=0;p<a.length;p++){for(var v=0;v<a[p].length;v++)for(var x=0;x<r;x++)l.vertices.push(a[p][v][x]);p>0&&l.holes.push(h+=a[p-1].length)}return l};class Rv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mn,this.indexArray=new ho,this.indexArray2=new _a,this.programConfigurations=new _u(r.layers,r.zoom),this.segments=new Mi,this.segments2=new Mi,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=r.projection}populate(r,l,h,p){this.hasPattern=lx("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:T,id:E,index:M,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,B=Cu(T,O);if(!this.layers[0]._featureFilter.filter(new We(this.zoom),B,h))continue;const W=v?v.evaluate(B,{},h,l.availableImages):void 0,q={id:E,properties:T.properties,type:T.type,sourceLayerIndex:D,index:M,geometry:O?B.geometry:ol(T,h,p),patterns:{},sortKey:W};x.push(q)}v&&x.sort((T,E)=>T.sortKey-E.sortKey);for(const T of x){const{geometry:E,index:M,sourceLayerIndex:D}=T;if(this.hasPattern){const O=cx("fill",this.layers,T,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(T,E,M,h,{},l.availableImages);l.featureIndex.insert(r[M].feature,E,M,D,this.index)}}update(r,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h,p)}addFeatures(r,l,h,p,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,kO),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,h,p,v,x=[]){for(const T of ax(l,500)){let E=0;for(const q of T)E+=q.length;const M=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),D=M.vertexLength,O=[],B=[];for(const q of T){if(q.length===0)continue;q!==T[0]&&B.push(O.length/2);const K=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),re=K.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack(re+q.length-1,re),O.push(q[0].x),O.push(q[0].y);for(let me=1;me<q.length;me++)this.layoutVertexArray.emplaceBack(q[me].x,q[me].y),this.indexArray2.emplaceBack(re+me-1,re+me),O.push(q[me].x),O.push(q[me].y);K.vertexLength+=q.length,K.primitiveLength+=q.length}const W=mh(O,B);for(let q=0;q<W.length;q+=3)this.indexArray.emplaceBack(D+W[q],D+W[q+1],D+W[q+2]);M.vertexLength+=E,M.primitiveLength+=W.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,x,p)}}un(Rv,"FillBucket",{omit:["layers","patternFeatures"]});const jO=new Bt({"fill-sort-key":new ot(ft.layout_fill["fill-sort-key"])});var WO={paint:new Bt({"fill-antialias":new Ve(ft.paint_fill["fill-antialias"]),"fill-opacity":new ot(ft.paint_fill["fill-opacity"]),"fill-color":new ot(ft.paint_fill["fill-color"]),"fill-outline-color":new ot(ft.paint_fill["fill-outline-color"]),"fill-translate":new Ve(ft.paint_fill["fill-translate"]),"fill-translate-anchor":new Ve(ft.paint_fill["fill-translate-anchor"]),"fill-pattern":new ot(ft.paint_fill["fill-pattern"])}),layout:jO};const HO=xn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),GO=xn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),qO=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ZO}=HO;var Ov={},YO=Y,_2=vh;function vh(a,r,l,h,p){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=p,a.readFields(XO,this,r)}function XO(a,r,l){a==1?r.id=l.readVarint():a==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],T=p._values[h.readVarint()];p.properties[x]=T}}(l,r):a==3?r.type=l.readVarint():a==4&&(r._geometry=l.pos)}function KO(a){for(var r,l,h=0,p=0,v=a.length,x=v-1;p<v;x=p++)h+=((l=a[x]).x-(r=a[p]).x)*(r.y+l.y);return h}vh.types=["Unknown","Point","LineString","Polygon"],vh.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,l=a.readVarint()+a.pos,h=1,p=0,v=0,x=0,T=[];a.pos<l;){if(p<=0){var E=a.readVarint();h=7&E,p=E>>3}if(p--,h===1||h===2)v+=a.readSVarint(),x+=a.readSVarint(),h===1&&(r&&T.push(r),r=[]),r.push(new YO(v,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&T.push(r),T},vh.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,l=1,h=0,p=0,v=0,x=1/0,T=-1/0,E=1/0,M=-1/0;a.pos<r;){if(h<=0){var D=a.readVarint();l=7&D,h=D>>3}if(h--,l===1||l===2)(p+=a.readSVarint())<x&&(x=p),p>T&&(T=p),(v+=a.readSVarint())<E&&(E=v),v>M&&(M=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,E,T,M]},vh.prototype.toGeoJSON=function(a,r,l){var h,p,v=this.extent*Math.pow(2,l),x=this.extent*a,T=this.extent*r,E=this.loadGeometry(),M=vh.types[this.type];function D(W){for(var q=0;q<W.length;q++){var K=W[q];W[q]=[360*(K.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+T)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(h=0;h<E.length;h++)O[h]=E[h][0];D(E=O);break;case 2:for(h=0;h<E.length;h++)D(E[h]);break;case 3:for(E=function(W){var q=W.length;if(q<=1)return[W];for(var K,re,me=[],Te=0;Te<q;Te++){var fe=KO(W[Te]);fe!==0&&(re===void 0&&(re=fe<0),re===fe<0?(K&&me.push(K),K=[W[Te]]):K.push(W[Te]))}return K&&me.push(K),me}(E),h=0;h<E.length;h++)for(p=0;p<E[h].length;p++)D(E[h][p])}E.length===1?E=E[0]:M="Multi"+M;var B={type:"Feature",geometry:{type:M,coordinates:E},properties:this.properties};return"id"in this&&(B.id=this.id),B};var JO=_2,y2=x2;function x2(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(QO,this,r),this.length=this._features.length}function QO(a,r,l){a===15?r.version=l.readVarint():a===1?r.name=l.readString():a===5?r.extent=l.readVarint():a===2?r._features.push(l.pos):a===3?r._keys.push(l.readString()):a===4&&r._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(l))}x2.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new JO(this._pbf,r,this.extent,this._keys,this._values)};var eL=y2;function tL(a,r,l){if(a===3){var h=new eL(l,l.readVarint()+l.pos);h.length&&(r[h.name]=h)}}var ux=Ov.VectorTile=function(a,r){this.layers=a.readFields(tL,{},r)},Lv=Ov.VectorTileFeature=_2;function Bv(a,r,l,h){const p=[],v=h===0?(x,T,E,M,D,O)=>{x.push(new Y(O,E+(O-T)/(M-T)*(D-E)))}:(x,T,E,M,D,O)=>{x.push(new Y(T+(O-E)/(D-E)*(M-T),O))};for(const x of a){const T=[];for(const E of x){if(E.length<=2)continue;const M=[];for(let B=0;B<E.length-1;B++){const W=E[B].x,q=E[B].y,K=E[B+1].x,re=E[B+1].y,me=h===0?W:q,Te=h===0?K:re;me<r?Te>r&&v(M,W,q,K,re,r):me>l?Te<l&&v(M,W,q,K,re,l):M.push(E[B]),Te<r&&me>=r&&v(M,W,q,K,re,r),Te>l&&me<=l&&v(M,W,q,K,re,l)}let D=E[E.length-1];const O=h===0?D.x:D.y;O>=r&&O<=l&&M.push(D),M.length&&(D=M[M.length-1],M[0].x===D.x&&M[0].y===D.y||M.push(M[0]),T.push(M))}T.length&&p.push(T)}return p}Ov.VectorTileLayer=y2;const nL=Lv.types,rL=Math.pow(2,13);function Ep(a,r,l,h,p,v,x,T){a.emplaceBack((r<<1)+x,(l<<1)+v,(Math.floor(h*rL)<<1)+p,Math.round(T))}function Mp(a,r,l){a.emplaceBack(r.x,r.y,r.z,l[0]*16384,l[1]*16384,l[2]*16384)}class b2{constructor(){this.acc=new Y(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Y(r.x,r.y),this.max=new Y(r.x,r.y))}append(r,l){this.currentPolyCount.edges++,this.acc._add(r);const h=this.min,p=this.max;r.x<h.x?h.x=r.x:r.x>p.x&&(p.x=r.x),r.y<h.y?h.y=r.y:r.y>p.y&&(p.y=r.y),((r.x===0||r.x===Rn)&&r.x===l.x)!=((r.y===0||r.y===Rn)&&r.y===l.y)&&this.processBorderOverlap(r,l),l.x<0!=r.x<0&&this.addBorderIntersection(0,hr(l.y,r.y,(0-l.x)/(r.x-l.x))),l.x>Rn!=r.x>Rn&&this.addBorderIntersection(1,hr(l.y,r.y,(Rn-l.x)/(r.x-l.x))),l.y<0!=r.y<0&&this.addBorderIntersection(2,hr(l.x,r.x,(0-l.y)/(r.y-l.y))),l.y>Rn!=r.y>Rn&&this.addBorderIntersection(3,hr(l.x,r.x,(Rn-l.y)/(r.y-l.y)))}addBorderIntersection(r,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[r];l<h[0]&&(h[0]=l),l>h[1]&&(h[1]=l)}processBorderOverlap(r,l){if(r.x===l.x){if(r.y===l.y)return;const h=r.x===0?0:1;this.addBorderIntersection(h,l.y),this.addBorderIntersection(h,r.y)}else{const h=r.y===0?2:3;this.addBorderIntersection(h,l.x),this.addBorderIntersection(h,r.x)}}centroid(){const r=this.polyCount.reduce((l,h)=>l+h.edges,0);return r!==0?this.acc.div(r)._round():new Y(0,0)}span(){return new Y(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,l)=>r+ +(l[0]!==Number.MAX_VALUE),0)}}class Pp{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new Sr,this.centroidVertexArray=new wC,this.indexArray=new ho,this.programConfigurations=new _u(r.layers,r.zoom),this.segments=new Mi,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=r.enableTerrain}populate(r,l,h,p){this.features=[],this.hasPattern=lx("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(v){const x=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*x/(x*x+1)/Rn/(1<<v.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:v,id:x,index:T,sourceLayerIndex:E}of r){const M=this.layers[0]._featureFilter.needGeometry,D=Cu(v,M);if(!this.layers[0]._featureFilter.filter(new We(this.zoom),D,h))continue;const O={id:x,sourceLayerIndex:E,index:T,geometry:M?D.geometry:ol(v,h,p),properties:v.properties,type:v.type,patterns:{}},B=this.layoutVertexArray.length;this.hasPattern?this.features.push(cx("fill-extrusion",this.layers,O,this.zoom,l)):this.addFeature(O,O.geometry,T,h,{},l.availableImages,p),l.featureIndex.insert(v,O.geometry,T,E,this.index,B)}this.sortBorders()}addFeatures(r,l,h,p,v){for(const x of this.features){const{geometry:T}=x;this.addFeature(x,T,x.index,l,h,p,v)}this.sortBorders()}update(r,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ZO),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,qO.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,GO.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,h,p,v,x,T){const E=[new Y(0,0),new Y(Rn,Rn)],M=T.projection,D=M.name==="globe",O=this.enableTerrain&&!D?new b2:null,B=nL[r.type]==="Polygon";D&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ps);const W=ax(l,500);for(let me=W.length-1;me>=0;me--){const Te=W[me];(Te.length===0||(q=Te[0]).every(fe=>fe.x<=0)||q.every(fe=>fe.x>=Rn)||q.every(fe=>fe.y<=0)||q.every(fe=>fe.y>=Rn))&&W.splice(me,1)}var q;let K;if(D)K=P2(W,E,p);else{K=[];for(const me of W)K.push({polygon:me,bounds:E})}const re=B?this.edgeRadius:0;for(const{polygon:me,bounds:Te}of K){let fe=0,be=0;for(const Ce of me)B&&!Ce[0].equals(Ce[Ce.length-1])&&Ce.push(Ce[0]),be+=B?Ce.length-1:Ce.length;const Pe=this.segments.prepareSegment((B?5:4)*be,this.layoutVertexArray,this.indexArray);if(B){const Ce=[],nt=[];fe=Pe.vertexLength;for(const _t of me){let $t,at;_t.length&&_t!==me[0]&&nt.push(Ce.length/2),$t=_t[1].sub(_t[0])._perp()._unit();for(let Tt=1;Tt<_t.length;Tt++){const Mt=_t[Tt],Ot=_t[Tt===_t.length-1?1:Tt+1];let{x:Ut,y:ct}=Mt;if(re){at=Ot.sub(Mt)._perp()._unit();const Xt=$t.add(at)._unit(),kn=re*Math.min(4,1/($t.x*Xt.x+$t.y*Xt.y));Ut+=kn*Xt.x,ct+=kn*Xt.y,$t=at}Ep(this.layoutVertexArray,Ut,ct,0,0,1,1,0),Pe.vertexLength++,Ce.push(Mt.x,Mt.y),D&&Mp(this.layoutVertexExtArray,M.projectTilePoint(Ut,ct,p),M.upVector(p,Ut,ct))}}const Ye=mh(Ce,nt);for(let _t=0;_t<Ye.length;_t+=3)this.indexArray.emplaceBack(fe+Ye[_t],fe+Ye[_t+2],fe+Ye[_t+1]),Pe.primitiveLength++}for(const Ce of me){O&&Ce.length&&O.startRing(Ce[0]);let nt,Ye,_t,$t=Ce.length>4&&S2(Ce[Ce.length-2],Ce[0],Ce[1]),at=re?iL(Ce[Ce.length-2],Ce[0],Ce[1],re):0;Ye=Ce[1].sub(Ce[0])._perp()._unit();let Tt=!0;for(let Mt=1,Ot=0;Mt<Ce.length;Mt++){let Ut=Ce[Mt-1],ct=Ce[Mt];const Xt=Ce[Mt===Ce.length-1?1:Mt+1];if(O&&B&&O.currentPolyCount.top++,C2(ct,Ut,Te)){re&&(Ye=Xt.sub(ct)._perp()._unit(),Tt=!Tt);continue}O&&O.append(ct,Ut);const kn=ct.sub(Ut)._perp(),tn=kn.x/(Math.abs(kn.x)+Math.abs(kn.y)),mn=kn.y>0?1:0,Kt=Ut.dist(ct);if(Ot+Kt>32768&&(Ot=0),re){_t=Xt.sub(ct)._perp()._unit();let Gn=T2(Ut,ct,Xt,w2(Ye,_t),re);isNaN(Gn)&&(Gn=0);const zn=ct.sub(Ut)._unit();Ut=Ut.add(zn.mult(at))._round(),ct=ct.add(zn.mult(-Gn))._round(),at=Gn,Ye=_t}const In=Pe.vertexLength,Qn=Ce.length>4&&S2(Ut,ct,Xt);let Kn=E2(Ot,$t,Tt);if(Ep(this.layoutVertexArray,Ut.x,Ut.y,tn,mn,0,0,Kn),Ep(this.layoutVertexArray,Ut.x,Ut.y,tn,mn,0,1,Kn),Ot+=Kt,Kn=E2(Ot,Qn,!Tt),$t=Qn,Ep(this.layoutVertexArray,ct.x,ct.y,tn,mn,0,0,Kn),Ep(this.layoutVertexArray,ct.x,ct.y,tn,mn,0,1,Kn),Pe.vertexLength+=4,this.indexArray.emplaceBack(In+0,In+1,In+2),this.indexArray.emplaceBack(In+1,In+3,In+2),Pe.primitiveLength+=2,re){const Gn=fe+(Mt===1?Ce.length-2:Mt-2),zn=Mt===1?fe:Gn+1;if(this.indexArray.emplaceBack(In+1,Gn,In+3),this.indexArray.emplaceBack(Gn,zn,In+3),Pe.primitiveLength+=2,nt===void 0&&(nt=In),!C2(Xt,Ce[Mt],Te)){const Pr=Mt===Ce.length-1?nt:Pe.vertexLength;this.indexArray.emplaceBack(In+2,In+3,Pr),this.indexArray.emplaceBack(In+3,Pr+1,Pr),this.indexArray.emplaceBack(In+3,zn,Pr+1),Pe.primitiveLength+=3}Tt=!Tt}if(D){const Gn=this.layoutVertexExtArray,zn=M.projectTilePoint(Ut.x,Ut.y,p),Pr=M.projectTilePoint(ct.x,ct.y,p),Ln=M.upVector(p,Ut.x,Ut.y),er=M.upVector(p,ct.x,ct.y);Mp(Gn,zn,Ln),Mp(Gn,zn,Ln),Mp(Gn,Pr,er),Mp(Gn,Pr,er)}}B&&(fe+=Ce.length-1)}}if(O&&O.polyCount.length>0){if(O.borders){O.vertexArrayOffset=this.centroidVertexArray.length;const me=O.borders,Te=this.featuresOnBorder.push(O)-1;for(let fe=0;fe<4;fe++)me[fe][0]!==Number.MAX_VALUE&&this.borders[fe].push(Te)}this.encodeCentroid(O.borders?void 0:O.centroid(),O)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,x,p)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((l,h)=>this.featuresOnBorder[l].borders[r][0]-this.featuresOnBorder[h].borders[r][0])}encodeCentroid(r,l,h=!0){let p,v;if(r)if(r.y!==0){const T=l.span()._mult(this.tileToMeter);p=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(T.x/10)),v=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(T.y/10))}else p=Math.ceil(7*(r.x+450)),v=0;else p=0,v=+h;let x=h?this.centroidVertexArray.length:l.vertexArrayOffset;for(const T of l.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*T.edges+T.top);for(let E=0;E<T.top;E++)this.centroidVertexArray.emplace(x++,p,v);for(let E=0;E<2*T.edges;E++)this.centroidVertexArray.emplace(x++,0,v),this.centroidVertexArray.emplace(x++,p,v)}}}function w2(a,r){const l=a.add(r)._unit();return a.x*l.x+a.y*l.y}function iL(a,r,l,h){const p=r.sub(a)._perp()._unit(),v=l.sub(r)._perp()._unit();return T2(a,r,l,w2(p,v),h)}function T2(a,r,l,h,p){const v=Math.sqrt(1-h*h);return Math.min(a.dist(r)/3,r.dist(l)/3,p*v/h)}function C2(a,r,l){return a.x<l[0].x&&r.x<l[0].x||a.x>l[1].x&&r.x>l[1].x||a.y<l[0].y&&r.y<l[0].y||a.y>l[1].y&&r.y>l[1].y}function S2(a,r,l){if(a.x<0||a.x>=Rn||r.x<0||r.x>=Rn||l.x<0||l.x>=Rn)return!1;const h=l.sub(r),p=h.perp(),v=a.sub(r);return(h.x*v.x+h.y*v.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(v.x*v.x+v.y*v.y))>-.866&&p.x*v.x+p.y*v.y<0}function E2(a,r,l){const h=r?2|a:-3&a;return l?1|h:-2&h}function M2(){const a=Math.PI/32,r=Math.tan(a),l=bp;return l*Math.sqrt(1+2*r*r)-l}function P2(a,r,l){const h=1<<l.z,p=gs(l.x/h),v=gs((l.x+1)/h),x=fo(l.y/h),T=fo((l.y+1)/h);return function(E,M,D,O,B=0,W){const q=[];if(!E.length||!D||!O)return q;const K=(Ce,nt)=>{for(const Ye of Ce)q.push({polygon:Ye,bounds:nt})},re=Math.ceil(Math.log2(D)),me=Math.ceil(Math.log2(O)),Te=re-me,fe=[];for(let Ce=0;Ce<Math.abs(Te);Ce++)fe.push(Te>0?0:1);for(let Ce=0;Ce<Math.min(re,me);Ce++)fe.push(0),fe.push(1);let be=E;if(be=Bv(be,M[0].y-B,M[1].y+B,1),be=Bv(be,M[0].x-B,M[1].x+B,0),!be.length)return q;const Pe=[];for(fe.length?Pe.push({polygons:be,bounds:M,depth:0}):K(be,M);Pe.length;){const Ce=Pe.pop(),nt=Ce.depth,Ye=fe[nt],_t=Ce.bounds[0],$t=Ce.bounds[1],at=Ye===0?_t.x:_t.y,Tt=Ye===0?$t.x:$t.y,Mt=W?W(Ye,at,Tt):.5*(at+Tt),Ot=Bv(Ce.polygons,at-B,Mt+B,Ye),Ut=Bv(Ce.polygons,Mt-B,Tt+B,Ye);if(Ot.length){const ct=[_t,new Y(Ye===0?Mt:$t.x,Ye===1?Mt:$t.y)];fe.length>nt+1?Pe.push({polygons:Ot,bounds:ct,depth:nt+1}):K(Ot,ct)}if(Ut.length){const ct=[new Y(Ye===0?Mt:_t.x,Ye===1?Mt:_t.y),$t];fe.length>nt+1?Pe.push({polygons:Ut,bounds:ct,depth:nt+1}):K(Ut,ct)}}return q}(a,r,Math.ceil((v-p)/11.25),Math.ceil((x-T)/11.25),1,(E,M,D)=>{if(E===0)return .5*(M+D);{const O=fo((l.y+M/Rn)/h);return(Ta(.5*(fo((l.y+D/Rn)/h)+O))*h-l.y)*Rn}})}un(Pp,"FillExtrusionBucket",{omit:["layers","features"]}),un(b2,"PartMetadata");const oL=new Bt({"fill-extrusion-edge-radius":new Ve(ft["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var sL={paint:new Bt({"fill-extrusion-opacity":new Ve(ft["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ot(ft["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ve(ft["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ve(ft["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ot(ft["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ot(ft["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ot(ft["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ve(ft["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ve(ft["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ve(ft["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:oL};function A2(a,r,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[a*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Fv{constructor(r,l,h){this.z=r,this.x=l,this.y=h,this.key=Ap(0,r,r,l,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l){const h=function(v,x,T){var E=A2(256*v,256*(x=Math.pow(2,T)-x-1),T),M=A2(256*(v+1),256*(x+1),T);return E[0]+","+E[1]+","+M[0]+","+M[1]}(this.x,this.y,this.z),p=function(v,x,T){let E,M="";for(let D=v;D>0;D--)E=1<<D-1,M+=(x&E?1:0)+(T&E?2:0);return M}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class k2{constructor(r,l){this.wrap=r,this.canonical=l,this.key=Ap(r,l.z,l.z,l.x,l.y)}}class Io{constructor(r,l,h,p,v){this.overscaledZ=r,this.wrap=l,this.canonical=new Fv(h,+p,+v),this.key=l===0&&r===h?this.canonical.key:Ap(l,r,h,p,v)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const l=this.canonical.z-r;return r>this.canonical.z?new Io(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l=!0){if(this.overscaledZ===r&&l)return this.key;if(r>this.canonical.z)return Ap(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-r;return Ap(this.wrap*+l,r,r,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Io(l,this.wrap,l,h,p),new Io(l,this.wrap,l,h+1,p),new Io(l,this.wrap,l,h,p+1),new Io(l,this.wrap,l,h+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Io(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new k2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ap(a,r,l,h,p){const v=1<<Math.min(l,22);let x=v*(p%v)+h%v;return a&&l<22&&(x+=v*v*((a<0?-2*a-1:2*a)%(1<<2*(22-l)))),16*(32*x+l)+(r-l)}un(Fv,"CanonicalTileID"),un(Io,"OverscaledTileID",{omit:["projMatrix"]});class _h extends Y{constructor(r,l,h){super(r,l),this.z=h}}function kp(a,r){return a.x*r.x+a.y*r.y}function D2(a,r){if(a.length===1){let l=0;const h=r[l++];let p;for(;!p||h.equals(p);)if(p=r[l++],!p)return 1/0;for(;l<r.length;l++){const v=r[l],x=a[0],T=p.sub(h),E=v.sub(h),M=x.sub(h),D=kp(T,T),O=kp(T,E),B=kp(E,E),W=kp(M,T),q=kp(M,E),K=D*B-O*O,re=(B*W-O*q)/K,me=(D*q-O*W)/K,Te=h.z*(1-re-me)+p.z*re+v.z*me;if(isFinite(Te))return Te}return 1/0}{let l=1/0;for(const h of r)l=Math.min(l,h.z);return l}}function I2(a,r,l,h,p,v,x,T){const E=x*p.getElevationAt(a,r,!0,!0),M=v[0]!==0,D=M?v[1]===0?x*(v[0]/7-450):x*function(O,B,W){const q=Math.floor(B[0]/8),K=Math.floor(B[1]/8),re=10*(B[0]-8*q),me=10*(B[1]-8*K),Te=O.getElevationAt(q,K,!0,!0),fe=O.getMeterToDEM(W),be=Math.floor(.5*(re*fe-1)),Pe=Math.floor(.5*(me*fe-1)),Ce=O.tileCoordToPixel(q,K),nt=2*be+1,Ye=2*Pe+1,_t=function(Ut,ct,Xt,kn,tn){return[Ut.getElevationAtPixel(ct,Xt,!0),Ut.getElevationAtPixel(ct+tn,Xt,!0),Ut.getElevationAtPixel(ct,Xt+tn,!0),Ut.getElevationAtPixel(ct+kn,Xt+tn,!0)]}(O,Ce.x-be,Ce.y-Pe,nt,Ye),$t=Math.abs(_t[0]-_t[1]),at=Math.abs(_t[2]-_t[3]),Tt=Math.abs(_t[0]-_t[2])+Math.abs(_t[1]-_t[3]),Mt=Math.min(.25,.5*fe*($t+at)/nt),Ot=Math.min(.25,.5*fe*Tt/Ye);return Te+Math.max(Mt*re,Ot*me)}(p,v,T):E;return{base:E+(l===0)?-1:l,top:M?Math.max(D+h,E+l+2):E+h}}const aL=xn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:lL}=aL,cL=xn([{name:"a_packed",components:4,type:"Float32"}]),{members:uL}=cL,dL=Lv.types,hL=Math.cos(Math.PI/180*37.5);class $v{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new jr,this.layoutVertexArray2=new Nr,this.indexArray=new ho,this.programConfigurations=new _u(r.layers,r.zoom),this.segments=new Mi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,h,p){this.hasPattern=lx("line",this.layers,l);const v=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:D,id:O,index:B,sourceLayerIndex:W}of r){const q=this.layers[0]._featureFilter.needGeometry,K=Cu(D,q);if(!this.layers[0]._featureFilter.filter(new We(this.zoom),K,h))continue;const re=v?v.evaluate(K,{},h):void 0,me={id:O,properties:D.properties,type:D.type,sourceLayerIndex:W,index:B,geometry:q?K.geometry:ol(D,h,p),patterns:{},sortKey:re};x.push(me)}v&&x.sort((D,O)=>D.sortKey-O.sortKey);const{lineAtlas:T,featureIndex:E}=l,M=this.addConstantDashes(T);for(const D of x){const{geometry:O,index:B,sourceLayerIndex:W}=D;if(M&&this.addFeatureDashes(D,T),this.hasPattern){const q=cx("line",this.layers,D,this.zoom,l);this.patternFeatures.push(q)}else this.addFeature(D,O,B,h,T.positions,l.availableImages);E.insert(r[B].feature,O,B,W,this.index)}}addConstantDashes(r){let l=!1;for(const h of this.layers){const p=h.paint.get("line-dasharray").value,v=h.layout.get("line-cap").value;if(p.kind!=="constant"||v.kind!=="constant")l=!0;else{const x=v.value,T=p.value;if(!T)continue;r.addDash(T,x)}}return l}addFeatureDashes(r,l){const h=this.zoom;for(const p of this.layers){const v=p.paint.get("line-dasharray").value,x=p.layout.get("line-cap").value;if(v.kind==="constant"&&x.kind==="constant")continue;let T,E;if(v.kind==="constant"){if(T=v.value,!T)continue}else T=v.evaluate({zoom:h},r);E=x.kind==="constant"?x.value:x.evaluate({zoom:h},r),l.addDash(T,E),r.patterns[p.id]=l.getKey(T,E)}}update(r,l,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h,p)}addFeatures(r,l,h,p,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,uL)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,lL),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,h,p,v,x){const T=this.layers[0].layout,E=T.get("line-join").evaluate(r,{}),M=T.get("line-cap").evaluate(r,{}),D=T.get("line-miter-limit"),O=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const B of l)this.addLine(B,r,E,M,D,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,x,p)}addLine(r,l,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<r.length-1;me++)this.totalDistance+=r[me].dist(r[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=dL[l.type]==="Polygon";let E=r.length;for(;E>=2&&r[E-1].equals(r[E-2]);)E--;let M=0;for(;M<E-1&&r[M].equals(r[M+1]);)M++;if(E<(T?3:2))return;h==="bevel"&&(v=1.05);const D=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let B,W,q,K,re;this.e1=this.e2=-1,T&&(B=r[E-2],re=r[M].sub(B)._unit()._perp());for(let me=M;me<E;me++){if(q=me===E-1?T?r[M+1]:void 0:r[me+1],q&&r[me].equals(q))continue;re&&(K=re),B&&(W=B),B=r[me],re=q?q.sub(B)._unit()._perp():K,K=K||re;let Te=K.add(re);Te.x===0&&Te.y===0||Te._unit();const fe=K.x*re.x+K.y*re.y,be=Te.x*re.x+Te.y*re.y,Pe=be!==0?1/be:1/0,Ce=2*Math.sqrt(2-2*be),nt=be<hL&&W&&q,Ye=K.x*re.y-K.y*re.x>0;if(nt&&me>M){const at=B.dist(W);if(at>2*D){const Tt=B.sub(B.sub(W)._mult(D/at)._round());this.updateDistance(W,Tt),this.addCurrentVertex(Tt,K,0,0,O),W=Tt}}const _t=W&&q;let $t=_t?h:T?"butt":p;if(_t&&$t==="round"&&(Pe<x?$t="miter":Pe<=2&&($t="fakeround")),$t==="miter"&&Pe>v&&($t="bevel"),$t==="bevel"&&(Pe>2&&($t="flipbevel"),Pe<v&&($t="miter")),W&&this.updateDistance(W,B),$t==="miter")Te._mult(Pe),this.addCurrentVertex(B,Te,0,0,O);else if($t==="flipbevel"){if(Pe>100)Te=re.mult(-1);else{const at=Pe*K.add(re).mag()/K.sub(re).mag();Te._perp()._mult(at*(Ye?-1:1))}this.addCurrentVertex(B,Te,0,0,O),this.addCurrentVertex(B,Te.mult(-1),0,0,O)}else if($t==="bevel"||$t==="fakeround"){const at=-Math.sqrt(Pe*Pe-1),Tt=Ye?at:0,Mt=Ye?0:at;if(W&&this.addCurrentVertex(B,K,Tt,Mt,O),$t==="fakeround"){const Ot=Math.round(180*Ce/Math.PI/20);for(let Ut=1;Ut<Ot;Ut++){let ct=Ut/Ot;if(ct!==.5){const kn=ct-.5;ct+=ct*kn*(ct-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*kn*kn+(.848013+fe*(.215638*fe-1.06021)))}const Xt=re.sub(K)._mult(ct)._add(K)._unit()._mult(Ye?-1:1);this.addHalfVertex(B,Xt.x,Xt.y,!1,Ye,0,O)}}q&&this.addCurrentVertex(B,re,-Tt,-Mt,O)}else if($t==="butt")this.addCurrentVertex(B,Te,0,0,O);else if($t==="square"){const at=W?1:-1;W||this.addCurrentVertex(B,Te,at,at,O),this.addCurrentVertex(B,Te,0,0,O),W&&this.addCurrentVertex(B,Te,at,at,O)}else $t==="round"&&(W&&(this.addCurrentVertex(B,K,0,0,O),this.addCurrentVertex(B,K,1,1,O,!0)),q&&(this.addCurrentVertex(B,re,-1,-1,O,!0),this.addCurrentVertex(B,re,0,0,O)));if(nt&&me<E-1){const at=B.dist(q);if(at>2*D){const Tt=B.add(q.sub(B)._mult(D/at)._round());this.updateDistance(B,Tt),this.addCurrentVertex(Tt,re,0,0,O),B=Tt}}}}addCurrentVertex(r,l,h,p,v,x=!1){const T=l.y*p-l.x,E=-l.y-l.x*p;this.addHalfVertex(r,l.x+l.y*h,l.y-l.x*h,x,!1,h,v),this.addHalfVertex(r,T,E,x,!0,-p,v)}addHalfVertex({x:r,y:l},h,p,v,x,T,E){this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(T===0?0:T<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),x?this.e2=M:this.e1=M}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}un($v,"LineBucket",{omit:["layers","patternFeatures"]});const fL=new Bt({"line-cap":new ot(ft.layout_line["line-cap"]),"line-join":new ot(ft.layout_line["line-join"]),"line-miter-limit":new Ve(ft.layout_line["line-miter-limit"]),"line-round-limit":new Ve(ft.layout_line["line-round-limit"]),"line-sort-key":new ot(ft.layout_line["line-sort-key"])});var z2={paint:new Bt({"line-opacity":new ot(ft.paint_line["line-opacity"]),"line-color":new ot(ft.paint_line["line-color"]),"line-translate":new Ve(ft.paint_line["line-translate"]),"line-translate-anchor":new Ve(ft.paint_line["line-translate-anchor"]),"line-width":new ot(ft.paint_line["line-width"]),"line-gap-width":new ot(ft.paint_line["line-gap-width"]),"line-offset":new ot(ft.paint_line["line-offset"]),"line-blur":new ot(ft.paint_line["line-blur"]),"line-dasharray":new ot(ft.paint_line["line-dasharray"]),"line-pattern":new ot(ft.paint_line["line-pattern"]),"line-gradient":new Dt(ft.paint_line["line-gradient"]),"line-trim-offset":new Ve(ft.paint_line["line-trim-offset"])}),layout:fL};const R2=new class extends ot{possiblyEvaluate(a,r){return r=new We(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(a,r)}evaluate(a,r,l,h){return r=ut({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(a,r,l,h)}}(z2.paint.properties["line-width"].specification);function O2(a,r){return r>0?r+2*a:a}R2.useIntegerZoom=!0;const pL=xn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mL=xn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),gL=xn([{name:"a_projected_pos",components:4,type:"Float32"}],4);xn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const vL=xn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_L=xn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const L2=xn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),yL=xn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xn([{name:"triangle",components:3,type:"Uint16"}]),xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xn([{type:"Float32",name:"offsetX"}]),xn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var mo=24;const Ca=128;function dx(a,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new We(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=l;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const T=h[v],E=h[x];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:E,interpolationType:p}:{kind:"camera",minZoom:T,maxZoom:E,minSize:l.evaluate(new We(T)),maxSize:l.evaluate(new We(E)),interpolationType:p}}}function Nv(a,{uSize:r,uSizeT:l},{lowerSize:h,upperSize:p}){return a.kind==="source"?h/Ca:a.kind==="composite"?hr(h/Ca,p/Ca,l):r}function yh(a,r){let l=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=a,T=p?Be(Ss.interpolationFactor(p,r,v,x),0,1):0;a.kind==="camera"?h=hr(a.minSize,a.maxSize,T):l=T}return{uSizeT:l,uSize:h}}var xL=Object.freeze({__proto__:null,getSizeData:dx,evaluateSizeForFeature:Nv,evaluateSizeForZoom:yh,SIZE_PACK_FACTOR:Ca});function bL(a,r,l){return a.sections.forEach(h=>{h.text=function(p,v,x){const T=v.layout.get("text-transform").evaluate(x,{});return T==="uppercase"?p=p.toLocaleUpperCase():T==="lowercase"&&(p=p.toLocaleLowerCase()),Ie.applyArabicShaping&&(p=Ie.applyArabicShaping(p)),p}(h.text,r,l)}),a}const Dp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function wL(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}function TL(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}var Ip=Wr,B2=function(a,r,l,h,p){var v,x,T=8*p-h-1,E=(1<<T)-1,M=E>>1,D=-7,O=l?p-1:0,B=l?-1:1,W=a[r+O];for(O+=B,v=W&(1<<-D)-1,W>>=-D,D+=T;D>0;v=256*v+a[r+O],O+=B,D-=8);for(x=v&(1<<-D)-1,v>>=-D,D+=h;D>0;x=256*x+a[r+O],O+=B,D-=8);if(v===0)v=1-M;else{if(v===E)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,h),v-=M}return(W?-1:1)*x*Math.pow(2,v-h)},F2=function(a,r,l,h,p,v){var x,T,E,M=8*v-p-1,D=(1<<M)-1,O=D>>1,B=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=h?0:v-1,q=h?1:-1,K=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(T=isNaN(r)?1:0,x=D):(x=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-x))<1&&(x--,E*=2),(r+=x+O>=1?B/E:B*Math.pow(2,1-O))*E>=2&&(x++,E/=2),x+O>=D?(T=0,x=D):x+O>=1?(T=(r*E-1)*Math.pow(2,p),x+=O):(T=r*Math.pow(2,O-1)*Math.pow(2,p),x=0));p>=8;a[l+W]=255&T,W+=q,T/=256,p-=8);for(x=x<<p|T,M+=p;M>0;a[l+W]=255&x,W+=q,x/=256,M-=8);a[l+W-q]|=128*K};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Wr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Wr.Varint=0,Wr.Fixed64=1,Wr.Bytes=2,Wr.Fixed32=5;var hx=4294967296,$2=1/hx,N2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function al(a){return a.type===Wr.Bytes?a.readVarint()+a.pos:a.pos+1}function xh(a,r,l){return l?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function U2(a,r,l){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(h);for(var p=l.pos-1;p>=a;p--)l.buf[p+h]=l.buf[p]}function CL(a,r){for(var l=0;l<a.length;l++)r.writeVarint(a[l])}function SL(a,r){for(var l=0;l<a.length;l++)r.writeSVarint(a[l])}function EL(a,r){for(var l=0;l<a.length;l++)r.writeFloat(a[l])}function ML(a,r){for(var l=0;l<a.length;l++)r.writeDouble(a[l])}function PL(a,r){for(var l=0;l<a.length;l++)r.writeBoolean(a[l])}function AL(a,r){for(var l=0;l<a.length;l++)r.writeFixed32(a[l])}function kL(a,r){for(var l=0;l<a.length;l++)r.writeSFixed32(a[l])}function DL(a,r){for(var l=0;l<a.length;l++)r.writeFixed64(a[l])}function IL(a,r){for(var l=0;l<a.length;l++)r.writeSFixed64(a[l])}function Uv(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function bh(a,r,l){a[l]=r,a[l+1]=r>>>8,a[l+2]=r>>>16,a[l+3]=r>>>24}function V2(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}function zL(a,r,l){r.glyphs=[],a===1&&l.readMessage(RL,r)}function RL(a,r,l){if(a===3){const{id:h,bitmap:p,width:v,height:x,left:T,top:E,advance:M}=l.readMessage(OL,{});r.glyphs.push({id:h,bitmap:new sl({width:v+6,height:x+6},p),metrics:{width:v,height:x,left:T,top:E,advance:M}})}else a===4?r.ascender=l.readSVarint():a===5&&(r.descender=l.readSVarint())}function OL(a,r,l){a===1?r.id=l.readVarint():a===2?r.bitmap=l.readBytes():a===3?r.width=l.readVarint():a===4?r.height=l.readVarint():a===5?r.left=l.readSVarint():a===6?r.top=l.readSVarint():a===7&&(r.advance=l.readVarint())}function fx(a){let r=0,l=0;for(const x of a)r+=x.w*x.h,l=Math.max(l,x.w);a.sort((x,T)=>T.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let p=0,v=0;for(const x of a)for(let T=h.length-1;T>=0;T--){const E=h[T];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===E.w&&x.h===E.h){const M=h.pop();T<h.length&&(h[T]=M)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:p,h:v,fill:r/(p*v)||0}}Wr.prototype={destroy:function(){this.buf=null},readFields:function(a,r,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,a(p,r,this),this.pos===v&&this.skip(h)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=Uv(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=V2(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Uv(this.buf,this.pos)+Uv(this.buf,this.pos+4)*hx;return this.pos+=8,a},readSFixed64:function(){var a=Uv(this.buf,this.pos)+V2(this.buf,this.pos+4)*hx;return this.pos+=8,a},readFloat:function(){var a=B2(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=B2(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,l,h=this.buf;return r=127&(l=h[this.pos++]),l<128?r:(r|=(127&(l=h[this.pos++]))<<7,l<128?r:(r|=(127&(l=h[this.pos++]))<<14,l<128?r:(r|=(127&(l=h[this.pos++]))<<21,l<128?r:function(p,v,x){var T,E,M=x.buf;if(T=(112&(E=M[x.pos++]))>>4,E<128||(T|=(127&(E=M[x.pos++]))<<3,E<128)||(T|=(127&(E=M[x.pos++]))<<10,E<128)||(T|=(127&(E=M[x.pos++]))<<17,E<128)||(T|=(127&(E=M[x.pos++]))<<24,E<128)||(T|=(1&(E=M[x.pos++]))<<31,E<128))return xh(p,T,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&N2?function(l,h,p){return N2.decode(l.subarray(h,p))}(this.buf,r,a):function(l,h,p){for(var v="",x=h;x<p;){var T,E,M,D=l[x],O=null,B=D>239?4:D>223?3:D>191?2:1;if(x+B>p)break;B===1?D<128&&(O=D):B===2?(192&(T=l[x+1]))==128&&(O=(31&D)<<6|63&T)<=127&&(O=null):B===3?(E=l[x+2],(192&(T=l[x+1]))==128&&(192&E)==128&&((O=(15&D)<<12|(63&T)<<6|63&E)<=2047||O>=55296&&O<=57343)&&(O=null)):B===4&&(E=l[x+2],M=l[x+3],(192&(T=l[x+1]))==128&&(192&E)==128&&(192&M)==128&&((O=(15&D)<<18|(63&T)<<12|(63&E)<<6|63&M)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,B=1):O>65535&&(O-=65536,v+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),v+=String.fromCharCode(O),x+=B}return v}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==Wr.Bytes)return a.push(this.readVarint(r));var l=al(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==Wr.Bytes)return a.push(this.readSVarint());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Wr.Bytes)return a.push(this.readBoolean());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Wr.Bytes)return a.push(this.readFloat());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Wr.Bytes)return a.push(this.readDouble());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Wr.Bytes)return a.push(this.readFixed32());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Wr.Bytes)return a.push(this.readSFixed32());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Wr.Bytes)return a.push(this.readFixed64());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Wr.Bytes)return a.push(this.readSFixed64());var r=al(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===Wr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Wr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Wr.Fixed32)this.pos+=4;else{if(r!==Wr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),bh(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),bh(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),bh(this.buf,-1&a,this.pos),bh(this.buf,Math.floor(a*$2),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),bh(this.buf,-1&a,this.pos),bh(this.buf,Math.floor(a*$2),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,l){var h,p;if(r>=0?(h=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,T){T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,T.buf[T.pos]=127&(v>>>=7)}(h,0,l),function(v,x){var T=(7&v)<<4;x.buf[x.pos++]|=T|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(h,p,v){for(var x,T,E=0;E<p.length;E++){if((x=p.charCodeAt(E))>55295&&x<57344){if(!T){x>56319||E+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):T=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,T=x;continue}x=T-55296<<10|x-56320|65536,T=null}else T&&(h[v++]=239,h[v++]=191,h[v++]=189,T=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,a,this.pos);var l=this.pos-r;l>=128&&U2(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),F2(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),F2(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,r){this.pos++;var l=this.pos;a(r,this);var h=this.pos-l;h>=128&&U2(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,r,l){this.writeTag(a,Wr.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,CL,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,SL,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,PL,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,EL,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,ML,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,AL,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,kL,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,DL,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,IL,r)},writeBytesField:function(a,r){this.writeTag(a,Wr.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,Wr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,Wr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,Wr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,Wr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,Wr.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,Wr.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,Wr.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,Wr.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,Wr.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,!!r)}};class px{constructor(r,{pixelRatio:l,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class j2{constructor(r,l){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,h,v),this.addImages(l,p,v);const{w:x,h:T}=fx(v),E=new os({width:x||1,height:T||1});for(const M in r){const D=r[M],O=h[M].paddedRect;os.copy(D.data,E,{x:0,y:0},{x:O.x+1,y:O.y+1},D.data)}for(const M in l){const D=l[M],O=p[M].paddedRect,B=O.x+1,W=O.y+1,q=D.data.width,K=D.data.height;os.copy(D.data,E,{x:0,y:0},{x:B,y:W},D.data),os.copy(D.data,E,{x:0,y:K-1},{x:B,y:W-1},{width:q,height:1}),os.copy(D.data,E,{x:0,y:0},{x:B,y:W+K},{width:q,height:1}),os.copy(D.data,E,{x:q-1,y:0},{x:B-1,y:W},{width:1,height:K}),os.copy(D.data,E,{x:0,y:0},{x:B+q,y:W},{width:1,height:K})}this.image=E,this.iconPositions=h,this.patternPositions=p}addImages(r,l,h){for(const p in r){const v=r[p],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(x),l[p]=new px(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>r.hasImage(h)),r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),l)}patchUpdatedImage(r,l,h){if(!r||!l||r.version===l.version)return;r.version=l.version;const[p,v]=r.tl;h.update(l.data,void 0,{x:p,y:v})}}un(px,"ImagePosition"),un(j2,"ImageAtlas");const vs={horizontal:1,vertical:2,horizontalOnly:3};class zp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const h=new zp;return h.scale=r||1,h.fontStack=l,h}static forImage(r){const l=new zp;return l.imageName=r,l}}class wh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const h=new wh;for(let p=0;p<r.sections.length;p++){const v=r.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,l)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(l,h){let p="";for(let v=0;v<l.length;v++){const x=l.charCodeAt(v+1)||null,T=l.charCodeAt(v-1)||null;p+=!h&&(x&&R(x)&&!Dp[l[v+1]]||T&&R(T)&&!Dp[l[v-1]])||!Dp[l[v]]?l[v]:Dp[l[v]]}return p}(this.text,r)}trim(){let r=0;for(let h=0;h<this.text.length&&Vv[this.text.charCodeAt(h)];h++)r++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Vv[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const h=new wh;return h.text=this.text.substring(r,l),h.sectionIndex=this.sectionIndex.slice(r,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(zp.forText(r.scale,r.fontStack||l));const h=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(h)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void he("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(zp.forImage(l)),this.sectionIndex.push(this.sections.length-1)):he("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function mx(a,r,l,h,p,v,x,T,E,M,D,O,B,W,q){const K=wh.fromFeature(a,p);O===vs.vertical&&K.verticalizePunctuation(B);let re=[];const me=function(Ce,nt,Ye,_t,$t,at){if(!Ce)return[];const Tt=[],Mt=function(Xt,kn,tn,mn,Kt,In){let Qn=0;for(let Kn=0;Kn<Xt.length();Kn++){const Gn=Xt.getSection(Kn);Qn+=W2(Xt.getCharCode(Kn),Gn,mn,Kt,kn,In)}return Qn/Math.max(1,Math.ceil(Qn/tn))}(Ce,nt,Ye,_t,$t,at),Ot=Ce.text.indexOf("")>=0;let Ut=0;for(let Xt=0;Xt<Ce.length();Xt++){const kn=Ce.getSection(Xt),tn=Ce.getCharCode(Xt);if(Vv[tn]||(Ut+=W2(tn,kn,_t,$t,nt,at)),Xt<Ce.length()-1){const mn=!((ct=tn)<11904||!(cv(ct)||sh(ct)||g(ct)||vv(ct)||hv(ct)||lv(ct)||uv(ct)||mu(ct)||fv(ct)||cp(ct)||dv(ct)||_(ct)||oh(ct)||ap(ct)||sp(ct)||lp(ct)||Xl(ct)||gu(ct)||mv(ct)||pv(ct)));(LL[tn]||mn||kn.imageName)&&Tt.push(G2(Xt+1,Ut,Mt,Tt,BL(tn,Ce.getCharCode(Xt+1),mn&&Ot),!1))}}var ct;return q2(G2(Ce.length(),Ut,Mt,Tt,0,!0))}(K,M,v,r,h,W),{processBidirectionalText:Te,processStyledBidirectionalText:fe}=Ie;if(Te&&K.sections.length===1){const Ce=Te(K.toString(),me);for(const nt of Ce){const Ye=new wh;Ye.text=nt,Ye.sections=K.sections;for(let _t=0;_t<nt.length;_t++)Ye.sectionIndex.push(0);re.push(Ye)}}else if(fe){const Ce=fe(K.text,K.sectionIndex,me);for(const nt of Ce){const Ye=new wh;Ye.text=nt[0],Ye.sectionIndex=nt[1],Ye.sections=K.sections,re.push(Ye)}}else re=function(Ce,nt){const Ye=[],_t=Ce.text;let $t=0;for(const at of nt)Ye.push(Ce.substring($t,at)),$t=at;return $t<_t.length&&Ye.push(Ce.substring($t,_t.length)),Ye}(K,me);const be=[],Pe={positionedLines:be,text:K.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:O,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ce,nt,Ye,_t,$t,at,Tt,Mt,Ot,Ut,ct,Xt){let kn=0,tn=0,mn=0;const Kt=Mt==="right"?1:Mt==="left"?0:.5;let In=!1;for(const Ln of $t){const er=Ln.getSections();for(const zr of er){if(zr.imageName)continue;const Yr=nt[zr.fontStack];if(Yr&&(In=Yr.ascender!==void 0&&Yr.descender!==void 0,!In))break}if(!In)break}let Qn=0;for(const Ln of $t){Ln.trim();const er=Ln.getMaxScale(),zr=(er-1)*mo,Yr={positionedGlyphs:[],lineOffset:0};Ce.positionedLines[Qn]=Yr;const Hr=Yr.positionedGlyphs;let Xr=0;if(!Ln.length()){tn+=at,++Qn;continue}let Jr=0,hi=0;for(let Ar=0;Ar<Ln.length();Ar++){const Oi=Ln.getSection(Ar),Ai=Ln.getSectionIndex(Ar),_r=Ln.getCharCode(Ar);let oi=Oi.scale,Ni=null,Rr=null,Ti=null,wo=mo,to=0;const no=!(Ot===vs.horizontal||!ct&&!k(_r)||ct&&(Vv[_r]||(Kn=_r,pu(Kn)||av(Kn)||op(Kn)||ah(Kn)||f(Kn))));if(Oi.imageName){const zo=_t[Oi.imageName];if(!zo)continue;Ti=Oi.imageName,Ce.iconsInText=Ce.iconsInText||!0,Rr=zo.paddedRect;const ro=zo.displaySize;oi=oi*mo/Xt,Ni={width:ro[0],height:ro[1],left:1,top:-3,advance:no?ro[1]:ro[0],localGlyph:!1},to=In?-Ni.height*oi:er*mo-17-ro[1]*oi,wo=Ni.advance;const cl=(no?ro[0]:ro[1])*oi-mo*er;cl>0&&cl>Xr&&(Xr=cl)}else{const zo=Ye[Oi.fontStack];if(!zo)continue;zo[_r]&&(Rr=zo[_r]);const ro=nt[Oi.fontStack];if(!ro)continue;const cl=ro.glyphs[_r];if(!cl)continue;if(Ni=cl.metrics,wo=_r!==8203?mo:0,In){const Mh=ro.ascender!==void 0?Math.abs(ro.ascender):0,Up=ro.descender!==void 0?Math.abs(ro.descender):0,Vp=(Mh+Up)*oi;Jr<Vp&&(Jr=Vp,hi=(Mh-Up)/2*oi),to=-Mh*oi}else to=(er-oi)*mo-17}no?(Ce.verticalizable=!0,Hr.push({glyph:_r,imageName:Ti,x:kn,y:tn+to,vertical:no,scale:oi,localGlyph:Ni.localGlyph,fontStack:Oi.fontStack,sectionIndex:Ai,metrics:Ni,rect:Rr}),kn+=wo*oi+Ut):(Hr.push({glyph:_r,imageName:Ti,x:kn,y:tn+to,vertical:no,scale:oi,localGlyph:Ni.localGlyph,fontStack:Oi.fontStack,sectionIndex:Ai,metrics:Ni,rect:Rr}),kn+=Ni.advance*oi+Ut)}Hr.length!==0&&(mn=Math.max(kn-Ut,mn),In?Z2(Hr,Kt,Xr,hi,at*er/2):Z2(Hr,Kt,Xr,0,at/2)),kn=0;const eo=at*er+Xr;Yr.lineOffset=Math.max(Xr,zr),tn+=eo,++Qn}var Kn;const Gn=tn,{horizontalAlign:zn,verticalAlign:Pr}=gx(Tt);(function(Ln,er,zr,Yr,Hr,Xr){const Jr=(er-zr)*Hr,hi=-Xr*Yr;for(const eo of Ln)for(const Ar of eo.positionedGlyphs)Ar.x+=Jr,Ar.y+=hi})(Ce.positionedLines,Kt,zn,Pr,mn,Gn),Ce.top+=-Pr*Gn,Ce.bottom=Ce.top+Gn,Ce.left+=-zn*mn,Ce.right=Ce.left+mn,Ce.hasBaseline=In}(Pe,r,l,h,re,x,T,E,O,M,B,q),!function(Ce){for(const nt of Ce)if(nt.positionedGlyphs.length!==0)return!1;return!0}(be)&&Pe}const Vv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},LL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function W2(a,r,l,h,p,v){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*mo/v+p:0}{const x=l[r.fontStack],T=x&&x.glyphs[a];return T?T.metrics.advance*r.scale+p:0}}function H2(a,r,l,h){const p=Math.pow(a-r,2);return h?a<r?p/2:2*p:p+Math.abs(l)*l}function BL(a,r,l){let h=0;return a===10&&(h-=1e4),l&&(h+=150),a!==40&&a!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function G2(a,r,l,h,p,v){let x=null,T=H2(r,l,p,v);for(const E of h){const M=H2(r-E.x,l,p,v)+E.badness;M<=T&&(x=E,T=M)}return{index:a,x:r,priorBreak:x,badness:T}}function q2(a){return a?q2(a.priorBreak).concat(a.index):[]}function gx(a){let r=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function Z2(a,r,l,h,p){if(!(r||l||h||p))return;const v=a.length-1,x=a[v],T=(x.x+x.metrics.advance*x.scale)*r;for(let E=0;E<=v;E++)a[E].x-=T,a[E].y+=l+h+p}function FL(a,r,l){const{horizontalAlign:h,verticalAlign:p}=gx(l),v=r[0]-a.displaySize[0]*h,x=r[1]-a.displaySize[1]*p;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function Y2(a,r,l,h,p,v){const x=a.image;let T;if(x.content){const re=x.content,me=x.pixelRatio||1;T=[re[0]/me,re[1]/me,x.displaySize[0]-re[2]/me,x.displaySize[1]-re[3]/me]}const E=r.left*v,M=r.right*v;let D,O,B,W;l==="width"||l==="both"?(W=p[0]+E-h[3],O=p[0]+M+h[1]):(W=p[0]+(E+M-x.displaySize[0])/2,O=W+x.displaySize[0]);const q=r.top*v,K=r.bottom*v;return l==="height"||l==="both"?(D=p[1]+q-h[0],B=p[1]+K+h[2]):(D=p[1]+(q+K-x.displaySize[1])/2,B=D+x.displaySize[1]),{image:x,top:D,right:O,bottom:B,left:W,collisionPadding:T}}class ll extends Y{constructor(r,l,h,p,v){super(r,l),this.angle=p,this.z=h,v!==void 0&&(this.segment=v)}clone(){return new ll(this.x,this.y,this.z,this.angle,this.segment)}}function X2(a,r,l,h,p){if(r.segment===void 0)return!0;let v=r,x=r.segment+1,T=0;for(;T>-l/2;){if(x--,x<0)return!1;T-=a[x].dist(v),v=a[x]}T+=a[x].dist(a[x+1]),x++;const E=[];let M=0;for(;T<l/2;){const D=a[x],O=a[x+1];if(!O)return!1;let B=a[x-1].angleTo(D)-D.angleTo(O);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:T,angleDelta:B}),M+=B;T-E[0].distance>h;)M-=E.shift().angleDelta;if(M>p)return!1;x++,T+=D.dist(O)}return!0}function K2(a){let r=0;for(let l=0;l<a.length-1;l++)r+=a[l].dist(a[l+1]);return r}function J2(a,r,l){return a?.6*r*l:0}function Q2(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function $L(a,r,l,h,p,v){const x=J2(l,p,v),T=Q2(l,h)*v;let E=0;const M=K2(a)/2;for(let D=0;D<a.length-1;D++){const O=a[D],B=a[D+1],W=O.dist(B);if(E+W>M){const q=(M-E)/W,K=hr(O.x,B.x,q),re=hr(O.y,B.y,q),me=new ll(K,re,0,B.angleTo(O),D);return!x||X2(a,me,T,x,r)?me:void 0}E+=W}}function NL(a,r,l,h,p,v,x,T,E){const M=J2(h,v,x),D=Q2(h,p),O=D*x,B=a[0].x===0||a[0].x===E||a[0].y===0||a[0].y===E;return r-O<r/4&&(r=O+r/4),eS(a,B?r/2*T%r:(D/2+2*v)*x*T%r,r,M,l,O,B,!1,E)}function eS(a,r,l,h,p,v,x,T,E){const M=v/2,D=K2(a);let O=0,B=r-l,W=[];for(let q=0;q<a.length-1;q++){const K=a[q],re=a[q+1],me=K.dist(re),Te=re.angleTo(K);for(;B+l<O+me;){B+=l;const fe=(B-O)/me,be=hr(K.x,re.x,fe),Pe=hr(K.y,re.y,fe);if(be>=0&&be<E&&Pe>=0&&Pe<E&&B-M>=0&&B+M<=D){const Ce=new ll(be,Pe,0,Te,q);Ce._round(),h&&!X2(a,Ce,v,h,p)||W.push(Ce)}}O+=me}return T||W.length||x||(W=eS(a,O/2,l,h,p,v,x,!0,E)),W}function tS(a,r,l,h,p){const v=[];for(let x=0;x<a.length;x++){const T=a[x];let E;for(let M=0;M<T.length-1;M++){let D=T[M],O=T[M+1];D.x<r&&O.x<r||(D.x<r?D=new Y(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x<r&&(O=new Y(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y<l&&O.y<l||(D.y<l?D=new Y(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round():O.y<l&&(O=new Y(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round()),D.x>=h&&O.x>=h||(D.x>=h?D=new Y(h,D.y+(h-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x>=h&&(O=new Y(h,D.y+(h-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y>=p&&O.y>=p||(D.y>=p?D=new Y(D.x+(p-D.y)/(O.y-D.y)*(O.x-D.x),p)._round():O.y>=p&&(O=new Y(D.x+(p-D.y)/(O.y-D.y)*(O.x-D.x),p)._round()),E&&D.equals(E[E.length-1])||(E=[D],v.push(E)),E.push(O)))))}}return v}un(ll,"Anchor");const Rp=1e20;function nS(a,r,l,h,p,v,x,T,E){for(let M=r;M<r+h;M++)rS(a,l*v+M,v,p,x,T,E);for(let M=l;M<l+p;M++)rS(a,M*v+r,1,h,x,T,E)}function rS(a,r,l,h,p,v,x){v[0]=0,x[0]=-Rp,x[1]=Rp,p[0]=a[r];for(let T=1,E=0,M=0;T<h;T++){p[T]=a[r+T*l];const D=T*T;do{const O=v[E];M=(p[T]-p[O]+D-O*O)/(T-O)/2}while(M<=x[E]&&--E>-1);E++,v[E]=T,x[E]=M,x[E+1]=Rp}for(let T=0,E=0;T<h;T++){for(;x[E+1]<T;)E++;const M=v[E],D=T-M;a[r+T*l]=p[M]+D*D}}const vx={none:0,ideographs:1,all:2};class Th{constructor(r,l,h){this.requestManager=r,this.localGlyphMode=l,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,l){const h=[];for(const p in r)for(const v of r[p])h.push({stack:p,id:v});Pt(h,({stack:p,id:v},x)=>{let T=this.entries[p];T||(T=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=T.glyphs[v];if(E!==void 0)return void x(null,{stack:p,id:v,glyph:E});if(E=this._tinySDF(T,p,v),E)return T.glyphs[v]=E,void x(null,{stack:p,id:v,glyph:E});const M=Math.floor(v/256);if(256*M>65535)return void x(new Error("glyphs > 65535 not supported"));if(T.ranges[M])return void x(null,{stack:p,id:v,glyph:E});let D=T.requests[M];D||(D=T.requests[M]=[],Th.loadGlyphRange(p,M,this.url,this.requestManager,(O,B)=>{if(B){T.ascender=B.ascender,T.descender=B.descender;for(const W in B.glyphs)this._doesCharSupportLocalGlyph(+W)||(T.glyphs[+W]=B.glyphs[+W]);T.ranges[M]=!0}for(const W of D)W(O,B);delete T.requests[M]})),D.push((O,B)=>{O?x(O):B&&x(null,{stack:p,id:v,glyph:B.glyphs[v]||null})})},(p,v)=>{if(p)l(p);else if(v){const x={};for(const{stack:T,id:E,glyph:M}of v)x[T]===void 0&&(x[T]={}),x[T].glyphs===void 0&&(x[T].glyphs={}),x[T].glyphs[E]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics},x[T].ascender=this.entries[T].ascender,x[T].descender=this.entries[T].descender;l(null,x)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==vx.none&&(this.localGlyphMode===vx.all?!!this.localFontFamily:!!this.localFontFamily&&(cp(r)||gv(r)||oh(r)||Xl(r)||mu(r)))}_tinySDF(r,l,h){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let v=r.tinySDF;if(!v){let K="400";/bold/i.test(l)?K="900":/medium/i.test(l)?K="500":/light/i.test(l)&&(K="200"),v=r.tinySDF=new Th.TinySDF({fontFamily:p,fontWeight:K,fontSize:48,buffer:6,radius:16}),v.fontWeight=K}if(this.localGlyphs[v.fontWeight][h])return this.localGlyphs[v.fontWeight][h];const x=String.fromCharCode(h),{data:T,width:E,height:M,glyphWidth:D,glyphHeight:O,glyphLeft:B,glyphTop:W,glyphAdvance:q}=v.draw(x);return this.localGlyphs[v.fontWeight][h]={id:h,bitmap:new sl({width:E,height:M},T),metrics:{width:D/2,height:O/2,left:B/2,top:W/2-27,advance:q/2,localGlyph:!0}}}}function iS(a,r,l,h){const p=[],v=a.image,x=v.pixelRatio,T=v.paddedRect.w-2,E=v.paddedRect.h-2,M=a.right-a.left,D=a.bottom-a.top,O=v.stretchX||[[0,T]],B=v.stretchY||[[0,E]],W=(at,Tt)=>at+Tt[1]-Tt[0],q=O.reduce(W,0),K=B.reduce(W,0),re=T-q,me=E-K;let Te=0,fe=q,be=0,Pe=K,Ce=0,nt=re,Ye=0,_t=me;if(v.content&&h){const at=v.content;Te=jv(O,0,at[0]),be=jv(B,0,at[1]),fe=jv(O,at[0],at[2]),Pe=jv(B,at[1],at[3]),Ce=at[0]-Te,Ye=at[1]-be,nt=at[2]-at[0]-fe,_t=at[3]-at[1]-Pe}const $t=(at,Tt,Mt,Ot)=>{const Ut=Wv(at.stretch-Te,fe,M,a.left),ct=Hv(at.fixed-Ce,nt,at.stretch,q),Xt=Wv(Tt.stretch-be,Pe,D,a.top),kn=Hv(Tt.fixed-Ye,_t,Tt.stretch,K),tn=Wv(Mt.stretch-Te,fe,M,a.left),mn=Hv(Mt.fixed-Ce,nt,Mt.stretch,q),Kt=Wv(Ot.stretch-be,Pe,D,a.top),In=Hv(Ot.fixed-Ye,_t,Ot.stretch,K),Qn=new Y(Ut,Xt),Kn=new Y(tn,Xt),Gn=new Y(tn,Kt),zn=new Y(Ut,Kt),Pr=new Y(ct/x,kn/x),Ln=new Y(mn/x,In/x),er=r*Math.PI/180;if(er){const Hr=Math.sin(er),Xr=Math.cos(er),Jr=[Xr,-Hr,Hr,Xr];Qn._matMult(Jr),Kn._matMult(Jr),zn._matMult(Jr),Gn._matMult(Jr)}const zr=at.stretch+at.fixed,Yr=Tt.stretch+Tt.fixed;return{tl:Qn,tr:Kn,bl:zn,br:Gn,tex:{x:v.paddedRect.x+1+zr,y:v.paddedRect.y+1+Yr,w:Mt.stretch+Mt.fixed-zr,h:Ot.stretch+Ot.fixed-Yr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pr,pixelOffsetBR:Ln,minFontScaleX:nt/x/M,minFontScaleY:_t/x/D,isSDF:l}};if(h&&(v.stretchX||v.stretchY)){const at=oS(O,re,q),Tt=oS(B,me,K);for(let Mt=0;Mt<at.length-1;Mt++){const Ot=at[Mt],Ut=at[Mt+1];for(let ct=0;ct<Tt.length-1;ct++)p.push($t(Ot,Tt[ct],Ut,Tt[ct+1]))}}else p.push($t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:E+1}));return p}function jv(a,r,l){let h=0;for(const p of a)h+=Math.max(r,Math.min(l,p[1]))-Math.max(r,Math.min(l,p[0]));return h}function oS(a,r,l){const h=[{fixed:-1,stretch:0}];for(const[p,v]of a){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:r+1,stretch:l}),h}function Wv(a,r,l,h){return a/r*l+h}function Hv(a,r,l,h){return a-r*l/h}function UL(a,r,l,h){const p=r+a.positionedLines[h].lineOffset;return h===0?l+p/2:l+(p+(r+a.positionedLines[h-1].lineOffset))/2}Th.loadGlyphRange=function(a,r,l,h,p){const v=256*r,x=v+255,T=h.transformRequest(h.normalizeGlyphsURL(l).replace("{fontstack}",a).replace("{range}",`${v}-${x}`),pr.Glyphs);dr(T,(E,M)=>{if(E)p(E);else if(M){const D={},O=function(B){return new Ip(B).readFields(zL,{})}(M);for(const B of O.glyphs)D[B.id]=B;p(null,{glyphs:D,ascender:O.ascender,descender:O.descender})}})},Th.TinySDF=class{constructor({fontSize:a=24,buffer:r=3,radius:l=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:x="normal"}={}){this.buffer=r,this.cutoff=h,this.radius=l;const T=this.size=a+4*r,E=this._createCanvas(T),M=this.ctx=E.getContext("2d",{willReadFrequently:!0});M.font=`${x} ${v} ${a}px ${p}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(a){const r=document.createElement("canvas");return r.width=r.height=a,r}draw(a){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(a),x=Math.ceil(l),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-p))),E=Math.min(this.size-this.buffer,x+Math.ceil(h)),M=T+2*this.buffer,D=E+2*this.buffer,O=Math.max(M*D,0),B=new Uint8ClampedArray(O),W={data:B,width:M,height:D,glyphWidth:T,glyphHeight:E,glyphTop:x,glyphLeft:0,glyphAdvance:r};if(T===0||E===0)return W;const{ctx:q,buffer:K,gridInner:re,gridOuter:me}=this;q.clearRect(K,K,T,E),q.fillText(a,K,K+x);const Te=q.getImageData(K,K,T,E);me.fill(Rp,0,O),re.fill(0,0,O);for(let fe=0;fe<E;fe++)for(let be=0;be<T;be++){const Pe=Te.data[4*(fe*T+be)+3]/255;if(Pe===0)continue;const Ce=(fe+K)*M+be+K;if(Pe===1)me[Ce]=0,re[Ce]=Rp;else{const nt=.5-Pe;me[Ce]=nt>0?nt*nt:0,re[Ce]=nt<0?nt*nt:0}}nS(me,0,0,M,D,M,this.f,this.v,this.z),nS(re,K,K,T,E,M,this.f,this.v,this.z);for(let fe=0;fe<O;fe++){const be=Math.sqrt(me[fe])-Math.sqrt(re[fe]);B[fe]=Math.round(255-255*(be/this.radius+this.cutoff))}return W}};class VL{constructor(r=[],l=jL){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:h}=this,p=l[r];for(;r>0;){const v=r-1>>1,x=l[v];if(h(p,x)>=0)break;l[r]=x,r=v}l[r]=p}_down(r){const{data:l,compare:h}=this,p=this.length>>1,v=l[r];for(;r<p;){let x=1+(r<<1),T=l[x];const E=x+1;if(E<this.length&&h(l[E],T)<0&&(x=E,T=l[E]),h(T,v)>=0)break;l[r]=T,r=x}l[r]=v}}function jL(a,r){return a<r?-1:a>r?1:0}function WL(a,r=1,l=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const T=a[0];for(let W=0;W<T.length;W++){const q=T[W];(!W||q.x<h)&&(h=q.x),(!W||q.y<p)&&(p=q.y),(!W||q.x>v)&&(v=q.x),(!W||q.y>x)&&(x=q.y)}const E=Math.min(v-h,x-p);let M=E/2;const D=new VL([],HL);if(E===0)return new Y(h,p);for(let W=h;W<v;W+=E)for(let q=p;q<x;q+=E)D.push(new Ch(W+M,q+M,M,a));let O=function(W){let q=0,K=0,re=0;const me=W[0];for(let Te=0,fe=me.length,be=fe-1;Te<fe;be=Te++){const Pe=me[Te],Ce=me[be],nt=Pe.x*Ce.y-Ce.x*Pe.y;K+=(Pe.x+Ce.x)*nt,re+=(Pe.y+Ce.y)*nt,q+=3*nt}return new Ch(K/q,re/q,0,W)}(a),B=D.length;for(;D.length;){const W=D.pop();(W.d>O.d||!O.d)&&(O=W,l&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,B)),W.max-O.d<=r||(M=W.h/2,D.push(new Ch(W.p.x-M,W.p.y-M,M,a)),D.push(new Ch(W.p.x+M,W.p.y-M,M,a)),D.push(new Ch(W.p.x-M,W.p.y+M,M,a)),D.push(new Ch(W.p.x+M,W.p.y+M,M,a)),B+=4)}return l&&(console.log(`num probes: ${B}`),console.log(`best distance: ${O.d}`)),O.p}function HL(a,r){return r.max-a.max}class Ch{constructor(r,l,h,p){this.p=new Y(r,l),this.h=h,this.d=function(v,x){let T=!1,E=1/0;for(let M=0;M<x.length;M++){const D=x[M];for(let O=0,B=D.length,W=B-1;O<B;W=O++){const q=D[O],K=D[W];q.y>v.y!=K.y>v.y&&v.x<(K.x-q.x)*(v.y-q.y)/(K.y-q.y)+q.x&&(T=!T),E=Math.min(E,r2(v,q,K))}}return(T?1:-1)*Math.sqrt(E)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const _x=Number.POSITIVE_INFINITY,GL=Math.sqrt(2);function sS(a,[r,l]){let h=0,p=0;if(l===_x){r<0&&(r=0);const v=r/GL;switch(a){case"top-right":case"top-left":p=v-7;break;case"bottom-right":case"bottom-left":p=7-v;break;case"bottom":p=7-r;break;case"top":p=r-7}switch(a){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=r;break;case"right":h=-r}}else{switch(r=Math.abs(r),l=Math.abs(l),a){case"top-right":case"top-left":case"top":p=l-7;break;case"bottom-right":case"bottom-left":case"bottom":p=7-l}switch(a){case"top-right":case"bottom-right":case"right":h=-r;break;case"top-left":case"bottom-left":case"left":h=r}}return[h,p]}function qL(a,r,l,h,p,v,x,T,E,M){a.createArrays(),a.tilePixelRatio=Rn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const D=a.layers[0].layout,O=a.layers[0]._unevaluatedLayout._values,B={};if(a.textSizeData.kind==="composite"){const{minZoom:K,maxZoom:re}=a.textSizeData;B.compositeTextSizes=[O["text-size"].possiblyEvaluate(new We(K),T),O["text-size"].possiblyEvaluate(new We(re),T)]}if(a.iconSizeData.kind==="composite"){const{minZoom:K,maxZoom:re}=a.iconSizeData;B.compositeIconSizes=[O["icon-size"].possiblyEvaluate(new We(K),T),O["icon-size"].possiblyEvaluate(new We(re),T)]}B.layoutTextSize=O["text-size"].possiblyEvaluate(new We(E+1),T),B.layoutIconSize=O["icon-size"].possiblyEvaluate(new We(E+1),T),B.textMaxSize=O["text-size"].possiblyEvaluate(new We(18),T);const W=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",q=D.get("text-size");for(const K of a.features){const re=D.get("text-font").evaluate(K,{},T).join(","),me=q.evaluate(K,{},T),Te=B.layoutTextSize.evaluate(K,{},T),fe=(B.layoutIconSize.evaluate(K,{},T),{horizontal:{},vertical:void 0}),be=K.text;let Pe,Ce=[0,0];if(be){const _t=be.toString(),$t=D.get("text-letter-spacing").evaluate(K,{},T)*mo,at=D.get("text-line-height").evaluate(K,{},T)*mo,Tt=C(_t)?$t:0,Mt=D.get("text-anchor").evaluate(K,{},T),Ot=D.get("text-variable-anchor");if(!Ot){const tn=D.get("text-radial-offset").evaluate(K,{},T);Ce=tn?sS(Mt,[tn*mo,_x]):D.get("text-offset").evaluate(K,{},T).map(mn=>mn*mo)}let Ut=W?"center":D.get("text-justify").evaluate(K,{},T);const ct=D.get("symbol-placement")==="point",Xt=ct?D.get("text-max-width").evaluate(K,{},T)*mo:1/0,kn=tn=>{a.allowVerticalPlacement&&b(_t)&&(fe.vertical=mx(be,r,l,p,re,Xt,at,Mt,tn,Tt,Ce,vs.vertical,!0,Te,me))};if(!W&&Ot){const tn=Ut==="auto"?Ot.map(Kt=>yx(Kt)):[Ut];let mn=!1;for(let Kt=0;Kt<tn.length;Kt++){const In=tn[Kt];if(!fe.horizontal[In])if(mn)fe.horizontal[In]=fe.horizontal[0];else{const Qn=mx(be,r,l,p,re,Xt,at,"center",In,Tt,Ce,vs.horizontal,!1,Te,me);Qn&&(fe.horizontal[In]=Qn,mn=Qn.positionedLines.length===1)}}kn("left")}else{if(Ut==="auto"&&(Ut=yx(Mt)),ct||D.get("text-writing-mode").indexOf("horizontal")>=0||!b(_t)){const tn=mx(be,r,l,p,re,Xt,at,Mt,Ut,Tt,Ce,vs.horizontal,!1,Te,me);tn&&(fe.horizontal[Ut]=tn)}kn(ct?"left":Ut)}}let nt=!1;if(K.icon&&K.icon.name){const _t=h[K.icon.name];_t&&(Pe=FL(p[K.icon.name],D.get("icon-offset").evaluate(K,{},T),D.get("icon-anchor").evaluate(K,{},T)),nt=_t.sdf,a.sdfIcons===void 0?a.sdfIcons=_t.sdf:a.sdfIcons!==_t.sdf&&he("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_t.pixelRatio!==a.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const Ye=lS(fe.horizontal)||fe.vertical;a.iconsInText||(a.iconsInText=!!Ye&&Ye.iconsInText),(Ye||Pe)&&ZL(a,K,fe,Pe,h,B,Te,0,Ce,nt,x,T,M)}v&&a.generateCollisionDebugBuffers(E,a.collisionBoxArray)}function yx(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ZL(a,r,l,h,p,v,x,T,E,M,D,O,B){let W=v.textMaxSize.evaluate(r,{},O);W===void 0&&(W=x);const q=a.layers[0].layout,K=q.get("icon-offset").evaluate(r,{},O),re=lS(l.horizontal)||l.vertical,me=B.name==="globe",Te=x/24,fe=a.tilePixelRatio*W/24,be=(Tt=a.overscaling,a.zoom>18&&Tt>2&&(Tt>>=1),Math.max(Rn/(512*Tt),1)*q.get("symbol-spacing")),Pe=q.get("text-padding")*a.tilePixelRatio,Ce=q.get("icon-padding")*a.tilePixelRatio,nt=ue(q.get("text-max-angle")),Ye=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",_t=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",$t=q.get("symbol-placement"),at=be/2;var Tt;const Mt=q.get("icon-text-fit");let Ot;h&&Mt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(Ot=Y2(h,l.vertical,Mt,q.get("icon-text-fit-padding"),K,Te)),re&&(h=Y2(h,re,Mt,q.get("icon-text-fit-padding"),K,Te)));const Ut=(ct,Xt,kn)=>{if(Xt.x<0||Xt.x>=Rn||Xt.y<0||Xt.y>=Rn)return;let tn=null;if(me){const{x:mn,y:Kt,z:In}=B.projectTilePoint(Xt.x,Xt.y,kn);tn={anchor:new ll(mn,Kt,In,0,void 0),up:B.upVector(kn,Xt.x,Xt.y)}}(function(mn,Kt,In,Qn,Kn,Gn,zn,Pr,Ln,er,zr,Yr,Hr,Xr,Jr,hi,eo,Ar,Oi,Ai,_r,oi,Ni,Rr,Ti){const wo=mn.addToLineVertexArray(Kt,Qn);let to,no,zo,ro,cl,Mh,Up,Vp=0,BS=0,FS=0,$S=0,Dx=-1,Ix=-1;const Pa={};let NS=vu("");const Au=In?In.anchor:Kt;let zx=0,Rx=0;if(Ln._unevaluatedLayout.getValue("text-radial-offset")===void 0?[zx,Rx]=Ln.layout.get("text-offset").evaluate(_r,{},Ti).map(ss=>ss*mo):(zx=Ln.layout.get("text-radial-offset").evaluate(_r,{},Ti)*mo,Rx=_x),mn.allowVerticalPlacement&&Kn.vertical){const ss=Kn.vertical;if(Jr)Mh=xx(ss),Pr&&(Up=xx(Pr));else{const as=Ln.layout.get("text-rotate").evaluate(_r,{},Ti)+90;zo=Gv(er,Au,Kt,zr,Yr,Hr,ss,Xr,as,hi),Pr&&(ro=Gv(er,Au,Kt,zr,Yr,Hr,Pr,Ar,as))}}if(Gn){const ss=Ln.layout.get("icon-rotate").evaluate(_r,{},Ti),as=Ln.layout.get("icon-text-fit")!=="none",jp=iS(Gn,ss,Ni,as),Lx=Pr?iS(Pr,ss,Ni,as):void 0;no=Gv(er,Au,Kt,zr,Yr,Hr,Gn,Ar,ss),Vp=4*jp.length;const US=mn.iconSizeData;let ku=null;US.kind==="source"?(ku=[Ca*Ln.layout.get("icon-size").evaluate(_r,{},Ti)],ku[0]>nc&&he(`${mn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):US.kind==="composite"&&(ku=[Ca*oi.compositeIconSizes[0].evaluate(_r,{},Ti),Ca*oi.compositeIconSizes[1].evaluate(_r,{},Ti)],(ku[0]>nc||ku[1]>nc)&&he(`${mn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mn.addSymbols(mn.icon,jp,ku,Ai,Oi,_r,!1,In,Kt,wo.lineStartIndex,wo.lineLength,-1,Rr,Ti),Dx=mn.icon.placedSymbolArray.length-1,Lx&&(BS=4*Lx.length,mn.addSymbols(mn.icon,Lx,ku,Ai,Oi,_r,vs.vertical,In,Kt,wo.lineStartIndex,wo.lineLength,-1,Rr,Ti),Ix=mn.icon.placedSymbolArray.length-1)}for(const ss in Kn.horizontal){const as=Kn.horizontal[ss];to||(NS=vu(as.text),Jr?cl=xx(as):to=Gv(er,Au,Kt,zr,Yr,Hr,as,Xr,Ln.layout.get("text-rotate").evaluate(_r,{},Ti),hi));const jp=as.positionedLines.length===1;if(FS+=aS(mn,In,Kt,as,zn,Ln,Jr,_r,hi,wo,Kn.vertical?vs.horizontal:vs.horizontalOnly,jp?Object.keys(Kn.horizontal):[ss],Pa,Dx,oi,Rr,Ti),jp)break}Kn.vertical&&($S+=aS(mn,In,Kt,Kn.vertical,zn,Ln,Jr,_r,hi,wo,vs.vertical,["vertical"],Pa,Ix,oi,Rr,Ti));let lc=-1;const Ox=(ss,as)=>ss?Math.max(ss,as):as;lc=Ox(cl,lc),lc=Ox(Mh,lc),lc=Ox(Up,lc);const w3=lc>-1?1:0;mn.glyphOffsetArray.length>=ic.MAX_GLYPHS&&he("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_r.sortKey!==void 0&&mn.addToSortKeyRanges(mn.symbolInstances.length,_r.sortKey),mn.symbolInstances.emplaceBack(Au.x,Au.y,Au.z,Kt.x,Kt.y,Pa.right>=0?Pa.right:-1,Pa.center>=0?Pa.center:-1,Pa.left>=0?Pa.left:-1,Pa.vertical>=0?Pa.vertical:-1,Dx,Ix,NS,to!==void 0?to:mn.collisionBoxArray.length,to!==void 0?to+1:mn.collisionBoxArray.length,zo!==void 0?zo:mn.collisionBoxArray.length,zo!==void 0?zo+1:mn.collisionBoxArray.length,no!==void 0?no:mn.collisionBoxArray.length,no!==void 0?no+1:mn.collisionBoxArray.length,ro||mn.collisionBoxArray.length,ro?ro+1:mn.collisionBoxArray.length,zr,FS,$S,Vp,BS,w3,0,zx,Rx,lc)})(a,Xt,tn,ct,l,h,p,Ot,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,Pe,Ye,E,0,Ce,_t,K,r,v,M,D,O)};if($t==="line")for(const ct of tS(r.geometry,0,0,Rn,Rn)){const Xt=NL(ct,be,nt,l.vertical||re,h,24,fe,a.overscaling,Rn);for(const kn of Xt){const tn=re;tn&&YL(a,tn.text,at,kn)||Ut(ct,kn,O)}}else if($t==="line-center"){for(const ct of r.geometry)if(ct.length>1){const Xt=$L(ct,nt,l.vertical||re,h,24,fe);Xt&&Ut(ct,Xt,O)}}else if(r.type==="Polygon")for(const ct of ax(r.geometry,0)){const Xt=WL(ct,16);Ut(ct[0],new ll(Xt.x,Xt.y,0,0,void 0),O)}else if(r.type==="LineString")for(const ct of r.geometry)Ut(ct,new ll(ct[0].x,ct[0].y,0,0,void 0),O);else if(r.type==="Point")for(const ct of r.geometry)for(const Xt of ct)Ut([Xt],new ll(Xt.x,Xt.y,0,0,void 0),O)}const nc=32640;function aS(a,r,l,h,p,v,x,T,E,M,D,O,B,W,q,K,re){const me=function(be,Pe,Ce,nt,Ye,_t,$t,at){const Tt=[];if(Pe.positionedLines.length===0)return Tt;const Mt=nt.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Ot=function(tn){const mn=tn[0],Kt=tn[1],In=mn*Kt;return In>0?[mn,-Kt]:In<0?[-mn,Kt]:mn===0?[Kt,mn]:[Kt,-mn]}(Ce);let Ut=Math.abs(Pe.top-Pe.bottom);for(const tn of Pe.positionedLines)Ut-=tn.lineOffset;const ct=Pe.positionedLines.length,Xt=Ut/ct;let kn=Pe.top-Ce[1];for(let tn=0;tn<ct;++tn){const mn=Pe.positionedLines[tn];kn=UL(Pe,Xt,kn,tn);for(const Kt of mn.positionedGlyphs){if(!Kt.rect)continue;const In=Kt.rect||{};let Qn=4,Kn=!0,Gn=1,zn=0;if(Kt.imageName){const Rr=$t[Kt.imageName];if(!Rr)continue;if(Rr.sdf){he("SDF images are not supported in formatted text and will be ignored.");continue}Kn=!1,Gn=Rr.pixelRatio,Qn=1/Gn}const Pr=(Ye||at)&&Kt.vertical,Ln=Kt.metrics.advance*Kt.scale/2,er=Kt.metrics,zr=Kt.rect;if(zr===null)continue;at&&Pe.verticalizable&&(zn=Kt.imageName?Ln-Kt.metrics.width*Kt.scale/2:0);const Yr=Ye?[Kt.x+Ln,Kt.y]:[0,0];let Hr=[0,0],Xr=[0,0],Jr=!1;Ye||(Pr?(Xr=[Kt.x+Ln+Ot[0],Kt.y+Ot[1]-zn],Jr=!0):Hr=[Kt.x+Ln+Ce[0],Kt.y+Ce[1]-zn]);const hi=zr.w*Kt.scale/(Gn*(Kt.localGlyph?2:1)),eo=zr.h*Kt.scale/(Gn*(Kt.localGlyph?2:1));let Ar,Oi,Ai,_r;if(Pr){const Rr=Kt.y-kn,Ti=new Y(-Ln,Ln-Rr),wo=-Math.PI/2,to=new Y(...Xr);Ar=new Y(-Ln+Hr[0],Hr[1]),Ar._rotateAround(wo,Ti)._add(to),Ar.x+=-Rr+Ln,Ar.y-=(er.left-Qn)*Kt.scale;const no=Kt.imageName?er.advance*Kt.scale:mo*Kt.scale,zo=String.fromCharCode(Kt.glyph);wL(zo)?Ar.x+=(1-Qn)*Kt.scale:TL(zo)?Ar.x+=no-er.height*Kt.scale+(-Qn-1)*Kt.scale:Ar.x+=Kt.imageName||er.width+2*Qn===zr.w&&er.height+2*Qn===zr.h?(no-eo)/2:(no-(er.height+2*Qn)*Kt.scale)/2,Oi=new Y(Ar.x,Ar.y-hi),Ai=new Y(Ar.x+eo,Ar.y),_r=new Y(Ar.x+eo,Ar.y-hi)}else{const Rr=(er.left-Qn)*Kt.scale-Ln+Hr[0],Ti=(-er.top-Qn)*Kt.scale+Hr[1],wo=Rr+hi,to=Ti+eo;Ar=new Y(Rr,Ti),Oi=new Y(wo,Ti),Ai=new Y(Rr,to),_r=new Y(wo,to)}if(Mt){let Rr;Rr=Ye?new Y(0,0):Jr?new Y(Ot[0],Ot[1]):new Y(Ce[0],Ce[1]),Ar._rotateAround(Mt,Rr),Oi._rotateAround(Mt,Rr),Ai._rotateAround(Mt,Rr),_r._rotateAround(Mt,Rr)}const oi=new Y(0,0),Ni=new Y(0,0);Tt.push({tl:Ar,tr:Oi,bl:Ai,br:_r,tex:In,writingMode:Pe.writingMode,glyphOffset:Yr,sectionIndex:Kt.sectionIndex,isSDF:Kn,pixelOffsetTL:oi,pixelOffsetBR:Ni,minFontScaleX:0,minFontScaleY:0})}}return Tt}(0,h,E,v,x,T,p,a.allowVerticalPlacement),Te=a.textSizeData;let fe=null;Te.kind==="source"?(fe=[Ca*v.layout.get("text-size").evaluate(T,{},re)],fe[0]>nc&&he(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Te.kind==="composite"&&(fe=[Ca*q.compositeTextSizes[0].evaluate(T,{},re),Ca*q.compositeTextSizes[1].evaluate(T,{},re)],(fe[0]>nc||fe[1]>nc)&&he(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,me,fe,E,x,T,D,r,l,M.lineStartIndex,M.lineLength,W,K,re);for(const be of O)B[be]=a.text.placedSymbolArray.length-1;return 4*me.length}function lS(a){for(const r in a)return a[r];return null}function Gv(a,r,l,h,p,v,x,T,E,M){let D=x.top,O=x.bottom,B=x.left,W=x.right;const q=x.collisionPadding;if(q&&(B-=q[0],D-=q[1],W+=q[2],O+=q[3]),E){const K=new Y(B,D),re=new Y(W,D),me=new Y(B,O),Te=new Y(W,O),fe=ue(E);let be=new Y(0,0);M&&(be=new Y(M[0],M[1])),K._rotateAround(fe,be),re._rotateAround(fe,be),me._rotateAround(fe,be),Te._rotateAround(fe,be),B=Math.min(K.x,re.x,me.x,Te.x),W=Math.max(K.x,re.x,me.x,Te.x),D=Math.min(K.y,re.y,me.y,Te.y),O=Math.max(K.y,re.y,me.y,Te.y)}return a.emplaceBack(r.x,r.y,r.z,l.x,l.y,B,D,W,O,T,h,p,v),a.length-1}function xx(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const r=a.bottom-a.top;return r>0?Math.max(10,r):null}function YL(a,r,l,h){const p=a.compareText;if(r in p){const v=p[r];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<l)return!0}else p[r]=[];return p[r].push(h),!1}function cS(a,r){const l=a.fovAboveCenter,h=a.elevation?a.elevation.getMinElevationBelowMSL()*r:0,p=(a._camera.position[2]*a.worldSize-h)/Math.cos(a._pitch),v=Math.sin(l)*p/Math.sin(Math.max(Math.PI/2-a._pitch-l,.01)),x=Math.sin(a._pitch)*v+p;return Math.min(1.01*x,p*(1/a._horizonShift))}function Mu(a,r){if(!r.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:r};const l=Math.pow(2,-a.z),h=a.x*l,p=(a.x+1)*l,v=a.y*l,x=(a.y+1)*l,T=gs(h),E=gs(p),M=fo(v),D=fo(x),O=r.project(T,M),B=r.project(E,M),W=r.project(E,D),q=r.project(T,D);let K=Math.min(O.x,B.x,W.x,q.x),re=Math.min(O.y,B.y,W.y,q.y),me=Math.max(O.x,B.x,W.x,q.x),Te=Math.max(O.y,B.y,W.y,q.y);const fe=l/16;function be(Ce,nt,Ye,_t,$t,at){const Tt=(Ye+$t)/2,Mt=(_t+at)/2,Ot=r.project(gs(Tt),fo(Mt)),Ut=Math.max(0,K-Ot.x,re-Ot.y,Ot.x-me,Ot.y-Te);K=Math.min(K,Ot.x),me=Math.max(me,Ot.x),re=Math.min(re,Ot.y),Te=Math.max(Te,Ot.y),Ut>fe&&(be(Ce,Ot,Ye,_t,Tt,Mt),be(Ot,nt,Tt,Mt,$t,at))}be(O,B,h,v,p,v),be(B,W,p,v,p,x),be(W,q,p,x,h,x),be(q,O,h,x,h,v),K-=fe,re-=fe,me+=fe,Te+=fe;const Pe=1/Math.max(me-K,Te-re);return{scale:Pe,x:K*Pe,y:re*Pe,x2:me*Pe,y2:Te*Pe,projection:r}}const XL=Ks(new Float32Array(16));class rc{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,l){return{x:0,y:0,z:0}}unproject(r,l){return new mr(0,0)}projectTilePoint(r,l,h){return{x:r,y:l,z:0}}locationPoint(r,l,h=!0){return r._coordinatePoint(r.locationCoordinate(l),h)}pixelsPerMeter(r,l){return Qs(1,r)*l}pixelSpaceConversion(r,l,h){return 1}farthestPixelDistance(r){return cS(r,r.pixelsPerMeter)}pointCoordinate(r,l,h,p){const v=r.horizonLineFromTop(!1),x=new Y(l,Math.max(v,h));return r.rayIntersectionCoordinate(r.pointRayIntersection(x,p))}pointCoordinate3D(r,l,h){const p=new Y(l,h);if(r.elevation)return r.elevation.pointCoordinate(p);{const v=this.pointCoordinate(r,p.x,p.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(r,l){if(r.elevation)return!this.pointCoordinate3D(r,l.x,l.y);const h=r.horizonLineFromTop();return l.y<h}createInversionMatrix(r,l){return XL}createTileMatrix(r,l,h){let p,v,x;const T=h.canonical,E=Ks(new Float64Array(16));if(this.isReprojectedInTileSpace){const M=Mu(T,this);p=1,v=M.x+h.wrap*M.scale,x=M.y,xu(E,E,[p/M.scale,p/M.scale,r.pixelsPerMeter/l])}else p=l/r.zoomScale(T.z),v=(T.x+Math.pow(2,T.z)*h.wrap)*p,x=T.y*p;return dp(E,E,[v,x,0]),xu(E,E,[p/Rn,p/Rn,1]),E}upVector(r,l,h){return[0,0,1]}upVectorScale(r,l,h){return{metersToTile:1}}}class KL extends rc{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[l,h]=this.parallels=r.parallels||[29.5,45.5],p=Math.sin(ue(l));this.n=(p+Math.sin(ue(h)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(r,l){const{n:h,c:p,r0:v}=this,x=ue(r-this.center[0]),T=ue(l),E=Math.sqrt(p-2*h*Math.sin(T))/h;return{x:E*Math.sin(x*h),y:E*Math.cos(x*h)-v,z:0}}unproject(r,l){const{n:h,c:p,r0:v}=this,x=v+l;let T=Math.atan2(r,Math.abs(x))*Math.sign(x);x*h<0&&(T-=Math.PI*Math.sign(r)*Math.sign(x));const E=ue(this.center[0])*h;T=it(T,-Math.PI-E,Math.PI-E);const M=Be(Ee(T/h)+this.center[0],-180,180),D=Math.asin(Be((p-(r*r+x*x)*h*h)/(2*h),-1,1)),O=Be(Ee(D),-po,po);return new mr(M,O)}}const Op=1.340264,Lp=-.081106,Bp=893e-6,Fp=.003796,qv=Math.sqrt(3)/2;class JL extends rc{project(r,l){l=l/180*Math.PI,r=r/180*Math.PI;const h=Math.asin(qv*Math.sin(l)),p=h*h,v=p*p*p;return{x:.5*(r*Math.cos(h)/(qv*(Op+3*Lp*p+v*(7*Bp+9*Fp*p)))/Math.PI+.5),y:1-.5*(h*(Op+Lp*p+v*(Bp+Fp*p))/Math.PI+1),z:0}}unproject(r,l){r=(2*r-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,p=h*h,v=p*p*p;for(let D,O,B,W=0;W<12&&(O=h*(Op+Lp*p+v*(Bp+Fp*p))-l,B=Op+3*Lp*p+v*(7*Bp+9*Fp*p),D=O/B,h=Be(h-D,-Math.PI/3,Math.PI/3),p=h*h,v=p*p*p,!(Math.abs(D)<1e-12));++W);const x=qv*r*(Op+3*Lp*p+v*(7*Bp+9*Fp*p))/Math.cos(h),T=Math.asin(Math.sin(h)/qv),E=Be(180*x/Math.PI,-180,180),M=Be(180*T/Math.PI,-po,po);return new mr(E,M)}}class QL extends rc{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,l){return{x:.5+r/360,y:.5-l/360,z:0}}unproject(r,l){const h=360*(r-.5),p=Be(360*(.5-l),-po,po);return new mr(h,p)}}const Sh=Math.PI/2;function Zv(a){return Math.tan((Sh+a)/2)}class e3 extends rc{constructor(r){super(r),this.center=r.center||[0,30];const[l,h]=this.parallels=r.parallels||[30,30];let p=ue(l),v=ue(h);this.southernCenter=p+v<0,this.southernCenter&&(p=-p,v=-v);const x=Math.cos(p),T=Zv(p);this.n=p===v?Math.sin(p):Math.log(x/Math.cos(v))/Math.log(Zv(v)/T),this.f=x*Math.pow(Zv(p),this.n)/this.n}project(r,l){l=ue(l),this.southernCenter&&(l=-l),r=ue(r-this.center[0]);const h=1e-6,{n:p,f:v}=this;v>0?l<-Sh+h&&(l=-Sh+h):l>Sh-h&&(l=Sh-h);const x=v/Math.pow(Zv(l),p);let T=x*Math.sin(p*r),E=v-x*Math.cos(p*r);return T=.5*(T/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:T,y:this.southernCenter?E:1-E,z:0}}unproject(r,l){r=(2*r-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:h,f:p}=this,v=p-l,x=Math.sign(v),T=Math.sign(h)*Math.sqrt(r*r+v*v);let E=Math.atan2(r,Math.abs(v))*x;v*h<0&&(E-=Math.PI*Math.sign(r)*x);const M=Be(Ee(E/h)+this.center[0],-180,180),D=Be(Ee(2*Math.atan(Math.pow(p/T,1/h))-Sh),-po,po);return new mr(M,this.southernCenter?-D:D)}}class uS extends rc{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,l){return{x:wa(r),y:Ta(l),z:0}}unproject(r,l){const h=gs(r),p=fo(l);return new mr(h,p)}}const dS=ue(po);class t3 extends rc{project(r,l){const h=(l=ue(l))*l,p=h*h;return{x:.5*((r=ue(r))*(.8707-.131979*h+p*(p*(.003971*h-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+h*(.015085+p*(.028874*h-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(r,l){r=(2*r-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,p=25,v=0,x=h*h;do{x=h*h;const M=x*x;v=(h*(1.007226+x*(.015085+M*(.028874*x-.044475-.005916*M)))-l)/(1.007226+x*(.045255+M*(.259866*x-.311325-.005916*11*M))),h=Be(h-v,-dS,dS)}while(Math.abs(v)>1e-6&&--p>0);x=h*h;const T=Be(Ee(r/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),E=Ee(h);return new mr(T,E)}}const hS=ue(po);class n3 extends rc{project(r,l){l=ue(l),r=ue(r);const h=Math.cos(l),p=2/Math.PI,v=Math.acos(h*Math.cos(r/2)),x=Math.sin(v)/v,T=.5*(r*p+2*h*Math.sin(r/2)/x)||0,E=.5*(l+Math.sin(l)/x)||0;return{x:.5*(T/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(r,l){let h=r=(2*r-.5)*Math.PI,p=l=(2*(1-l)-1)*Math.PI,v=25;const x=1e-6;let T=0,E=0;do{const M=Math.cos(p),D=Math.sin(p),O=2*D*M,B=D*D,W=M*M,q=Math.cos(h/2),K=Math.sin(h/2),re=2*q*K,me=K*K,Te=1-W*q*q,fe=Te?1/Te:0,be=Te?Math.acos(M*q)*Math.sqrt(1/Te):0,Pe=.5*(2*be*M*K+2*h/Math.PI)-r,Ce=.5*(be*D+p)-l,nt=.5*fe*(W*me+be*M*q*B)+1/Math.PI,Ye=fe*(re*O/4-be*D*K),_t=.125*fe*(O*K-be*D*W*re),$t=.5*fe*(B*q+be*me*M)+.5,at=Ye*_t-$t*nt;T=(Ce*Ye-Pe*$t)/at,E=(Pe*_t-Ce*nt)/at,h=Be(h-T,-Math.PI,Math.PI),p=Be(p-E,-hS,hS)}while((Math.abs(T)>x||Math.abs(E)>x)&&--v>0);return new mr(Ee(h),Ee(p))}}class fS extends rc{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ue(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,l){const{scale:h,cosPhi:p}=this;return{x:ue(r)*p*h+.5,y:-Math.sin(ue(l))/p*h+.5,z:0}}unproject(r,l){const{scale:h,cosPhi:p}=this,v=-(l-.5)/h,x=Be(Ee((r-.5)/h)/p,-180,180),T=Math.asin(Be(v*p,-1,1)),E=Be(Ee(T),-po,po);return new mr(x,E)}}class r3 extends uS{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,l,h){const p=yp(r,l,h);return wi(p,p,xp(ba(h))),{x:p[0],y:p[1],z:p[2]}}locationPoint(r,l){const h=dh(l.lat,l.lng),p=ko([],h),v=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(l),r._centerAltitude):r._centerAltitude;mp(h,h,p,Qs(1,0)*Rn*v);const x=Ks(new Float64Array(16));return yu(x,r.pixelMatrix,r.globeMatrix),wi(h,h,x),new Y(h[0],h[1])}pixelsPerMeter(r,l){return Qs(1,0)*l}pixelSpaceConversion(r,l,h){const p=Qs(1,r)*l,v=hr(Qs(1,45)*l,p,h);return this.pixelsPerMeter(r,l)/v}createTileMatrix(r,l,h){const p=q0(ba(h.canonical));return yu(new Float64Array(16),r.globeMatrix,p)}createInversionMatrix(r,l){const{center:h}=r,p=xp(ba(l));return Tv(p,p,ue(h.lng)),F0(p,p,ue(h.lat)),xu(p,p,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(r,l,h,p){return jC(r,l,h,!0)||new fh(0,0)}pointCoordinate3D(r,l,h){const p=this.pointCoordinate(r,l,h,0);return[p.x,p.y,p.z]}isPointAboveHorizon(r,l){return!jC(r,l.x,l.y,!1)}farthestPixelDistance(r){const l=function(p,v){const x=p.cameraToCenterDistance,T=p._centerAltitude*v,E=p._camera,M=p._camera.forward(),D=il([],ms([],M,-x),[0,0,T]),O=p.worldSize/(2*Math.PI),B=[0,0,-O],W=p.width/p.height,q=Math.tan(p.fovAboveCenter),K=ms([],E.up(),q),re=ms([],E.right(),q*W),me=ko([],il([],il([],M,K),re)),Te=[];let fe;if(new V0(D,me).closestPointOnSphere(B,O,Te)){const be=il([],Te,B),Pe=Js([],be,D);fe=Math.cos(p.fovAboveCenter)*hp(Pe)}else{const be=Js([],D,B),Pe=Js([],B,D);ko(Pe,Pe);const Ce=hp(be)-O;fe=Math.sqrt(Ce*(Ce+2*O));const nt=Math.acos(fe/(O+Ce))-Math.acos(Ms(M,Pe));fe*=Math.cos(nt)}return 1.01*fe}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),h=hh(r.zoom);if(h>0){const p=cS(r,Qs(1,r.center.lat)*r.worldSize),v=r.worldSize/(2*Math.PI),x=Math.max(r.width,r.height)/r.worldSize*Math.PI;return hr(l,p+v*(1-Math.cos(x)),Math.pow(h,10))}return l}upVector(r,l,h){return yp(l,h,r,1)}upVectorScale(r){return{metersToTile:Cv(Ev(ba(r)))}}}function pS(a){const r=a.parallels,l=!!r&&Math.abs(r[0]+r[1])<.01;switch(a.name){case"mercator":return new uS(a);case"equirectangular":return new QL(a);case"naturalEarth":return new t3(a);case"equalEarth":return new JL(a);case"winkelTripel":return new n3(a);case"albers":return l?new fS(a):new KL(a);case"lambertConformalConic":return l?new fS(a):new e3(a);case"globe":return new r3(a)}throw new Error(`Invalid projection name: ${a.name}`)}const i3=Lv.types,o3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yv(a,r,l,h,p,v,x,T,E,M,D,O,B){const W=T?Math.min(nc,Math.round(T[0])):0,q=T?Math.min(nc,Math.round(T[1])):0;a.emplaceBack(r,l,Math.round(32*h),Math.round(32*p),v,x,(W<<1)+(E?1:0),q,16*M,16*D,256*O,256*B)}function Xv(a,r,l,h,p,v,x){a.emplaceBack(r,l,h,p,v,x)}function Kv(a,r,l,h,p){a.emplaceBack(r,l,h,p),a.emplaceBack(r,l,h,p),a.emplaceBack(r,l,h,p),a.emplaceBack(r,l,h,p)}function s3(a){for(const r of a.sections)if(X(r.text))return!0;return!1}class bx{constructor(r){this.layoutVertexArray=new qs,this.indexArray=new ho,this.programConfigurations=r,this.segments=new Mi,this.dynamicLayoutVertexArray=new Nr,this.opacityVertexArray=new Ur,this.placedSymbolArray=new mC,this.globeExtVertexArray=new Kr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,pL.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,gL.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,o3,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,mL.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}un(bx,"SymbolBuffers");class wx{constructor(r,l,h){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Mi,this.collisionVertexArray=new Zr,this.collisionVertexArrayExt=new uo}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,vL.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,_L.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}un(wx,"CollisionBuffers");class ic{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ks([]),this.placementViewportMatrix=Ks([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=dx(this.zoom,l["text-size"]),this.iconSizeData=dx(this.zoom,l["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(x=>vs[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new bx(new _u(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new bx(new _u(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new _C,this.lineVertexArray=new yC,this.symbolInstances=new vC}calculateGlyphDependencies(r,l,h,p,v){for(let x=0;x<r.length;x++)if(l[r.charCodeAt(x)]=!0,p&&v){const T=Dp[r.charAt(x)];T&&(l[T.charCodeAt(0)]=!0)}}populate(r,l,h,p){const v=this.layers[0],x=v.layout,T=this.projection.name==="globe",E=x.get("text-font"),M=x.get("text-field"),D=x.get("icon-image"),O=(M.value.kind!=="constant"||M.value.value instanceof Po&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),B=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,W=x.get("symbol-sort-key");if(this.features=[],!O&&!B)return;const q=l.iconDependencies,K=l.glyphDependencies,re=l.availableImages,me=new We(this.zoom);for(const{feature:Te,id:fe,index:be,sourceLayerIndex:Pe}of r){const Ce=v._featureFilter.needGeometry,nt=Cu(Te,Ce);if(!v._featureFilter.filter(me,nt,h))continue;if(Ce||(nt.geometry=ol(Te,h,p)),T&&Te.type!==1&&h.z<=5){const at=nt.geometry,Tt=.98078528056,Mt=(Ot,Ut)=>Ms(yp(Ot.x,Ot.y,h,1),yp(Ut.x,Ut.y,h,1))<Tt;for(let Ot=0;Ot<at.length;Ot++)at[Ot]=gO(at[Ot],Mt)}let Ye,_t;if(O){const at=v.getValueAndResolveTokens("text-field",nt,h,re),Tt=Po.factory(at);s3(Tt)&&(this.hasRTLText=!0),(!this.hasRTLText||ke()==="unavailable"||this.hasRTLText&&Ie.isParsed())&&(Ye=bL(Tt,v,nt))}if(B){const at=v.getValueAndResolveTokens("icon-image",nt,h,re);_t=at instanceof bo?at:bo.fromString(at)}if(!Ye&&!_t)continue;const $t=this.sortFeaturesByKey?W.evaluate(nt,{},h):void 0;if(this.features.push({id:fe,text:Ye,icon:_t,index:be,sourceLayerIndex:Pe,geometry:nt.geometry,properties:Te.properties,type:i3[Te.type],sortKey:$t}),_t&&(q[_t.name]=!0),Ye){const at=E.evaluate(nt,{},h).join(","),Tt=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vs.vertical)>=0;for(const Mt of Ye.sections)if(Mt.image)q[Mt.image.name]=!0;else{const Ot=b(Ye.toString()),Ut=Mt.fontStack||at,ct=K[Ut]=K[Ut]||{};this.calculateGlyphDependencies(Mt.text,ct,Tt,this.allowVerticalPlacement,Ot)}}}x.get("symbol-placement")==="line"&&(this.features=function(Te){const fe={},be={},Pe=[];let Ce=0;function nt(at){Pe.push(Te[at]),Ce++}function Ye(at,Tt,Mt){const Ot=be[at];return delete be[at],be[Tt]=Ot,Pe[Ot].geometry[0].pop(),Pe[Ot].geometry[0]=Pe[Ot].geometry[0].concat(Mt[0]),Ot}function _t(at,Tt,Mt){const Ot=fe[Tt];return delete fe[Tt],fe[at]=Ot,Pe[Ot].geometry[0].shift(),Pe[Ot].geometry[0]=Mt[0].concat(Pe[Ot].geometry[0]),Ot}function $t(at,Tt,Mt){const Ot=Mt?Tt[0][Tt[0].length-1]:Tt[0][0];return`${at}:${Ot.x}:${Ot.y}`}for(let at=0;at<Te.length;at++){const Tt=Te[at],Mt=Tt.geometry,Ot=Tt.text?Tt.text.toString():null;if(!Ot){nt(at);continue}const Ut=$t(Ot,Mt),ct=$t(Ot,Mt,!0);if(Ut in be&&ct in fe&&be[Ut]!==fe[ct]){const Xt=_t(Ut,ct,Mt),kn=Ye(Ut,ct,Pe[Xt].geometry);delete fe[Ut],delete be[ct],be[$t(Ot,Pe[kn].geometry,!0)]=kn,Pe[Xt].geometry=null}else Ut in be?Ye(Ut,ct,Mt):ct in fe?_t(Ut,ct,Mt):(nt(at),fe[Ut]=Ce-1,be[ct]=Ce-1)}return Pe.filter(at=>at.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Te,fe)=>Te.sortKey-fe.sortKey)}update(r,l,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,h,p),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,h,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=pS(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const h=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:p,y:v}of l)this.lineVertexArray.emplaceBack(p,v);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,l,h,p,v,x,T,E,M,D,O,B,W,q){const K=r.indexArray,re=r.layoutVertexArray,me=r.globeExtVertexArray,Te=r.segments.prepareSegment(4*l.length,re,K,this.canOverlap?x.sortKey:void 0),fe=this.glyphOffsetArray.length,be=Te.vertexLength,Pe=this.allowVerticalPlacement&&T===vs.vertical?Math.PI/2:0,Ce=x.text&&x.text.sections;for(let Ye=0;Ye<l.length;Ye++){const{tl:_t,tr:$t,bl:at,br:Tt,tex:Mt,pixelOffsetTL:Ot,pixelOffsetBR:Ut,minFontScaleX:ct,minFontScaleY:Xt,glyphOffset:kn,isSDF:tn,sectionIndex:mn}=l[Ye],Kt=Te.vertexLength,In=kn[1];if(Yv(re,M.x,M.y,_t.x,In+_t.y,Mt.x,Mt.y,h,tn,Ot.x,Ot.y,ct,Xt),Yv(re,M.x,M.y,$t.x,In+$t.y,Mt.x+Mt.w,Mt.y,h,tn,Ut.x,Ot.y,ct,Xt),Yv(re,M.x,M.y,at.x,In+at.y,Mt.x,Mt.y+Mt.h,h,tn,Ot.x,Ut.y,ct,Xt),Yv(re,M.x,M.y,Tt.x,In+Tt.y,Mt.x+Mt.w,Mt.y+Mt.h,h,tn,Ut.x,Ut.y,ct,Xt),E){const{x:Qn,y:Kn,z:Gn}=E.anchor,[zn,Pr,Ln]=E.up;Xv(me,Qn,Kn,Gn,zn,Pr,Ln),Xv(me,Qn,Kn,Gn,zn,Pr,Ln),Xv(me,Qn,Kn,Gn,zn,Pr,Ln),Xv(me,Qn,Kn,Gn,zn,Pr,Ln),Kv(r.dynamicLayoutVertexArray,Qn,Kn,Gn,Pe)}else Kv(r.dynamicLayoutVertexArray,M.x,M.y,M.z,Pe);K.emplaceBack(Kt,Kt+1,Kt+2),K.emplaceBack(Kt+1,Kt+2,Kt+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),Ye!==l.length-1&&mn===l[Ye+1].sectionIndex||r.programConfigurations.populatePaintArrays(re.length,x,x.index,{},W,q,Ce&&Ce[mn])}const nt=E?E.anchor:M;r.placedSymbolArray.emplaceBack(nt.x,nt.y,nt.z,M.x,M.y,fe,this.glyphOffsetArray.length-fe,be,D,O,M.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],T,0,!1,0,B,0)}_commitLayoutVertex(r,l,h,p,v,x,T){r.emplaceBack(l,h,p,v,x,Math.round(T.x),Math.round(T.y))}_addCollisionDebugVertices(r,l,h,p,v,x,T){const E=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),M=E.vertexLength,D=T.tileAnchorX,O=T.tileAnchorY;for(let W=0;W<4;W++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(l,-r.padding,-r.padding),h.collisionVertexArrayExt.emplaceBack(l,r.padding,-r.padding),h.collisionVertexArrayExt.emplaceBack(l,r.padding,r.padding),h.collisionVertexArrayExt.emplaceBack(l,-r.padding,r.padding),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,D,O,new Y(r.x1,r.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,D,O,new Y(r.x2,r.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,D,O,new Y(r.x2,r.y2)),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,D,O,new Y(r.x1,r.y2)),E.vertexLength+=4;const B=h.indexArray;B.emplaceBack(M,M+1),B.emplaceBack(M+1,M+2),B.emplaceBack(M+2,M+3),B.emplaceBack(M+3,M),E.primitiveLength+=4}_addTextDebugCollisionBoxes(r,l,h,p,v,x){for(let T=p;T<v;T++){const E=h.get(T),M=this.getSymbolInstanceTextSize(r,x,l,T);this._addCollisionDebugVertices(E,M,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(r,l,h,p,v,x){for(let T=p;T<v;T++){const E=h.get(T),M=this.getSymbolInstanceIconSize(r,l,x.placedIconSymbolIndex);this._addCollisionDebugVertices(E,M,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,x)}}generateCollisionDebugBuffers(r,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wx(di,L2.members,_a),this.iconCollisionBox=new wx(di,L2.members,_a);const h=yh(this.iconSizeData,r),p=yh(this.textSizeData,r);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(p,r,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(p,r,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(h,r,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(h,r,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(r,l,h,p){const v=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:p),x=Nv(this.textSizeData,r,v)/mo;return this.tilePixelRatio*x}getSymbolInstanceIconSize(r,l,h){const p=this.icon.placedSymbolArray.get(h),v=Nv(this.iconSizeData,r,p);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(r,l,h){r.emplaceBack(l,-h,-h),r.emplaceBack(l,h,-h),r.emplaceBack(l,h,h),r.emplaceBack(l,-h,h)}_updateTextDebugCollisionBoxes(r,l,h,p,v,x){for(let T=p;T<v;T++){const E=h.get(T),M=this.getSymbolInstanceTextSize(r,x,l,T);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,M,E.padding)}}_updateIconDebugCollisionBoxes(r,l,h,p,v,x){for(let T=p;T<v;T++){const E=h.get(T),M=this.getSymbolInstanceIconSize(r,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,M,E.padding)}}updateCollisionDebugBuffers(r,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=yh(this.iconSizeData,r),p=yh(this.textSizeData,r);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(p,r,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(p,r,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(h,r,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(h,r,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,l,h,p,v,x,T,E,M){const D={};if(l<h){const{x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be,featureIndex:Pe}=r.get(l);D.textBox={x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be},D.textFeatureIndex=Pe}if(p<v){const{x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be,featureIndex:Pe}=r.get(p);D.verticalTextBox={x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be},D.verticalTextFeatureIndex=Pe}if(x<T){const{x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be,featureIndex:Pe}=r.get(x);D.iconBox={x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be},D.iconFeatureIndex=Pe}if(E<M){const{x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be,featureIndex:Pe}=r.get(E);D.verticalIconBox={x1:O,y1:B,x2:W,y2:q,padding:K,projectedAnchorX:re,projectedAnchorY:me,projectedAnchorZ:Te,tileAnchorX:fe,tileAnchorY:be},D.verticalIconFeatureIndex=Pe}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const h=r.placedSymbolArray.get(l),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),h=Math.cos(r),p=[],v=[],x=[];for(let T=0;T<this.symbolInstances.length;++T){x.push(T);const E=this.symbolInstances.get(T);p.push(0|Math.round(l*E.tileAnchorX+h*E.tileAnchorY)),v.push(E.featureIndex)}return x.sort((T,E)=>p[T]-p[E]||v[E]-v[T]),x}addToSortKeyRanges(r,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:v,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:T,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:M}=h;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),v>=0&&v!==p&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&x!==v&&x!==p&&this.addIndicesForPlacedSymbol(this.text,x),T>=0&&this.addIndicesForPlacedSymbol(this.text,T),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}un(ic,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ic.MAX_GLYPHS=65535,ic.addDynamicAttributes=Kv;const a3=new Bt({"symbol-placement":new Ve(ft.layout_symbol["symbol-placement"]),"symbol-spacing":new Ve(ft.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ve(ft.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ot(ft.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ve(ft.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ve(ft.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ve(ft.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ve(ft.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ve(ft.layout_symbol["icon-rotation-alignment"]),"icon-size":new ot(ft.layout_symbol["icon-size"]),"icon-text-fit":new Ve(ft.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ve(ft.layout_symbol["icon-text-fit-padding"]),"icon-image":new ot(ft.layout_symbol["icon-image"]),"icon-rotate":new ot(ft.layout_symbol["icon-rotate"]),"icon-padding":new Ve(ft.layout_symbol["icon-padding"]),"icon-keep-upright":new Ve(ft.layout_symbol["icon-keep-upright"]),"icon-offset":new ot(ft.layout_symbol["icon-offset"]),"icon-anchor":new ot(ft.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ve(ft.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ve(ft.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ve(ft.layout_symbol["text-rotation-alignment"]),"text-field":new ot(ft.layout_symbol["text-field"]),"text-font":new ot(ft.layout_symbol["text-font"]),"text-size":new ot(ft.layout_symbol["text-size"]),"text-max-width":new ot(ft.layout_symbol["text-max-width"]),"text-line-height":new ot(ft.layout_symbol["text-line-height"]),"text-letter-spacing":new ot(ft.layout_symbol["text-letter-spacing"]),"text-justify":new ot(ft.layout_symbol["text-justify"]),"text-radial-offset":new ot(ft.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ve(ft.layout_symbol["text-variable-anchor"]),"text-anchor":new ot(ft.layout_symbol["text-anchor"]),"text-max-angle":new Ve(ft.layout_symbol["text-max-angle"]),"text-writing-mode":new Ve(ft.layout_symbol["text-writing-mode"]),"text-rotate":new ot(ft.layout_symbol["text-rotate"]),"text-padding":new Ve(ft.layout_symbol["text-padding"]),"text-keep-upright":new Ve(ft.layout_symbol["text-keep-upright"]),"text-transform":new ot(ft.layout_symbol["text-transform"]),"text-offset":new ot(ft.layout_symbol["text-offset"]),"text-allow-overlap":new Ve(ft.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ve(ft.layout_symbol["text-ignore-placement"]),"text-optional":new Ve(ft.layout_symbol["text-optional"])});var Tx={paint:new Bt({"icon-opacity":new ot(ft.paint_symbol["icon-opacity"]),"icon-color":new ot(ft.paint_symbol["icon-color"]),"icon-halo-color":new ot(ft.paint_symbol["icon-halo-color"]),"icon-halo-width":new ot(ft.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ot(ft.paint_symbol["icon-halo-blur"]),"icon-translate":new Ve(ft.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ve(ft.paint_symbol["icon-translate-anchor"]),"text-opacity":new ot(ft.paint_symbol["text-opacity"]),"text-color":new ot(ft.paint_symbol["text-color"],{runtimeType:es,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new ot(ft.paint_symbol["text-halo-color"]),"text-halo-width":new ot(ft.paint_symbol["text-halo-width"]),"text-halo-blur":new ot(ft.paint_symbol["text-halo-blur"]),"text-translate":new Ve(ft.paint_symbol["text-translate"]),"text-translate-anchor":new Ve(ft.paint_symbol["text-translate-anchor"])}),layout:a3};class mS{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:Cs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}un(mS,"FormatSectionOverride",{omit:["defaultValue"]});class Jv extends Xs{constructor(r){super(r,Tx)}recalculate(r,l){super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,l,h,p){const v=this.layout.get(r).evaluate(l,{},h,p),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||Wl(x.value)||!v?v:function(T,E){return E.replace(/{([^{}]+)}/g,(M,D)=>D in T?String(T[D]):"")}(l.properties,v)}createBucket(r){return new ic(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of Tx.paint.overridableProperties){if(!Jv.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),h=new mS(l),p=new Zd(h,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new Yd("source",p):new el("composite",p,l.value.zoomStops,l.value._interpolationType),this.paint._values[r]=new zt(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Jv.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const h=r.get("text-field"),p=Tx.paint.properties[l];let v=!1;const x=T=>{for(const E of T)if(p.overrides&&p.overrides.hasOverride(E))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Po)x(h.value.value.sections);else if(h.value.kind==="source"){const T=M=>{v||(M instanceof Hc&&Ri(M.value)===da?x(M.value.sections):M instanceof Gc?x(M.sections):M.eachChild(T))},E=h.value;E._styleExpression&&T(E._styleExpression.expression)}return v}getProgramConfiguration(r){return new ec(this,r)}}var l3={paint:new Bt({"background-color":new Ve(ft.paint_background["background-color"]),"background-pattern":new Ve(ft.paint_background["background-pattern"]),"background-opacity":new Ve(ft.paint_background["background-opacity"])})},c3={paint:new Bt({"raster-opacity":new Ve(ft.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ve(ft.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ve(ft.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ve(ft.paint_raster["raster-brightness-max"]),"raster-saturation":new Ve(ft.paint_raster["raster-saturation"]),"raster-contrast":new Ve(ft.paint_raster["raster-contrast"]),"raster-resampling":new Ve(ft.paint_raster["raster-resampling"]),"raster-fade-duration":new Ve(ft.paint_raster["raster-fade-duration"])})};class u3 extends Xs{constructor(r){super(r,{}),this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var d3={paint:new Bt({"sky-type":new Ve(ft.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ve(ft.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ve(ft.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ve(ft.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ve(ft.paint_sky["sky-gradient-radius"]),"sky-gradient":new Dt(ft.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ve(ft.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ve(ft.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ve(ft.paint_sky["sky-opacity"])})};function Cx(a,r,l){const h=[0,0,1],p=FC([]);return NC(p,p,l?-ue(a)+Math.PI:ue(a)),$C(p,p,-ue(r)),RC(h,h,p),ko(h,h)}const h3={circle:class extends Xs{constructor(a){super(a,TO)}createBucket(a){return new Q0(a)}queryRadius(a){const r=a;return ph("circle-radius",this,r)+ph("circle-stroke-width",this,r)+Av(this.paint.get("circle-translate"))}queryIntersectsFeature(a,r,l,h,p,v,x,T){const E=a2(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),M=this.paint.get("circle-radius").evaluate(r,l)+this.paint.get("circle-stroke-width").evaluate(r,l);return l2(a,h,v,x,T,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,M)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new ec(this,a)}},heatmap:class extends Xs{createBucket(a){return new u2(a)}constructor(a){super(a,MO),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=rx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return ph("heatmap-radius",this,a)}queryIntersectsFeature(a,r,l,h,p,v,x,T){const E=this.paint.get("heatmap-radius").evaluate(r,l);return l2(a,h,v,x,T,!0,!0,new Y(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new ec(this,a)}},hillshade:class extends Xs{constructor(a){super(a,PO)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Xs{constructor(a){super(a,WO)}getProgramIds(){const a=this.paint.get("fill-pattern"),r=a&&a.constantOr(1),l=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(a){return new ec(this,a)}recalculate(a,r){super.recalculate(a,r);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Rv(a)}queryRadius(){return Av(this.paint.get("fill-translate"))}queryIntersectsFeature(a,r,l,h,p,v){return!a.queryGeometry.isAboveHorizon&&n2(s2(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Xs{constructor(a){super(a,sL)}createBucket(a){return new Pp(a)}queryRadius(){return Av(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new ec(this,a)}queryIntersectsFeature(a,r,l,h,p,v,x,T,E){const M=a2(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),D=this.paint.get("fill-extrusion-height").evaluate(r,l),O=this.paint.get("fill-extrusion-base").evaluate(r,l),B=[0,0],W=T&&v.elevation,q=v.elevation?v.elevation.exaggeration():1,K=a.tile.getBucket(this);if(W&&K instanceof Pp){const be=K.centroidVertexArray,Pe=E+1;Pe<be.length&&(B[0]=be.geta_centroid_pos0(Pe),B[1]=be.geta_centroid_pos1(Pe))}if(B[0]===0&&B[1]===1)return!1;v.projection.name==="globe"&&(h=P2([h],[new Y(0,0),new Y(Rn,Rn)],a.tileID.canonical).map(be=>be.polygon).flat());const re=W?T:null,[me,Te]=function(be,Pe,Ce,nt,Ye,_t,$t,at,Tt,Mt,Ot){return be.projection.name==="globe"?function(Ut,ct,Xt,kn,tn,mn,Kt,In,Qn,Kn,Gn){const zn=[],Pr=[],Ln=Ut.projection.upVectorScale(Gn,Ut.center.lat,Ut.worldSize).metersToTile,er=[0,0,0,1],zr=[0,0,0,1],Yr=(Xr,Jr,hi,eo)=>{Xr[0]=Jr,Xr[1]=hi,Xr[2]=eo,Xr[3]=1},Hr=M2();Xt>0&&(Xt+=Hr),kn+=Hr;for(const Xr of ct){const Jr=[],hi=[];for(const eo of Xr){const Ar=eo.x+tn.x,Oi=eo.y+tn.y,Ai=Ut.projection.projectTilePoint(Ar,Oi,Gn),_r=Ut.projection.upVector(Gn,eo.x,eo.y);let oi=Xt,Ni=kn;if(Kt){const Rr=I2(Ar,Oi,Xt,kn,Kt,In,Qn,Kn);oi+=Rr.base,Ni+=Rr.top}Xt!==0?Yr(er,Ai.x+_r[0]*Ln*oi,Ai.y+_r[1]*Ln*oi,Ai.z+_r[2]*Ln*oi):Yr(er,Ai.x,Ai.y,Ai.z),Yr(zr,Ai.x+_r[0]*Ln*Ni,Ai.y+_r[1]*Ln*Ni,Ai.z+_r[2]*Ln*Ni),wi(er,er,mn),wi(zr,zr,mn),Jr.push(new _h(er[0],er[1],er[2])),hi.push(new _h(zr[0],zr[1],zr[2]))}zn.push(Jr),Pr.push(hi)}return[zn,Pr]}(be,Pe,Ce,nt,Ye,_t,$t,at,Tt,Mt,Ot):$t?function(Ut,ct,Xt,kn,tn,mn,Kt,In,Qn){const Kn=[],Gn=[],zn=[0,0,0,1];for(const Pr of Ut){const Ln=[],er=[];for(const zr of Pr){const Yr=zr.x+kn.x,Hr=zr.y+kn.y,Xr=I2(Yr,Hr,ct,Xt,mn,Kt,In,Qn);zn[0]=Yr,zn[1]=Hr,zn[2]=Xr.base,zn[3]=1,bu(zn,zn,tn),zn[3]=Math.max(zn[3],1e-5);const Jr=new _h(zn[0]/zn[3],zn[1]/zn[3],zn[2]/zn[3]);zn[0]=Yr,zn[1]=Hr,zn[2]=Xr.top,zn[3]=1,bu(zn,zn,tn),zn[3]=Math.max(zn[3],1e-5);const hi=new _h(zn[0]/zn[3],zn[1]/zn[3],zn[2]/zn[3]);Ln.push(Jr),er.push(hi)}Kn.push(Ln),Gn.push(er)}return[Kn,Gn]}(Pe,Ce,nt,Ye,_t,$t,at,Tt,Mt):function(Ut,ct,Xt,kn,tn){const mn=[],Kt=[],In=tn[8]*ct,Qn=tn[9]*ct,Kn=tn[10]*ct,Gn=tn[11]*ct,zn=tn[8]*Xt,Pr=tn[9]*Xt,Ln=tn[10]*Xt,er=tn[11]*Xt;for(const zr of Ut){const Yr=[],Hr=[];for(const Xr of zr){const Jr=Xr.x+kn.x,hi=Xr.y+kn.y,eo=tn[0]*Jr+tn[4]*hi+tn[12],Ar=tn[1]*Jr+tn[5]*hi+tn[13],Oi=tn[2]*Jr+tn[6]*hi+tn[14],Ai=tn[3]*Jr+tn[7]*hi+tn[15],_r=eo+In,oi=Ar+Qn,Ni=Oi+Kn,Rr=Math.max(Ai+Gn,1e-5),Ti=eo+zn,wo=Ar+Pr,to=Oi+Ln,no=Math.max(Ai+er,1e-5);Yr.push(new _h(_r/Rr,oi/Rr,Ni/Rr)),Hr.push(new _h(Ti/no,wo/no,to/no))}mn.push(Yr),Kt.push(Hr)}return[mn,Kt]}(Pe,Ce,nt,Ye,_t)}(v,h,O,D,M,x,re,B,q,v.center.lat,a.tileID.canonical),fe=a.queryGeometry;return function(be,Pe,Ce){let nt=1/0;n2(Ce,Pe)&&(nt=D2(Ce,Pe[0]));for(let Ye=0;Ye<Pe.length;Ye++){const _t=Pe[Ye],$t=be[Ye];for(let at=0;at<_t.length-1;at++){const Tt=_t[at],Mt=[Tt,_t[at+1],$t[at+1],$t[at],Tt];t2(Ce,Mt)&&(nt=Math.min(nt,D2(Ce,Mt)))}}return nt!==1/0&&nt}(me,Te,fe.isPointQuery()?fe.screenBounds:fe.screenGeometry)}},line:class extends Xs{constructor(a){super(a,z2),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof Rf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,r){super.recalculate(a,r),this.paint._values["line-floorwidth"]=R2.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new $v(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new ec(this,a)}queryRadius(a){const r=a,l=O2(ph("line-width",this,r),ph("line-gap-width",this,r)),h=ph("line-offset",this,r);return l/2+Math.abs(h)+Av(this.paint.get("line-translate"))}queryIntersectsFeature(a,r,l,h,p,v){if(a.queryGeometry.isAboveHorizon)return!1;const x=s2(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),T=a.pixelToTileUnitsFactor/2*O2(this.paint.get("line-width").evaluate(r,l),this.paint.get("line-gap-width").evaluate(r,l)),E=this.paint.get("line-offset").evaluate(r,l);return E&&(h=function(M,D){const O=[],B=new Y(0,0);for(let W=0;W<M.length;W++){const q=M[W],K=[];for(let re=0;re<q.length;re++){const me=q[re-1],Te=q[re],fe=q[re+1],be=re===0?B:Te.sub(me)._unit()._perp(),Pe=re===q.length-1?B:fe.sub(Te)._unit()._perp(),Ce=be._add(Pe)._unit();Ce._mult(1/(Ce.x*Pe.x+Ce.y*Pe.y)),K.push(Ce._mult(D)._add(Te))}O.push(K)}return O}(h,E*a.pixelToTileUnitsFactor)),function(M,D,O){for(let B=0;B<D.length;B++){const W=D[B];if(M.length>=3){for(let q=0;q<W.length;q++)if(Su(M,W[q]))return!0}if(yO(M,W,O))return!0}return!1}(x,h,T)}isTileClipped(){return!0}},symbol:Jv,background:class extends Xs{constructor(a){super(a,l3)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Xs{constructor(a){super(a,c3)}getProgramIds(){return["raster"]}},sky:class extends Xs{constructor(a){super(a,d3),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=rx({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(a,r){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),p=!h,v=a.style.light,x=v.properties.get("position");return p&&v.properties.get("anchor")==="viewport"&&he("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?Cx(x.azimuthal,90-x.polar,r):Cx(h[0],90-h[1],r)}const l=this.paint.get("sky-gradient-center");return Cx(l[0],90-l[1],r)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class $p{constructor(r,l,h,p){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(l,p)}update(r,l,h){const{width:p,height:v}=r,{context:x}=this,{gl:T}=x,{HTMLImageElement:E,HTMLCanvasElement:M,HTMLVideoElement:D,ImageData:O,ImageBitmap:B}=m;if(T.bindTexture(T.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!l||l.premultiply!==!1)),h||this.size&&this.size[0]===p&&this.size[1]===v){const{x:W,y:q}=h||{x:0,y:0};r instanceof E||r instanceof M||r instanceof D||r instanceof O||B&&r instanceof B?T.texSubImage2D(T.TEXTURE_2D,0,W,q,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,W,q,p,v,T.RGBA,T.UNSIGNED_BYTE,r.data)}else this.size=[p,v],r instanceof E||r instanceof M||r instanceof D||r instanceof O||B&&r instanceof B?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,p,v,0,this.format,T.UNSIGNED_BYTE,r.data);this.useMipmap=!!(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&T.generateMipmap(T.TEXTURE_2D)}bind(r,l){const{context:h}=this,{gl:p}=h;p.bindTexture(p.TEXTURE_2D,this.texture),r!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?r===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:r),this.filter=r),l!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,l),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class f3{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class p3{constructor(){this.tasks={},this.taskQueue=[],yt(["process"],this),this.invoker=new f3(this.process),this.nextId=0}add(r,l){const h=this.nextId++,p=function({type:v,isSymbolTile:x,zoom:T}){return T=T||0,v==="message"?0:v!=="maybePrepare"||x?v!=="parseTile"||x?v==="parseTile"&&x?300-T:v==="maybePrepare"&&x?400-T:500:200-T:100-T}(l);if(p===0){lt();try{r()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:r,metadata:l,priority:p,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){lt();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const l=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let r=null,l=1/0;for(let p=0;p<this.taskQueue.length;p++){const v=this.tasks[this.taskQueue[p]];v.priority<l&&(l=v.priority,r=p)}if(r===null)return null;const h=this.taskQueue[r];return this.taskQueue.splice(r,1),h}remove(){this.invoker.remove()}}class gS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const h=r[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const m3=["tile","layer","source","sourceLayer","state"];class vS{constructor(r,l,h,p,v){this.type="Feature",this._vectorTileFeature=r,this._z=l,this._x=h,this._y=p,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(r.id=this.id);for(const l of m3)this[l]!==void 0&&(r[l]=this[l]);return r}}const ks=32,Sa=33,oc=new Uint16Array(8184);for(let a=0;a<2046;a++){let r=a+2,l=0,h=0,p=0,v=0,x=0,T=0;for(1&r?p=v=x=ks:l=h=T=ks;(r>>=1)>1;){const M=l+p>>1,D=h+v>>1;1&r?(p=l,v=h,l=x,h=T):(l=p,h=v,p=x,v=T),x=M,T=D}const E=4*a;oc[E+0]=l,oc[E+1]=h,oc[E+2]=p,oc[E+3]=v}const Ea=new Uint16Array(2178),sc=new Uint8Array(1089),Qv=new Uint16Array(1089);function _S(a){return a===0?-.03125:a===32?.03125:0}var yS=xn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const xS={type:2,extent:Rn,loadGeometry:()=>[[new Y(0,0),new Y(8193,0),new Y(8193,8193),new Y(0,8193),new Y(0,0)]]};class Sx{constructor(r,l,h,p,v){this.tileID=r,this.uid=on(),this.uses=0,this.tileSize=l,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(r){const l=r+this.timeAdded;l<Yn.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Mu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,l,h){if(this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,v){const x={};if(!v)return x;for(const T of p){const E=T.layerIds.map(M=>v.getLayer(M)).filter(Boolean);if(E.length!==0){T.layers=E,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(M=>E.filter(D=>D.id===M)[0]));for(const M of E)x[M.id]=T}}return x}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const v=this.buckets[p];if(v instanceof ic){if(this.hasSymbolBuckets=!0,!h)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const v=this.buckets[p];if(v instanceof ic&&v.hasRTLText){this.hasRTLText=!0,Ie.isLoading()||Ie.isLoaded()||ke()!=="deferred"||Se();break}}this.queryPadding=0;for(const p in this.buckets){const v=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new I0}unloadVectorData(){if(this.hasData()){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(const h in this.buckets){const p=this.buckets[h];p.uploadPending()&&p.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $p(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $p(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new $p(r,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,h,p,v,x,T,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:T,transform:x,params:v,tileTransform:this.tileTransform},r,l,h):{}}querySourceFeatures(r,l){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const p=h.loadVTLayers(),v=l?l.sourceLayer:"",x=p._geojsonTileLayer||p[v];if(!x)return;const T=Kd(l&&l.filter),{z:E,x:M,y:D}=this.tileID.canonical,O={z:E,x:M,y:D};for(let B=0;B<x.length;B++){const W=x.feature(B);if(T.needGeometry){const re=Cu(W,!0);if(!T.filter(new We(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!T.filter(new We(this.tileID.overscaledZ),W))continue;const q=h.getId(W,v),K=new vS(W,E,M,D,q);K.tile=O,r.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const h=gt(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const h=Date.now();let p=!1;if(this.expirationTime>h)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const v=this.expirationTime-l;v?this.expirationTime=h+Math.max(v,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0||!l)return;const h=this.latestFeatureIndex.loadVTLayers(),p=l.style.listImages();for(const v in this.buckets){if(!l.style.hasLayer(v))continue;const x=this.buckets[v],T=x.layers[0].sourceLayer||"_geojsonTileLayer",E=h[T],M=r[T];if(!E||!M||Object.keys(M).length===0)continue;if(x.update(M,E,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof $v||x instanceof Rv){const O=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&O&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(O.id,this.tileID)}const D=l&&l.style&&l.style.getLayer(v);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Yn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=Yn.now()+r}setTexture(r,l){const h=l.context,p=h.gl;this.texture=this.texture||l.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new $p(h,r,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(r,l){const h={};for(const p of l)h[p]=!0;this.dependencies[r]=h}hasDependency(r,l){for(const h of r){const p=this.dependencies[h];if(p){for(const v of l)if(p[v])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const h=ol(xS,this.tileID.canonical,this.tileTransform)[0],p=new Mn,v=new ya;for(let x=0;x<h.length;x++){const{x:T,y:E}=h[x];p.emplaceBack(T,E),v.emplaceBack(x)}v.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(v),this._tileDebugBuffer=r.createVertexBuffer(p,vp.members),this._tileDebugSegments=Mi.simpleSegment(0,0,p.length,v.length)}_makeTileBoundsBuffers(r,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const h=ol(xS,this.tileID.canonical,this.tileTransform)[0];let p,v;if(this.isRaster){const x=function(T,E){const M=Mu(T,E),D=Math.pow(2,T.z);for(let re=0;re<Sa;re++)for(let me=0;me<Sa;me++){const Te=gs((T.x+(me+_S(me))/ks)/D),fe=fo((T.y+(re+_S(re))/ks)/D),be=E.project(Te,fe),Pe=re*Sa+me;Ea[2*Pe+0]=Math.round((be.x*M.scale-M.x)*Rn),Ea[2*Pe+1]=Math.round((be.y*M.scale-M.y)*Rn)}sc.fill(0),Qv.fill(0);for(let re=2045;re>=0;re--){const me=4*re,Te=oc[me+0],fe=oc[me+1],be=oc[me+2],Pe=oc[me+3],Ce=Te+be>>1,nt=fe+Pe>>1,Ye=Ce+nt-fe,_t=nt+Te-Ce,$t=fe*Sa+Te,at=Pe*Sa+be,Tt=nt*Sa+Ce,Mt=Math.hypot((Ea[2*$t+0]+Ea[2*at+0])/2-Ea[2*Tt+0],(Ea[2*$t+1]+Ea[2*at+1])/2-Ea[2*Tt+1])>=16;if(sc[Tt]=sc[Tt]||(Mt?1:0),re<1022){const Ot=(fe+_t>>1)*Sa+(Te+Ye>>1),Ut=(Pe+_t>>1)*Sa+(be+Ye>>1);sc[Tt]=sc[Tt]||sc[Ot]||sc[Ut]}}const O=new Sr,B=new ho;let W=0;function q(re,me){const Te=me*Sa+re;return Qv[Te]===0&&(O.emplaceBack(Ea[2*Te+0],Ea[2*Te+1],re*Rn/ks,me*Rn/ks),Qv[Te]=++W),Qv[Te]-1}function K(re,me,Te,fe,be,Pe){const Ce=re+Te>>1,nt=me+fe>>1;if(Math.abs(re-be)+Math.abs(me-Pe)>1&&sc[nt*Sa+Ce])K(be,Pe,re,me,Ce,nt),K(Te,fe,be,Pe,Ce,nt);else{const Ye=q(re,me),_t=q(Te,fe),$t=q(be,Pe);B.emplaceBack(Ye,_t,$t)}}return K(0,0,ks,ks,ks,0),K(ks,ks,0,0,0,ks),{vertices:O,indices:B}}(this.tileID.canonical,l);p=x.vertices,v=x.indices}else{p=new Sr,v=new ho;for(const{x:T,y:E}of h)p.emplaceBack(T,E,0,0);const x=mh(p.int16,void 0,4);for(let T=0;T<x.length;T+=3)v.emplaceBack(x[T],x[T+1],x[T+2])}this._tileBoundsBuffer=r.createVertexBuffer(p,yS.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(v),this._tileBoundsSegments=Mi.simpleSegment(0,0,p.length,v.length)}_makeGlobeTileDebugBuffers(r,l){const h=l.projection;if(!h||h.name!=="globe"||l.freezeTileCoverage)return;const p=this.tileID.canonical,v=xp(WC(p,l)),x=hh(l.zoom);let T;x>0&&(T=B0(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,p,l,v,T,x),this._makeGlobeTileDebugTextBuffer(r,p,l,v,T,x)}_globePoint(r,l,h,p,v,x,T){let E=yp(r,l,h);if(x){const M=1<<h.z,D=wa(p.center.lng),O=Ta(p.center.lat),B=(h.x+.5)/M-D;let W=0;B>.5?W=-1:B<-.5&&(W=1);let q=(r/Rn+h.x)/M+W,K=(l/Rn+h.y)/M;q=(q-D)*p._pixelsPerMercatorPixel+D,K=(K-O)*p._pixelsPerMercatorPixel+O;const re=[q*p.worldSize,K*p.worldSize,0];wi(re,re,x),E=Tu(E,re,T)}return wi(E,E,v)}_makeGlobeTileDebugBorderBuffer(r,l,h,p,v,x){const T=new Mn,E=new ya,M=new Tr,D=(B,W,q,K,re)=>{const me=(q-B)/(re-1),Te=(K-W)/(re-1),fe=T.length;for(let be=0;be<re;be++){const Pe=B+be*me,Ce=W+be*Te;T.emplaceBack(Pe,Ce);const nt=this._globePoint(Pe,Ce,l,h,p,v,x);M.emplaceBack(nt[0],nt[1],nt[2]),E.emplaceBack(fe+be)}},O=Rn;D(0,0,O,0,16),D(O,0,O,O,16),D(O,O,0,O,16),D(0,O,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(E),this._tileDebugBuffer=r.createVertexBuffer(T,vp.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(M,VC.members),this._tileDebugSegments=Mi.simpleSegment(0,0,T.length,E.length)}_makeGlobeTileDebugTextBuffer(r,l,h,p,v,x){const T=new Mn,E=new ho,M=new Tr,D=25;E.reserve(32),T.reserve(D),M.reserve(D);const O=(B,W)=>D*B+W;for(let B=0;B<D;B++){const W=2048*B;for(let q=0;q<D;q++){const K=2048*q;T.emplaceBack(K,W);const re=this._globePoint(K,W,l,h,p,v,x);M.emplaceBack(re[0],re[1],re[2])}}for(let B=0;B<4;B++)for(let W=0;W<4;W++){const q=O(B,W),K=O(B,W+1),re=O(B+1,W),me=O(B+1,W+1);E.emplaceBack(q,K,re),E.emplaceBack(re,K,me)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(E),this._tileDebugTextBuffer=r.createVertexBuffer(T,vp.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(M,VC.members),this._tileDebugTextSegments=Mi.simpleSegment(0,0,D,32)}}class g3{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,h){const p=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},ut(this.stateChanges[r][p],h),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==p&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(const v in this.state[r][p])h[v]||(this.deletedStates[r][p][v]=null)}else for(const v in h)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][v]===null&&delete this.deletedStates[r][p][v]}removeFeatureState(r,l,h){if(this.deletedStates[r]===null)return;const p=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&l!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][h]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(h in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][h]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,l){const h=String(l),p=ut({},(this.state[r]||{})[h],(this.stateChanges[r]||{})[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][l];if(v===null)return{};for(const x in v)delete p[x]}return p}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const h={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const v={};for(const x in this.stateChanges[p])this.state[p][x]||(this.state[p][x]={}),ut(this.state[p][x],this.stateChanges[p][x]),v[x]=this.state[p][x];h[p]=v}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const v={};if(this.deletedStates[p]===null)for(const x in this.state[p])v[x]={},this.state[p][x]={};else for(const x in this.deletedStates[p]){if(this.deletedStates[p][x]===null)this.state[p][x]={};else if(this.state[p][x])for(const T of Object.keys(this.deletedStates[p][x]))delete this.state[p][x][T];v[x]=this.state[p][x]}h[p]=h[p]||{},ut(h[p],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const p in r)r[p].setFeatureState(h,l)}}class bS{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,l){const h=this.toIdx(r,l);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(r,l){return this.leaves[this.toIdx(r,l)]}toIdx(r,l){return l*this.size+r}}function wS(a,r,l,h){let p=0,v=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(h[x])<1e-15){if(l[x]<a[x]||l[x]>r[x])return null}else{const T=1/h[x];let E=(a[x]-l[x])*T,M=(r[x]-l[x])*T;if(E>M){const D=E;E=M,M=D}if(E>p&&(p=E),M<v&&(v=M),p>v)return null}return p}function TS(a,r,l,h,p,v,x,T,E,M,D){const O=h-a,B=p-r,W=v-l,q=x-a,K=T-r,re=E-l,me=D[1]*re-D[2]*K,Te=D[2]*q-D[0]*re,fe=D[0]*K-D[1]*q,be=O*me+B*Te+W*fe;if(Math.abs(be)<1e-15)return null;const Pe=1/be,Ce=M[0]-a,nt=M[1]-r,Ye=M[2]-l,_t=(Ce*me+nt*Te+Ye*fe)*Pe;if(_t<0||_t>1)return null;const $t=nt*W-Ye*B,at=Ye*O-Ce*W,Tt=Ce*B-nt*O,Mt=(D[0]*$t+D[1]*at+D[2]*Tt)*Pe;return Mt<0||_t+Mt>1?null:(q*$t+K*at+re*Tt)*Pe}function CS(a,r,l){return(a-r)/(l-r)}function SS(a,r,l,h,p,v,x,T,E){const M=1<<l,D=v-h,O=x-p,B=(a+1)/M*D+h,W=(r+0)/M*O+p,q=(r+1)/M*O+p;T[0]=(a+0)/M*D+h,T[1]=W,E[0]=B,E[1]=q}class ES{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(v){const x=Math.ceil(Math.log2(v.dim/8)),T=[];let E=Math.ceil(Math.pow(2,x));const M=1/E,D=(W,q,K,re,me)=>{const Te=re?1:0,fe=(W+1)*K-Te,be=q*K,Pe=(q+1)*K-Te;me[0]=W*K,me[1]=be,me[2]=fe,me[3]=Pe};let O=new bS(E);const B=[];for(let W=0;W<E*E;W++){D(W%E,Math.floor(W/E),M,!1,B);const q=ac(B[0],B[1],v),K=ac(B[2],B[1],v),re=ac(B[2],B[3],v),me=ac(B[0],B[3],v);O.minimums.push(Math.min(q,K,re,me)),O.maximums.push(Math.max(q,K,re,me)),O.leaves.push(1)}for(T.push(O),E/=2;E>=1;E/=2){const W=T[T.length-1];O=new bS(E);for(let q=0;q<E*E;q++){D(q%E,Math.floor(q/E),2,!0,B);const K=W.getElevation(B[0],B[1]),re=W.getElevation(B[2],B[1]),me=W.getElevation(B[2],B[3]),Te=W.getElevation(B[0],B[3]),fe=W.isLeaf(B[0],B[1]),be=W.isLeaf(B[2],B[1]),Pe=W.isLeaf(B[2],B[3]),Ce=W.isLeaf(B[0],B[3]),nt=Math.min(K.min,re.min,me.min,Te.min),Ye=Math.max(K.max,re.max,me.max,Te.max),_t=fe&&be&&Pe&&Ce;O.maximums.push(Ye),O.minimums.push(nt),O.leaves.push(Ye-nt<=5&&_t?1:0)}T.push(O)}return T}(this.dem),h=l.length-1,p=l[h];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(l,0,0,h,0)}raycastRoot(r,l,h,p,v,x,T=1){return wS([r,l,-100],[h,p,this.maximums[0]*T],v,x)}raycast(r,l,h,p,v,x,T=1){if(!this.nodeCount)return null;const E=this.raycastRoot(r,l,h,p,v,x,T);if(E==null)return null;const M=[],D=[],O=[],B=[],W=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;W.length>0;){const{idx:q,t:K,nodex:re,nodey:me,depth:Te}=W.pop();if(this.leaves[q]){SS(re,me,Te,r,l,h,p,O,B);const be=1<<Te,Pe=(re+0)/be,Ce=(re+1)/be,nt=(me+0)/be,Ye=(me+1)/be,_t=ac(Pe,nt,this.dem)*T,$t=ac(Ce,nt,this.dem)*T,at=ac(Ce,Ye,this.dem)*T,Tt=ac(Pe,Ye,this.dem)*T,Mt=TS(O[0],O[1],_t,B[0],O[1],$t,B[0],B[1],at,v,x),Ot=TS(B[0],B[1],at,O[0],B[1],Tt,O[0],O[1],_t,v,x),Ut=Math.min(Mt!==null?Mt:Number.MAX_VALUE,Ot!==null?Ot:Number.MAX_VALUE);if(Ut!==Number.MAX_VALUE)return Ut;{const ct=mp([],v,x,K);if(MS(_t,$t,Tt,at,CS(ct[0],O[0],B[0]),CS(ct[1],O[1],B[1]))>=ct[2])return K}continue}let fe=0;for(let be=0;be<this._siblingOffset.length;be++){SS((re<<1)+this._siblingOffset[be][0],(me<<1)+this._siblingOffset[be][1],Te+1,r,l,h,p,O,B),O[2]=-100,B[2]=this.maximums[this.childOffsets[q]+be]*T;const Pe=wS(O,B,v,x);if(Pe!=null){const Ce=Pe;M[be]=Ce;let nt=!1;for(let Ye=0;Ye<fe&&!nt;Ye++)Ce>=M[D[Ye]]&&(D.splice(Ye,0,be),nt=!0);nt||(D[fe]=be),fe++}}for(let be=0;be<fe;be++){const Pe=D[be];W.push({idx:this.childOffsets[q]+Pe,t:M[Pe],nodex:(re<<1)+this._siblingOffset[Pe][0],nodey:(me<<1)+this._siblingOffset[Pe][1],depth:Te+1})}}return null}_addNode(r,l,h){return this.minimums.push(r),this.maximums.push(l),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(r,l,h,p,v){if(r[p].isLeaf(l,h)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const x=p-1,T=r[x];let E=0,M=0;for(let D=0;D<this._siblingOffset.length;D++){const O=2*l+this._siblingOffset[D][0],B=2*h+this._siblingOffset[D][1],W=T.getElevation(O,B),q=T.isLeaf(O,B),K=this._addNode(W.min,W.max,q);q&&(E|=1<<D),M||(M=K)}for(let D=0;D<this._siblingOffset.length;D++)E&1<<D||this._construct(r,2*l+this._siblingOffset[D][0],2*h+this._siblingOffset[D][1],x,M+D)}}function MS(a,r,l,h,p,v){return hr(hr(a,l,v),hr(r,h,v),p)}function ac(a,r,l){const h=l.dim,p=Be(a*h-.5,0,h-1),v=Be(r*h-.5,0,h-1),x=Math.floor(p),T=Math.floor(v),E=Math.min(x+1,h-1),M=Math.min(T+1,h-1);return MS(l.get(x,T),l.get(E,T),l.get(x,M),l.get(E,M),p-x,v-T)}const PS={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function v3(a,r,l){return(256*a*256+256*r+l)/10-1e4}function _3(a,r,l){return 256*a+r+l/256-32768}class e_{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,l,h,p=!1,v=!1){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return he(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,T=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=h||"mapbox",this.borderReady=p,!p){for(let E=0;E<x;E++)T[this._idx(-1,E)]=T[this._idx(0,E)],T[this._idx(x,E)]=T[this._idx(x-1,E)],T[this._idx(E,-1)]=T[this._idx(E,0)],T[this._idx(E,x)]=T[this._idx(E,x-1)];T[this._idx(-1,-1)]=T[this._idx(0,0)],T[this._idx(x,-1)]=T[this._idx(x-1,0)],T[this._idx(-1,x)]=T[this._idx(0,x-1)],T[this._idx(x,x)]=T[this._idx(x-1,x-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ES(this)}get(r,l,h=!1){h&&(r=Be(r,-1,this.dim),l=Be(l,-1,this.dim));const p=4*this._idx(r,l);return(this.encoding==="terrarium"?_3:v3)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(r){return PS[r]}get unpackVector(){return PS[this.encoding]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}static pack(r,l){const h=[0,0,0,0],p=e_.getUnpackVector(l);let v=Math.floor((r+p[3])/p[2]);return h[2]=v%256,v=Math.floor(v/256),h[1]=v%256,v=Math.floor(v/256),h[0]=v,h}getPixels(){return new os({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,l,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,v=l*this.dim+this.dim,x=h*this.dim,T=h*this.dim+this.dim;switch(l){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=T-1;break;case 1:T=x+1}const E=-l*this.dim,M=-h*this.dim;for(let D=x;D<T;D++)for(let O=p;O<v;O++){const B=4*this._idx(O,D),W=4*this._idx(O+E,D+M);this.pixels[B+0]=r.pixels[W+0],this.pixels[B+1]=r.pixels[W+1],this.pixels[B+2]=r.pixels[W+2],this.pixels[B+3]=r.pixels[W+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}un(e_,"DEMData"),un(ES,"DemMinMaxQuadTree",{omit:["dem"]});class y3{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,h){const p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:l,timeout:void 0};if(h!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},h)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const h=r.wrapped().key,p=l===void 0?0:this.data[h].indexOf(l),v=this.data[h][p];return this.data[h].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(v.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const h in this.data)for(const p of this.data[h])r(p.value)||l.push(p);for(const h of l)this.remove(h.value.tileID,h)}}class Eh{constructor(r,l,h){this.func=r,this.mask=l,this.range=h}}Eh.ReadOnly=!1,Eh.ReadWrite=!0,Eh.disabled=new Eh(519,Eh.ReadOnly,[0,1]);const Ex=7680;class Mx{constructor(r,l,h,p,v,x){this.test=r,this.ref=l,this.mask=h,this.fail=p,this.depthFail=v,this.pass=x}}Mx.disabled=new Mx({func:519,mask:0},0,0,Ex,Ex,Ex);class Ma{constructor(r,l,h){this.blendFunction=r,this.blendColor=l,this.mask=h}}Ma.Replace=[1,0],Ma.disabled=new Ma(Ma.Replace,bi.transparent,[!1,!1,!1,!1]),Ma.unblended=new Ma(Ma.Replace,bi.transparent,[!0,!0,!0,!0]),Ma.alphaBlended=new Ma([1,771],bi.transparent,[!0,!0,!0,!0]);const Px=1029,Ax=2305;class ea{constructor(r,l,h){this.enable=r,this.mode=l,this.frontFace=h}}ea.disabled=new ea(!1,Px,Ax),ea.backCCW=new ea(!0,Px,Ax),ea.backCW=new ea(!0,Px,2304),ea.frontCW=new ea(!0,1028,2304),ea.frontCCW=new ea(!0,1028,Ax);class Pu extends Vo{constructor(r,l,h){super(),this.id=r,this._onlySymbols=h,l.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new y3(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new g3,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(r){this.map=r,this._minTileCacheSize=this._minTileCacheSize===void 0&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,l){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,l)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const h=this._tiles[l];h.upload(r),h.prepare(this.map.style.imageManager)}}getIds(){return Ke(this._tiles).map(r=>r.tileID).sort(AS).map(r=>r.key)}getRenderableIds(r){const l=[];for(const h in this._tiles)this._isIdRenderable(+h,r)&&l.push(this._tiles[h]);return r?l.sort((h,p)=>{const v=h.tileID,x=p.tileID,T=new Y(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),E=new Y(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-x.overscaledZ||E.y-T.y||E.x-T.x}).map(h=>h.tileID.key):l.map(h=>h.tileID).sort(AS).map(h=>h.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(+r,"reloading")}}_reloadTile(r,l){const h=this._tiles[r];h&&(h.state!=="loading"&&(h.state=l),this._loadTile(h,this._tileLoaded.bind(this,h,r,l)))}_tileLoaded(r,l,h,p){if(p)if(r.state="errored",p.status!==404)this._source.fire(new Jo(p,{tile:r}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else r.timeAdded=Yn.now(),h==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this._source.type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new yr("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const v=l[p];if(r.neighboringTiles&&r.neighboringTiles[v]){const x=this.getTileByID(v);h(r,x),h(x,r)}}function h(p,v){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let x=v.tileID.canonical.x-p.tileID.canonical.x;const T=v.tileID.canonical.y-p.tileID.canonical.y,E=Math.pow(2,p.tileID.canonical.z),M=v.tileID.key;x===0&&T===0||Math.abs(T)>1||(Math.abs(x)>1&&(Math.abs(x+E)===1?x+=E:Math.abs(x-E)===1&&(x-=E)),v.dem&&p.dem&&(p.dem.backfillBorder(v.dem,x,T),p.neighboringTiles&&p.neighboringTiles[M]&&(p.neighboringTiles[M].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,h,p){for(const v in this._tiles){let x=this._tiles[v];if(p[v]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>h)continue;let T=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const M=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[M.key],x&&x.hasData()&&(T=M)}let E=T;for(;E.overscaledZ>l;)if(E=E.scaledTo(E.overscaledZ-1),r[E.key]){p[T.key]=T;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const h=this._loadedParentTiles[r.key];return h&&h.tileID.overscaledZ>=l?h:null}for(let h=r.overscaledZ-1;h>=l;h--){const p=r.scaledTo(h),v=this._getLoadedTile(p);if(v)return v}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,l){l=l||this._source.tileSize;const h=Math.ceil(r.width/l)+1,p=Math.ceil(r.height/l)+1,v=Math.floor(h*p*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,v):v,T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(T)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const h={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),h[v.tileID.key]=v}this._tiles=h;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(r,l,h){if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let p;this.updateCacheSize(r,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(T=>new Io(T.canonical.z,T.wrap,T.canonical.z,T.canonical.x,T.canonical.y)):(p=r.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(T=>this._source.hasTile(T)))):p=[];const v=this._updateRetainedTiles(p);if(kS(this._source.type)&&p.length!==0){const T={},E={},M=Object.keys(v);for(const O of M){const B=v[O],W=this._tiles[O];if(!W||W.fadeEndTime&&W.fadeEndTime<=Yn.now())continue;const q=this.findLoadedParent(B,Math.max(B.overscaledZ-Pu.maxOverzooming,this._source.minzoom));q&&(this._addTile(q.tileID),T[q.tileID.key]=q.tileID),E[O]=B}const D=p[p.length-1].overscaledZ;for(const O in this._tiles){const B=this._tiles[O];if(v[O]||!B.hasData())continue;let W=B.tileID;for(;W.overscaledZ>D;){W=W.scaledTo(W.overscaledZ-1);const q=this._tiles[W.key];if(q&&q.hasData()&&E[W.key]){v[O]=B.tileID;break}}}for(const O in T)v[O]||(this._coveredTiles[O]=!0,v[O]=T[O])}for(const T in v)this._tiles[T].clearFadeHold();const x=function(T,E){const M=[];for(const D in T)D in E||M.push(D);return M}(this._tiles,v);for(const T of x){const E=this._tiles[T];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+T)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){const l={};if(r.length===0)return l;const h={},p=r.reduce((M,D)=>Math.min(M,D.overscaledZ),1/0),v=r[0].overscaledZ,x=Math.max(v-Pu.maxOverzooming,this._source.minzoom),T=Math.max(v+Pu.maxUnderzooming,this._source.minzoom),E={};for(const M of r){const D=this._addTile(M);l[M.key]=M,D.hasData()||p<this._source.maxzoom&&(E[M.key]=M)}this._retainLoadedChildren(E,p,T,l);for(const M of r){let D=this._tiles[M.key];if(D.hasData())continue;if(M.canonical.z>=this._source.maxzoom){const B=M.children(this._source.maxzoom)[0],W=this.getTile(B);if(W&&W.hasData()){l[B.key]=B;continue}}else{const B=M.children(this._source.maxzoom);if(l[B[0].key]&&l[B[1].key]&&l[B[2].key]&&l[B[3].key])continue}let O=D.wasRequested();for(let B=M.overscaledZ-1;B>=x;--B){const W=M.scaledTo(B);if(h[W.key]||(h[W.key]=!0,D=this.getTile(W),!D&&O&&(D=this._addTile(W)),D&&(l[W.key]=W,O=D.wasRequested(),D.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let h,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}l.push(p.key);const v=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(v),h)break;p=v}for(const v of l)this._loadedParentTiles[v]=h}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const h=!!l;if(!h){const p=this.map?this.map.painter:null;l=new Sx(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,r.key,l.state))}return l?(l.uses++,this._tiles[r.key]=l,h||this._source.fire(new yr("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const h=l.getExpiryTimeout();h&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},h))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,l,h){const p=[],v=this.transform;if(!v)return p;const x=v.projection.name==="globe",T=wa(v.center.lng);for(const E in this._tiles){const M=this._tiles[E];if(h&&M.clearQueryDebugViz(),M.holdingForFade())continue;let D;if(x){const O=M.tileID.canonical;if(O.z===0){const B=[Math.abs(Be(T,...Np(O,-1))-T),Math.abs(Be(T,...Np(O,1))-T)];D=[0,2*B.indexOf(Math.min(...B))-1]}else{const B=[Math.abs(Be(T,...Np(O,-1))-T),Math.abs(Be(T,...Np(O,0))-T),Math.abs(Be(T,...Np(O,1))-T)];D=[B.indexOf(Math.min(...B))-1]}}else D=[0];for(const O of D){const B=r.containsTile(M,v,l,O);B&&p.push(B)}}return p}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(h=>this._tiles[h].tileID);for(const h of l)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(kS(this._source.type))for(const r in this._tiles){const l=this._tiles[r];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=Yn.now())return!0}return!1}setFeatureState(r,l,h){this._state.updateState(r=r||"_geojsonTileLayer",l,h)}removeFeatureState(r,l,h){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,h)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,h){const p=this._tiles[r];p&&p.setDependencies(l,h)}reloadTilesForDependencies(r,l){for(const h in this._tiles)this._tiles[h].hasDependency(r,l)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(r,l))}_preloadTiles(r,l){const h=new Map,p=Array.isArray(r)?r:[r],v=this.map.painter.terrain,x=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const T of p){const E=T.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const M of E)h.set(M.key,M);this.usedForTerrain&&T.updateElevation(!1)}Pt(Array.from(h.values()),(T,E)=>{const M=new Sx(T,this._source.tileSize*T.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(M,D=>{this._source.type==="raster-dem"&&M.dem&&this._backfillDEM(M),E(D,M)})},l)}}function AS(a,r){const l=Math.abs(2*a.wrap)-+(a.wrap<0),h=Math.abs(2*r.wrap)-+(r.wrap<0);return a.overscaledZ-r.overscaledZ||h-l||r.canonical.y-a.canonical.y||r.canonical.x-a.canonical.x}function kS(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function Np(a,r){const l=1<<a.z;return[a.x/l+r,(a.x+1)/l+r]}Pu.maxOverzooming=10,Pu.maxUnderzooming=3;class t_{constructor(r,l,h){this._demTile=r,this._dem=this._demTile.dem,this._scale=l,this._offset=h}static create(r,l,h){const p=h||r.findDEMTileFor(l);if(!p||!p.dem)return;const v=p.dem,x=p.tileID,T=1<<l.canonical.z-x.canonical.z;return new t_(p,p.tileSize/Rn/T,[(l.canonical.x/T-x.canonical.x)*v.dim,(l.canonical.y/T-x.canonical.y)*v.dim])}tileCoordToPixel(r,l){const h=l*this._scale+this._offset[1],p=Math.floor(r*this._scale+this._offset[0]),v=Math.floor(h);return new Y(p,v)}getElevationAt(r,l,h,p){const v=r*this._scale+this._offset[0],x=l*this._scale+this._offset[1],T=Math.floor(v),E=Math.floor(x),M=this._dem;return p=!!p,h?hr(hr(M.get(T,E,p),M.get(T,E+1,p),x-E),hr(M.get(T+1,E,p),M.get(T+1,E+1,p),x-E),v-T):M.get(T,E,p)}getElevationAtPixel(r,l,h){return this._dem.get(r,l,!!h)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*Qs(1,r)*this._dem.stride}}class DS{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Yl(Rn,16,0),this.featureIndexArray=new bC,this.promoteId=l}insert(r,l,h,p,v,x=0){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v,x);const E=this.grid;for(let M=0;M<l.length;M++){const D=l[M],O=[1/0,1/0,-1/0,-1/0];for(let B=0;B<D.length;B++){const W=D[B];O[0]=Math.min(O[0],W.x),O[1]=Math.min(O[1],W.y),O[2]=Math.max(O[2],W.x),O[3]=Math.max(O[3],W.y)}O[0]<Rn&&O[1]<Rn&&O[2]>=0&&O[3]>=0&&E.insert(T,O[0],O[1],O[2],O[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ux(new Ip(this.rawTileData)).layers,this.sourceLayerCoder=new gS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,l,h,p){this.loadVTLayers();const v=r.params||{},x=Kd(v.filter),T=r.tileResult,E=r.transform,M=T.bufferedTilespaceBounds,D=this.grid.query(M.min.x,M.min.y,M.max.x,M.max.y,(q,K,re,me)=>o2(T.bufferedTilespaceGeometry,q,K,re,me));D.sort(x3);let O=null;E.elevation&&D.length>0&&(O=t_.create(E.elevation,this.tileID));const B={};let W;for(let q=0;q<D.length;q++){const K=D[q];if(K===W)continue;W=K;const re=this.featureIndexArray.get(K);let me=null;this.loadMatchingFeature(B,re,x,v.layers,v.availableImages,l,h,p,(Te,fe,be,Pe=0)=>(me||(me=ol(Te,this.tileID.canonical,r.tileTransform)),fe.queryIntersectsFeature(T,Te,be,me,this.z,r.transform,r.pixelPosMatrix,O,Pe)))}return B}loadMatchingFeature(r,l,h,p,v,x,T,E,M){const{featureIndex:D,bucketIndex:O,sourceLayerIndex:B,layoutVertexArrayOffset:W}=l,q=this.bucketLayerIDs[O];if(p&&!function(Te,fe){for(let be=0;be<Te.length;be++)if(fe.indexOf(Te[be])>=0)return!0;return!1}(p,q))return;const K=this.sourceLayerCoder.decode(B),re=this.vtLayers[K].feature(D);if(h.needGeometry){const Te=Cu(re,!0);if(!h.filter(new We(this.tileID.overscaledZ),Te,this.tileID.canonical))return}else if(!h.filter(new We(this.tileID.overscaledZ),re))return;const me=this.getId(re,K);for(let Te=0;Te<q.length;Te++){const fe=q[Te];if(p&&p.indexOf(fe)<0)continue;const be=x[fe];if(!be)continue;let Pe={};me!==void 0&&E&&(Pe=E.getState(be.sourceLayer||"_geojsonTileLayer",me));const Ce=ut({},T[fe]);Ce.paint=IS(Ce.paint,be.paint,re,Pe,v),Ce.layout=IS(Ce.layout,be.layout,re,Pe,v);const nt=!M||M(re,be,Pe,W);if(!nt)continue;const Ye=new vS(re,this.z,this.x,this.y,me);Ye.layer=Ce;let _t=r[fe];_t===void 0&&(_t=r[fe]=[]),_t.push({featureIndex:D,feature:Ye,intersectionZ:nt})}}lookupSymbolFeatures(r,l,h,p,v,x,T,E){const M={};this.loadVTLayers();const D=Kd(v);for(const O of r)this.loadMatchingFeature(M,{bucketIndex:h,sourceLayerIndex:p,featureIndex:O,layoutVertexArrayOffset:0},D,x,T,E,l);return M}loadFeature(r){const{featureIndex:l,sourceLayerIndex:h}=r;this.loadVTLayers();const p=this.sourceLayerCoder.decode(h),v=this.vtFeatures[p];if(v[l])return v[l];const x=this.vtLayers[p].feature(l);return v[l]=x,x}hasLayer(r){for(const l of this.bucketLayerIDs)for(const h of l)if(r===h)return!0;return!1}getId(r,l){let h=r.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];p!=null&&(h=r.properties[p]),typeof h=="boolean"&&(h=Number(h))}return h}}function IS(a,r,l,h,p){return Lt(a,(v,x)=>{const T=r instanceof tt?r.get(x):null;return T&&T.evaluate?T.evaluate(l,h,p):T})}function x3(a,r){return r-a}un(DS,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class zS{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.image=new sl({width:r,height:l}),this.positions={},this.uploaded=!1}getDash(r,l){const h=this.getKey(r,l);return this.positions[h]}trim(){const r=this.width,l=this.height=Dn(this.nextRow);this.image.resize({width:r,height:l})}getKey(r,l){return r.join(",")+l}getDashRanges(r,l,h){const p=[];let v=r.length%2==1?-r[r.length-1]*h:0,x=r[0]*h,T=!0;p.push({left:v,right:x,isDash:T,zeroLength:r[0]===0});let E=r[0];for(let M=1;M<r.length;M++){T=!T;const D=r[M];v=E*h,E+=D,x=E*h,p.push({left:v,right:x,isDash:T,zeroLength:D===0})}return p}addRoundDash(r,l,h){const p=l/2;for(let v=-h;v<=h;v++){const x=this.width*(this.nextRow+h+v);let T=0,E=r[T];for(let M=0;M<this.width;M++){M/E.right>1&&(E=r[++T]);const D=Math.abs(M-E.left),O=Math.abs(M-E.right),B=Math.min(D,O);let W;const q=v/h*(p+1);if(E.isDash){const K=p-Math.abs(q);W=Math.sqrt(B*B+K*K)}else W=p-Math.sqrt(B*B+q*q);this.image.data[x+M]=Math.max(0,Math.min(255,W+128))}}}addRegularDash(r,l){for(let E=r.length-1;E>=0;--E){const M=r[E],D=r[E+1];M.zeroLength?r.splice(E,1):D&&D.isDash===M.isDash&&(D.left=M.left,r.splice(E,1))}const h=r[0],p=r[r.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const v=this.width*this.nextRow;let x=0,T=r[x];for(let E=0;E<this.width;E++){E/T.right>1&&(T=r[++x]);const M=Math.abs(E-T.left),D=Math.abs(E-T.right),O=Math.min(M,D);this.image.data[v+E]=Math.max(0,Math.min(255,(T.isDash?O:-O)+l+128))}}addDash(r,l){const h=this.getKey(r,l);if(this.positions[h])return this.positions[h];const p=l==="round",v=p?7:0,x=2*v+1;if(this.nextRow+x>this.height)return he("LineAtlas out of space"),null;r.length===0&&r.push(1);let T=0;for(let D=0;D<r.length;D++)r[D]<0&&(he("Negative value is found in line dasharray, replacing values with 0"),r[D]=0),T+=r[D];if(T!==0){const D=this.width/T,O=this.getDashRanges(r,this.width,D);p?this.addRoundDash(O,D,v):this.addRegularDash(O,l==="square"?.5*D:0)}const E=this.nextRow+v;this.nextRow+=x;const M={tl:[E,v],br:[T,0]};return this.positions[h]=M,M}}un(zS,"LineAtlas");class RS{constructor(r){const l={},h=[];for(const T in r){const E=r[T],M=l[T]={};for(const D in E.glyphs){const O=E.glyphs[+D];if(!O||O.bitmap.width===0||O.bitmap.height===0)continue;const B=O.metrics.localGlyph?2:1,W={x:0,y:0,w:O.bitmap.width+2*B,h:O.bitmap.height+2*B};h.push(W),M[D]=W}}const{w:p,h:v}=fx(h),x=new sl({width:p||1,height:v||1});for(const T in r){const E=r[T];for(const M in E.glyphs){const D=E.glyphs[+M];if(!D||D.bitmap.width===0||D.bitmap.height===0)continue;const O=l[T][M],B=D.metrics.localGlyph?2:1;sl.copy(D.bitmap,x,{x:0,y:0},{x:O.x+B,y:O.y+B},D.bitmap)}}this.image=x,this.positions=l}}un(RS,"GlyphAtlas");class b3{constructor(r){this.tileID=new Io(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=Mu(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,l,h,p,v){this.status="parsing",this.data=r,this.collisionBoxArray=new I0;const x=new gS(Object.keys(r.layers).sort()),T=new DS(this.tileID,this.promoteId);T.bucketLayerIDs=[];const E={},M=new zS(256,256),D={featureIndex:T,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:M,availableImages:h},O=l.familiesBySource[this.source];for(const Pe in O){const Ce=r.layers[Pe];if(!Ce)continue;let nt=!1,Ye=!1;for(const at of O[Pe])at[0].type==="symbol"?nt=!0:Ye=!0;if(this.isSymbolTile===!0&&!nt||this.isSymbolTile===!1&&!Ye)continue;Ce.version===1&&he(`Vector tile source "${this.source}" layer "${Pe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _t=x.encode(Pe),$t=[];for(let at=0;at<Ce.length;at++){const Tt=Ce.feature(at),Mt=T.getId(Tt,Pe);$t.push({feature:Tt,id:Mt,index:at,sourceLayerIndex:_t})}for(const at of O[Pe]){const Tt=at[0];this.isSymbolTile!==void 0&&Tt.type==="symbol"!==this.isSymbolTile||Tt.minzoom&&this.zoom<Math.floor(Tt.minzoom)||Tt.maxzoom&&this.zoom>=Tt.maxzoom||Tt.visibility!=="none"&&(kx(at,this.zoom,h),(E[Tt.id]=Tt.createBucket({index:T.bucketLayerIDs.length,layers:at,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_t,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate($t,D,this.tileID.canonical,this.tileTransform),T.bucketLayerIDs.push(at.map(Mt=>Mt.id)))}}let B,W,q,K;M.trim();const re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},me=Lt(D.glyphDependencies,Pe=>Object.keys(Pe).map(Number));Object.keys(me).length?p.send("getGlyphs",{uid:this.uid,stacks:me},(Pe,Ce)=>{B||(B=Pe,W=Ce,be.call(this))},void 0,!1,re):W={};const Te=Object.keys(D.iconDependencies);Te.length?p.send("getImages",{icons:Te,source:this.source,tileID:this.tileID,type:"icons"},(Pe,Ce)=>{B||(B=Pe,q=Ce,be.call(this))},void 0,!1,re):q={};const fe=Object.keys(D.patternDependencies);function be(){if(B)return v(B);if(W&&q&&K){const Pe=new RS(W),Ce=new j2(q,K);for(const nt in E){const Ye=E[nt];Ye instanceof ic?(kx(Ye.layers,this.zoom,h),qL(Ye,W,Pe.positions,q,Ce.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):Ye.hasPattern&&(Ye instanceof $v||Ye instanceof Rv||Ye instanceof Pp)&&(kx(Ye.layers,this.zoom,h),Ye.addFeatures(D,this.tileID.canonical,Ce.patternPositions,h,this.tileTransform))}this.status="done",v(null,{buckets:Ke(E).filter(nt=>!nt.isEmpty()),featureIndex:T,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pe.image,lineAtlas:M,imageAtlas:Ce,glyphMap:this.returnDependencies?W:null,iconMap:this.returnDependencies?q:null,glyphPositions:this.returnDependencies?Pe.positions:null})}}fe.length?p.send("getImages",{icons:fe,source:this.source,tileID:this.tileID,type:"patterns"},(Pe,Ce)=>{B||(B=Pe,K=Ce,be.call(this))},void 0,!1,re):K={},be.call(this)}}function kx(a,r,l){const h=new We(r);for(const p of a)p.recalculate(h,l)}class OS{constructor(r){this.entries={},this.scheduler=r}request(r,l,h,p){const v=this.entries[r]=this.entries[r]||{callbacks:[]};if(v.result){const[x,T]=v.result;return this.scheduler?this.scheduler.add(()=>{p(x,T)},l):p(x,T),()=>{}}return v.callbacks.push(p),v.cancel||(v.cancel=h((x,T)=>{v.result=[x,T];for(const E of v.callbacks)this.scheduler?this.scheduler.add(()=>{E(x,T)},l):E(x,T);setTimeout(()=>delete this.entries[r],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(x=>x!==p),v.callbacks.length||(v.cancel(),delete this.entries[r]))}}}function LS(a,r,l){const h=JSON.stringify(a.request);return a.data&&(this.deduped.entries[h]={result:[null,a.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},p=>{const v=dr(a.request,(x,T,E,M)=>{x?p(x):T&&p(null,{vectorTile:l?void 0:new ux(new Ip(T)),rawData:T,cacheControl:E,expires:M})});return()=>{v.cancel(),p()}},r)}o.ARRAY_TYPE=is,o.AUTH_ERR_MSG=hn,o.Aabb=Do,o.Actor=class{constructor(a,r,l){this.target=a,this.parent=r,this.mapId=l,this.callbacks={},this.cancelCallbacks={},yt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=lt()?a:m,this.scheduler=new p3}send(a,r,l,h,p=!1,v){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=v,this.callbacks[x]=l);const T=ht(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:a,hasCallback:!!l,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:hu(r,T)},T),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(a){const r=a.data,l=r.id;if(l&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const h=this.cancelCallbacks[l];delete this.cancelCallbacks[l],h&&h.cancel()}else if(r.mustQueue||lt()){const h=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,r),h&&h.metadata||{type:"message"})}else this.processTask(l,r)}processTask(a,r){if(r.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(r.error?l(fu(r.error)):l(null,fu(r.data)))}else{const l=ht(this.globalScope)?void 0:[],h=r.hasCallback?(v,x)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:v?hu(v):null,data:hu(x,l)},l)}:v=>{},p=fu(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,p,h);else if(this.parent.getWorkerSource){const v=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,v[0],p.source)[v[1]](p,h)}else h(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=Fv,o.Color=bi,o.ColorMode=Ma,o.CullFaceMode=ea,o.DEMData=e_,o.DataConstantProperty=Ve,o.DedupedRequest=OS,o.DepthMode=Eh,o.EXTENT=Rn,o.Elevation=class{isDataAvailableAtPoint(a){const r=this._source();if(this.isUsingMockSource()||!r||a.y<0||a.y>1)return!1;const l=r.getSource().maxzoom,h=1<<l,p=Math.floor(a.x),v=Math.floor((a.x-p)*h),x=Math.floor(a.y*h),T=this.findDEMTileFor(new Io(l,p,l,v,x));return!(!T||!T.dem)}getAtPointOrZero(a,r=0){return this.getAtPoint(a,r)||0}getAtPoint(a,r,l=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const h=this._source();if(!h||a.y<0||a.y>1)return r;const p=h.getSource().maxzoom,v=1<<p,x=Math.floor(a.x),T=a.x-x,E=new Io(p,x,p,Math.floor(T*v),Math.floor(a.y*v)),M=this.findDEMTileFor(E);if(!M||!M.dem)return r;const D=M.dem,O=1<<M.tileID.canonical.z,B=(T*O-M.tileID.canonical.x)*D.dim,W=(a.y*O-M.tileID.canonical.y)*D.dim,q=Math.floor(B),K=Math.floor(W);return(l?this.exaggeration():1)*hr(hr(D.get(q,K),D.get(q,K+1),W-K),hr(D.get(q+1,K),D.get(q+1,K+1),W-K),B-q)}getAtTileOffset(a,r,l){const h=1<<a.canonical.z;return this.getAtPointOrZero(new fh(a.wrap+(a.canonical.x+r/Rn)/h,(a.canonical.y+l/Rn)/h))}getAtTileOffsetFunc(a,r,l,h){return p=>{const v=this.getAtTileOffset(a,p.x,p.y),x=h.upVector(a.canonical,p.x,p.y);return ms(x,x,v*h.upVectorScale(a.canonical,r,l).metersToTile),x}}getForTilePoints(a,r,l,h){if(this.isUsingMockSource())return!1;const p=t_.create(this,a,h);return!!p&&(r.forEach(v=>{v[2]=this.exaggeration()*p.getElevationAt(v[0],v[1],l)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(a);if(!r||!r.dem)return null;const l=r.dem.tree,h=r.tileID,p=1<<a.canonical.z-h.canonical.z;let v=a.canonical.x/p-h.canonical.x,x=a.canonical.y/p-h.canonical.y,T=0;for(let E=0;E<a.canonical.z-h.canonical.z&&!l.leaves[T];E++){v*=2,x*=2;const M=2*Math.floor(x)+Math.floor(v);T=l.childOffsets[T]+M,v%=1,x%=1}return{min:this.exaggeration()*l.minimums[T],max:this.exaggeration()*l.maximums[T]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,r,l){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Jo,o.EvaluationParameters=We,o.Event=yr,o.Evented=Vo,o.FillExtrusionBucket=Pp,o.Frustum=W0,o.FrustumCorners=j0,o.GLOBE_RADIUS=xa,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,r){const l=new Mn,h=new ho,p=[],v=a+1+2,x=r[0]+1,T=r[0]+1+(1+r.length),E=(M,D,O)=>{let B=M===v-1?M-2:M===0?M:M-1;return B+=O?24575:0,[B,D]};for(let M=0;M<v;++M)l.emplaceBack(...E(M,0,!0));for(let M=0;M<x;++M)for(let D=0;D<v;++D)l.emplaceBack(...E(D,M,(D===0||D===v-1)&&!0));for(let M=0;M<r.length;++M){const D=r[M];for(let O=0;O<v;++O)l.emplaceBack(...E(O,D,!0))}for(let M=0;M<r.length;++M){const D=h.length,O=r[M]+1+2,B=new ho;for(let K=0;K<O-1;K++){const re=K===O-2,me=re?v*(T-r.length+M-K):v;for(let Te=0;Te<v-1;Te++){const fe=K*v+Te;K===0||re||Te===0||Te===v-2?(B.emplaceBack(fe+1,fe,fe+me),B.emplaceBack(fe+me,fe+me+1,fe+1)):(h.emplaceBack(fe+1,fe,fe+me),h.emplaceBack(fe+me,fe+me+1,fe+1))}}const W=Mi.simpleSegment(0,D,l.length,h.length-D);for(let K=0;K<B.uint16.length;K+=3)h.emplaceBack(B.uint16[K],B.uint16[K+1],B.uint16[K+2]);const q=Mi.simpleSegment(0,D,l.length,h.length-D);p.push({withoutSkirts:W,withSkirts:q})}return{vertices:l,indices:h,segments:p}}_createGrid(a){const r=this._fillGridMeshWithLods(wu,_p);this._gridSegments=r.segments,this._gridBuffer=a.createVertexBuffer(r.vertices,vp.members),this._gridIndexBuffer=a.createIndexBuffer(r.indices,!0)}_createPoles(a){const r=new ho;for(let p=0;p<=wu;p++)r.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=a.createIndexBuffer(r,!0);const l=new rs,h=new rs;this._poleSegments=[];for(let p=0,v=0;p<5;p++){const x=360/(1<<p);l.emplaceBack(0,-xa,0,.5,0),h.emplaceBack(0,-xa,0,.5,1);for(let T=0;T<=wu;T++){const E=T/wu,M=hr(0,x,E),[D,O,B]=uh(pO,mO,M,xa);l.emplaceBack(D,O,B,E,0),h.emplaceBack(D,O,B,E,1)}this._poleSegments.push(Mi.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(l,UC,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(h,UC,!1)}getGridBuffers(a,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,r){if(!this._wireframeSegments){const l=new _a,h=wu,p=h+1+2,v=1;this._wireframeSegments=[];for(let x=0,T=0;x<_p.length;x++){const E=_p[x];for(let D=v;D<E+v;D++)for(let O=v;O<h+v;O++){const B=D*p+O;l.emplaceBack(B,B+1),l.emplaceBack(B,B+p),l.emplaceBack(B,B+p+1)}const M=E*h*3;this._wireframeSegments.push(Mi.simpleSegment(0,T,(E+1)*p,M)),T+=M}this._wireframeIndexBuffer=a.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[r]]}},o.GlyphManager=Th,o.ImagePosition=px,o.LivePerformanceUtils=bt,o.LngLat=mr,o.LngLatBounds=tc,o.LocalGlyphMode=vx,o.MAX_MERCATOR_LATITUDE=po,o.MercatorCoordinate=fh,o.ONE_EM=mo,o.OverscaledTileID=Io,o.PerformanceMarkers=je,o.Properties=Bt,o.RGBAImage=os,o.Ray=V0,o.RequestManager=class{constructor(a,r,l){this._transformRequestFn=a,this._customAccessToken=r,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const a=function(){let r="";for(let l=0;l<10;l++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",H,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,r){return this._transformRequestFn&&this._transformRequestFn(a,r)||{url:a}}normalizeStyleURL(a,r){if(!Fe(a))return a;const l=sn(a);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||r)}normalizeGlyphsURL(a,r){if(!Fe(a))return a;const l=sn(a);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||r)}normalizeSourceURL(a,r,l,h){if(!Fe(a))return a;const p=sn(a);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),l&&p.params.push(`language=${l}`),h&&p.params.push(`worldview=${h}`),this._makeAPIURL(p,this._customAccessToken||r)}normalizeSpriteURL(a,r,l,h){const p=sn(a);return Fe(a)?(p.path=`/styles/v1${p.path}/sprite${r}${l}`,this._makeAPIURL(p,this._customAccessToken||h)):(p.path+=`${r}${l}`,On(p))}normalizeTileURL(a,r,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Fe(a))return a;const h=sn(a);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${r||l&&h.authority!=="raster"&&l===512?"@2x":""}${A.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${S.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${S.TILE_URL_VERSION}${h.path}`);const p=this._customAccessToken||function(v){for(const x of v){const T=x.match(/^access_token=(.*)$/);if(T)return T[1]}return null}(h.params)||S.ACCESS_TOKEN;return S.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,p)}canonicalizeTileURL(a,r){const l=sn(a);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return a;let h="mapbox://";l.path.match(/^\/raster\/v1\//)?h+=`raster/${l.path.replace(`/${S.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${l.path.replace(`/${S.TILE_URL_VERSION}/`,"")}`;let p=l.params;return r&&(p=p.filter(v=>!v.match(/^access_token=/))),p.length&&(h+=`?${p.join("&")}`),h}canonicalizeTileset(a,r){const l=!!r&&Fe(r),h=[];for(const p of a.tiles||[])Rt(p)?h.push(this.canonicalizeTileURL(p,l)):h.push(p);return h}_makeAPIURL(a,r){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",h=sn(S.API_URL);if(a.protocol=h.protocol,a.authority=h.authority,a.protocol==="http"){const p=a.params.indexOf("secure");p>=0&&a.params.splice(p,1)}if(h.path!=="/"&&(a.path=`${h.path}${a.path}`),!S.REQUIRE_ACCESS_TOKEN)return On(a);if(r=r||S.ACCESS_TOKEN,!this._silenceAuthErrors){if(!r)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(r[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return a.params=a.params.filter(p=>p.indexOf("access_token")===-1),a.params.push(`access_token=${r||""}`),On(a)}},o.ResourceType=pr,o.SegmentVector=Mi,o.SourceCache=Pu,o.StencilMode=Mx,o.StructArrayLayout1ui2=ya,o.StructArrayLayout2f1f2i16=co,o.StructArrayLayout2i4=Mn,o.StructArrayLayout2ui4=_a,o.StructArrayLayout3f12=uo,o.StructArrayLayout3ui6=ho,o.StructArrayLayout4i8=Sr,o.StructArrayLayout5f20=rs,o.Texture=$p,o.Tile=Sx,o.Transitionable=Ht,o.Uniform1f=xv,o.Uniform1i=class extends nl{constructor(a){super(a),this.current=0}set(a,r,l){this.fetchUniformLocation(a,r)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends nl{constructor(a){super(a),this.current=[0,0]}set(a,r,l){this.fetchUniformLocation(a,r)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends nl{constructor(a){super(a),this.current=[0,0,0]}set(a,r,l){this.fetchUniformLocation(a,r)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=SC,o.UniformColor=EC,o.UniformMatrix2f=class extends nl{constructor(a){super(a),this.current=QR}set(a,r,l){if(this.fetchUniformLocation(a,r)){for(let h=0;h<4;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends nl{constructor(a){super(a),this.current=JR}set(a,r,l){if(this.fetchUniformLocation(a,r)){for(let h=0;h<9;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends nl{constructor(a){super(a),this.current=KR}set(a,r,l){if(this.fetchUniformLocation(a,r)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let h=1;h<16;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=k2,o.ValidationError=nn,o.VectorTileFeature=Lv,o.VectorTileWorkerSource=class extends Vo{constructor(a,r,l,h,p){super(),this.actor=a,this.layerIndex=r,this.availableImages=l,this.loadVectorData=p||LS,this.loading={},this.loaded={},this.deduped=new OS(a.scheduler),this.isSpriteLoaded=h,this.scheduler=a.scheduler}loadTile(a,r){const l=a.uid,h=a&&a.request,p=h&&h.collectResourceTiming,v=this.loading[l]=new b3(a);v.abort=this.loadVectorData(a,(x,T)=>{const E=!this.loading[l];if(delete this.loading[l],E||x||!T)return v.status="done",E||(this.loaded[l]=v),r(x);const M=T.rawData,D={};T.expires&&(D.expires=T.expires),T.cacheControl&&(D.cacheControl=T.cacheControl),v.vectorTile=T.vectorTile||new ux(new Ip(M));const O=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,(B,W)=>{if(B||!W)return r(B);const q={};if(p){const K=pt(h);K.length>0&&(q.resourceTiming=JSON.parse(JSON.stringify(K)))}r(null,ut({rawTileData:M.slice(0)},W,D,q))})};this.isSpriteLoaded?O():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(O,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):O()}),this.loaded=this.loaded||{},this.loaded[l]=v})}reloadTile(a,r){const l=this.loaded,h=a.uid,p=this;if(l&&l[h]){const v=l[h];v.showCollisionBoxes=a.showCollisionBoxes,v.enableTerrain=!!a.enableTerrain,v.projection=a.projection,v.tileTransform=Mu(a.tileID.canonical,a.projection);const x=(T,E)=>{const M=v.reloadCallback;M&&(delete v.reloadCallback,v.parse(v.vectorTile,p.layerIndex,this.availableImages,p.actor,M)),r(T,E)};v.status==="parsing"?v.reloadCallback=x:v.status==="done"&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(a,r){const l=a.uid,h=this.loading[l];h&&(h.abort&&h.abort(),delete this.loading[l]),r()}removeTile(a,r){const l=this.loaded,h=a.uid;l&&l[h]&&delete l[h],r()}},o.WritingMode=vs,o.ZoomDependentExpression=el,o.add=il,o.addDynamicAttributes=Kv,o.adjoint=function(a,r){var l=r[0],h=r[1],p=r[2],v=r[3],x=r[4],T=r[5],E=r[6],M=r[7],D=r[8];return a[0]=x*D-T*M,a[1]=p*M-h*D,a[2]=h*T-p*x,a[3]=T*E-v*D,a[4]=l*D-p*E,a[5]=p*v-l*T,a[6]=v*M-x*E,a[7]=h*E-l*M,a[8]=l*x-h*v,a},o.asyncAll=Pt,o.bezier=qe,o.bindAll=yt,o.boundsAttributes=yS,o.bufferConvexPolygon=function(a,r){const l=[];for(let h=0;h<a.length;h++){const p=it(h-1,-1,a.length-1),v=it(h+1,-1,a.length-1),x=a[h],T=a[v],E=a[p].sub(x).unit(),M=T.sub(x).unit(),D=M.angleWithSep(E.x,E.y),O=E.add(M).unit().mult(-1*r/Math.sin(D/2));l.push(x.add(O))}return l},o.cacheEntryPossiblyAdded=function(a){Zn++,Zn>wn&&(a.getActor().send("enforceCacheSizeLimit",Jt),Zn=0)},o.calculateGlobeLabelMatrix=function(a,r){const{x:l,y:h}=a.point,p=qC(l,h,a.worldSize/a._pixelsPerMercatorPixel,0,0);return yu(p,p,q0(ba(r)))},o.calculateGlobeMatrix=function(a){const{x:r,y:l}=a.point,{lng:h,lat:p}=a._center;return qC(r,l,a.worldSize,h,p)},o.calculateGlobeMercatorMatrix=function(a){const r=a.pixelsPerMeter,l=r/Qs(1,a.center.lat),h=Ks(new Float64Array(16));return dp(h,h,[a.point.x,a.point.y,0]),xu(h,h,[l,l,r]),Float32Array.from(h)},o.circumferenceAtLatitude=Y0,o.clamp=Be,o.clearTileCache=function(a){if(!Cn())return;const r=m.caches.delete(Oe);a&&r.catch(a).then(()=>a())},o.clipLine=tS,o.clone=function(a){var r=new is(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},o.clone$1=Yt,o.collisionCircleLayout=yL,o.config=S,o.conjugate=function(a,r){return a[0]=-r[0],a[1]=-r[1],a[2]=-r[2],a[3]=r[3],a},o.create=function(){var a=new is(16);return is!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o.create$1=PC,o.createExpression=Hl,o.createLayout=xn,o.createStyleLayer=function(a){return a.type==="custom"?new u3(a):new h3[a.type](a)},o.cross=U0,o.degToRad=ue,o.distance=function(a,r){return Math.hypot(r[0]-a[0],r[1]-a[1],r[2]-a[2])},o.div=function(a,r,l){return a[0]=r[0]/l[0],a[1]=r[1]/l[1],a[2]=r[2]/l[2],a},o.dot=Ms,o.earthRadius=bp,o.ease=Qe,o.easeCubicInOut=xe,o.ecefToLatLng=function([a,r,l]){const h=Math.hypot(a,r,l),p=Math.atan2(a,l),v=.5*Math.PI-Math.acos(-r/h);return new mr(Ee(p),Ee(v))},o.emitValidationErrors=ov,o.endsWith=wt,o.enforceCacheSizeLimit=function(a){Fn(),vt&&vt.then(r=>{r.keys().then(l=>{for(let h=0;h<l.length-a;h++)r.delete(l[h])})})},o.evaluateSizeForFeature=Nv,o.evaluateSizeForZoom=yh,o.evaluateVariableOffset=sS,o.evented=_e,o.exactEquals=function(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]&&a[3]===r[3]},o.exactEquals$1=function(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]},o.exported=Yn,o.exported$1=A,o.extend=ut,o.extend$1=jo,o.fillExtrusionHeightLift=M2,o.filterObject=Ct,o.fromMat4=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[4],a[4]=r[5],a[5]=r[6],a[6]=r[8],a[7]=r[9],a[8]=r[10],a},o.fromQuat=function(a,r){var l=r[0],h=r[1],p=r[2],v=r[3],x=l+l,T=h+h,E=p+p,M=l*x,D=h*x,O=h*T,B=p*x,W=p*T,q=p*E,K=v*x,re=v*T,me=v*E;return a[0]=1-O-q,a[1]=D+me,a[2]=B-re,a[3]=0,a[4]=D-me,a[5]=1-M-q,a[6]=W+K,a[7]=0,a[8]=B+re,a[9]=W-K,a[10]=1-M-O,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.fromRotation=function(a,r){var l=Math.sin(r),h=Math.cos(r);return a[0]=h,a[1]=l,a[2]=0,a[3]=-l,a[4]=h,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},o.fromScaling=kC,o.furthestTileCorner=function(a){const r=Math.round((a+45+360)%360/90)%4;return ze[r]},o.getAABBPointSquareDist=function(a,r,l){let h=0;for(let p=0;p<2;++p){const v=l?l[p]:0;a[p]>v&&(h+=(a[p]-v)*(a[p]-v)),r[p]<v&&(h+=(v-r[p])*(v-r[p]))}return h},o.getAnchorAlignment=gx,o.getAnchorJustification=yx,o.getBounds=function(a){let r=1/0,l=1/0,h=-1/0,p=-1/0;for(const v of a)r=Math.min(r,v.x),l=Math.min(l,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{min:new Y(r,l),max:new Y(h,p)}},o.getColumn=Et,o.getGridMatrix=function(a,r,l,h){const p=r.getNorth(),v=r.getSouth(),x=r.getWest(),T=r.getEast(),E=1<<a.z,M=T-x,D=p-v,O=M/wu,B=-D/_p[l],W=[0,O,0,B,0,0,p,x,0];if(a.z>0){const q=180/h;AC(W,W,[q/M+1,0,0,0,q/D+1,0,-.5*q/O,.5*q/B,1])}return W[2]=E,W[5]=a.x,W[8]=a.y,W},o.getImage=gn,o.getJSON=function(a,r){return br(ut(a,{type:"json"}),r)},o.getLatitudinalLod=function(a){const r=po-5;a=Be(a,-r,r)/r*90;const l=Math.pow(Math.abs(Math.sin(ue(a))),3);return Math.round(l*(_p.length-1))},o.getMapSessionAPI=$e,o.getPerformanceMeasurement=pt,o.getProjection=pS,o.getRTLTextPluginStatus=ke,o.getReferrer=li,o.getTilePoint=function(a,{x:r,y:l},h=0){return new Y(((r-h)*a.scale-a.x)*Rn,(l*a.scale-a.y)*Rn)},o.getTileVec3=function(a,r,l=0){return ch(((r.x-l)*a.scale-a.x)*Rn,(r.y*a.scale-a.y)*Rn,KC(r.z,r.y))},o.getVideo=function(a,r){const l=m.document.createElement("video");l.muted=!0,l.onloadstart=function(){r(null,l)};for(let h=0;h<a.length;h++){const p=m.document.createElement("source");rr(a[h])||(l.crossOrigin="Anonymous"),p.src=a[h],l.appendChild(p)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(a){const r=[0,0,0],l=Ks(new Float64Array(16));return yu(l,a.pixelMatrix,a.globeMatrix),wi(r,r,l),new Y(r[0],r[1])},o.globeDenormalizeECEF=q0,o.globeECEFOrigin=function(a,r){const l=[0,0,0];return wi(l,l,xp(ba(r.canonical))),wi(l,l,a),l},o.globeMetersToEcef=Cv,o.globeNormalizeECEF=xp,o.globePixelsToTileUnits=function(a,r){return Rn/(512*Math.pow(2,a))*Ev(ba(r))},o.globePoleMatrixForTile=function(a,r,l){const h=Ks(new Float64Array(16)),p=(r/(1<<a)-.5)*Math.PI*2;return Tv(h,l.globeMatrix,p),Float32Array.from(h)},o.globeTileBounds=ba,o.globeTiltAtLngLat=ZC,o.globeToMercatorTransition=hh,o.globeUseCustomAntiAliasing=function(a,r,l){const h=hh(l.zoom),p=a.style.map._antialias,v=!!r.extStandardDerivatives,x=r.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return h===0&&!p&&!x&&v},o.identity=Ks,o.identity$1=FC,o.invert=B0,o.isFullscreen=function(){return!!m.document.fullscreenElement||!!m.document.webkitFullscreenElement},o.isLngLatBehindGlobe=Z0,o.isMapAuthenticated=function(a){return De.has(a)},o.isMapboxURL=Fe,o.isSafariWithAntialiasingBug=function(a){const r=a.navigator?a.navigator.userAgent:null;return!!ht(a)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=fo,o.latLngToECEF=dh,o.len=lO,o.length=hp,o.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},o.lngFromMercatorX=gs,o.loadVectorTile=LS,o.makeRequest=br,o.mapValue=function(a,r,l,h,p){return Be((a-r)/(l-r)*(p-h)+h,h,p)},o.mercatorScale=JC,o.mercatorXfromLng=wa,o.mercatorYfromLat=Ta,o.mercatorZfromAltitude=Qs,o.mul=sO,o.mul$1=aO,o.multiply=yu,o.multiply$1=AC,o.multiply$2=zC,o.nextPowerOfTwo=Dn,o.normalize=ko,o.normalize$1=cO,o.normalize$2=LC,o.number=hr,o.ortho=function(a,r,l,h,p,v,x){var T=1/(r-l),E=1/(h-p),M=1/(v-x);return a[0]=-2*T,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*E,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(r+l)*T,a[13]=(p+h)*E,a[14]=(x+v)*M,a[15]=1,a},o.pbf=Ip,o.perspective=function(a,r,l,h,p){var v,x=1/Math.tan(r/2);return a[0]=x/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,p!=null&&p!==1/0?(a[10]=(p+h)*(v=1/(h-p)),a[14]=2*p*h*v):(a[10]=-1,a[14]=-2*h),a},o.pick=function(a,r){const l={};for(let h=0;h<r.length;h++){const p=r[h];p in a&&(l[p]=a[p])}return l},o.plugin=Ie,o.pointGeometry=Y,o.polesInViewport=function(a){const r=Ks(new Float64Array(16));yu(r,a.pixelMatrix,a.globeMatrix);const l=[0,Ps,0],h=[0,As,0];return wi(l,l,r),wi(h,h,r),[l[0]>0&&l[0]<=a.width&&l[1]>0&&l[1]<=a.height&&!Z0(a,new mr(a.center.lat,90)),h[0]>0&&h[0]<=a.width&&h[1]>0&&h[1]<=a.height&&!Z0(a,new mr(a.center.lat,-90))]},o.polygonContainsPoint=Su,o.polygonIntersectsBox=o2,o.polygonIntersectsPolygon=t2,o.polygonizeBounds=function(a,r,l=0,h=!0){const p=new Y(l,l),v=a.sub(p),x=r.add(p),T=[v,new Y(x.x,v.y),x,new Y(v.x,x.y)];return h&&T.push(v.clone()),T},o.posAttributes=vp,o.postMapLoadEvent=ne,o.postPerformanceEvent=we,o.postTurnstileEvent=L,o.potpack=fx,o.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},o.radToDeg=Ee,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(a){return a({pluginStatus:le,pluginURL:Q}),_e.on("pluginStateChange",a),a},o.removeAuthState=function(a){De.delete(a)},o.renderColorRamp=rx,o.resample=QC,o.rotateX=F0,o.rotateX$1=$C,o.rotateY=Tv,o.rotateY$1=NC,o.rotateZ=function(a,r,l){var h=Math.sin(l),p=Math.cos(l),v=r[0],x=r[1],T=r[2],E=r[3],M=r[4],D=r[5],O=r[6],B=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=v*p+M*h,a[1]=x*p+D*h,a[2]=T*p+O*h,a[3]=E*p+B*h,a[4]=M*p-v*h,a[5]=D*p-x*h,a[6]=O*p-T*h,a[7]=B*p-E*h,a},o.rotateZ$1=function(a,r,l){l*=.5;var h=r[0],p=r[1],v=r[2],x=r[3],T=Math.sin(l),E=Math.cos(l);return a[0]=h*E+p*T,a[1]=p*E-h*T,a[2]=v*E+x*T,a[3]=x*E-v*T,a},o.scale=xu,o.scale$1=OC,o.scale$2=ms,o.scaleAndAdd=mp,o.set=function(a,r,l,h){return a[0]=r,a[1]=l,a[2]=h,a},o.setCacheLimits=function(a,r){Jt=a,wn=r},o.setColumn=function(a,r,l){a[4*r+0]=l[0],a[4*r+1]=l[1],a[4*r+2]=l[2],a[4*r+3]=l[3]},o.setRTLTextPlugin=function(a,r,l=!1){if(le===te||le===ie||le===se)throw new Error("setRTLTextPlugin cannot be called multiple times.");Q=Yn.resolveURL(a),le=te,ae=r,ge(),l||Se()},o.smoothstep=st,o.spec=ft,o.squaredLength=function(a){var r=a[0],l=a[1],h=a[2];return r*r+l*l+h*h},o.storeAuthState=function(a,r){r?De.add(a):De.delete(a)},o.sub=Js,o.subtract=N0,o.symbolSize=xL,o.tileAABB=function(a,r,l,h,p,v,x,T,E){if(E.name==="globe")return fO(a,r,new Fv(l,h,p));const M=Mu({z:l,x:h,y:p},E);return new Do([(v+M.x/M.scale)*r,r*(M.y/M.scale),x],[(v+M.x2/M.scale)*r,r*(M.y2/M.scale),T])},o.tileCornersToBounds=Sv,o.tileTransform=Mu,o.transformMat3=function(a,r,l){var h=r[0],p=r[1],v=r[2];return a[0]=h*l[0]+p*l[3]+v*l[6],a[1]=h*l[1]+p*l[4]+v*l[7],a[2]=h*l[2]+p*l[5]+v*l[8],a},o.transformMat4=wi,o.transformMat4$1=bu,o.transformQuat=RC,o.transitionTileAABBinECEF=WC,o.translate=dp,o.transpose=function(a,r){if(a===r){var l=r[1],h=r[2],p=r[5];a[1]=r[3],a[2]=r[6],a[3]=l,a[5]=r[7],a[6]=h,a[7]=p}else a[0]=r[0],a[1]=r[3],a[2]=r[6],a[3]=r[1],a[4]=r[4],a[5]=r[7],a[6]=r[2],a[7]=r[5],a[8]=r[8];return a},o.triggerPluginCompletionEvent=ve,o.uniqueId=on,o.updateGlobeVertexNormal=function(a,r,l,h,p){const v=5*r+2;a.float32[v+0]=l,a.float32[v+1]=h,a.float32[v+2]=p},o.validateCustomStyleLayer=function(a){const r=[],l=a.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},o.validateFilter=a=>Gs(tp(a)),o.validateFog=a=>Gs(nv(a)),o.validateLayer=a=>Gs(rp(a)),o.validateLight=a=>Gs(tv(a)),o.validateSource=a=>Gs(uu(a)),o.validateStyle=rv,o.validateTerrain=a=>Gs(ip(a)),o.values=Ke,o.vectorTile=Ov,o.version=y,o.warnOnce=he,o.window=m,o.wrap=it}),u(["./shared"],function(o){function m(oe){if(typeof oe=="number"||typeof oe=="boolean"||typeof oe=="string"||oe==null)return JSON.stringify(oe);if(Array.isArray(oe)){let G="[";for(const ne of oe)G+=`${m(ne)},`;return`${G}]`}let L="{";for(const G of Object.keys(oe).sort())L+=`${G}:${m(oe[G])},`;return`${L}}`}function y(oe){let L="";for(const G of o.refProperties)L+=`/${m(oe[G])}`;return L}class w{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,G){for(const pe of L)this._layerConfigs[pe.id]=pe,(this._layers[pe.id]=o.createStyleLayer(pe)).compileFilter(),this.keyCache[pe.id]&&delete this.keyCache[pe.id];for(const pe of G)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const ne=function(pe,we){const Re={};for(let De=0;De<pe.length;De++){const je=we&&we[pe[De].id]||y(pe[De]);we&&(we[pe[De].id]=je);let bt=Re[je];bt||(bt=Re[je]=[]),bt.push(pe[De])}const $e=[];for(const De in Re)$e.push(Re[De]);return $e}(o.values(this._layerConfigs),this.keyCache);for(const pe of ne){const we=pe.map(Zt=>this._layers[Zt.id]),Re=we[0];if(Re.visibility==="none")continue;const $e=Re.source||"";let De=this.familiesBySource[$e];De||(De=this.familiesBySource[$e]={});const je=Re.sourceLayer||"_geojsonTileLayer";let bt=De[je];bt||(bt=De[je]=[]),bt.push(we)}}}class S{loadTile(L,G){const{uid:ne,encoding:pe,rawImageData:we,padding:Re,buildQuadTree:$e}=L,De=o.window.ImageBitmap&&we instanceof o.window.ImageBitmap?this.getImageData(we,Re):we;G(null,new o.DEMData(ne,De,pe,Re<1,$e))}getImageData(L,G){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);const ne=this.offscreenCanvasContext.getImageData(-G,-G,L.width+2*G,L.height+2*G);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ne}}var A=function oe(L,G){var ne,pe=L&&L.type;if(pe==="FeatureCollection")for(ne=0;ne<L.features.length;ne++)oe(L.features[ne],G);else if(pe==="GeometryCollection")for(ne=0;ne<L.geometries.length;ne++)oe(L.geometries[ne],G);else if(pe==="Feature")oe(L.geometry,G);else if(pe==="Polygon")I(L.coordinates,G);else if(pe==="MultiPolygon")for(ne=0;ne<L.coordinates.length;ne++)I(L.coordinates[ne],G);return L};function I(oe,L){if(oe.length!==0){z(oe[0],L);for(var G=1;G<oe.length;G++)z(oe[G],!L)}}function z(oe,L){for(var G=0,ne=0,pe=0,we=oe.length,Re=we-1;pe<we;Re=pe++){var $e=(oe[pe][0]-oe[Re][0])*(oe[Re][1]+oe[pe][1]),De=G+$e;ne+=Math.abs(G)>=Math.abs($e)?G-De+$e:$e-De+G,G=De}G+ne>=0!=!!L&&oe.reverse()}const U=o.VectorTileFeature.prototype.toGeoJSON;class j{constructor(L){this._feature=L,this.extent=o.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))}loadGeometry(){if(this._feature.type===1){const L=[];for(const G of this._feature.geometry)L.push([new o.pointGeometry(G[0],G[1])]);return L}{const L=[];for(const G of this._feature.geometry){const ne=[];for(const pe of G)ne.push(new o.pointGeometry(pe[0],pe[1]));L.push(ne)}return L}}toGeoJSON(L,G,ne){return U.call(this,L,G,ne)}}class F{constructor(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=L.length,this._features=L}feature(L){return new j(this._features[L])}}var H={},J={get exports(){return H},set exports(oe){H=oe}},Z=o.pointGeometry,Y=o.vectorTile.VectorTileFeature,ce=ee;function ee(oe,L){this.options=L||{},this.features=oe,this.length=oe.length}function de(oe,L){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=L||4096}ee.prototype.feature=function(oe){return new de(this.features[oe],this.options.extent)},de.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var L=0;L<oe.length;L++){for(var G=oe[L],ne=[],pe=0;pe<G.length;pe++)ne.push(new Z(G[pe][0],G[pe][1]));this.geometry.push(ne)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,L=1/0,G=-1/0,ne=1/0,pe=-1/0,we=0;we<oe.length;we++)for(var Re=oe[we],$e=0;$e<Re.length;$e++){var De=Re[$e];L=Math.min(L,De.x),G=Math.max(G,De.x),ne=Math.min(ne,De.y),pe=Math.max(pe,De.y)}return[L,ne,G,pe]},de.prototype.toGeoJSON=Y.prototype.toGeoJSON;var ue=o.pbf,Ee=ce;function ze(oe){var L=new ue;return function(G,ne){for(var pe in G.layers)ne.writeMessage(3,xe,G.layers[pe])}(oe,L),L.finish()}function xe(oe,L){var G;L.writeVarintField(15,oe.version||1),L.writeStringField(1,oe.name||""),L.writeVarintField(5,oe.extent||4096);var ne={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<oe.length;G++)ne.feature=oe.feature(G),L.writeMessage(2,qe,ne);var pe=ne.keys;for(G=0;G<pe.length;G++)L.writeStringField(3,pe[G]);var we=ne.values;for(G=0;G<we.length;G++)L.writeMessage(4,Pt,we[G])}function qe(oe,L){var G=oe.feature;G.id!==void 0&&L.writeVarintField(1,G.id),L.writeMessage(2,Qe,oe),L.writeVarintField(3,G.type),L.writeMessage(4,it,G)}function Qe(oe,L){var G=oe.feature,ne=oe.keys,pe=oe.values,we=oe.keycache,Re=oe.valuecache;for(var $e in G.properties){var De=G.properties[$e],je=we[$e];if(De!==null){je===void 0&&(ne.push($e),we[$e]=je=ne.length-1),L.writeVarint(je);var bt=typeof De;bt!=="string"&&bt!=="boolean"&&bt!=="number"&&(De=JSON.stringify(De));var Zt=bt+":"+De,ye=Re[Zt];ye===void 0&&(pe.push(De),Re[Zt]=ye=pe.length-1),L.writeVarint(ye)}}}function Be(oe,L){return(L<<3)+(7&oe)}function st(oe){return oe<<1^oe>>31}function it(oe,L){for(var G=oe.loadGeometry(),ne=oe.type,pe=0,we=0,Re=G.length,$e=0;$e<Re;$e++){var De=G[$e],je=1;ne===1&&(je=De.length),L.writeVarint(Be(1,je));for(var bt=ne===3?De.length-1:De.length,Zt=0;Zt<bt;Zt++){Zt===1&&ne!==1&&L.writeVarint(Be(2,bt-1));var ye=De[Zt].x-pe,pt=De[Zt].y-we;L.writeVarint(st(ye)),L.writeVarint(st(pt)),pe+=ye,we+=pt}ne===3&&L.writeVarint(Be(7,1))}}function Pt(oe,L){var G=typeof oe;G==="string"?L.writeStringField(1,oe):G==="boolean"?L.writeBooleanField(7,oe):G==="number"&&(oe%1!=0?L.writeDoubleField(3,oe):oe<0?L.writeSVarintField(6,oe):L.writeVarintField(5,oe))}function Ke(oe,L,G,ne,pe,we){if(pe-ne<=G)return;const Re=ne+pe>>1;ut(oe,L,Re,ne,pe,we%2),Ke(oe,L,G,ne,Re-1,we+1),Ke(oe,L,G,Re+1,pe,we+1)}function ut(oe,L,G,ne,pe,we){for(;pe>ne;){if(pe-ne>600){const je=pe-ne+1,bt=G-ne+1,Zt=Math.log(je),ye=.5*Math.exp(2*Zt/3),pt=.5*Math.sqrt(Zt*ye*(je-ye)/je)*(bt-je/2<0?-1:1);ut(oe,L,G,Math.max(ne,Math.floor(G-bt*ye/je+pt)),Math.min(pe,Math.floor(G+(je-bt)*ye/je+pt)),we)}const Re=L[2*G+we];let $e=ne,De=pe;for(jt(oe,L,ne,G),L[2*pe+we]>Re&&jt(oe,L,ne,pe);$e<De;){for(jt(oe,L,$e,De),$e++,De--;L[2*$e+we]<Re;)$e++;for(;L[2*De+we]>Re;)De--}L[2*ne+we]===Re?jt(oe,L,ne,De):(De++,jt(oe,L,De,pe)),De<=G&&(ne=De+1),G<=De&&(pe=De-1)}}function jt(oe,L,G,ne){on(oe,G,ne),on(L,2*G,2*ne),on(L,2*G+1,2*ne+1)}function on(oe,L,G){const ne=oe[L];oe[L]=oe[G],oe[G]=ne}function En(oe,L,G,ne){const pe=oe-G,we=L-ne;return pe*pe+we*we}J.exports=ze,H.fromVectorTileJs=ze,H.fromGeojsonVt=function(oe,L){L=L||{};var G={};for(var ne in oe)G[ne]=new Ee(oe[ne].features,L),G[ne].name=ne,G[ne].version=L.version,G[ne].extent=L.extent;return ze({layers:G})},H.GeoJSONWrapper=Ee;const Dn=oe=>oe[0],Je=oe=>oe[1];class yt{constructor(L,G=Dn,ne=Je,pe=64,we=Float64Array){this.nodeSize=pe,this.points=L;const Re=L.length<65536?Uint16Array:Uint32Array,$e=this.ids=new Re(L.length),De=this.coords=new we(2*L.length);for(let je=0;je<L.length;je++)$e[je]=je,De[2*je]=G(L[je]),De[2*je+1]=ne(L[je]);Ke($e,De,pe,0,$e.length-1,0)}range(L,G,ne,pe){return function(we,Re,$e,De,je,bt,Zt){const ye=[0,we.length-1,0],pt=[];let kt,en;for(;ye.length;){const yn=ye.pop(),vn=ye.pop(),Yn=ye.pop();if(vn-Yn<=Zt){for(let yr=Yn;yr<=vn;yr++)kt=Re[2*yr],en=Re[2*yr+1],kt>=$e&&kt<=je&&en>=De&&en<=bt&&pt.push(we[yr]);continue}const Sn=Math.floor((Yn+vn)/2);kt=Re[2*Sn],en=Re[2*Sn+1],kt>=$e&&kt<=je&&en>=De&&en<=bt&&pt.push(we[Sn]);const ar=(yn+1)%2;(yn===0?$e<=kt:De<=en)&&(ye.push(Yn),ye.push(Sn-1),ye.push(ar)),(yn===0?je>=kt:bt>=en)&&(ye.push(Sn+1),ye.push(vn),ye.push(ar))}return pt}(this.ids,this.coords,L,G,ne,pe,this.nodeSize)}within(L,G,ne){return function(pe,we,Re,$e,De,je){const bt=[0,pe.length-1,0],Zt=[],ye=De*De;for(;bt.length;){const pt=bt.pop(),kt=bt.pop(),en=bt.pop();if(kt-en<=je){for(let ar=en;ar<=kt;ar++)En(we[2*ar],we[2*ar+1],Re,$e)<=ye&&Zt.push(pe[ar]);continue}const yn=Math.floor((en+kt)/2),vn=we[2*yn],Yn=we[2*yn+1];En(vn,Yn,Re,$e)<=ye&&Zt.push(pe[yn]);const Sn=(pt+1)%2;(pt===0?Re-De<=vn:$e-De<=Yn)&&(bt.push(en),bt.push(yn-1),bt.push(Sn)),(pt===0?Re+De>=vn:$e+De>=Yn)&&(bt.push(yn+1),bt.push(kt),bt.push(Sn))}return Zt}(this.ids,this.coords,L,G,ne,this.nodeSize)}}const wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Lt=Math.fround||(Ct=new Float32Array(1),oe=>(Ct[0]=+oe,Ct[0]));var Ct;class Yt{constructor(L){this.options=ht(Object.create(wt),L),this.trees=new Array(this.options.maxZoom+1)}load(L){const{log:G,minZoom:ne,maxZoom:pe,nodeSize:we}=this.options;G&&console.time("total time");const Re=`prepare ${L.length} points`;G&&console.time(Re),this.points=L;let $e=[];for(let De=0;De<L.length;De++)L[De].geometry&&$e.push(he(L[De],De));this.trees[pe+1]=new yt($e,At,Et,we,Float32Array),G&&console.timeEnd(Re);for(let De=pe;De>=ne;De--){const je=+Date.now();$e=this._cluster($e,De),this.trees[De]=new yt($e,At,Et,we,Float32Array),G&&console.log("z%d: %d clusters in %dms",De,$e.length,+Date.now()-je)}return G&&console.timeEnd("total time"),this}getClusters(L,G){let ne=((L[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,L[1]));let we=L[2]===180?180:((L[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)ne=-180,we=180;else if(ne>we){const bt=this.getClusters([ne,pe,180,Re],G),Zt=this.getClusters([-180,pe,we,Re],G);return bt.concat(Zt)}const $e=this.trees[this._limitZoom(G)],De=$e.range(lt(ne),gt(Re),lt(we),gt(pe)),je=[];for(const bt of De){const Zt=$e.points[bt];je.push(Zt.numPoints?Me(Zt):this.points[Zt.index])}return je}getChildren(L){const G=this._getOriginId(L),ne=this._getOriginZoom(L),pe="No cluster with the specified id.",we=this.trees[ne];if(!we)throw new Error(pe);const Re=we.points[G];if(!Re)throw new Error(pe);const $e=this.options.radius/(this.options.extent*Math.pow(2,ne-1)),De=we.within(Re.x,Re.y,$e),je=[];for(const bt of De){const Zt=we.points[bt];Zt.parentId===L&&je.push(Zt.numPoints?Me(Zt):this.points[Zt.index])}if(je.length===0)throw new Error(pe);return je}getLeaves(L,G,ne){const pe=[];return this._appendLeaves(pe,L,G=G||10,ne=ne||0,0),pe}getTile(L,G,ne){const pe=this.trees[this._limitZoom(L)],we=Math.pow(2,L),{extent:Re,radius:$e}=this.options,De=$e/Re,je=(ne-De)/we,bt=(ne+1+De)/we,Zt={features:[]};return this._addTileFeatures(pe.range((G-De)/we,je,(G+1+De)/we,bt),pe.points,G,ne,we,Zt),G===0&&this._addTileFeatures(pe.range(1-De/we,je,1,bt),pe.points,we,ne,we,Zt),G===we-1&&this._addTileFeatures(pe.range(0,je,De/we,bt),pe.points,-1,ne,we,Zt),Zt.features.length?Zt:null}getClusterExpansionZoom(L){let G=this._getOriginZoom(L)-1;for(;G<=this.options.maxZoom;){const ne=this.getChildren(L);if(G++,ne.length!==1)break;L=ne[0].properties.cluster_id}return G}_appendLeaves(L,G,ne,pe,we){const Re=this.getChildren(G);for(const $e of Re){const De=$e.properties;if(De&&De.cluster?we+De.point_count<=pe?we+=De.point_count:we=this._appendLeaves(L,De.cluster_id,ne,pe,we):we<pe?we++:L.push($e),L.length===ne)break}return we}_addTileFeatures(L,G,ne,pe,we,Re){for(const $e of L){const De=G[$e],je=De.numPoints;let bt,Zt,ye;if(je)bt=Ue(De),Zt=De.x,ye=De.y;else{const en=this.points[De.index];bt=en.properties,Zt=lt(en.geometry.coordinates[0]),ye=gt(en.geometry.coordinates[1])}const pt={type:1,geometry:[[Math.round(this.options.extent*(Zt*we-ne)),Math.round(this.options.extent*(ye*we-pe))]],tags:bt};let kt;je?kt=De.id:this.options.generateId?kt=De.index:this.points[De.index].id&&(kt=this.points[De.index].id),kt!==void 0&&(pt.id=kt),Re.features.push(pt)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(Math.floor(+L),this.options.maxZoom+1))}_cluster(L,G){const ne=[],{radius:pe,extent:we,reduce:Re,minPoints:$e}=this.options,De=pe/(we*Math.pow(2,G));for(let je=0;je<L.length;je++){const bt=L[je];if(bt.zoom<=G)continue;bt.zoom=G;const Zt=this.trees[G+1],ye=Zt.within(bt.x,bt.y,De),pt=bt.numPoints||1;let kt=pt;for(const en of ye){const yn=Zt.points[en];yn.zoom>G&&(kt+=yn.numPoints||1)}if(kt>pt&&kt>=$e){let en=bt.x*pt,yn=bt.y*pt,vn=Re&&pt>1?this._map(bt,!0):null;const Yn=(je<<5)+(G+1)+this.points.length;for(const Sn of ye){const ar=Zt.points[Sn];if(ar.zoom<=G)continue;ar.zoom=G;const yr=ar.numPoints||1;en+=ar.x*yr,yn+=ar.y*yr,ar.parentId=Yn,Re&&(vn||(vn=this._map(bt,!0)),Re(vn,this._map(ar)))}bt.parentId=Yn,ne.push(ln(en/kt,yn/kt,Yn,kt,vn))}else if(ne.push(bt),kt>1)for(const en of ye){const yn=Zt.points[en];yn.zoom<=G||(yn.zoom=G,ne.push(yn))}}return ne}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,G){if(L.numPoints)return G?ht({},L.properties):L.properties;const ne=this.points[L.index].properties,pe=this.options.map(ne);return G&&pe===ne?ht({},pe):pe}}function ln(oe,L,G,ne,pe){return{x:Lt(oe),y:Lt(L),zoom:1/0,id:G,parentId:-1,numPoints:ne,properties:pe}}function he(oe,L){const[G,ne]=oe.geometry.coordinates;return{x:Lt(lt(G)),y:Lt(gt(ne)),zoom:1/0,index:L,parentId:-1}}function Me(oe){return{type:"Feature",id:oe.id,properties:Ue(oe),geometry:{type:"Point",coordinates:[(L=oe.x,360*(L-.5)),Ne(oe.y)]}};var L}function Ue(oe){const L=oe.numPoints,G=L>=1e4?`${Math.round(L/1e3)}k`:L>=1e3?Math.round(L/100)/10+"k":L;return ht(ht({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:L,point_count_abbreviated:G})}function lt(oe){return oe/360+.5}function gt(oe){const L=Math.sin(oe*Math.PI/180),G=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return G<0?0:G>1?1:G}function Ne(oe){const L=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function ht(oe,L){for(const G in L)oe[G]=L[G];return oe}function At(oe){return oe.x}function Et(oe){return oe.y}function Oe(oe,L,G,ne){for(var pe,we=ne,Re=G-L>>1,$e=G-L,De=oe[L],je=oe[L+1],bt=oe[G],Zt=oe[G+1],ye=L+3;ye<G;ye+=3){var pt=vt(oe[ye],oe[ye+1],De,je,bt,Zt);if(pt>we)pe=ye,we=pt;else if(pt===we){var kt=Math.abs(ye-Re);kt<$e&&(pe=ye,$e=kt)}}we>ne&&(pe-L>3&&Oe(oe,L,pe,ne),oe[pe+2]=we,G-pe>3&&Oe(oe,pe,G,ne))}function vt(oe,L,G,ne,pe,we){var Re=pe-G,$e=we-ne;if(Re!==0||$e!==0){var De=((oe-G)*Re+(L-ne)*$e)/(Re*Re+$e*$e);De>1?(G=pe,ne=we):De>0&&(G+=Re*De,ne+=$e*De)}return(Re=oe-G)*Re+($e=L-ne)*$e}function Wt(oe,L,G,ne){var pe={id:oe===void 0?null:oe,type:L,geometry:G,tags:ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(we){var Re=we.geometry,$e=we.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")Jt(we,Re);else if($e==="Polygon"||$e==="MultiLineString")for(var De=0;De<Re.length;De++)Jt(we,Re[De]);else if($e==="MultiPolygon")for(De=0;De<Re.length;De++)for(var je=0;je<Re[De].length;je++)Jt(we,Re[De][je])}(pe),pe}function Jt(oe,L){for(var G=0;G<L.length;G+=3)oe.minX=Math.min(oe.minX,L[G]),oe.minY=Math.min(oe.minY,L[G+1]),oe.maxX=Math.max(oe.maxX,L[G]),oe.maxY=Math.max(oe.maxY,L[G+1])}function wn(oe,L,G,ne){if(L.geometry){var pe=L.geometry.coordinates,we=L.geometry.type,Re=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),$e=[],De=L.id;if(G.promoteId?De=L.properties[G.promoteId]:G.generateId&&(De=ne||0),we==="Point")Cn(pe,$e);else if(we==="MultiPoint")for(var je=0;je<pe.length;je++)Cn(pe[je],$e);else if(we==="LineString")Fn(pe,$e,Re,!1);else if(we==="MultiLineString"){if(G.lineMetrics){for(je=0;je<pe.length;je++)Fn(pe[je],$e=[],Re,!1),oe.push(Wt(De,"LineString",$e,L.properties));return}$n(pe,$e,Re,!1)}else if(we==="Polygon")$n(pe,$e,Re,!0);else{if(we!=="MultiPolygon"){if(we==="GeometryCollection"){for(je=0;je<L.geometry.geometries.length;je++)wn(oe,{id:De,geometry:L.geometry.geometries[je],properties:L.properties},G,ne);return}throw new Error("Input data is not a valid GeoJSON object.")}for(je=0;je<pe.length;je++){var bt=[];$n(pe[je],bt,Re,!0),$e.push(bt)}}oe.push(Wt(De,we,$e,L.properties))}}function Cn(oe,L){L.push(Zn(oe[0])),L.push(pr(oe[1])),L.push(0)}function Fn(oe,L,G,ne){for(var pe,we,Re=0,$e=0;$e<oe.length;$e++){var De=Zn(oe[$e][0]),je=pr(oe[$e][1]);L.push(De),L.push(je),L.push(0),$e>0&&(Re+=ne?(pe*je-De*we)/2:Math.sqrt(Math.pow(De-pe,2)+Math.pow(je-we,2))),pe=De,we=je}var bt=L.length-3;L[2]=1,Oe(L,0,bt,G),L[bt+2]=1,L.size=Math.abs(Re),L.start=0,L.end=L.size}function $n(oe,L,G,ne){for(var pe=0;pe<oe.length;pe++){var we=[];Fn(oe[pe],we,G,ne),L.push(we)}}function Zn(oe){return oe/360+.5}function pr(oe){var L=Math.sin(oe*Math.PI/180),G=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return G<0?0:G>1?1:G}function sr(oe,L,G,ne,pe,we,Re,$e){if(ne/=L,we>=(G/=L)&&Re<ne)return oe;if(Re<G||we>=ne)return null;for(var De=[],je=0;je<oe.length;je++){var bt=oe[je],Zt=bt.geometry,ye=bt.type,pt=pe===0?bt.minX:bt.minY,kt=pe===0?bt.maxX:bt.maxY;if(pt>=G&&kt<ne)De.push(bt);else if(!(kt<G||pt>=ne)){var en=[];if(ye==="Point"||ye==="MultiPoint")li(Zt,en,G,ne,pe);else if(ye==="LineString")br(Zt,en,G,ne,pe,!1,$e.lineMetrics);else if(ye==="MultiLineString")rr(Zt,en,G,ne,pe,!1);else if(ye==="Polygon")rr(Zt,en,G,ne,pe,!0);else if(ye==="MultiPolygon")for(var yn=0;yn<Zt.length;yn++){var vn=[];rr(Zt[yn],vn,G,ne,pe,!0),vn.length&&en.push(vn)}if(en.length){if($e.lineMetrics&&ye==="LineString"){for(yn=0;yn<en.length;yn++)De.push(Wt(bt.id,ye,en[yn],bt.tags));continue}ye!=="LineString"&&ye!=="MultiLineString"||(en.length===1?(ye="LineString",en=en[0]):ye="MultiLineString"),ye!=="Point"&&ye!=="MultiPoint"||(ye=en.length===3?"Point":"MultiPoint"),De.push(Wt(bt.id,ye,en,bt.tags))}}}return De.length?De:null}function li(oe,L,G,ne,pe){for(var we=0;we<oe.length;we+=3){var Re=oe[we+pe];Re>=G&&Re<=ne&&(L.push(oe[we]),L.push(oe[we+1]),L.push(oe[we+2]))}}function br(oe,L,G,ne,pe,we,Re){for(var $e,De,je=dr(oe),bt=pe===0?mt:Vt,Zt=oe.start,ye=0;ye<oe.length-3;ye+=3){var pt=oe[ye],kt=oe[ye+1],en=oe[ye+2],yn=oe[ye+3],vn=oe[ye+4],Yn=pe===0?pt:kt,Sn=pe===0?yn:vn,ar=!1;Re&&($e=Math.sqrt(Math.pow(pt-yn,2)+Math.pow(kt-vn,2))),Yn<G?Sn>G&&(De=bt(je,pt,kt,yn,vn,G),Re&&(je.start=Zt+$e*De)):Yn>ne?Sn<ne&&(De=bt(je,pt,kt,yn,vn,ne),Re&&(je.start=Zt+$e*De)):Ae(je,pt,kt,en),Sn<G&&Yn>=G&&(De=bt(je,pt,kt,yn,vn,G),ar=!0),Sn>ne&&Yn<=ne&&(De=bt(je,pt,kt,yn,vn,ne),ar=!0),!we&&ar&&(Re&&(je.end=Zt+$e*De),L.push(je),je=dr(oe)),Re&&(Zt+=$e)}var yr=oe.length-3;pt=oe[yr],kt=oe[yr+1],en=oe[yr+2],(Yn=pe===0?pt:kt)>=G&&Yn<=ne&&Ae(je,pt,kt,en),yr=je.length-3,we&&yr>=3&&(je[yr]!==je[0]||je[yr+1]!==je[1])&&Ae(je,je[0],je[1],je[2]),je.length&&L.push(je)}function dr(oe){var L=[];return L.size=oe.size,L.start=oe.start,L.end=oe.end,L}function rr(oe,L,G,ne,pe,we){for(var Re=0;Re<oe.length;Re++)br(oe[Re],L,G,ne,pe,we,!1)}function Ae(oe,L,G,ne){oe.push(L),oe.push(G),oe.push(ne)}function mt(oe,L,G,ne,pe,we){var Re=(we-L)/(ne-L);return oe.push(we),oe.push(G+(pe-G)*Re),oe.push(1),Re}function Vt(oe,L,G,ne,pe,we){var Re=(we-G)/(pe-G);return oe.push(L+(ne-L)*Re),oe.push(we),oe.push(1),Re}function gn(oe,L){for(var G=[],ne=0;ne<oe.length;ne++){var pe,we=oe[ne],Re=we.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")pe=hn(we.geometry,L);else if(Re==="MultiLineString"||Re==="Polygon"){pe=[];for(var $e=0;$e<we.geometry.length;$e++)pe.push(hn(we.geometry[$e],L))}else if(Re==="MultiPolygon")for(pe=[],$e=0;$e<we.geometry.length;$e++){for(var De=[],je=0;je<we.geometry[$e].length;je++)De.push(hn(we.geometry[$e][je],L));pe.push(De)}G.push(Wt(we.id,Re,pe,we.tags))}return G}function hn(oe,L){var G=[];G.size=oe.size,oe.start!==void 0&&(G.start=oe.start,G.end=oe.end);for(var ne=0;ne<oe.length;ne+=3)G.push(oe[ne]+L,oe[ne+1],oe[ne+2]);return G}function Fe(oe,L){if(oe.transformed)return oe;var G,ne,pe,we=1<<oe.z,Re=oe.x,$e=oe.y;for(G=0;G<oe.features.length;G++){var De=oe.features[G],je=De.geometry,bt=De.type;if(De.geometry=[],bt===1)for(ne=0;ne<je.length;ne+=2)De.geometry.push(Rt(je[ne],je[ne+1],L,we,Re,$e));else for(ne=0;ne<je.length;ne++){var Zt=[];for(pe=0;pe<je[ne].length;pe+=2)Zt.push(Rt(je[ne][pe],je[ne][pe+1],L,we,Re,$e));De.geometry.push(Zt)}}return oe.transformed=!0,oe}function Rt(oe,L,G,ne,pe,we){return[Math.round(G*(oe*ne-pe)),Math.round(G*(L*ne-we))]}function Qt(oe,L,G,ne,pe){for(var we=L===pe.maxZoom?0:pe.tolerance/((1<<L)*pe.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:ne,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<oe.length;$e++){Re.numFeatures++,An(Re,oe[$e],we,pe);var De=oe[$e].minX,je=oe[$e].minY,bt=oe[$e].maxX,Zt=oe[$e].maxY;De<Re.minX&&(Re.minX=De),je<Re.minY&&(Re.minY=je),bt>Re.maxX&&(Re.maxX=bt),Zt>Re.maxY&&(Re.maxY=Zt)}return Re}function An(oe,L,G,ne){var pe=L.geometry,we=L.type,Re=[];if(we==="Point"||we==="MultiPoint")for(var $e=0;$e<pe.length;$e+=3)Re.push(pe[$e]),Re.push(pe[$e+1]),oe.numPoints++,oe.numSimplified++;else if(we==="LineString")et(Re,pe,oe,G,!1,!1);else if(we==="MultiLineString"||we==="Polygon")for($e=0;$e<pe.length;$e++)et(Re,pe[$e],oe,G,we==="Polygon",$e===0);else if(we==="MultiPolygon")for(var De=0;De<pe.length;De++){var je=pe[De];for($e=0;$e<je.length;$e++)et(Re,je[$e],oe,G,!0,$e===0)}if(Re.length){var bt=L.tags||null;if(we==="LineString"&&ne.lineMetrics){for(var Zt in bt={},L.tags)bt[Zt]=L.tags[Zt];bt.mapbox_clip_start=pe.start/pe.size,bt.mapbox_clip_end=pe.end/pe.size}var ye={geometry:Re,type:we==="Polygon"||we==="MultiPolygon"?3:we==="LineString"||we==="MultiLineString"?2:1,tags:bt};L.id!==null&&(ye.id=L.id),oe.features.push(ye)}}function et(oe,L,G,ne,pe,we){var Re=ne*ne;if(ne>0&&L.size<(pe?Re:ne))G.numPoints+=L.length/3;else{for(var $e=[],De=0;De<L.length;De+=3)(ne===0||L[De+2]>Re)&&(G.numSimplified++,$e.push(L[De]),$e.push(L[De+1])),G.numPoints++;pe&&function(je,bt){for(var Zt=0,ye=0,pt=je.length,kt=pt-2;ye<pt;kt=ye,ye+=2)Zt+=(je[ye]-je[kt])*(je[ye+1]+je[kt+1]);if(Zt>0===bt)for(ye=0,pt=je.length;ye<pt/2;ye+=2){var en=je[ye],yn=je[ye+1];je[ye]=je[pt-2-ye],je[ye+1]=je[pt-1-ye],je[pt-2-ye]=en,je[pt-1-ye]=yn}}($e,we),oe.push($e)}}function Gt(oe,L){var G=(L=this.options=function(pe,we){for(var Re in we)pe[Re]=we[Re];return pe}(Object.create(this.options),L)).debug;if(G&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var ne=function(pe,we){var Re=[];if(pe.type==="FeatureCollection")for(var $e=0;$e<pe.features.length;$e++)wn(Re,pe.features[$e],we,$e);else wn(Re,pe.type==="Feature"?pe:{geometry:pe},we);return Re}(oe,L);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ne=function(pe,we){var Re=we.buffer/we.extent,$e=pe,De=sr(pe,1,-1-Re,Re,0,-1,2,we),je=sr(pe,1,1-Re,2+Re,0,-1,2,we);return(De||je)&&($e=sr(pe,1,-Re,1+Re,0,-1,2,we)||[],De&&($e=gn(De,1).concat($e)),je&&($e=$e.concat(gn(je,-1)))),$e}(ne,L),ne.length&&this.splitTile(ne,0,0,0),G&&(ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function sn(oe,L,G){return 32*((1<<oe)*G+L)+oe}function On(oe,L){const G=oe.tileID.canonical;if(!this._geoJSONIndex)return L(null,null);const ne=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!ne)return L(null,null);const pe=new F(ne.features);let we=H(pe);we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),L(null,{vectorTile:pe,rawData:we.buffer})}Gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gt.prototype.splitTile=function(oe,L,G,ne,pe,we,Re){for(var $e=[oe,L,G,ne],De=this.options,je=De.debug;$e.length;){ne=$e.pop(),G=$e.pop(),L=$e.pop(),oe=$e.pop();var bt=1<<L,Zt=sn(L,G,ne),ye=this.tiles[Zt];if(!ye&&(je>1&&console.time("creation"),ye=this.tiles[Zt]=Qt(oe,L,G,ne,De),this.tileCoords.push({z:L,x:G,y:ne}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,G,ne,ye.numFeatures,ye.numPoints,ye.numSimplified),console.timeEnd("creation"));var pt="z"+L;this.stats[pt]=(this.stats[pt]||0)+1,this.total++}if(ye.source=oe,pe){if(L===De.maxZoom||L===pe)continue;var kt=1<<pe-L;if(G!==Math.floor(we/kt)||ne!==Math.floor(Re/kt))continue}else if(L===De.indexMaxZoom||ye.numPoints<=De.indexMaxPoints)continue;if(ye.source=null,oe.length!==0){je>1&&console.time("clipping");var en,yn,vn,Yn,Sn,ar,yr=.5*De.buffer/De.extent,Jo=.5-yr,Vo=.5+yr,ft=1+yr;en=yn=vn=Yn=null,Sn=sr(oe,bt,G-yr,G+Vo,0,ye.minX,ye.maxX,De),ar=sr(oe,bt,G+Jo,G+ft,0,ye.minX,ye.maxX,De),oe=null,Sn&&(en=sr(Sn,bt,ne-yr,ne+Vo,1,ye.minY,ye.maxY,De),yn=sr(Sn,bt,ne+Jo,ne+ft,1,ye.minY,ye.maxY,De),Sn=null),ar&&(vn=sr(ar,bt,ne-yr,ne+Vo,1,ye.minY,ye.maxY,De),Yn=sr(ar,bt,ne+Jo,ne+ft,1,ye.minY,ye.maxY,De),ar=null),je>1&&console.timeEnd("clipping"),$e.push(en||[],L+1,2*G,2*ne),$e.push(yn||[],L+1,2*G,2*ne+1),$e.push(vn||[],L+1,2*G+1,2*ne),$e.push(Yn||[],L+1,2*G+1,2*ne+1)}}},Gt.prototype.getTile=function(oe,L,G){var ne=this.options,pe=ne.extent,we=ne.debug;if(oe<0||oe>24)return null;var Re=1<<oe,$e=sn(oe,L=(L%Re+Re)%Re,G);if(this.tiles[$e])return Fe(this.tiles[$e],pe);we>1&&console.log("drilling down to z%d-%d-%d",oe,L,G);for(var De,je=oe,bt=L,Zt=G;!De&&je>0;)je--,bt=Math.floor(bt/2),Zt=Math.floor(Zt/2),De=this.tiles[sn(je,bt,Zt)];return De&&De.source?(we>1&&console.log("found parent tile z%d-%d-%d",je,bt,Zt),we>1&&console.time("drilling down"),this.splitTile(De.source,je,bt,Zt,oe,L,G),we>1&&console.timeEnd("drilling down"),this.tiles[$e]?Fe(this.tiles[$e],pe):null):null};class xi extends o.VectorTileWorkerSource{constructor(L,G,ne,pe,we){super(L,G,ne,pe,On),we&&(this.loadGeoJSON=we)}loadData(L,G){const ne=L&&L.request,pe=ne&&ne.collectResourceTiming;this.loadGeoJSON(L,(we,Re)=>{if(we||!Re)return G(we);if(typeof Re!="object")return G(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));{A(Re,!0);try{if(L.filter){const De=o.createExpression(L.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(De.result==="error")throw new Error(De.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(bt=>De.value.evaluate({zoom:0},bt))}}this._geoJSONIndex=L.cluster?new Yt(function({superclusterOptions:De,clusterProperties:je}){if(!je||!De)return De;const bt={},Zt={},ye={accumulated:null,zoom:0},pt={properties:null},kt=Object.keys(je);for(const en of kt){const[yn,vn]=je[en],Yn=o.createExpression(vn),Sn=o.createExpression(typeof yn=="string"?[yn,["accumulated"],["get",en]]:yn);bt[en]=Yn.value,Zt[en]=Sn.value}return De.map=en=>{pt.properties=en;const yn={};for(const vn of kt)yn[vn]=bt[vn].evaluate(ye,pt);return yn},De.reduce=(en,yn)=>{pt.properties=yn;for(const vn of kt)ye.accumulated=en[vn],en[vn]=Zt[vn].evaluate(ye,pt)},De}(L)).load(Re.features):function(De,je){return new Gt(De,je)}(Re,L.geojsonVtOptions)}catch(De){return G(De)}this.loaded={};const $e={};if(pe){const De=o.getPerformanceMeasurement(ne);De&&($e.resourceTiming={},$e.resourceTiming[L.source]=JSON.parse(JSON.stringify(De)))}G(null,$e)}})}reloadTile(L,G){const ne=this.loaded;return ne&&ne[L.uid]?super.reloadTile(L,G):this.loadTile(L,G)}loadGeoJSON(L,G){if(L.request)o.getJSON(L.request,G);else{if(typeof L.data!="string")return G(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));try{return G(null,JSON.parse(L.data))}catch{return G(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(L,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(ne){G(ne)}}getClusterChildren(L,G){try{G(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(ne){G(ne)}}getClusterLeaves(L,G){try{G(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(ne){G(ne)}}}class ri{constructor(L){this.self=L,this.actor=new o.Actor(L,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:xi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,ne)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=ne},this.self.registerRTLTextPlugin=G=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=G.applyArabicShaping,o.plugin.processBidirectionalText=G.processBidirectionalText,o.plugin.processStyledBidirectionalText=G.processStyledBidirectionalText}}clearCaches(L,G,ne){delete this.layerIndexes[L],delete this.availableImages[L],delete this.workerSources[L],delete this.demWorkerSources[L],ne()}checkIfReady(L,G,ne){ne()}setReferrer(L,G){this.referrer=G}spriteLoaded(L,G){this.isSpriteLoaded[L]=G;for(const ne in this.workerSources[L]){const pe=this.workerSources[L][ne];for(const we in pe)pe[we]instanceof o.VectorTileWorkerSource&&(pe[we].isSpriteLoaded=G,pe[we].fire(new o.Event("isSpriteLoaded")))}}setImages(L,G,ne){this.availableImages[L]=G;for(const pe in this.workerSources[L]){const we=this.workerSources[L][pe];for(const Re in we)we[Re].availableImages=G}ne()}enableTerrain(L,G,ne){this.terrain=G,ne()}setProjection(L,G){this.projections[L]=o.getProjection(G)}setLayers(L,G,ne){this.getLayerIndex(L).replace(G),ne()}updateLayers(L,G,ne){this.getLayerIndex(L).update(G.layers,G.removedIds),ne()}loadTile(L,G,ne){const pe=this.enableTerrain?o.extend({enableTerrain:this.terrain},G):G;pe.projection=this.projections[L]||this.defaultProjection,this.getWorkerSource(L,G.type,G.source).loadTile(pe,ne)}loadDEMTile(L,G,ne){const pe=this.enableTerrain?o.extend({buildQuadTree:this.terrain},G):G;this.getDEMWorkerSource(L,G.source).loadTile(pe,ne)}reloadTile(L,G,ne){const pe=this.enableTerrain?o.extend({enableTerrain:this.terrain},G):G;pe.projection=this.projections[L]||this.defaultProjection,this.getWorkerSource(L,G.type,G.source).reloadTile(pe,ne)}abortTile(L,G,ne){this.getWorkerSource(L,G.type,G.source).abortTile(G,ne)}removeTile(L,G,ne){this.getWorkerSource(L,G.type,G.source).removeTile(G,ne)}removeSource(L,G,ne){if(!this.workerSources[L]||!this.workerSources[L][G.type]||!this.workerSources[L][G.type][G.source])return;const pe=this.workerSources[L][G.type][G.source];delete this.workerSources[L][G.type][G.source],pe.removeSource!==void 0?pe.removeSource(G,ne):ne()}loadWorkerSource(L,G,ne){try{this.self.importScripts(G.url),ne()}catch(pe){ne(pe.toString())}}syncRTLPluginState(L,G,ne){try{o.plugin.setState(G);const pe=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&pe!=null){this.self.importScripts(pe);const we=o.plugin.isParsed();ne(we?void 0:new Error(`RTL Text Plugin failed to import scripts from ${pe}`),we)}}catch(pe){ne(pe.toString())}}getAvailableImages(L){let G=this.availableImages[L];return G||(G=[]),G}getLayerIndex(L){let G=this.layerIndexes[L];return G||(G=this.layerIndexes[L]=new w),G}getWorkerSource(L,G,ne){if(this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][G]||(this.workerSources[L][G]={}),!this.workerSources[L][G][ne]){const pe={send:(we,Re,$e,De,je,bt)=>{this.actor.send(we,Re,$e,L,je,bt)},scheduler:this.actor.scheduler};this.workerSources[L][G][ne]=new this.workerSourceTypes[G](pe,this.getLayerIndex(L),this.getAvailableImages(L),this.isSpriteLoaded[L])}return this.workerSources[L][G][ne]}getDEMWorkerSource(L,G){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][G]||(this.demWorkerSources[L][G]=new S),this.demWorkerSources[L][G]}enforceCacheSizeLimit(L,G){o.enforceCacheSizeLimit(G)}getWorkerPerformanceMetrics(L,G,ne){ne(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ri(self)),ri}),u(["./shared"],function(o){function m(g,c){if(Array.isArray(g)){if(!Array.isArray(c)||g.length!==c.length)return!1;for(let f=0;f<g.length;f++)if(!m(g[f],c[f]))return!1;return!0}if(typeof g=="object"&&g!==null&&c!==null){if(typeof c!="object"||Object.keys(g).length!==Object.keys(c).length)return!1;for(const f in g)if(!m(g[f],c[f]))return!1;return!0}return g===c}var y=w;function w(g){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,b,C=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(C);try{b=new Worker(P),_=!0}catch{_=!1}return b&&b.terminate(),URL.revokeObjectURL(P),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var b=_.getContext("2d");if(!b)return!1;var C=b.getImageData(0,0,1,1);return C&&C.width===_.width}()?(S[f=c&&c.failIfMajorPerformanceCaveat]===void 0&&(S[f]=function(_){var b,C=function(P){var k=document.createElement("canvas"),R=Object.create(w.webGLContextAttributes);return R.failIfMajorPerformanceCaveat=P,k.getContext("webgl",R)||k.getContext("experimental-webgl",R)}(_);if(!C)return!1;try{b=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!b||C.isContextLost())&&(C.shaderSource(b,"void main() {}"),C.compileShader(b),C.getShaderParameter(b,C.COMPILE_STATUS)===!0)}(f)),S[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(g)}var S={};function A(g,c,f){const _=o.window.document.createElement(g);return c!==void 0&&(_.className=c),f&&f.appendChild(_),_}function I(g,c,f){const _=o.window.document.createElementNS("http://www.w3.org/2000/svg",g);for(const b of Object.keys(c))_.setAttributeNS(null,b,c[b]);return f&&f.appendChild(_),_}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const z=o.window.document&&o.window.document.documentElement.style,U=z&&z.userSelect!==void 0?"userSelect":"WebkitUserSelect";let j;function F(){z&&U&&(j=z[U],z[U]="none")}function H(){z&&U&&(z[U]=j)}function J(g){g.preventDefault(),g.stopPropagation(),o.window.removeEventListener("click",J,!0)}function Z(){o.window.addEventListener("click",J,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",J,!0)},0)}function Y(g,c){const f=g.getBoundingClientRect();return de(g,f,c)}function ce(g,c){const f=g.getBoundingClientRect(),_=[];for(let b=0;b<c.length;b++)_.push(de(g,f,c[b]));return _}function ee(g){return o.window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function de(g,c,f){const _=g.offsetWidth===c.width?1:g.offsetWidth/c.width;return new o.pointGeometry((f.clientX-c.left)*_,(f.clientY-c.top)*_)}function ue(g,c){var f=c[0],_=c[1],b=c[2],C=c[3],P=f*C-b*_;return P?(g[0]=C*(P=1/P),g[1]=-_*P,g[2]=-b*P,g[3]=f*P,g):null}function Ee(g){const{userImage:c}=g;return!!(c&&c.render&&c.render())&&(g.data.replace(new Uint8Array(c.data.buffer)),!0)}class ze extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:f,callback:_}of this.requestors)this._notify(f,_);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,f){this._validate(c,f)&&(this.images[c]=f)}_validate(c,f){let _=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),_=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),_=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),_=!1),_}_validateStretch(c,f){if(!c)return!0;let _=0;for(const b of c){if(b[0]<_||b[1]<b[0]||f<b[1])return!1;_=b[1]}return!0}_validateContent(c,f){return!(c&&(c.length!==4||c[0]<0||f.data.width<c[0]||c[1]<0||f.data.height<c[1]||c[2]<0||f.data.width<c[2]||c[3]<0||f.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,f){f.version=this.images[c].version+1,this.images[c]=f,this.updatedImages[c]=!0}removeImage(c){const f=this.images[c];delete this.images[c],delete this.patterns[c],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,f){let _=!0;if(!this.isLoaded())for(const b of c)this.images[b]||(_=!1);this.isLoaded()||_?this._notify(c,f):this.requestors.push({ids:c,callback:f})}_notify(c,f){const _={};for(const b of c){this.images[b]||this.fire(new o.Event("styleimagemissing",{id:b}));const C=this.images[b];C?_[b]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:o.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,_)}getPixelSize(){const{width:c,height:f}=this.atlasImage;return{width:c,height:f}}getPattern(c){const f=this.patterns[c],_=this.getImage(c);if(!_)return null;if(f&&f.position.version===_.version)return f.position;if(f)f.position.version=_.version;else{const b={w:_.data.width+2,h:_.data.height+2,x:0,y:0},C=new o.ImagePosition(b,_);this.patterns[c]={bin:b,position:C}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const f=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const C in this.patterns)c.push(this.patterns[C].bin);const{w:f,h:_}=o.potpack(c),b=this.atlasImage;b.resize({width:f||1,height:_||1});for(const C in this.patterns){const{bin:P}=this.patterns[C],k=P.x+1,R=P.y+1,N=this.images[C].data,$=N.width,X=N.height;o.RGBAImage.copy(N,b,{x:0,y:0},{x:k,y:R},{width:$,height:X}),o.RGBAImage.copy(N,b,{x:0,y:X-1},{x:k,y:R-1},{width:$,height:1}),o.RGBAImage.copy(N,b,{x:0,y:0},{x:k,y:R+X},{width:$,height:1}),o.RGBAImage.copy(N,b,{x:$-1,y:0},{x:k-1,y:R},{width:1,height:X}),o.RGBAImage.copy(N,b,{x:0,y:0},{x:k+$,y:R},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const f of c){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const _=this.images[f];Ee(_)&&this.updateImage(f,_)}}}const xe=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(g,c){return function([f,_,b]){const C=o.degToRad(_+90),P=o.degToRad(b);return{x:f*Math.cos(C)*Math.sin(P),y:f*Math.sin(C)*Math.sin(P),z:f*Math.cos(P),azimuthal:_,polar:b}}(g.expression.evaluate(c))}interpolate(g,c,f){return{x:o.number(g.x,c.x,f),y:o.number(g.y,c.y,f),z:o.number(g.z,c.z,f),azimuthal:o.number(g.azimuthal,c.azimuthal,f),polar:o.number(g.polar,c.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),qe="-transition";class Qe extends o.Evented{constructor(c){super(),this._transitionable=new o.Transitionable(xe),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,f={}){if(!this._validate(o.validateLight,c,f))for(const _ in c){const b=c[_];o.endsWith(_,qe)?this._transitionable.setTransition(_.slice(0,-qe.length),b):this._transitionable.setValue(_,b)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Be=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),st="-transition";class it extends o.Evented{constructor(c,f){super(),this._transitionable=new o.Transitionable(Be),this.set(c),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(c){for(const f in c){const _=c[f];o.endsWith(f,st)?this._transitionable.setTransition(f.slice(0,-st.length),_):this._transitionable.setValue(f,_)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}}function Pt(g,c,f,_){const b=o.smoothstep(45,65,f),[C,P]=Ke(g,_),k=o.length(c);let R=1-Math.min(1,Math.exp((k-C)/(P-C)*-6));return R*=R*R,R=Math.min(1,1.00747*R),R*b*g.alpha}function Ke(g,c){const f=.5/Math.tan(.5*c);return[g.range[0]+f,g.range[1]+f]}const ut=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),jt="-transition";class on extends o.Evented{constructor(c,f){super(),this._transitionable=new o.Transitionable(ut),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const c=this._transform,f=c.projection.name==="globe",_=o.globeToMercatorTransition(c.zoom),b=this.properties.get("range"),C=[.5,3];return{range:f?[o.number(C[0],b[0],_),o.number(C[1],b[1],_)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,f={}){if(!this._validate(o.validateFog,c,f)){for(const _ of Object.keys(o.spec.fog))c&&c[_]===void 0&&(c[_]=o.spec.fog[_].default);for(const _ in c){const b=c[_];o.endsWith(_,jt)?this._transitionable.setTransition(_.slice(0,-jt.length),b):this._transitionable.setValue(_,b)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,c))*f.a}getOpacityAtLatLng(c,f){return this._transform.projection.supportsFog?function(_,b,C){const P=o.MercatorCoordinate.fromLngLat(b),k=C.elevation?C.elevation.getAtPointOrZero(P):0,R=[P.x,P.y,k];return o.transformMat4(R,R,C.mercatorFogMatrix),Pt(_,R,C.pitch,C._fov)}(this.state,c,f):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Ke(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class En{constructor(c,f){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let b=0;b<_.length;b++){const C=new En.Actor(_[b],f,this.id);C.name=`Worker ${b}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,f,_){o.asyncAll(this.actors,(b,C)=>{b.send(c,f,C)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Dn(g,c,f){return c*(o.EXTENT/(g.tileSize*Math.pow(2,f-g.tileID.overscaledZ)))}En.Actor=o.Actor;class Je{constructor(c,f,_,b){this.screenBounds=c,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(c,f){let _,b;if(c instanceof o.pointGeometry||typeof c[0]=="number"){const C=o.pointGeometry.convert(c);_=[C],b=f.isPointAboveHorizon(C)}else{const C=o.pointGeometry.convert(c[0]),P=o.pointGeometry.convert(c[1]);_=[C,P],b=o.polygonizeBounds(C,P).every(k=>f.isPointAboveHorizon(k))}return new Je(_,f.getCameraPoint(),b,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const f=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<_.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?b[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(b[3]=this.cameraPoint)),o.bufferConvexPolygon(b,c)}bufferedCameraGeometryGlobe(c){const f=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,_,c),C=this.cameraPoint.clone();switch(3*((C.y>f.y)+(C.y>_.y))+((C.x>f.x)+(C.x>_.x))){case 0:b[0]=C,b[4]=C.clone();break;case 1:b.splice(1,0,C);break;case 2:b[1]=C;break;case 3:b.splice(4,0,C);break;case 5:b.splice(2,0,C);break;case 6:b[3]=C;break;case 7:b.splice(3,0,C);break;case 8:b[2]=C}return b}containsTile(c,f,_,b=0){const C=c.queryPadding/f._pixelsPerMercatorPixel+1,P=_?this._bufferedCameraMercator(C,f):this._bufferedScreenMercator(C,f);let k=c.tileID.wrap+(P.unwrapped?b:0);const R=P.polygon.map(le=>o.getTilePoint(c.tileTransform,le,k));if(!o.polygonIntersectsBox(R,0,0,o.EXTENT,o.EXTENT))return;k=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const N=this.screenGeometryMercator.polygon.map(le=>o.getTileVec3(c.tileTransform,le,k)),$=N.map(le=>new o.pointGeometry(le[0],le[1])),X=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),te=o.getTileVec3(c.tileTransform,X,k),ie=N.map(le=>{const Q=o.sub(le,le,te);return o.normalize(Q,Q),new o.Ray(te,Q)}),se=Dn(c,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:$,tilespaceRays:ie,bufferedTilespaceGeometry:R,bufferedTilespaceBounds:(ae=o.getBounds(R),ae.min.x=o.clamp(ae.min.x,0,o.EXTENT),ae.min.y=o.clamp(ae.min.y,0,o.EXTENT),ae.max.x=o.clamp(ae.max.x,0,o.EXTENT),ae.max.y=o.clamp(ae.max.y,0,o.EXTENT),ae),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:se};var ae}_bufferedScreenMercator(c,f){const _=Lt(c);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),f):{polygon:this.bufferedScreenGeometry(c).map(C=>f.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[_]=b,b}}_bufferedCameraMercator(c,f){const _=Lt(c);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),f):{polygon:this.bufferedCameraGeometry(c).map(C=>f.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[_]=b,b}}_projectAndResample(c,f){const _=function(C,P){const k=o.multiply([],P.pixelMatrix,P.globeMatrix),R=[0,-o.GLOBE_RADIUS,0,1],N=[0,o.GLOBE_RADIUS,0,1],$=[0,0,0,1];o.transformMat4$1(R,R,k),o.transformMat4$1(N,N,k),o.transformMat4$1($,$,k);const X=new o.pointGeometry(R[0]/R[3],R[1]/R[3]),te=new o.pointGeometry(N[0]/N[3],N[1]/N[3]),ie=o.polygonContainsPoint(C,X)&&R[3]<$[3],se=o.polygonContainsPoint(C,te)&&N[3]<$[3];if(!ie&&!se)return null;const ae=function(Ie,We,Xe){for(let rt=1;rt<Ie.length;rt++){const Ht=wt(We.pointCoordinate3D(Ie[rt-1]).x),Ge=wt(We.pointCoordinate3D(Ie[rt]).x);if(Xe<0){if(Ht<Ge)return{idx:rt,t:-Ht/(Ge-1-Ht)}}else if(Ge<Ht)return{idx:rt,t:(1-Ht)/(Ge+1-Ht)}}return null}(C,P,ie?-1:1);if(!ae)return null;const{idx:le,t:Q}=ae;let ve=le>1?yt(C.slice(0,le),P):[],ge=le<C.length?yt(C.slice(le),P):[];ve=ve.map(Ie=>new o.pointGeometry(wt(Ie.x),Ie.y)),ge=ge.map(Ie=>new o.pointGeometry(wt(Ie.x),Ie.y));const _e=[...ve];_e.length===0&&_e.push(ge[ge.length-1]);const ke=o.number(_e[_e.length-1].y,(ge.length===0?ve[0]:ge[0]).y,Q);let Se;return Se=ie?[new o.pointGeometry(0,ke),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,ke)]:[new o.pointGeometry(1,ke),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,ke)],_e.push(...Se),ge.length===0?_e.push(ve[0]):_e.push(...ge),{polygon:_e.map(Ie=>new o.MercatorCoordinate(Ie.x,Ie.y)),unwrapped:!1}}(c,f);if(_)return _;const b=function(C,P){let k=!1,R=-1/0,N=0;for(let X=0;X<C.length-1;X++)C[X].x>R&&(R=C[X].x,N=X);for(let X=0;X<C.length-1;X++){const te=(N+X)%(C.length-1),ie=C[te],se=C[te+1];Math.abs(ie.x-se.x)>.5&&(ie.x<se.x?(ie.x+=1,te===0&&(C[C.length-1].x+=1)):(se.x+=1,te+1===C.length-1&&(C[0].x+=1)),k=!0)}const $=o.mercatorXfromLng(P.center.lng);return k&&$<Math.abs($-1)&&C.forEach(X=>{X.x-=1}),{polygon:C,unwrapped:k}}(yt(c,f).map(C=>new o.pointGeometry(wt(C.x),C.y)),f);return{polygon:b.polygon.map(C=>new o.MercatorCoordinate(C.x,C.y)),unwrapped:b.unwrapped}}}function yt(g,c){return o.resample(g,f=>{const _=c.pointCoordinate3D(f);f.x=_.x,f.y=_.y},1/256)}function wt(g){return g<0?1+g%1:g%1}function Lt(g){return 100*g|0}function Ct(g,c,f,_,b){const C=function(P,k){if(P)return b(P);if(k){g.url&&k.tiles&&g.tiles&&delete g.tiles;const R=o.pick(o.extend(k,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(R.vectorLayers=k.vector_layers,R.vectorLayerIds=R.vectorLayers.map(N=>N.id)),R.tiles=c.canonicalizeTileset(R,g.url),b(null,R)}};return g.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(g.url,null,f,_),o.ResourceType.Source),C):o.exported.frame(()=>C(null,g))}class Yt{constructor(c,f,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=f||0,this.maxzoom=_||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const f=Math.pow(2,c.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),C=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),P=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return c.x>=_&&c.x<C&&c.y>=b&&c.y<P}}class ln{constructor(c,f,_){this.context=c;const b=c.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const he={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Me{constructor(c,f,_,b){this.length=f.length,this.attributes=_,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=c;const C=c.gl;this.buffer=C.createBuffer(),c.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,f){for(let _=0;_<this.attributes.length;_++){const b=f.attributes[this.attributes[_].name];b!==void 0&&c.enableVertexAttribArray(b)}}setVertexAttribPointers(c,f,_){for(let b=0;b<this.attributes.length;b++){const C=this.attributes[b],P=f.attributes[C.name];P!==void 0&&c.vertexAttribPointer(P,C.components,c[he[C.type]],!1,this.itemSize,C.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ue{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class lt extends Ue{getDefault(){return o.Color.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class gt extends Ue{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Ne extends Ue{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class ht extends Ue{getDefault(){return[!0,!0,!0,!0]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class At extends Ue{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Et extends Ue{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Oe extends Ue{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const f=this.current;(c.func!==f.func||c.ref!==f.ref||c.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class vt extends Ue{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Wt extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=c,this.dirty=!1}}class Jt extends Ue{getDefault(){return[0,1]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class wn extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=c,this.dirty=!1}}class Cn extends Ue{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Fn extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.BLEND):f.disable(f.BLEND),this.current=c,this.dirty=!1}}class $n extends Ue{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Zn extends Ue{getDefault(){return o.Color.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class pr extends Ue{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class sr extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=c,this.dirty=!1}}class li extends Ue{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class br extends Ue{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class dr extends Ue{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class rr extends Ue{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Ae extends Ue{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class mt extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Vt extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class gn extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class hn extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Fe extends Ue{getDefault(){return null}set(c){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Rt extends Ue{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class Qt extends Ue{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class An extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class et extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Gt extends Ue{constructor(c,f){super(c),this.context=c,this.parent=f}getDefault(){return null}}class sn extends Gt{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class On extends Gt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class xi extends On{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ri{constructor(c,f,_,b){this.context=c,this.width=f,this.height=_;const C=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new sn(c,C),b&&(this.depthAttachment=new On(c,C))}destroy(){const c=this.context.gl,f=this.colorAttachment.get();if(f&&c.deleteTexture(f),this.depthAttachment){const _=this.depthAttachment.get();_&&c.deleteRenderbuffer(_)}c.deleteFramebuffer(this.framebuffer)}}class oe{constructor(c,f=!1){if(this.gl=c,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const _=c;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(c),deleteVertexArrayOES:_.deleteVertexArray.bind(c),bindVertexArrayOES:_.bindVertexArray.bind(c)}}this.clearColor=new lt(this),this.clearDepth=new gt(this),this.clearStencil=new Ne(this),this.colorMask=new ht(this),this.depthMask=new At(this),this.stencilMask=new Et(this),this.stencilFunc=new Oe(this),this.stencilOp=new vt(this),this.stencilTest=new Wt(this),this.depthRange=new Jt(this),this.depthTest=new wn(this),this.depthFunc=new Cn(this),this.blend=new Fn(this),this.blendFunc=new $n(this),this.blendColor=new Zn(this),this.blendEquation=new pr(this),this.cullFace=new sr(this),this.cullFaceSide=new li(this),this.frontFace=new br(this),this.program=new dr(this),this.activeTexture=new rr(this),this.viewport=new Ae(this),this.bindFramebuffer=new mt(this),this.bindRenderbuffer=new Vt(this),this.bindTexture=new gn(this),this.bindVertexBuffer=new hn(this),this.bindElementBuffer=new Fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Rt(this),this.pixelStoreUnpack=new Qt(this),this.pixelStoreUnpackPremultiplyAlpha=new An(this),this.pixelStoreUnpackFlipY=new et(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=c.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&c.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,f){return new ln(this,c,f)}createVertexBuffer(c,f,_){return new Me(this,c,f,_)}createRenderbuffer(c,f,_){const b=this.gl,C=b.createRenderbuffer();return this.bindRenderbuffer.set(C),b.renderbufferStorage(b.RENDERBUFFER,c,f,_),this.bindRenderbuffer.set(null),C}createFramebuffer(c,f,_){return new ri(this,c,f,_)}clear({color:c,depth:f,stencil:_}){const b=this.gl;let C=0;c&&(C|=b.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(C|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),_!==void 0&&(C|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),b.clear(C)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){m(c.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class L extends o.Evented{constructor(c,f,_,b){if(super(),this.id=c,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(f,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=Ct(this._options,this.map._requestManager,f,_,(b,C)=>{this._tileJSONRequest=null,this._loaded=!0,b?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new o.ErrorEvent(b))):C&&(o.extend(this,C),C.bounds&&(this.tileBounds=new Yt(C.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(C.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(b)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(c,f){const _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(_,o.ResourceType.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=f:c.request=c.actor.send("reloadTile",b,C.bind(this));else if(c.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",b,C.bind(this),void 0,!0);else{const P=o.loadVectorTile.call({deduped:this._deduped},b,(k,R)=>{k||!R?C.call(this,k):(b.data={cacheControl:R.cacheControl,expires:R.expires,rawData:R.rawData.slice(0)},c.actor&&c.actor.send("loadTile",b,C.bind(this),void 0,!0))},!0);c.request={cancel:P}}function C(P,k){return delete c.request,c.aborted?f(null):P&&P.status!==404?f(P):(k&&k.resourceTiming&&(c.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&c.setExpiryData(k),c.loadVectorData(k,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id})}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class G extends o.Evented{constructor(c,f,_,b){super(),this.id=c,this.dispatcher=_,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ct(this._options,this.map._requestManager,null,null,(f,_)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new o.ErrorEvent(f)):_&&(o.extend(this,_),_.bounds&&(this.tileBounds=new Yt(_.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(_.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(f)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,f){const _=o.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(C,P,k,R)=>(delete c.request,c.aborted?(c.state="unloaded",f(null)):C?(c.state="errored",f(C)):P?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:k,expires:R}),c.setTexture(P,this.map.painter),c.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(c,f,_){c.setTexture(f,_)}static unloadTileData(c,f){c.texture&&f.saveTileTexture(c.texture)}abortTile(c,f){c.request&&(c.request.cancel(),delete c.request),f()}unloadTile(c,f){c.texture&&this.map.painter.saveTileTexture(c.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let ne;function pe(g,c,f,_,b,C,P,k){const R=[g,f,b,c,_,C,1,1,1],N=[P,k,1],$=o.adjoint([],R),[X,te,ie]=o.transformMat3(N,N,o.transpose($,$));return o.multiply$1(R,[X,0,0,0,te,0,0,0,ie],R)}class we extends o.Evented{constructor(c,f,_,b){super(),this.id=c,this.dispatcher=_,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f,this._dirty=!1}load(c,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,b)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new o.ErrorEvent(_));else if(b){const{HTMLImageElement:C}=o.window;this.image=b instanceof C?o.exported.getImageData(b):b,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const f=c.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let b=1/0,C=1/0,P=-1/0,k=-1/0;for(const X of _)b=Math.min(b,X.x),C=Math.min(C,X.y),P=Math.max(P,X.x),k=Math.max(k,X.y);const R=Math.max(P-b,k-C),N=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),$=Math.pow(2,N);return new o.CanonicalTileID(N,Math.floor((b+P)/2*$),Math.floor((C+k)/2*$))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const R in this.tiles){const N=this.tiles[R];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[_,b,C,P]=this.coordinates.map(R=>{const N=f.projection.project(R[0],R[1]);return o.getTilePoint(f,N)._round()});this.perspectiveTransform=function(R,N,$,X,te,ie,se,ae,le,Q){const ve=pe(0,0,R,0,0,N,R,N),ge=pe($,X,te,ie,se,ae,le,Q);return o.multiply$1(ge,o.adjoint(ve,ve),ge),[ge[6]/ge[8]*R/o.EXTENT,ge[7]/ge[8]*N/o.EXTENT]}(this.width,this.height,_.x,_.y,b.x,b.y,P.x,P.y,C.x,C.y);const k=this._boundsArray=new o.StructArrayLayout4i8;k.emplaceBack(_.x,_.y,0,0),k.emplaceBack(b.x,b.y,o.EXTENT,0),k.emplaceBack(P.x,P.y,0,o.EXTENT),k.emplaceBack(C.x,C.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(k,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,f=c.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(c,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(c)}loadTile(c,f){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},f(null)):(c.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Re={vector:L,raster:G,"raster-dem":class extends G{constructor(g,c,f,_){super(g,c,f,_),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(g,c){const f=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(b,C){b&&(g.state="errored",c(b)),C&&(g.dem=C,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",c(null))}g.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),function(b,C,P,k){if(delete g.request,g.aborted)g.state="unloaded",c(null);else if(b)g.state="errored",c(b);else if(C){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:P,expires:k});const R=o.window.ImageBitmap&&C instanceof o.window.ImageBitmap&&(ne==null&&(ne=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),ne),N=1-(C.width-o.prevPowerOfTwo(C.width))/2;N<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const $=R?C:o.exported.getImageData(C,N),X={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:$,encoding:this.encoding,padding:N};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",X,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(g){const c=g.canonical,f=Math.pow(2,c.z),_=(c.x-1+f)%f,b=c.x===0?g.wrap-1:g.wrap,C=(c.x+1+f)%f,P=c.x+1===f?g.wrap+1:g.wrap,k={};return k[new o.OverscaledTileID(g.overscaledZ,b,c.z,_,c.y).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,P,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(k[new o.OverscaledTileID(g.overscaledZ,b,c.z,_,c.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,g.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,P,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<f&&(k[new o.OverscaledTileID(g.overscaledZ,b,c.z,_,c.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,g.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(g.overscaledZ,P,c.z,C,c.y+1).key]={backfilled:!1}),k}unloadTile(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded"}},geojson:class extends o.Evented{constructor(g,c,f,_){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(_),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},c),this}getClusterChildren(g,c){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},c),this}getClusterLeaves(g,c,f,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:c,offset:f},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const g=o.extend({},this.workerOptions),c=this._data;typeof c=="string"?(g.request=this.map._requestManager.transformRequest(o.exported.resolveURL(c),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(f,_)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(b.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,c){const f=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(f,{type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,b)=>(delete g.request,g.unloadVectorData(),g.aborted?c(null):_?c(_):(g.loadVectorData(b,this.map.painter,f==="reloadTile"),c(null))),void 0,f==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends we{constructor(g,c,f,_){super(g,c,f,_),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const c of g.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.ResourceType.Source).url);o.getVideo(this.urls,(c,f)=>{this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const c=this.video.seekable;g<c.start(0)||g>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,c=g.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(g,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:we,canvas:class extends we{constructor(g,c,f,_){super(g,c,f,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(C=>typeof C!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends o.Evented{constructor(g,c,f,_){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=c,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Yt(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:c,y:f,z:_}=g.canonical;return this._implementation.hasTile({x:c,y:f,z:_})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,c){const{x:f,y:_,z:b}=g.tileID.canonical,C=new o.window.AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:f,y:_,z:b},{signal:C.signal})).then(function(P){return delete g.request,g.aborted?(g.state="unloaded",c(null)):P===void 0?(g.state="errored",c(null)):P===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",c(null)):function(k){return k instanceof o.window.ImageData||k instanceof o.window.HTMLCanvasElement||k instanceof o.window.ImageBitmap||k instanceof o.window.HTMLImageElement}(P)?(this.loadTileData(g,P),g.state="loaded",void c(null)):(g.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(P=>{P.code!==20&&(g.state="errored",c(P))}),g.request.cancel=()=>C.abort()}loadTileData(g,c){G.loadTileData(g,c,this._map.painter)}unloadTileData(g){G.unloadTileData(g,this._map.painter)}unloadTile(g,c){if(this.unloadTileData(g),this._implementation.unloadTile){const{x:f,y:_,z:b}=g.tileID.canonical;this._implementation.unloadTile({x:f,y:_,z:b})}c()}abortTile(g,c){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},$e=function(g,c,f,_){const b=new Re[c.type](g,c,f,_);if(b.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${b.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],b),b};function De(g,c){const f=o.identity([]);return o.scale(f,f,[.5*g.width,.5*-g.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,g.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(f)}function je(g,c,f,_,b,C,P,k=!1){const R=g.tilesIn(_,P,k);R.sort(Zt);const N=[];for(const X of R)N.push({wrappedTileID:X.tile.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(c,f,g._state,X,b,C,De(g.transform,X.tile.tileID),k)});const $=function(X){const te={},ie={};for(const se of X){const ae=se.queryResults,le=se.wrappedTileID,Q=ie[le]=ie[le]||{};for(const ve in ae){const ge=ae[ve],_e=Q[ve]=Q[ve]||{},ke=te[ve]=te[ve]||[];for(const Se of ge)_e[Se.featureIndex]||(_e[Se.featureIndex]=!0,ke.push(Se))}}return te}(N);for(const X in $)$[X].forEach(te=>{const ie=te.feature,se=ie.layer;se&&se.type!=="background"&&se.type!=="sky"&&(ie.source=se.source,se["source-layer"]&&(ie.sourceLayer=se["source-layer"]),ie.state=ie.id!==void 0?g.getFeatureState(se["source-layer"],ie.id):{})});return $}function bt(g,c){const f=g.getRenderableIds().map(C=>g.getTileByID(C)),_=[],b={};for(let C=0;C<f.length;C++){const P=f[C],k=P.tileID.canonical.key;b[k]||(b[k]=!0,P.querySourceFeatures(_,c))}return _}function Zt(g,c){const f=g.tileID,_=c.tileID;return f.overscaledZ-_.overscaledZ||f.canonical.y-_.canonical.y||f.wrap-_.wrap||f.canonical.x-_.canonical.x}function ye(){return gu.workerClass!=null?new gu.workerClass:new o.window.Worker(gu.workerUrl)}const pt="mapboxgl_preloaded_worker_pool";class kt{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<kt.workerCount;)this.workers.push(new ye);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[pt]}numActive(){return Object.keys(this.active).length}}let en;function yn(){return en||(en=new kt),en}function vn(g,c){const f={};for(const _ in g)_!=="ref"&&(f[_]=g[_]);return o.refProperties.forEach(_=>{_ in c&&(f[_]=c[_])}),f}function Yn(g){g=g.slice();const c=Object.create(null);for(let f=0;f<g.length;f++)c[g[f].id]=g[f];for(let f=0;f<g.length;f++)"ref"in g[f]&&(g[f]=vn(g[f],c[g[f].ref]));return g}kt.workerCount=2;const Sn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ar(g,c,f){f.push({command:Sn.addSource,args:[g,c[g]]})}function yr(g,c,f){c.push({command:Sn.removeSource,args:[g]}),f[g]=!0}function Jo(g,c,f,_){yr(g,f,_),ar(g,c,f)}function Vo(g,c,f){let _;for(_ in g[f])if(g[f].hasOwnProperty(_)&&_!=="data"&&!m(g[f][_],c[f][_]))return!1;for(_ in c[f])if(c[f].hasOwnProperty(_)&&_!=="data"&&!m(g[f][_],c[f][_]))return!1;return!0}function ft(g,c,f,_,b,C){let P;for(P in c=c||{},g=g||{})g.hasOwnProperty(P)&&(m(g[P],c[P])||f.push({command:C,args:[_,P,c[P],b]}));for(P in c)c.hasOwnProperty(P)&&!g.hasOwnProperty(P)&&(m(g[P],c[P])||f.push({command:C,args:[_,P,c[P],b]}))}function jo(g){return g.id}function ii(g,c){return g[c.id]=c,g}class Qo{constructor(c,f){this.reset(c,f)}reset(c,f){this.points=c||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.clamp(c,0,1);let f=1,_=this._distances[f];const b=c*this.paddedLength+this.padding;for(;_<b&&f<this._distances.length;)_=this._distances[++f];const C=f-1,P=this._distances[C],k=_-P,R=k>0?(b-P)/k:0;return this.points[C].mult(1-R).add(this.points[f].mult(R))}}class Il{constructor(c,f,_){const b=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(c/_),this.yCellCount=Math.ceil(f/_);for(let P=0;P<this.xCellCount*this.yCellCount;P++)b.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=f,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,f,_,b,C){this._forEachCell(f,_,b,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(b),this.bboxes.push(C)}insertCircle(c,f,_,b){this._forEachCell(f-b,_-b,f+b,_+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(f),this.circles.push(_),this.circles.push(b)}_insertBoxCell(c,f,_,b,C,P){this.boxCells[C].push(P)}_insertCircleCell(c,f,_,b,C,P){this.circleCells[C].push(P)}_query(c,f,_,b,C,P){if(_<0||c>this.width||b<0||f>this.height)return!C&&[];const k=[];if(c<=0&&f<=0&&this.width<=_&&this.height<=b){if(C)return!0;for(let R=0;R<this.boxKeys.length;R++)k.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const N=this.circles[3*R],$=this.circles[3*R+1],X=this.circles[3*R+2];k.push({key:this.circleKeys[R],x1:N-X,y1:$-X,x2:N+X,y2:$+X})}return P?k.filter(P):k}return this._forEachCell(c,f,_,b,this._queryCell,k,{hitTest:C,seenUids:{box:{},circle:{}}},P),C?k.length>0:k}_queryCircle(c,f,_,b,C){const P=c-_,k=c+_,R=f-_,N=f+_;if(k<0||P>this.width||N<0||R>this.height)return!b&&[];const $=[];return this._forEachCell(P,R,k,N,this._queryCellCircle,$,{hitTest:b,circle:{x:c,y:f,radius:_},seenUids:{box:{},circle:{}}},C),b?$.length>0:$}query(c,f,_,b,C){return this._query(c,f,_,b,!1,C)}hitTest(c,f,_,b,C){return this._query(c,f,_,b,!0,C)}hitTestCircle(c,f,_,b){return this._queryCircle(c,f,_,!0,b)}_queryCell(c,f,_,b,C,P,k,R){const N=k.seenUids,$=this.boxCells[C];if($!==null){const te=this.bboxes;for(const ie of $)if(!N.box[ie]){N.box[ie]=!0;const se=4*ie;if(c<=te[se+2]&&f<=te[se+3]&&_>=te[se+0]&&b>=te[se+1]&&(!R||R(this.boxKeys[ie]))){if(k.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[ie],x1:te[se],y1:te[se+1],x2:te[se+2],y2:te[se+3]})}}}const X=this.circleCells[C];if(X!==null){const te=this.circles;for(const ie of X)if(!N.circle[ie]){N.circle[ie]=!0;const se=3*ie;if(this._circleAndRectCollide(te[se],te[se+1],te[se+2],c,f,_,b)&&(!R||R(this.circleKeys[ie]))){if(k.hitTest)return P.push(!0),!0;{const ae=te[se],le=te[se+1],Q=te[se+2];P.push({key:this.circleKeys[ie],x1:ae-Q,y1:le-Q,x2:ae+Q,y2:le+Q})}}}}}_queryCellCircle(c,f,_,b,C,P,k,R){const N=k.circle,$=k.seenUids,X=this.boxCells[C];if(X!==null){const ie=this.bboxes;for(const se of X)if(!$.box[se]){$.box[se]=!0;const ae=4*se;if(this._circleAndRectCollide(N.x,N.y,N.radius,ie[ae+0],ie[ae+1],ie[ae+2],ie[ae+3])&&(!R||R(this.boxKeys[se])))return P.push(!0),!0}}const te=this.circleCells[C];if(te!==null){const ie=this.circles;for(const se of te)if(!$.circle[se]){$.circle[se]=!0;const ae=3*se;if(this._circlesCollide(ie[ae],ie[ae+1],ie[ae+2],N.x,N.y,N.radius)&&(!R||R(this.circleKeys[se])))return P.push(!0),!0}}}_forEachCell(c,f,_,b,C,P,k,R){const N=this._convertToXCellCoord(c),$=this._convertToYCellCoord(f),X=this._convertToXCellCoord(_),te=this._convertToYCellCoord(b);for(let ie=N;ie<=X;ie++)for(let se=$;se<=te;se++)if(C.call(this,c,f,_,b,this.xCellCount*se+ie,P,k,R))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,f,_,b,C,P){const k=b-c,R=C-f,N=_+P;return N*N>k*k+R*R}_circleAndRectCollide(c,f,_,b,C,P,k){const R=(P-b)/2,N=Math.abs(c-(b+R));if(N>R+_)return!1;const $=(k-C)/2,X=Math.abs(f-(C+$));if(X>$+_)return!1;if(N<=R||X<=$)return!0;const te=N-R,ie=X-$;return te*te+ie*ie<=_*_}}const Eo=Math.tan(85*Math.PI/180);function Ts(g,c,f,_,b,C,P){const k=o.create();if(f)if(C.name==="globe"){const R=o.calculateGlobeLabelMatrix(b,c);o.multiply(k,k,R)}else{const R=ue([],P);k[0]=R[0],k[1]=R[1],k[4]=R[2],k[5]=R[3],_||o.rotateZ(k,k,b.angle)}else o.multiply(k,b.labelPlaneMatrix,g);return k}function zl(g,c,f,_,b,C,P){const k=Ts(g,c,f,_,b,C,P);return C.name==="globe"&&f||(k[2]=k[6]=k[10]=k[14]=0),k}function Cs(g,c,f,_,b,C,P){if(f){if(C.name==="globe"){const k=Ts(g,c,f,_,b,C,P);return o.invert(k,k),o.multiply(k,g,k),k}{const k=o.clone(g),R=o.identity([]);return R[0]=P[0],R[1]=P[1],R[4]=P[2],R[5]=P[3],o.multiply(k,k,R),_||o.rotateZ(k,k,-b.angle),k}}return b.glCoordMatrix}function qt(g,c,f,_){const b=[g,c,f,1];f?o.transformMat4$1(b,b,_):Md(b,b,_);const C=b[3];return b[0]/=C,b[1]/=C,b[2]/=C,b}function Xn(g,c){return Math.min(.5+g/c*.5,1.5)}function Hn(g,c){const f=g[0]/g[3],_=g[1]/g[3];return f>=-c[0]&&f<=c[0]&&_>=-c[1]&&_<=c[1]}function es(g,c,f,_,b,C,P,k,R,N){const $=f.transform,X=_?g.textSizeData:g.iconSizeData,te=o.evaluateSizeForZoom(X,f.transform.zoom),ie=$.projection.name==="globe",se=[256/f.width*2+1,256/f.height*2+1],ae=_?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ae.clear();let le=null;ie&&(le=_?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const Q=g.lineVertexArray,ve=_?g.text.placedSymbolArray:g.icon.placedSymbolArray,ge=f.transform.width/f.transform.height;let _e,ke=!1;for(let Se=0;Se<ve.length;Se++){const Ie=ve.get(Se),{numGlyphs:We,writingMode:Xe}=Ie;if(Xe!==o.WritingMode.vertical||ke||_e===o.WritingMode.horizontal||(ke=!0),_e=Xe,(Ie.hidden||Xe===o.WritingMode.vertical)&&!ke){Ir(We,ae);continue}ke=!1;const rt=new o.pointGeometry(Ie.tileAnchorX,Ie.tileAnchorY);let{x:Ht,y:Ge,z:St}=$.projection.projectTilePoint(rt.x,rt.y,N.canonical);if(R){const[Vn,dn,rn]=R(rt);Ht+=Vn,Ge+=dn,St+=rn}const dt=[Ht,Ge,St,1];if(o.transformMat4$1(dt,dt,c),!Hn(dt,se)){Ir(We,ae);continue}const zt=Xn(f.transform.cameraToCenterDistance,dt[3]),tt=o.evaluateSizeForFeature(X,te,Ie),Ve=P?tt/zt:tt*zt,ot=qt(Ht,Ge,St,b);if(ot[3]<=0){Ir(We,ae);continue}let Dt={};const Bt=P?null:R,_n=Za(Ie,Ve,!1,k,c,b,C,g.glyphOffsetArray,Q,ae,le,ot,rt,Dt,ge,Bt,$.projection,N,P);ke=_n.useVertical,Bt&&_n.needsFlipping&&(Dt={}),(_n.notEnoughRoom||ke||_n.needsFlipping&&Za(Ie,Ve,!0,k,c,b,C,g.glyphOffsetArray,Q,ae,le,ot,rt,Dt,ge,Bt,$.projection,N,P).notEnoughRoom)&&Ir(We,ae)}_?(g.text.dynamicLayoutVertexBuffer.updateData(ae),le&&g.text.globeExtVertexBuffer.updateData(le)):(g.icon.dynamicLayoutVertexBuffer.updateData(ae),le&&g.icon.globeExtVertexBuffer.updateData(le))}function Vs(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae){const{lineStartIndex:le,glyphStartIndex:Q,segment:ve}=k,ge=Q+k.numGlyphs,_e=le+k.lineLength,ke=c.getoffsetX(Q),Se=c.getoffsetX(ge-1),Ie=Ji(g*ke,f,_,b,C,P,ve,le,_e,R,N,$,X,te,!0,ie,se,ae);if(!Ie)return null;const We=Ji(g*Se,f,_,b,C,P,ve,le,_e,R,N,$,X,te,!0,ie,se,ae);return We?{first:Ie,last:We}:null}function Wn(g,c,f,_){return g===o.WritingMode.horizontal&&Math.abs(_)>Math.abs(f)?{useVertical:!0}:g===o.WritingMode.vertical?_>0?{needsFlipping:!0}:null:c!==0&&function(b,C){return b===0||Math.abs(C/b)>Eo}(f,_)?c===1?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null}function Za(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae,le,Q,ve){const ge=c/24,_e=g.lineOffsetX*ge,ke=g.lineOffsetY*ge,{lineStartIndex:Se,glyphStartIndex:Ie,numGlyphs:We,segment:Xe,writingMode:rt,flipState:Ht}=g,Ge=Se+g.lineLength,St=dt=>{if($){const[ot,Dt,Bt]=dt.up,_n=N.length;o.updateGlobeVertexNormal($,_n+0,ot,Dt,Bt),o.updateGlobeVertexNormal($,_n+1,ot,Dt,Bt),o.updateGlobeVertexNormal($,_n+2,ot,Dt,Bt),o.updateGlobeVertexNormal($,_n+3,ot,Dt,Bt)}const[zt,tt,Ve]=dt.point;o.addDynamicAttributes(N,zt,tt,Ve,dt.angle)};if(We>1){const dt=Vs(ge,k,_e,ke,f,X,te,g,R,C,ie,ae,!1,le,Q,ve);if(!dt)return{notEnoughRoom:!0};if(_&&!f){let[zt,tt,Ve]=dt.first.point,[ot,Dt,Bt]=dt.last.point;[zt,tt]=qt(zt,tt,Ve,P),[ot,Dt]=qt(ot,Dt,Bt,P);const _n=Wn(rt,Ht,(ot-zt)*se,Dt-tt);if(g.flipState=_n&&_n.needsFlipping?1:2,_n)return _n}St(dt.first);for(let zt=Ie+1;zt<Ie+We-1;zt++){const tt=Ji(ge*k.getoffsetX(zt),_e,ke,f,X,te,Xe,Se,Ge,R,C,ie,ae,!1,!1,le,Q,ve);if(!tt)return N.length-=4*(zt-Ie),{notEnoughRoom:!0};St(tt)}St(dt.last)}else{if(_&&!f){const zt=qt(te.x,te.y,0,b),tt=Se+Xe+1,Ve=new o.pointGeometry(R.getx(tt),R.gety(tt)),ot=qt(Ve.x,Ve.y,0,b),Dt=ot[3]>0?ot:ha(te,Ve,zt,1,b,void 0,le,Q.canonical),Bt=Wn(rt,Ht,(Dt[0]-zt[0])*se,Dt[1]-zt[1]);if(g.flipState=Bt&&Bt.needsFlipping?1:2,Bt)return Bt}const dt=Ji(ge*k.getoffsetX(Ie),_e,ke,f,X,te,Xe,Se,Ge,R,C,ie,ae,!1,!1,le,Q,ve);if(!dt)return{notEnoughRoom:!0};St(dt)}return{}}function da(g,c,f,_,b){const{x:C,y:P,z:k}=_.projectTilePoint(g.x,g.y,c);if(!b)return qt(C,P,k,f);const[R,N,$]=b(g);return qt(C+R,P+N,k+$,f)}function ha(g,c,f,_,b,C,P,k){const R=da(g.sub(c)._unit()._add(g),k,b,P,C);return o.sub(R,f,R),o.normalize(R,R),o.scaleAndAdd(R,f,R,_)}function Ji(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae,le,Q){const ve=_?g-c:g+c;let ge=ve>0?1:-1,_e=0;_&&(ge*=-1,_e=Math.PI),ge<0&&(_e+=Math.PI);let ke=k+P+(ge>0?0:1)|0,Se=b,Ie=b,We=0,Xe=0;const rt=Math.abs(ve),Ht=[],Ge=[];let St=C,dt=St;const zt=()=>ha(dt,St,Ie,rt-We+1,$,te,ae,le.canonical);for(;We+Xe<=rt;){if(ke+=ge,ke<k||ke>=R)return null;if(Ie=Se,dt=St,Ht.push(Ie),ie&&Ge.push(dt),St=new o.pointGeometry(N.getx(ke),N.gety(ke)),Se=X[ke],!Se){const rn=da(St,le.canonical,$,ae,te);Se=rn[3]>0?X[ke]=rn:zt()}We+=Xe,Xe=o.distance(Ie,Se)}se&&te&&(X[ke]&&(Se=zt(),Xe=o.distance(Ie,Se)),X[ke]=Se);const tt=(rt-We)/Xe,Ve=St.sub(dt)._mult(tt)._add(dt),ot=o.sub([],Se,Ie),Dt=o.scaleAndAdd([],Ie,ot,tt);let Bt=[0,0,1],_n=ot[0],Vn=ot[1];if(Q&&(Bt=ae.upVector(le.canonical,Ve.x,Ve.y),Bt[0]!==0||Bt[1]!==0||Bt[2]!==1)){const rn=[Bt[2],0,-Bt[0]],xn=o.cross([],Bt,rn);o.normalize(rn,rn),o.normalize(xn,xn),_n=o.dot(ot,rn),Vn=o.dot(ot,xn)}if(f){const rn=o.cross([],Bt,ot);o.normalize(rn,rn),o.scaleAndAdd(Dt,Dt,rn,f*ge)}const dn=_e+Math.atan2(Vn,_n);return Ht.push(Dt),ie&&Ge.push(Ve),{point:Dt,angle:dn,path:Ht,tilePath:Ge,up:Bt}}function Ir(g,c){const f=c.length,_=f+4*g;c.resize(_),c.float32.fill(-1/0,4*f,4*_)}function Md(g,c,f){const _=c[0],b=c[1];return g[0]=f[0]*_+f[4]*b+f[12],g[1]=f[1]*_+f[5]*b+f[13],g[3]=f[3]*_+f[7]*b+f[15],g}const ao=100;class Uc{constructor(c,f,_=new Il(c.width+200,c.height+200,25),b=new Il(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=b,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+ao,this.screenBottomBoundary=c.height+ao,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=f}placeCollisionBox(c,f,_,b,C,P,k,R){let N=_.projectedAnchorX,$=_.projectedAnchorY,X=_.projectedAnchorZ;const te=_.elevation,ie=_.tileID,se=c.getProjection();if(te&&ie){const[Se,Ie,We]=se.upVector(ie.canonical,_.tileAnchorX,_.tileAnchorY),Xe=se.upVectorScale(ie.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;N+=Se*te*Xe,$+=Ie*te*Xe,X+=We*te*Xe}const ae=this.projectAndGetPerspectiveRatio(k,N,$,X,_.tileID,se.name==="globe"||!!te||this.transform.pitch>0,se),le=P*ae.perspectiveRatio,Q=(_.x1*f+b.x-_.padding)*le+ae.point.x,ve=(_.y1*f+b.y-_.padding)*le+ae.point.y,ge=(_.x2*f+b.x+_.padding)*le+ae.point.x,_e=(_.y2*f+b.y+_.padding)*le+ae.point.y,ke=ae.perspectiveRatio<=.55||ae.occluded;return!this.isInsideGrid(Q,ve,ge,_e)||!C&&this.grid.hitTest(Q,ve,ge,_e,R)||ke?{box:[],offscreen:!1,occluded:ae.occluded}:{box:[Q,ve,ge,_e],offscreen:this.isOffscreen(Q,ve,ge,_e),occluded:!1}}placeCollisionCircles(c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae){const le=[],Q=this.transform.elevation,ve=c.getProjection(),ge=Q?Q.getAtTileOffsetFunc(ae,this.transform.center.lat,this.transform.worldSize,ve):null,_e=new o.pointGeometry(_.tileAnchorX,_.tileAnchorY);let{x:ke,y:Se,z:Ie}=ve.projectTilePoint(_e.x,_e.y,ae.canonical);if(ge){const[Ve,ot,Dt]=ge(_e);ke+=Ve,Se+=ot,Ie+=Dt}const We=ve.name==="globe",Xe=this.projectAndGetPerspectiveRatio(k,ke,Se,Ie,ae,We||!!Q||this.transform.pitch>0,ve),{perspectiveRatio:rt}=Xe,Ht=(X?P/rt:P*rt)/o.ONE_EM,Ge=qt(ke,Se,Ie,R),St=Xe.signedDistanceFromCamera>0?Vs(Ht,C,_.lineOffsetX*Ht,_.lineOffsetY*Ht,!1,Ge,_e,_,b,R,{},Q&&!X?ge:null,X&&!!Q,ve,ae,X):null;let dt=!1,zt=!1,tt=!0;if(St&&!Xe.occluded){const Ve=.5*ie*rt+se,ot=new o.pointGeometry(-100,-100),Dt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Bt=new Qo,{first:_n,last:Vn}=St,dn=_n.path.length;let rn=[];for(let Mn=dn-1;Mn>=1;Mn--)rn.push(_n.path[Mn]);for(let Mn=1;Mn<Vn.path.length;Mn++)rn.push(Vn.path[Mn]);const xn=2.5*Ve;N&&(rn=rn.map(([Mn,Tr,Sr],jr)=>(ge&&!We&&(Sr=ge(jr<dn-1?_n.tilePath[dn-1-jr]:Vn.tilePath[jr-dn+2])[2]),qt(Mn,Tr,Sr,N))),rn.some(Mn=>Mn[3]<=0)&&(rn=[]));let Jn=[];if(rn.length>0){let Mn=1/0,Tr=-1/0,Sr=1/0,jr=-1/0;for(const Nr of rn)Mn=Math.min(Mn,Nr[0]),Sr=Math.min(Sr,Nr[1]),Tr=Math.max(Tr,Nr[0]),jr=Math.max(jr,Nr[1]);Tr>=ot.x&&Mn<=Dt.x&&jr>=ot.y&&Sr<=Dt.y&&(Jn=[rn.map(Nr=>new o.pointGeometry(Nr[0],Nr[1]))],(Mn<ot.x||Tr>Dt.x||Sr<ot.y||jr>Dt.y)&&(Jn=o.clipLine(Jn,ot.x,ot.y,Dt.x,Dt.y)))}for(const Mn of Jn){Bt.reset(Mn,.25*Ve);let Tr=0;Tr=Bt.length<=.5*Ve?1:Math.ceil(Bt.paddedLength/xn)+1;for(let Sr=0;Sr<Tr;Sr++){const jr=Sr/Math.max(Tr-1,1),Nr=Bt.lerp(jr),Ei=Nr.x+ao,Ao=Nr.y+ao;le.push(Ei,Ao,Ve,0);const ps=Ei-Ve,qs=Ao-Ve,Kr=Ei+Ve,Ur=Ao+Ve;if(tt=tt&&this.isOffscreen(ps,qs,Kr,Ur),zt=zt||this.isInsideGrid(ps,qs,Kr,Ur),!f&&this.grid.hitTestCircle(Ei,Ao,Ve,te)&&(dt=!0,!$))return{circles:[],offscreen:!1,collisionDetected:dt,occluded:!1}}}}return{circles:!$&&dt||!zt?[]:le,offscreen:tt,collisionDetected:dt,occluded:Xe.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let _=1/0,b=1/0,C=-1/0,P=-1/0;for(const $ of c){const X=new o.pointGeometry($.x+ao,$.y+ao);_=Math.min(_,X.x),b=Math.min(b,X.y),C=Math.max(C,X.x),P=Math.max(P,X.y),f.push(X)}const k=this.grid.query(_,b,C,P).concat(this.ignoredGrid.query(_,b,C,P)),R={},N={};for(const $ of k){const X=$.key;if(R[X.bucketInstanceId]===void 0&&(R[X.bucketInstanceId]={}),R[X.bucketInstanceId][X.featureIndex])continue;const te=[new o.pointGeometry($.x1,$.y1),new o.pointGeometry($.x2,$.y1),new o.pointGeometry($.x2,$.y2),new o.pointGeometry($.x1,$.y2)];o.polygonIntersectsPolygon(f,te)&&(R[X.bucketInstanceId][X.featureIndex]=!0,N[X.bucketInstanceId]===void 0&&(N[X.bucketInstanceId]=[]),N[X.bucketInstanceId].push(X.featureIndex))}return N}insertCollisionBox(c,f,_,b,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:b,collisionGroupID:C},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,f,_,b,C){const P=f?this.ignoredGrid:this.grid,k={bucketInstanceId:_,featureIndex:b,collisionGroupID:C};for(let R=0;R<c.length;R+=4)P.insertCircle(k,c[R],c[R+1],c[R+2])}projectAndGetPerspectiveRatio(c,f,_,b,C,P,k){const R=[f,_,b,1];let N=!1;if(b||this.transform.pitch>0){o.transformMat4$1(R,R,c);const X=k.name==="globe";this.fogState&&C&&!X&&(N=function(ie,se,ae,le,Q,ve){const ge=ve.calculateFogTileMatrix(Q),_e=[se,ae,le];return o.transformMat4(_e,_e,ge),Pt(ie,_e,ve.pitch,ve._fov)}(this.fogState,f,_,b,C.toUnwrapped(),this.transform)>.9)}else Md(R,R,c);const $=R[3];return{point:new o.pointGeometry((R[0]/$+1)/2*this.transform.width+ao,(-R[1]/$+1)/2*this.transform.height+ao),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/$*.5,1.5),signedDistanceFromCamera:$,occluded:P&&R[2]>$||N}}isOffscreen(c,f,_,b){return _<ao||c>=this.screenRightBoundary||b<ao||f>this.screenBottomBoundary}isInsideGrid(c,f,_,b){return _>=0&&c<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const c=o.identity([]);return o.translate(c,c,[-100,-100,0]),c}}function js(g,c,f){const _=c.createTileMatrix(g,g.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),g.projMatrix,_)}function Vc(g,c,f){if(c.projection.name===f.projection.name)return g.projMatrix;const _=f.clone();return _.setProjection(c.projection),js(_,c.getProjection(),g)}function Rl(g,c,f){return c.name===f.projection.name?g.projMatrix:js(f,c,g)}class Ya{constructor(c,f,_,b){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?f:-f))):b&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Xa{constructor(c,f,_,b,C,P=!1){this.text=new Ya(c?c.text:null,f,_,C),this.icon=new Ya(c?c.icon:null,f,b,C),this.clipped=P}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ol{constructor(c,f,_,b=!1){this.text=c,this.icon=f,this.skipFade=_,this.clipped=b}}class Sf{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Mo{constructor(c,f,_,b,C){this.bucketInstanceId=c,this.featureIndex=f,this.sourceLayerIndex=_,this.bucketIndex=b,this.tileID=C}}class bi{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const f=++this.maxGroupID;this.collisionGroups[c]={ID:f,predicate:_=>_.collisionGroupID===f}}return this.collisionGroups[c]}}function Pd(g,c,f,_,b){const{horizontalAlign:C,verticalAlign:P}=o.getAnchorAlignment(g),k=-(C-.5)*c,R=-(P-.5)*f,N=o.evaluateVariableOffset(g,_);return new o.pointGeometry(k+N[0]*b,R+N[1]*b)}function jc(g,c,f,_,b){const C=new o.pointGeometry(g,c);return f&&C._rotate(_?b:-b),C}class Po{constructor(c,f,_,b,C){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new Uc(this.transform,C),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new bi(_),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,f,_,b){const C=_.getBucket(f),P=_.latestFeatureIndex;if(!C||!P||f.id!==C.layerIds[0])return;const k=C.layers[0].layout,R=_.collisionBoxArray,N=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),$=_.tileSize/o.EXTENT,X=_.tileID.toUnwrapped();this.transform.setProjection(C.projection);const te=(ie=_.tileID,se=C.getProjection(),ae=this.transform,se.name===this.projection?ae.calculateProjMatrix(ie.toUnwrapped()):js(ae,se,ie));var ie,se,ae;const le=k.get("text-pitch-alignment")==="map",Q=k.get("text-rotation-alignment")==="map";f.compileFilter();const ve=f.dynamicFilter(),ge=f.dynamicFilterNeedsFeature(),_e=this.transform.calculatePixelsToTileUnitsMatrix(_),ke=zl(te,_.tileID.canonical,le,Q,this.transform,C.getProjection(),_e);let Se=null;if(le){const Xe=Cs(te,_.tileID.canonical,le,Q,this.transform,C.getProjection(),_e);Se=o.multiply([],this.transform.labelPlaneMatrix,Xe)}let Ie=null;ve&&_.latestFeatureIndex&&(Ie={unwrappedTileID:X,dynamicFilter:ve,dynamicFilterNeedsFeature:ge,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new Mo(C.bucketInstanceId,P,C.sourceLayerIndex,C.index,_.tileID);const We={bucket:C,layout:k,posMatrix:te,textLabelPlaneMatrix:ke,labelToScreenMatrix:Se,clippingData:Ie,scale:N,textPixelRatio:$,holdingForFade:_.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(b)for(const Xe of C.sortKeyRanges){const{sortKey:rt,symbolInstanceStart:Ht,symbolInstanceEnd:Ge}=Xe;c.push({sortKey:rt,symbolInstanceStart:Ht,symbolInstanceEnd:Ge,parameters:We})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:We})}attemptAnchorPlacement(c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae,le,Q,ve){const{textOffset0:ge,textOffset1:_e,crossTileID:ke}=te,Se=[ge,_e],Ie=Pd(c,_,b,Se,C),We=this.collisionIndex.placeCollisionBox(se,C,f,jc(Ie.x,Ie.y,P,k,this.transform.angle),X,R,N,$.predicate);if(le){const Xe=se.getSymbolInstanceIconSize(ve,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(se,Xe,le,jc(Ie.x,Ie.y,P,k,this.transform.angle),X,R,N,$.predicate).box.length===0)return}if(We.box.length>0){let Xe;return this.prevPlacement&&this.prevPlacement.variableOffsets[ke]&&this.prevPlacement.placements[ke]&&this.prevPlacement.placements[ke].text&&(Xe=this.prevPlacement.variableOffsets[ke].anchor),this.variableOffsets[ke]={textOffset:Se,width:_,height:b,anchor:c,textScale:C,prevAnchor:Xe},this.markUsedJustification(se,c,te,ae),se.allowVerticalPlacement&&(this.markUsedOrientation(se,ae,te),this.placedOrientations[ke]=ae),{shift:Ie,placedGlyphBoxes:We}}}placeLayerBucketPart(c,f,_,b){const{bucket:C,layout:P,posMatrix:k,textLabelPlaneMatrix:R,labelToScreenMatrix:N,clippingData:$,textPixelRatio:X,holdingForFade:te,collisionBoxArray:ie,partiallyEvaluatedTextSize:se,partiallyEvaluatedIconSize:ae,collisionGroup:le}=c.parameters,Q=P.get("text-optional"),ve=P.get("icon-optional"),ge=P.get("text-allow-overlap"),_e=P.get("icon-allow-overlap"),ke=P.get("text-rotation-alignment")==="map",Se=P.get("text-pitch-alignment")==="map",Ie=P.get("icon-text-fit")!=="none",We=P.get("symbol-z-order")==="viewport-y";this.transform.setProjection(C.projection);let Xe=ge&&(_e||!C.hasIconData()||ve),rt=_e&&(ge||!C.hasTextData()||Q);!C.collisionArrays&&ie&&C.deserializeCollisionBoxes(ie),_&&b&&C.updateCollisionDebugBuffers(this.transform.zoom,ie);const Ht=(Ge,St,dt)=>{const{crossTileID:zt,numVerticalGlyphVertices:tt}=Ge;if($){const Kr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ur=null;if($.dynamicFilterNeedsFeature){const vr=this.retainedQueryData[C.bucketInstanceId];Ur=$.featureIndex.loadFeature({featureIndex:Ge.featureIndex,bucketIndex:vr.bucketIndex,sourceLayerIndex:vr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,$.dynamicFilter)(Kr,Ur,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new o.pointGeometry(Ge.tileAnchorX,Ge.tileAnchorY),this.transform.calculateDistanceTileData($.unwrappedTileID)))return this.placements[zt]=new Ol(!1,!1,!1,!0),void(f[zt]=!0)}if(f[zt])return;if(te)return void(this.placements[zt]=new Ol(!1,!1,!1));let Ve=!1,ot=!1,Dt=!0,Bt=!1,_n=!1,Vn=null,dn={box:null,offscreen:null,occluded:null},rn={box:null,offscreen:null,occluded:null},xn=null,Jn=null,Mn=null,Tr=0,Sr=0,jr=0;dt.textFeatureIndex?Tr=dt.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(Tr=Ge.featureIndex),dt.verticalTextFeatureIndex&&(Sr=dt.verticalTextFeatureIndex);const Nr=Kr=>{Kr.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const Ur=this.transform.elevation;(Ur||Kr.elevation)&&(Kr.elevation=Ur?Ur.getAtTileOffset(Kr.tileID,Kr.tileAnchorX,Kr.tileAnchorY):0)},Ei=dt.textBox;if(Ei){Nr(Ei);const Kr=vr=>{let di=o.WritingMode.horizontal;if(C.allowVerticalPlacement&&!vr&&this.prevPlacement){const co=this.prevPlacement.placedOrientations[zt];co&&(this.placedOrientations[zt]=co,di=co,this.markUsedOrientation(C,di,Ge))}return di},Ur=(vr,di)=>{if(C.allowVerticalPlacement&&tt>0&&dt.verticalTextBox){for(const co of C.writingModes)if(co===o.WritingMode.vertical?(dn=di(),rn=dn):dn=vr(),dn&&dn.box&&dn.box.length)break}else dn=vr()};if(P.get("text-variable-anchor")){let vr=P.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[zt]){const Zr=this.prevPlacement.variableOffsets[zt];vr.indexOf(Zr.anchor)>0&&(vr=vr.filter(uo=>uo!==Zr.anchor),vr.unshift(Zr.anchor))}const di=(Zr,uo,ho)=>{const va=C.getSymbolInstanceTextSize(se,Ge,this.transform.zoom,St),Kl=(Zr.x2-Zr.x1)*va+2*Zr.padding,Wo=(Zr.y2-Zr.y1)*va+2*Zr.padding,rs=Ie&&!_e?uo:null;rs&&Nr(rs);let Zs={box:[],offscreen:!1,occluded:!1};const _a=ge?2*vr.length:vr.length;for(let ya=0;ya<_a;++ya){const Jl=this.attemptAnchorPlacement(vr[ya%vr.length],Zr,Kl,Wo,va,ke,Se,X,k,le,ya>=vr.length,Ge,St,C,ho,rs,se,ae);if(Jl&&(Zs=Jl.placedGlyphBoxes,Zs&&Zs.box&&Zs.box.length)){Ve=!0,Vn=Jl.shift;break}}return Zs};Ur(()=>di(Ei,dt.iconBox,o.WritingMode.horizontal),()=>{const Zr=dt.verticalTextBox;return Zr&&Nr(Zr),C.allowVerticalPlacement&&!(dn&&dn.box&&dn.box.length)&&tt>0&&Zr?di(Zr,dt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),dn&&(Ve=dn.box,Dt=dn.offscreen,Bt=dn.occluded);const co=Kr(dn&&dn.box);if(!Ve&&this.prevPlacement){const Zr=this.prevPlacement.variableOffsets[zt];Zr&&(this.variableOffsets[zt]=Zr,this.markUsedJustification(C,Zr.anchor,Ge,co))}}else{const vr=(di,co)=>{const Zr=C.getSymbolInstanceTextSize(se,Ge,this.transform.zoom,St),uo=this.collisionIndex.placeCollisionBox(C,Zr,di,new o.pointGeometry(0,0),ge,X,k,le.predicate);return uo&&uo.box&&uo.box.length&&(this.markUsedOrientation(C,co,Ge),this.placedOrientations[zt]=co),uo};Ur(()=>vr(Ei,o.WritingMode.horizontal),()=>{const di=dt.verticalTextBox;return C.allowVerticalPlacement&&tt>0&&di?(Nr(di),vr(di,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Kr(dn&&dn.box&&dn.box.length)}}if(xn=dn,Ve=xn&&xn.box&&xn.box.length>0,Dt=xn&&xn.offscreen,Bt=xn&&xn.occluded,Ge.useRuntimeCollisionCircles){const Kr=C.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex>=0?Ge.centerJustifiedTextSymbolIndex:Ge.verticalPlacedTextSymbolIndex),Ur=o.evaluateSizeForFeature(C.textSizeData,se,Kr),vr=P.get("text-padding");Jn=this.collisionIndex.placeCollisionCircles(C,ge,Kr,C.lineVertexArray,C.glyphOffsetArray,Ur,k,R,N,_,Se,le.predicate,Ge.collisionCircleDiameter*Ur/o.ONE_EM,vr,this.retainedQueryData[C.bucketInstanceId].tileID),Ve=ge||Jn.circles.length>0&&!Jn.collisionDetected,Dt=Dt&&Jn.offscreen,Bt=Jn.occluded}if(dt.iconFeatureIndex&&(jr=dt.iconFeatureIndex),dt.iconBox){const Kr=Ur=>{Nr(Ur);const vr=Ie&&Vn?jc(Vn.x,Vn.y,ke,Se,this.transform.angle):new o.pointGeometry(0,0),di=C.getSymbolInstanceIconSize(ae,this.transform.zoom,Ge.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,di,Ur,vr,_e,X,k,le.predicate)};rn&&rn.box&&rn.box.length&&dt.verticalIconBox?(Mn=Kr(dt.verticalIconBox),ot=Mn.box.length>0):(Mn=Kr(dt.iconBox),ot=Mn.box.length>0),Dt=Dt&&Mn.offscreen,_n=Mn.occluded}const Ao=Q||Ge.numHorizontalGlyphVertices===0&&tt===0,ps=ve||Ge.numIconVertices===0;if(Ao||ps?ps?Ao||(ot=ot&&Ve):Ve=ot&&Ve:ot=Ve=ot&&Ve,Ve&&xn&&xn.box&&this.collisionIndex.insertCollisionBox(xn.box,P.get("text-ignore-placement"),C.bucketInstanceId,rn&&rn.box&&Sr?Sr:Tr,le.ID),ot&&Mn&&this.collisionIndex.insertCollisionBox(Mn.box,P.get("icon-ignore-placement"),C.bucketInstanceId,jr,le.ID),Jn&&(Ve&&this.collisionIndex.insertCollisionCircles(Jn.circles,P.get("text-ignore-placement"),C.bucketInstanceId,Tr,le.ID),_)){const Kr=C.bucketInstanceId;let Ur=this.collisionCircleArrays[Kr];Ur===void 0&&(Ur=this.collisionCircleArrays[Kr]=new Sf);for(let vr=0;vr<Jn.circles.length;vr+=4)Ur.circles.push(Jn.circles[vr+0]),Ur.circles.push(Jn.circles[vr+1]),Ur.circles.push(Jn.circles[vr+2]),Ur.circles.push(Jn.collisionDetected?1:0)}const qs=C.projection.name!=="globe";Xe=Xe&&(qs||!Bt),rt=rt&&(qs||!_n),this.placements[zt]=new Ol(Ve||Xe,ot||rt,Dt||C.justReloaded),f[zt]=!0};if(We){const Ge=C.getSortedSymbolIndexes(this.transform.angle);for(let St=Ge.length-1;St>=0;--St){const dt=Ge[St];Ht(C.symbolInstances.get(dt),dt,C.collisionArrays[dt])}}else for(let Ge=c.symbolInstanceStart;Ge<c.symbolInstanceEnd;Ge++)Ht(C.symbolInstances.get(Ge),Ge,C.collisionArrays[Ge]);if(_&&C.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[C.bucketInstanceId];o.invert(Ge.invProjMatrix,k),Ge.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(c,f,_,b){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:R,crossTileID:N}=_,$=o.getAnchorJustification(f),X=b===o.WritingMode.vertical?R:$==="left"?C:$==="center"?P:$==="right"?k:-1;C>=0&&(c.text.placedSymbolArray.get(C).crossTileID=X>=0&&C!==X?0:N),P>=0&&(c.text.placedSymbolArray.get(P).crossTileID=X>=0&&P!==X?0:N),k>=0&&(c.text.placedSymbolArray.get(k).crossTileID=X>=0&&k!==X?0:N),R>=0&&(c.text.placedSymbolArray.get(R).crossTileID=X>=0&&R!==X?0:N)}markUsedOrientation(c,f,_){const b=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,C=f===o.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:P,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:N}=_,$=c.text.placedSymbolArray;P>=0&&($.get(P).placedOrientation=b),k>=0&&($.get(k).placedOrientation=b),R>=0&&($.get(R).placedOrientation=b),N>=0&&($.get(N).placedOrientation=C)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let _=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(c):1,C=f?f.opacities:{},P=f?f.variableOffsets:{},k=f?f.placedOrientations:{};for(const R in this.placements){const N=this.placements[R],$=C[R];$?(this.opacities[R]=new Xa($,b,N.text,N.icon,null,N.clipped),_=_||N.text!==$.text.placed||N.icon!==$.icon.placed):(this.opacities[R]=new Xa(null,b,N.text,N.icon,N.skipFade,N.clipped),_=_||N.text||N.icon)}for(const R in C){const N=C[R];if(!this.opacities[R]){const $=new Xa(N,b,!1,!1);$.isHidden()||(this.opacities[R]=$,_=_||N.text.placed||N.icon.placed)}}for(const R in P)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=P[R]);for(const R in k)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=k[R]);_?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:c)}updateLayerOpacities(c,f){const _={};for(const b of f){const C=b.getBucket(c);C&&b.latestFeatureIndex&&c.id===C.layerIds[0]&&this.updateBucketOpacities(C,_,b.collisionBoxArray)}}updateBucketOpacities(c,f,_){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const b=c.layers[0].layout,C=!!c.layers[0].dynamicFilter(),P=new Xa(null,0,!1,!1,!0),k=b.get("text-allow-overlap"),R=b.get("icon-allow-overlap"),N=b.get("text-variable-anchor"),$=b.get("text-rotation-alignment")==="map",X=b.get("text-pitch-alignment")==="map",te=b.get("icon-text-fit")!=="none",ie=new Xa(null,0,k&&(R||!c.hasIconData()||b.get("icon-optional")),R&&(k||!c.hasTextData()||b.get("text-optional")),!0);!c.collisionArrays&&_&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(_);const se=(le,Q,ve)=>{for(let ge=0;ge<Q/4;ge++)le.opacityVertexArray.emplaceBack(ve)};let ae=0;for(let le=0;le<c.symbolInstances.length;le++){const Q=c.symbolInstances.get(le),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:ge,crossTileID:_e,numIconVertices:ke}=Q;let Se=this.opacities[_e];f[_e]?Se=P:Se||(Se=ie,this.opacities[_e]=Se),f[_e]=!0;const Ie=ve>0||ge>0,We=ke>0,Xe=this.placedOrientations[_e],rt=Xe===o.WritingMode.vertical,Ht=Xe===o.WritingMode.horizontal||Xe===o.WritingMode.horizontalOnly;if(!Ie&&!We||Se.isHidden()||ae++,Ie){const Ge=kd(Se.text);se(c.text,ve,rt?Ll:Ge),se(c.text,ge,Ht?Ll:Ge);const St=Se.text.isHidden(),{leftJustifiedTextSymbolIndex:dt,centerJustifiedTextSymbolIndex:zt,rightJustifiedTextSymbolIndex:tt,verticalPlacedTextSymbolIndex:Ve}=Q,ot=c.text.placedSymbolArray,Dt=St||rt?1:0;dt>=0&&(ot.get(dt).hidden=Dt),zt>=0&&(ot.get(zt).hidden=Dt),tt>=0&&(ot.get(tt).hidden=Dt),Ve>=0&&(ot.get(Ve).hidden=St||Ht?1:0);const Bt=this.variableOffsets[_e];Bt&&this.markUsedJustification(c,Bt.anchor,Q,Xe);const _n=this.placedOrientations[_e];_n&&(this.markUsedJustification(c,"left",Q,_n),this.markUsedOrientation(c,_n,Q))}if(We){const Ge=kd(Se.icon),{placedIconSymbolIndex:St,verticalPlacedIconSymbolIndex:dt}=Q,zt=c.icon.placedSymbolArray,tt=Se.icon.isHidden()?1:0;St>=0&&(se(c.icon,ke,rt?Ll:Ge),zt.get(St).hidden=tt),dt>=0&&(se(c.icon,Q.numVerticalIconVertices,Ht?Ll:Ge),zt.get(dt).hidden=tt)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const Ge=c.collisionArrays[le];if(Ge){let St=new o.pointGeometry(0,0),dt=!0;if(Ge.textBox||Ge.verticalTextBox){if(N){const tt=this.variableOffsets[_e];tt?(St=Pd(tt.anchor,tt.width,tt.height,tt.textOffset,tt.textScale),$&&St._rotate(X?this.transform.angle:-this.transform.angle)):dt=!1}C&&(dt=!Se.clipped),Ge.textBox&&bo(c.textCollisionBox.collisionVertexArray,Se.text.placed,!dt||rt,St.x,St.y),Ge.verticalTextBox&&bo(c.textCollisionBox.collisionVertexArray,Se.text.placed,!dt||Ht,St.x,St.y)}const zt=dt&&!!(!Ht&&Ge.verticalIconBox);Ge.iconBox&&bo(c.iconCollisionBox.collisionVertexArray,Se.icon.placed,zt,te?St.x:0,te?St.y:0),Ge.verticalIconBox&&bo(c.iconCollisionBox.collisionVertexArray,Se.icon.placed,!zt,te?St.x:0,te?St.y:0)}}}if(c.fullyClipped=ae===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const le=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=le.invProjMatrix,c.placementViewportMatrix=le.viewportMatrix,c.collisionCircleArray=le.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,f){const _=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*_>c}setStale(){this.stale=!0}}function bo(g,c,f,_,b){g.emplaceBack(c?1:0,f?1:0,_||0,b||0),g.emplaceBack(c?1:0,f?1:0,_||0,b||0),g.emplaceBack(c?1:0,f?1:0,_||0,b||0),g.emplaceBack(c?1:0,f?1:0,_||0,b||0)}const Tg=Math.pow(2,25),Ad=Math.pow(2,24),Ri=Math.pow(2,17),Wc=Math.pow(2,16),Ef=Math.pow(2,9),Hc=Math.pow(2,8),Qi=Math.pow(2,1);function kd(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const c=g.placed?1:0,f=Math.floor(127*g.opacity);return f*Tg+c*Ad+f*Ri+c*Wc+f*Ef+c*Hc+f*Qi+c}const Ll=0;class Ws{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,f,_,b,C){const P=this._bucketParts;for(;this._currentTileIndex<c.length;)if(f.getBucketParts(P,b,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((k,R)=>k.sortKey-R.sortKey));this._currentPartIndex<P.length;){const k=P[this._currentPartIndex];if(f.placeLayerBucketPart(k,this._seenCrossTileIDs,_,k.symbolInstanceStart===0),this._currentPartIndex++,C())return!0}return!1}}class Gc{constructor(c,f,_,b,C,P,k,R){this.placement=new Po(c,C,P,k,R),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(c,f,_){const b=o.exported.now(),C=()=>{const P=o.exported.now()-b;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=f[c[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=k)&&(!P.maxzoom||P.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Ws(P)),this._inProgressLayer.continuePlacement(_[P.source],this.placement,this._showCollisionBoxes,P,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Dd=512/o.EXTENT/2;class x0{constructor(c,f,_){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let b=0;b<f.length;b++){const C=f.get(b),P=C.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,c)})}}getScaledCoordinates(c,f){const _=Dd/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*o.EXTENT+c.tileAnchorX)*_),y:Math.floor((f.canonical.y*o.EXTENT+c.tileAnchorY)*_)}}findMatches(c,f,_){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let C=0;C<c.length;C++){const P=c.get(C);if(P.crossTileID)continue;const k=this.indexedSymbolInstances[P.key];if(!k)continue;const R=this.getScaledCoordinates(P,f);for(const N of k)if(Math.abs(N.coord.x-R.x)<=b&&Math.abs(N.coord.y-R.y)<=b&&!_[N.crossTileID]){_[N.crossTileID]=!0,P.crossTileID=N.crossTileID;break}}}}class Mf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const f=Math.round((c-this.lng)/360);if(f!==0)for(const _ in this.indexes){const b=this.indexes[_],C={};for(const P in b){const k=b[P];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+f),C[k.tileID.key]=k}this.indexes[_]=C}this.lng=c}addBucket(c,f,_){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let C=0;C<f.symbolInstances.length;C++)f.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const b=this.usedCrossTileIDs[c.overscaledZ];for(const C in this.indexes){const P=this.indexes[C];if(Number(C)>c.overscaledZ)for(const k in P){const R=P[k];R.tileID.isChildOf(c)&&R.findMatches(f.symbolInstances,c,b)}else{const k=P[c.scaledTo(Number(C)).key];k&&k.findMatches(f.symbolInstances,c,b)}}for(let C=0;C<f.symbolInstances.length;C++){const P=f.symbolInstances.get(C);P.crossTileID||(P.crossTileID=_.generate(),b[P.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new x0(c,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(c,f){for(const _ in f.indexedSymbolInstances)for(const b of f.indexedSymbolInstances[_])delete this.usedCrossTileIDs[c][b.crossTileID]}removeStaleBuckets(c){let f=!1;for(const _ in this.indexes){const b=this.indexes[_];for(const C in b)c[b[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,b[C]),delete b[C],f=!0)}return f}}class Cg{constructor(){this.layerIndexes={},this.crossTileIDs=new Mf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,f,_,b){let C=this.layerIndexes[c.id];C===void 0&&(C=this.layerIndexes[c.id]=new Bl);let P=!1;const k={};b.name!=="globe"&&C.handleWrapJump(_);for(const R of f){const N=R.getBucket(c);N&&c.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(R.tileID,N,this.crossTileIDs)&&(P=!0),k[N.bucketInstanceId]=!0)}return C.removeStaleBuckets(k)&&(P=!0),P}pruneUnusedLayers(c){const f={};c.forEach(_=>{f[_]=!0});for(const _ in this.layerIndexes)f[_]||delete this.layerIndexes[_]}}const qc=(g,c)=>o.emitValidationErrors(g,c&&c.filter(f=>f.identifier!=="source.canvas")),Fl=o.pick(Sn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),fa=o.pick(Sn,["setCenter","setZoom","setBearing","setPitch"]),Id={version:8,layers:[],sources:{}},pa={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ts extends o.Evented{constructor(c,f={}){super(),this.map=c,this.dispatcher=new En(yn(),this),this.imageManager=new ze,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(c._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new Cg,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=ts.registerForPluginStateChange(b=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(C,P)=>{if(o.triggerPluginCompletionEvent(C),P&&P.every(k=>k))for(const k in _._sourceCaches){const R=_._sourceCaches[k],N=R.getSource().type;N!=="vector"&&N!=="geojson"||R.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const C=this.getSource(b.sourceId);if(C&&C.vectorLayerIds)for(const P in this._layers){const k=this._layers[P];k.source===C.id&&this._validateLayer(k)}})}loadURL(c,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,f.accessToken);const b=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(b,(C,P)=>{this._request=null,C?this.fire(new o.ErrorEvent(C)):P&&this._load(P,_)})}loadJSON(c,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(c,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Id,!1)}_updateLayerCount(c,f){const _=f?1:-1;c.is3D()&&(this._num3DLayers+=_),c.type==="circle"&&(this._numCircleLayers+=_),c.type==="symbol"&&(this._numSymbolLayers+=_)}_load(c,f){if(f&&qc(this,o.validateStyle(c)))return;this._loaded=!0,this.stylesheet=o.clone$1(c),this._updateMapProjection();for(const b in c.sources)this.addSource(b,c.sources[b],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const _=Yn(this.stylesheet.layers);this._order=_.map(b=>b.id),this._layers={},this._serializedLayers={};for(const b of _){const C=o.createStyleLayer(b);C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Qe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(f,_,b){let C,P,k;const R=o.exported.devicePixelRatio>1?"@2x":"";let N=o.getJSON(_.transformRequest(_.normalizeSpriteURL(f,R,".json"),o.ResourceType.SpriteJSON),(te,ie)=>{N=null,k||(k=te,C=ie,X())}),$=o.getImage(_.transformRequest(_.normalizeSpriteURL(f,R,".png"),o.ResourceType.SpriteImage),(te,ie)=>{$=null,k||(k=te,P=ie,X())});function X(){if(k)b(k);else if(C&&P){const te=o.exported.getImageData(P),ie={};for(const se in C){const{width:ae,height:le,x:Q,y:ve,sdf:ge,pixelRatio:_e,stretchX:ke,stretchY:Se,content:Ie}=C[se],We=new o.RGBAImage({width:ae,height:le});o.RGBAImage.copy(te,We,{x:Q,y:ve},{x:0,y:0},{width:ae,height:le}),ie[se]={data:We,pixelRatio:_e,sdf:ge,stretchX:ke,stretchY:Se,content:Ie}}b(null,ie)}}return{cancel(){N&&(N.cancel(),N=null),$&&($.cancel(),$=null)}}}(c,this.map._requestManager,(f,_)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(_)for(const b in _)this.imageManager.addImage(b,_[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(c){const f=this.getSource(c.source);if(!f)return;const _=c.sourceLayer;_&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${f.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const f=[];for(const _ of c){const b=this._layers[_];b.type!=="custom"&&f.push(b.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped():pa[c.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(b.length||C.length)&&this._updateWorkerLayers(b,C);for(const P in this._updatedSources){const k=this._updatedSources[P];k==="reload"?this._reloadSource(P):k==="clear"&&this._clearSource(P)}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const _={};for(const b in this._sourceCaches){const C=this._sourceCaches[b];_[b]=C.used,C.used=!1}for(const b of this._order){const C=this._layers[b];if(C.recalculate(c,this._availableImages),!C.isHidden(c.zoom)){const k=this._getLayerSourceCache(C);k&&(k.used=!0)}const P=this.map.painter;if(P){const k=C.getProgramIds();if(!k)continue;const R=C.getProgramConfiguration(c.zoom);for(const N of k)P.useProgram(N,R)}}for(const b in _){const C=this._sourceCaches[b];_[b]!==C.used&&C.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),qc(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=Yn(c.layers);const f=function(b,C){if(!b)return[{command:Sn.setStyle,args:[C]}];let P=[];try{if(!m(b.version,C.version))return[{command:Sn.setStyle,args:[C]}];m(b.center,C.center)||P.push({command:Sn.setCenter,args:[C.center]}),m(b.zoom,C.zoom)||P.push({command:Sn.setZoom,args:[C.zoom]}),m(b.bearing,C.bearing)||P.push({command:Sn.setBearing,args:[C.bearing]}),m(b.pitch,C.pitch)||P.push({command:Sn.setPitch,args:[C.pitch]}),m(b.sprite,C.sprite)||P.push({command:Sn.setSprite,args:[C.sprite]}),m(b.glyphs,C.glyphs)||P.push({command:Sn.setGlyphs,args:[C.glyphs]}),m(b.transition,C.transition)||P.push({command:Sn.setTransition,args:[C.transition]}),m(b.light,C.light)||P.push({command:Sn.setLight,args:[C.light]}),m(b.fog,C.fog)||P.push({command:Sn.setFog,args:[C.fog]}),m(b.projection,C.projection)||P.push({command:Sn.setProjection,args:[C.projection]});const k={},R=[];(function(X,te,ie,se){let ae;for(ae in te=te||{},X=X||{})X.hasOwnProperty(ae)&&(te.hasOwnProperty(ae)||yr(ae,ie,se));for(ae in te){if(!te.hasOwnProperty(ae))continue;const le=te[ae];X.hasOwnProperty(ae)?m(X[ae],le)||(X[ae].type==="geojson"&&le.type==="geojson"&&Vo(X,te,ae)?ie.push({command:Sn.setGeoJSONSourceData,args:[ae,le.data]}):Jo(ae,te,ie,se)):ar(ae,te,ie)}})(b.sources,C.sources,R,k);const N=[];b.layers&&b.layers.forEach(X=>{X.source&&k[X.source]?P.push({command:Sn.removeLayer,args:[X.id]}):N.push(X)});let $=b.terrain;$&&k[$.source]&&(P.push({command:Sn.setTerrain,args:[void 0]}),$=void 0),P=P.concat(R),m($,C.terrain)||P.push({command:Sn.setTerrain,args:[C.terrain]}),function(X,te,ie){te=te||[];const se=(X=X||[]).map(jo),ae=te.map(jo),le=X.reduce(ii,{}),Q=te.reduce(ii,{}),ve=se.slice(),ge=Object.create(null);let _e,ke,Se,Ie,We,Xe,rt;for(_e=0,ke=0;_e<se.length;_e++)Se=se[_e],Q.hasOwnProperty(Se)?ke++:(ie.push({command:Sn.removeLayer,args:[Se]}),ve.splice(ve.indexOf(Se,ke),1));for(_e=0,ke=0;_e<ae.length;_e++)Se=ae[ae.length-1-_e],ve[ve.length-1-_e]!==Se&&(le.hasOwnProperty(Se)?(ie.push({command:Sn.removeLayer,args:[Se]}),ve.splice(ve.lastIndexOf(Se,ve.length-ke),1)):ke++,Xe=ve[ve.length-_e],ie.push({command:Sn.addLayer,args:[Q[Se],Xe]}),ve.splice(ve.length-_e,0,Se),ge[Se]=!0);for(_e=0;_e<ae.length;_e++)if(Se=ae[_e],Ie=le[Se],We=Q[Se],!ge[Se]&&!m(Ie,We))if(m(Ie.source,We.source)&&m(Ie["source-layer"],We["source-layer"])&&m(Ie.type,We.type)){for(rt in ft(Ie.layout,We.layout,ie,Se,null,Sn.setLayoutProperty),ft(Ie.paint,We.paint,ie,Se,null,Sn.setPaintProperty),m(Ie.filter,We.filter)||ie.push({command:Sn.setFilter,args:[Se,We.filter]}),m(Ie.minzoom,We.minzoom)&&m(Ie.maxzoom,We.maxzoom)||ie.push({command:Sn.setLayerZoomRange,args:[Se,We.minzoom,We.maxzoom]}),Ie)Ie.hasOwnProperty(rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?ft(Ie[rt],We[rt],ie,Se,rt.slice(6),Sn.setPaintProperty):m(Ie[rt],We[rt])||ie.push({command:Sn.setLayerProperty,args:[Se,rt,We[rt]]}));for(rt in We)We.hasOwnProperty(rt)&&!Ie.hasOwnProperty(rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?ft(Ie[rt],We[rt],ie,Se,rt.slice(6),Sn.setPaintProperty):m(Ie[rt],We[rt])||ie.push({command:Sn.setLayerProperty,args:[Se,rt,We[rt]]}))}else ie.push({command:Sn.removeLayer,args:[Se]}),Xe=ve[ve.lastIndexOf(Se)+1],ie.push({command:Sn.addLayer,args:[We,Xe]})}(N,C.layers,P)}catch(k){console.warn("Unable to compute style diff:",k),P=[{command:Sn.setStyle,args:[C]}]}return P}(this.serialize(),c).filter(b=>!(b.command in fa));if(f.length===0)return!1;const _=f.filter(b=>!(b.command in Fl));if(_.length>0)throw new Error(`Unimplemented: ${_.map(b=>b.command).join(", ")}.`);return f.forEach(b=>{b.command!=="setTransition"&&b.command!=="setProjection"&&this[b.command].apply(this,b.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,f){return this.getImage(c)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,f),this._afterImageUpdated(c),this)}updateImage(c,f){this.imageManager.updateImage(c,f)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,f,_={}){if(this._checkLoaded(),this.getSource(c)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${c}`,f,null,_))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=$e(c,f,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:b.serialize(),sourceId:c}));const C=P=>{const k=(P?"symbol:":"other:")+c,R=this._sourceCaches[k]=new o.SourceCache(k,b,P);(P?this._symbolSourceCaches:this._otherSourceCaches)[c]=R,R.style=this,R.onAdd(this.map)};C(!1),f.type!=="vector"&&f.type!=="geojson"||C(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const f=this.getSource(c);if(!f)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(c);for(const b of _)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,f){this._checkLoaded(),this.getSource(c).setData(f),this._changed=!0}getSource(c){const f=this._getSourceCache(c);return f&&f.getSource()}_getSources(){const c=[];for(const f in this._otherSourceCaches){const _=this._getSourceCache(f);_&&c.push(_.getSource())}return c}addLayer(c,f,_={}){this._checkLoaded();const b=c.id;if(this.getLayer(b))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let C;if(c.type==="custom"){if(qc(this,o.validateCustomStyleLayer(c)))return;C=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(b,c.source),c=o.clone$1(c),c=o.extend(c,{source:b})),this._validate(o.validateLayer,`layers.${b}`,c,{arrayIndex:-1},_))return;C=o.createStyleLayer(c),this._validateLayer(C),C.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}const P=f?this._order.indexOf(f):this._order.length;if(f&&P===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(P,0,b),this._layerOrderChanged=!0,this._layers[b]=C;const k=this._getLayerSourceCache(C);if(this._removedLayers[b]&&C.source&&k&&C.type!=="custom"){const R=this._removedLayers[b];delete this._removedLayers[b],R.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",k.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,f){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===f)return;const _=this._order.indexOf(c);this._order.splice(_,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(b,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const f=this._layers[c];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const _=this._order.indexOf(c);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=f,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const f in this._layers)if(this._layers[f].type===c)return!0;return!1}setLayerZoomRange(c,f,_){this._checkLoaded();const b=this.getLayer(c);b?b.minzoom===f&&b.maxzoom===_||(f!=null&&(b.minzoom=f),_!=null&&(b.maxzoom=_),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,f,_={}){this._checkLoaded();const b=this.getLayer(c);if(b){if(!m(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateFilter,`layers.${b.id}.filter`,f,{layerType:b.type},_)||(b.filter=o.clone$1(f),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const f=this.getLayer(c);return f&&o.clone$1(f.filter)}setLayoutProperty(c,f,_,b={}){this._checkLoaded();const C=this.getLayer(c);C?m(C.getLayoutProperty(f),_)||(C.setLayoutProperty(f,_,b),this._updateLayer(C)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,f){const _=this.getLayer(c);if(_)return _.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,f,_,b={}){this._checkLoaded();const C=this.getLayer(c);C?m(C.getPaintProperty(f),_)||(C.setPaintProperty(f,_,b)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,f){const _=this.getLayer(c);return _&&_.getPaintProperty(f)}setFeatureState(c,f){this._checkLoaded();const _=c.source,b=c.sourceLayer,C=this.getSource(_);if(!C)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const P=C.type;if(P==="geojson"&&b)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(P==="vector"&&!b)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(_);for(const R of k)R.setFeatureState(b,c.id,f)}removeFeatureState(c,f){this._checkLoaded();const _=c.source,b=this.getSource(_);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const C=b.type,P=C==="vector"?c.sourceLayer:void 0;if(C==="vector"&&!P)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(_);for(const R of k)R.removeFeatureState(P,c.id,f)}getFeatureState(c){this._checkLoaded();const f=c.source,_=c.sourceLayer,b=this.getSource(f);if(b){if(b.type!=="vector"||_)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(_,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const f in this._sourceCaches){const _=this._sourceCaches[f].getSource();c[_.id]||(c[_.id]=_.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0;const f=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",f.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const f=P=>this._layers[P].type==="fill-extrusion",_={},b=[];for(let P=this._order.length-1;P>=0;P--){const k=this._order[P];if(f(k)){_[k]=P;for(const R of c){const N=R[k];if(N)for(const $ of N)b.push($)}}}b.sort((P,k)=>k.intersectionZ-P.intersectionZ);const C=[];for(let P=this._order.length-1;P>=0;P--){const k=this._order[P];if(f(k))for(let R=b.length-1;R>=0;R--){const N=b[R].feature;if(_[N.layer.id]<P)break;C.push(N),b.pop()}else for(const R of c){const N=R[k];if(N)for(const $ of N)C.push($.feature)}}return C}queryRenderedFeatures(c,f,_){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const R of f.layers){const N=this._layers[R];if(!N)return this.fire(new o.ErrorEvent(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];b[N.source]=!0}}const C=[];f.availableImages=this._availableImages;const P=f&&f.layers?f.layers.some(R=>{const N=this.getLayer(R);return N&&N.is3D()}):this.has3DLayers(),k=Je.createFromScreenPoints(c,_);for(const R in this._sourceCaches){const N=this._sourceCaches[R].getSource().id;f.layers&&!b[N]||C.push(je(this._sourceCaches[R],this._layers,this._serializedLayers,k,f,_,P,!!this.map._showQueryGeometry))}return this.placement&&C.push(function(R,N,$,X,te,ie,se){const ae={},le=ie.queryRenderedSymbols(X),Q=[];for(const ve of Object.keys(le).map(Number))Q.push(se[ve]);Q.sort(Zt);for(const ve of Q){const ge=ve.featureIndex.lookupSymbolFeatures(le[ve.bucketInstanceId],N,ve.bucketIndex,ve.sourceLayerIndex,te.filter,te.layers,te.availableImages,R);for(const _e in ge){const ke=ae[_e]=ae[_e]||[],Se=ge[_e];Se.sort((Ie,We)=>{const Xe=ve.featureSortOrder;if(Xe){const rt=Xe.indexOf(Ie.featureIndex);return Xe.indexOf(We.featureIndex)-rt}return We.featureIndex-Ie.featureIndex});for(const Ie of Se)ke.push(Ie)}}for(const ve in ae)ae[ve].forEach(ge=>{const _e=ge.feature,ke=$(R[ve]);if(!ke)return;const Se=ke.getFeatureState(_e.layer["source-layer"],_e.id);_e.source=_e.layer.source,_e.layer["source-layer"]&&(_e.sourceLayer=_e.layer["source-layer"]),_e.state=Se});return ae}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(c,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const _=this._getSourceCaches(c);let b=[];for(const C of _)b=b.concat(bt(C,f));return b}addSourceType(c,f,_){return ts.getSourceType(c)?_(new Error(`A source type called "${c}" already exists.`)):(ts.setSourceType(c,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:f.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(c,f={}){this._checkLoaded();const _=this.light.getLight();let b=!1;for(const P in c)if(!m(c[P],_[P])){b=!0;break}if(!b)return;const C=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,f),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,f=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=c;if(f===1){if(typeof _.source=="object"){const b="terrain-dem-src";this.addSource(b,_.source),_=o.clone$1(_),_=o.extend(_,{source:b})}if(this._validate(o.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,f)}else{const b=this.terrain,C=b.get();for(const P of Object.keys(o.spec.terrain))!_.hasOwnProperty(P)&&o.spec.terrain[P].default&&(_[P]=o.spec.terrain[P].default);for(const P in _)if(!m(_[P],C[P])){b.set(_),this.stylesheet.terrain=_;const k=this._setTransitionParameters({duration:0});b.updateTransitions(k);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const f=this.fog=new on(c,this.map.transform);this.stylesheet.fog=c;const _=this._setTransitionParameters({duration:0});f.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,_=f.get();Object.keys(c).length===0&&f.set(c);for(const b in c)if(!m(c[b],_[b])){f.set(c),this.stylesheet.fog=c;const C=this._setTransitionParameters({duration:0});f.updateTransitions(C);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:o.exported.now(),transition:o.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(_=>this.isLayerDraped(this._layers[_])),f=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...f)}_createTerrain(c,f){const _=this.terrain=new it(c,f);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});_.updateTransitions(b)}_force3DLayerUpdate(){for(const c in this._layers){const f=this._layers[c];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const f=this._layers[c];f.type==="symbol"&&this._updateLayer(f)}}_validate(c,f,_,b,C={}){return(!C||C.validate!==!1)&&qc(this,c.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:_,styleSpec:o.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const f=this._getSourceCaches(c);for(const _ of f)_.clearTiles()}_reloadSource(c){const f=this._getSourceCaches(c);for(const _ of f)_.resume(),_.reload()}_reloadSources(){for(const c of this._getSources())c.reload&&c.reload()}_updateSources(c){for(const f in this._sourceCaches)this._sourceCaches[f].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const f=this._sourceCaches[c];f.resume(),f.reload()}}_updatePlacement(c,f,_,b,C=!1){let P=!1,k=!1;const R={};for(const N of this._order){const $=this._layers[N];if($.type!=="symbol")continue;if(!R[$.source]){const te=this._getLayerSourceCache($);if(!te)continue;R[$.source]=te.getRenderableIds(!0).map(ie=>te.getTileByID(ie)).sort((ie,se)=>se.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(se.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer($,R[$.source],c.center.lng,c.projection);P=P||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),C=C||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),c.zoom))&&(this.pauseablePlacement=new Gc(c,this._order,C,f,_,b,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),k=!0),P&&this.pauseablePlacement.placement.setStale()),k||P)for(const N of this._order){const $=this._layers[N];$.type==="symbol"&&this.placement.updateLayerOpacities($,R[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,f,_){this.imageManager.getImages(f.icons,_),this._updateTilesForChangedImages();const b=C=>{C&&C.setDependencies(f.tileID.key,f.type,f.icons)};b(this._otherSourceCaches[f.source]),b(this._symbolSourceCaches[f.source])}getGlyphs(c,f,_){this.glyphManager.getGlyphs(f.stacks,_)}getResource(c,f,_){return o.makeRequest(f,_)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const f=[];return this._otherSourceCaches[c]&&f.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&f.push(this._symbolSourceCaches[c]),f}_isSourceCacheLoaded(c){const f=this._getSourceCaches(c);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):f.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ts.getSourceType=function(g){return Re[g]},ts.setSourceType=function(g,c){Re[g]=c},ts.registerForPluginStateChange=o.registerForPluginStateChange;var Zc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Sg="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Eg=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,zd=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Mg=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Pf={},Af={};const $l=[];Ka(Zc,$l),Ka(Eg,$l),Ka(zd,$l),Ka(Mg,$l),Pf=wr("",Eg),Af=wr(Mg,zd);const Pg=wr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Rd=Zc,Od=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var kf={background:wr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:wr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:wr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:wr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:wr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:wr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:wr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:wr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:wr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:wr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:wr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:wr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:wr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:wr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:wr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:wr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:wr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:wr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sg),skyboxGradient:wr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sg),skyboxCapture:wr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:wr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:wr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Ka(g,c){const f=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of f)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=_.split(" ");for(const C of b)c.includes(C)||c.push(C)}}function wr(g,c){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},C=[...$l];return Ka(g,C),Ka(c,C),{fragmentSource:g=g.replace(f,(P,k,R,N,$)=>(b[$]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${$}
varying ${R} ${N} ${$};
#else
uniform ${R} ${N} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${R} ${N} ${$} = u_${$};
#endif
`)),vertexSource:c=c.replace(f,(P,k,R,N,$)=>{const X=N==="float"?"vec2":"vec4",te=$.match(/color/)?"color":X;return b[$]?k==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${R} ${X} a_${$};
varying ${R} ${N} ${$};
#else
uniform ${R} ${N} u_${$};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${R} ${N} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${te}(a_${$}, u_${$}_t);
#else
    ${R} ${N} ${$} = u_${$};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${R} ${X} a_${$};
#else
uniform ${R} ${N} u_${$};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${R} ${N} ${$} = a_${$};
#else
    ${R} ${N} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${R} ${N} ${$} = unpack_mix_${te}(a_${$}, u_${$}_t);
#else
    ${R} ${N} ${$} = u_${$};
#endif
`}),staticAttributes:_,usedDefines:C}}class Yc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,f,_,b,C,P,k){this.context=c;let R=this.boundPaintVertexBuffers.length!==b.length;for(let $=0;!R&&$<b.length;$++)this.boundPaintVertexBuffers[$]!==b[$]&&(R=!0);let N=this.boundDynamicVertexBuffers.length!==k.length;for(let $=0;!N&&$<k.length;$++)this.boundDynamicVertexBuffers[$]!==k[$]&&(N=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==_||R||N||this.boundIndexBuffer!==C||this.boundVertexOffset!==P)this.freshBind(f,_,b,C,P,k);else{c.bindVertexArrayOES.set(this.vao);for(const $ of k)$&&$.bind();C&&C.dynamicDraw&&C.bind()}}freshBind(c,f,_,b,C,P){let k;const R=c.numAttributes,N=this.context,$=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=c,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=b,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=P;else{k=N.currentNumAttributes||0;for(let X=R;X<k;X++)$.disableVertexAttribArray(X)}f.enableAttributes($,c),f.bind(),f.setVertexAttribPointers($,c,C);for(const X of _)X.enableAttributes($,c),X.bind(),X.setVertexAttribPointers($,c,C);for(const X of P)X&&(X.enableAttributes($,c),X.bind(),X.setVertexAttribPointers($,c,C));b&&b.bind(),N.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Df(g,c){const f=Math.pow(2,c.canonical.z),_=c.canonical.y;return[new o.MercatorCoordinate(0,_/f).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/f).toLngLat().lat]}function Xc(g,c,f,_,b,C,P){const k=g.context,R=k.gl,N=f.fbo;if(!N)return;g.prepareDrawTile();const $=g.useProgram("hillshade");k.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,N.colorAttachment.get());const X=((ae,le,Q,ve)=>{const ge=Q.paint.get("hillshade-shadow-color"),_e=Q.paint.get("hillshade-highlight-color"),ke=Q.paint.get("hillshade-accent-color");let Se=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(Se-=ae.transform.angle);const Ie=!ae.options.moving;return{u_matrix:ve||ae.transform.calculateProjMatrix(le.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:Df(0,le.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),Se],u_shadow:ge,u_highlight:_e,u_accent:ke}})(g,f,_,g.terrain?c.projMatrix:null);g.prepareDrawProgram(k,$,c.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ie,tileBoundsSegments:se}=g.getTileBoundsBuffers(f);$.draw(k,R.TRIANGLES,b,C,P,o.CullFaceMode.disabled,X,_.id,te,ie,se)}function Kc(g,c,f){if(!c.needsDEMTextureUpload)return;const _=g.context,b=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||g.getTileTexture(f.stride);const C=f.getPixels();c.demTexture?c.demTexture.update(C,{premultiply:!1}):c.demTexture=new o.Texture(_,C,b.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function Ld(g,c,f,_,b,C){const P=g.context,k=P.gl;if(!c.dem)return;const R=c.dem;if(P.activeTexture.set(k.TEXTURE1),Kc(g,c,R),!c.demTexture)return;c.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const N=R.dim;P.activeTexture.set(k.TEXTURE0);let $=c.fbo;if(!$){const se=new o.Texture(P,{width:N,height:N,data:null},k.RGBA);se.bind(k.LINEAR,k.CLAMP_TO_EDGE),$=c.fbo=P.createFramebuffer(N,N,!0),$.colorAttachment.set(se.texture)}P.bindFramebuffer.set($.framebuffer),P.viewport.set([0,0,N,N]);const{tileBoundsBuffer:X,tileBoundsIndexBuffer:te,tileBoundsSegments:ie}=g.getMercatorTileBoundsBuffers();g.useProgram("hillshadePrepare").draw(P,k.TRIANGLES,_,b,C,o.CullFaceMode.disabled,((se,ae)=>{const le=ae.stride,Q=o.create();return o.ortho(Q,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Q,Q,[0,-o.EXTENT,0]),{u_matrix:Q,u_image:1,u_dimension:[le,le],u_zoom:se.overscaledZ,u_unpack:ae.unpackVector}})(c.tileID,R),f.id,X,te,ie),c.needsHillshadePrepare=!1}const Bd=g=>({u_matrix:new o.UniformMatrix4f(g),u_image0:new o.Uniform1i(g),u_skirt_height:new o.Uniform1f(g)}),If=(g,c)=>({u_matrix:g,u_image0:0,u_skirt_height:c}),Fd=(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:f,u_zoom_transition:b,u_merc_center:C,u_image0:0,u_frustum_tl:P,u_frustum_tr:k,u_frustum_br:R,u_frustum_bl:N,u_globe_pos:$,u_globe_radius:X,u_viewport:te,u_grid_matrix:se?Float32Array.from(se):new Float32Array(9),u_skirt_height:ie});function zf(g,c){return g!=null&&c!=null&&!(!g.hasData()||!c.hasData())&&g.demTexture!=null&&c.demTexture!=null&&g.tileID.key!==c.tileID.key}const ma=new class{constructor(){this.operations={}}newMorphing(g,c,f,_,b){if(g in this.operations){const C=this.operations[g];C.to.tileID.key!==f.tileID.key&&(C.queued=f)}else this.operations[g]={startTime:_,phase:0,duration:b,from:c,to:f,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const c=this.operations[g];return{from:c.from,to:c.to,phase:c.phase}}update(g){for(const c in this.operations){const f=this.operations[c];for(f.phase=(g-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,g)){delete this.operations[c];break}}}_nextOp(g,c){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=c,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},Ja={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function $d(g){return 6*Math.pow(1.5,22-g)}function Rf(g,c){const f=1<<g.z;return!c&&(g.x===0||g.x===f-1)||g.y===0||g.y===f-1}const hr=g=>({u_matrix:g});function Jc(g,c,f,_,b){if(b>0){const C=o.exported.now(),P=(C-g.timeAdded)/b,k=c?(C-c.timeAdded)/b:-1,R=f.getSource(),N=_.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),$=!c||Math.abs(c.tileID.overscaledZ-N)>Math.abs(g.tileID.overscaledZ-N),X=$&&g.refreshedUponExpiration?1:o.clamp($?P:1-k,0,1);return g.refreshedUponExpiration&&P>=1&&(g.refreshedUponExpiration=!1),c?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}class Ag extends o.SourceCache{constructor(c){const f={type:"raster-dem",maxzoom:c.transform.maxZoom},_=new En(yn(),null),b=$e("mock-dem",f,_,c.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,f){c.state="loaded",f(null)}}class kg extends o.SourceCache{constructor(c){const f=$e("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new En(yn(),null),c.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,f,_){if(c.freezeTileCoverage)return;this.transform=c;const b=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,P)=>{if(C[P.key]="",!this._tiles[P.key]){const k=new o.Tile(P,this._source.tileSize*P.overscaleFactor(),c.tileZoom);k.state="loaded",this._tiles[P.key]=k}return C},{});for(const C in this._tiles)C in b||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(c){const f=this.proxyCachedFBO[c];if(f!==void 0){const _=Object.values(f);this.renderCachePool.push(..._),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Of extends o.OverscaledTileID{constructor(c,f,_){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=f,this.projMatrix=_}}class Lf extends o.Elevation{constructor(c,f){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,b,C]=function(R){const N=new o.StructArrayLayout2i4,$=new o.StructArrayLayout3ui6,X=131;N.reserve(17161),$.reserve(33800);const te=o.EXTENT/128,ie=o.EXTENT+te/2,se=ie+te;for(let le=-te;le<se;le+=te)for(let Q=-te;Q<se;Q+=te){const ve=Q<0||Q>ie||le<0||le>ie?24575:0,ge=o.clamp(Math.round(Q),0,o.EXTENT),_e=o.clamp(Math.round(le),0,o.EXTENT);N.emplaceBack(ge+ve,_e)}const ae=(le,Q)=>{const ve=Q*X+le;$.emplaceBack(ve+1,ve,ve+X),$.emplaceBack(ve+X,ve+X+1,ve+1)};for(let le=1;le<129;le++)for(let Q=1;Q<129;Q++)ae(Q,le);return[0,129].forEach(le=>{for(let Q=0;Q<130;Q++)ae(Q,le),ae(le,Q)}),[N,$,32768]}(),P=c.context;this.gridBuffer=P.createVertexBuffer(_,o.posAttributes.members),this.gridIndexBuffer=P.createIndexBuffer(b),this.gridSegments=o.SegmentVector.simpleSegment(0,0,_.length,b.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,_.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new kg(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const k=P.gl;this._overlapStencilMode=new o.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ag(f.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,f,_){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const b=c.terrain.properties;this.sourceCache=c.terrain.drapeRenderMode===0?this._mockSourceCache:c._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const C=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const P=this.getScaledDemTileSize();this.sourceCache.update(f,P,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,C(),this._initializing=!0),C(),f.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||c.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=f.getIds().map(R=>{const N=f.getTileByID(R).tileID;return N.projMatrix=_.calculateProjMatrix(N.toUnwrapped()),N});(function(R,N){const $=N.transform.pointCoordinate(N.transform.getCameraPoint()),X=new o.pointGeometry($.x,$.y);R.sort((te,ie)=>{if(ie.overscaledZ-te.overscaledZ)return ie.overscaledZ-te.overscaledZ;const se=new o.pointGeometry(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),ae=new o.pointGeometry(ie.canonical.x+(1<<ie.canonical.z)*ie.wrap,ie.canonical.y),le=X.mult(1<<te.canonical.z);return le.x-=.5,le.y-=.5,le.distSqr(se)-le.distSqr(ae)})})(b,this.painter),this._previousZoom=_.zoom;const C=this.proxyToSource||{};this.proxyToSource={},b.forEach(R=>{this.proxyToSource[R.key]={}}),this.terrainTileForTile={};const P=this._style._sourceCaches;for(const R in P){const N=P[R];if(!N.used||(N!==this.sourceCache&&this.resetTileLookupCache(N.id),this._setupProxiedCoordsForOrtho(N,c[R],C),N.usedForTerrain))continue;const $=c[R];N.getSource().reparseOverscaled&&this._assignTerrainTiles($)}this.proxiedCoords[f.id]=b.map(R=>new Of(R,R.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const k={};this._visibleDemTiles=[];for(const R of this.proxyCoords){const N=this.terrainTileForTile[R.key];if(!N)continue;const $=N.tileID.key;$ in k||(this._visibleDemTiles.push(N),k[$]=$)}}_assignTerrainTiles(c){this._initializing||c.forEach(f=>{if(this.terrainTileForTile[f.key])return;const _=this._findTileCoveringTileID(f,this.sourceCache);_&&(this.terrainTileForTile[f.key]=_)})}_prepareDEMTextures(){const c=this.painter.context,f=c.gl;for(const _ in this.terrainTileForTile){const b=this.terrainTileForTile[_],C=b.dem;!C||b.demTexture&&!b.needsDEMTextureUpload||(c.activeTexture.set(f.TEXTURE1),Kc(this.painter,b,C))}}_prepareDemTileUniforms(c,f,_,b){if(!f||f.demTexture==null)return!1;const C=c.tileID.canonical,P=Math.pow(2,f.tileID.canonical.z-C.z),k=b||"";return _[`u_dem_tl${k}`]=[C.x*P%1,C.y*P%1],_[`u_dem_scale${k}`]=P,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,f=c.gl;if(!this._emptyDepthBufferTexture){const _=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(c,_,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const f=this._visibleDemTiles.reduce((_,b)=>{if(!b.dem)return _;const C=b.dem.tree.minimums[0];return C>0&&c++,_+C},0);return c?f/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,f=c.gl;c.activeTexture.set(f.TEXTURE2);const _=this._getLoadedAreaMinimum(),b=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(b,{premultiply:!1}):C=this._emptyDEMTexture=new o.Texture(c,b,f.RGBA,{premultiply:!1}),C}setupElevationDraw(c,f,_){const b=this.painter.context,C=b.gl,P=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var k;P.u_dem_size=this.sourceCache.getSource().tileSize,P.u_exaggeration=this.exaggeration();let R=null,N=null,$=1;if(_&&_.morphing&&this._useVertexMorphing){const X=_.morphing.srcDemTile,te=_.morphing.dstDemTile;$=_.morphing.phase,X&&te&&(this._prepareDemTileUniforms(c,X,P,"_prev")&&(N=X),this._prepareDemTileUniforms(c,te,P)&&(R=te))}if(N&&R?(b.activeTexture.set(C.TEXTURE2),R.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),b.activeTexture.set(C.TEXTURE4),N.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),P.u_dem_lerp=$):(R=this.terrainTileForTile[c.tileID.key],b.activeTexture.set(C.TEXTURE2),(this._prepareDemTileUniforms(c,R,P)?R.demTexture:this.emptyDEMTexture).bind(C.NEAREST,C.CLAMP_TO_EDGE)),b.activeTexture.set(C.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(P.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),P.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&R){const X=(1<<R.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;P.u_meter_to_dem=X}if(_&&_.labelPlaneMatrixInv&&(P.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),f.setTerrainUniformValues(b,P),this.painter.transform.projection.name==="globe"){const X=this.globeUniformValues(this.painter.transform,c.tileID.canonical,_&&_.useDenormalizedUpVectorScale);f.setGlobeUniformValues(b,X)}}globeUniformValues(c,f,_){const b=c.projection;return{u_tile_tl_up:b.upVector(f,0,0),u_tile_tr_up:b.upVector(f,o.EXTENT,0),u_tile_br_up:b.upVector(f,o.EXTENT,o.EXTENT),u_tile_bl_up:b.upVector(f,0,o.EXTENT),u_tile_up_scale:_?o.globeMetersToEcef(1):b.upVectorScale(f,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const f=this.painter,_=this.painter.context;c.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,C,P,k,R){if(b.transform.projection.name==="globe")(function(N,$,X,te,ie){const se=N.context,ae=se.gl;let le,Q;const ve=N.options.showTerrainWireframe?2:0,ge=N.transform,_e=o.globeUseCustomAntiAliasing(N,se,ge),ke=(zt,tt)=>{if(Q===zt)return;const Ve=[Ja[zt],"PROJECTION_GLOBE_VIEW"];_e&&Ve.push("CUSTOM_ANTIALIASING"),tt&&Ve.push(Ja[ve]),le=N.useProgram("globeRaster",null,Ve),Q=zt},Se=N.colorModeForRenderPass(),Ie=new o.DepthMode(ae.LEQUAL,o.DepthMode.ReadWrite,N.depthRangeFor3D);ma.update(ie);const We=o.calculateGlobeMercatorMatrix(ge),Xe=[o.mercatorXfromLng(ge.center.lng),o.mercatorYfromLat(ge.center.lat)],rt=ve?[!1,!0]:[!1],Ht=N.globeSharedBuffers,Ge=[ge.width*o.exported.devicePixelRatio,ge.height*o.exported.devicePixelRatio],St=Float32Array.from(ge.globeMatrix),dt={useDenormalizedUpVectorScale:!0};if(rt.forEach(zt=>{const tt=N.transform,Ve=$d(tt.zoom)*$.exaggeration();Q=-1;const ot=zt?ae.LINES:ae.TRIANGLES;for(const Dt of te){const Bt=X.getTile(Dt),_n=o.StencilMode.disabled,Vn=$.prevTerrainTileForTile[Dt.key],dn=$.terrainTileForTile[Dt.key];zf(Vn,dn)&&ma.newMorphing(Dt.key,Vn,dn,ie,250),se.activeTexture.set(ae.TEXTURE0),Bt.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const rn=ma.getMorphValuesForProxy(Dt.key),xn=rn?1:0;rn&&o.extend$1(dt,{morphing:{srcDemTile:rn.from,dstDemTile:rn.to,phase:o.easeCubicInOut(rn.phase)}});const Jn=o.tileCornersToBounds(Dt.canonical),Mn=o.getLatitudinalLod(Jn.getCenter().lat),Tr=o.getGridMatrix(Dt.canonical,Jn,Mn,tt.worldSize/tt._pixelsPerMercatorPixel),Sr=o.globeNormalizeECEF(o.globeTileBounds(Dt.canonical)),jr=Fd(tt.projMatrix,St,We,Sr,o.globeToMercatorTransition(tt.zoom),Xe,tt.frustumCorners.TL,tt.frustumCorners.TR,tt.frustumCorners.BR,tt.frustumCorners.BL,tt.globeCenterInViewSpace,tt.globeRadius,Ge,Ve,Tr);if(ke(xn,zt),$.setupElevationDraw(Bt,le,dt),N.prepareDrawProgram(se,le,Dt.toUnwrapped()),Ht){const[Nr,Ei,Ao]=zt?Ht.getWirefameBuffers(N.context,Mn):Ht.getGridBuffers(Mn,Ve!==0);le.draw(se,ot,Ie,_n,Se,o.CullFaceMode.backCCW,jr,"globe_raster",Nr,Ei,Ao)}}}),Ht){const zt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];_e&&zt.push("CUSTOM_ANTIALIASING"),le=N.useProgram("globeRaster",null,zt);for(const tt of te){const{x:Ve,y:ot,z:Dt}=tt.canonical,Bt=ot===0,_n=ot===(1<<Dt)-1,[Vn,dn,rn,xn]=Ht.getPoleBuffers(Dt);if(xn&&(Bt||_n)){const Jn=X.getTile(tt);se.activeTexture.set(ae.TEXTURE0),Jn.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);let Mn=o.globePoleMatrixForTile(Dt,Ve,ge);const Tr=o.globeNormalizeECEF(o.globeTileBounds(tt.canonical)),Sr=(jr,Nr)=>jr.draw(se,ae.TRIANGLES,Ie,o.StencilMode.disabled,Se,o.CullFaceMode.disabled,Fd(ge.projMatrix,Mn,Mn,Tr,0,Xe,ge.frustumCorners.TL,ge.frustumCorners.TR,ge.frustumCorners.BR,ge.frustumCorners.BL,ge.globeCenterInViewSpace,ge.globeRadius,Ge,0),"globe_pole_raster",Nr,rn,xn);$.setupElevationDraw(Jn,le,dt),N.prepareDrawProgram(se,le,tt.toUnwrapped()),Bt&&Sr(le,Vn),_n&&(Mn=o.scale(o.create(),Mn,[1,-1,1]),Sr(le,dn))}}}})(b,C,P,k,R);else{const N=b.context,$=N.gl;let X,te;const ie=b.options.showTerrainWireframe?2:0,se=(ge,_e)=>{if(te===ge)return;const ke=[Ja[ge]];_e&&ke.push(Ja[ie]),X=b.useProgram("terrainRaster",null,ke),te=ge},ae=b.colorModeForRenderPass(),le=new o.DepthMode($.LEQUAL,o.DepthMode.ReadWrite,b.depthRangeFor3D);ma.update(R);const Q=b.transform,ve=$d(Q.zoom)*C.exaggeration();(ie?[!1,!0]:[!1]).forEach(ge=>{te=-1;const _e=ge?$.LINES:$.TRIANGLES,[ke,Se]=ge?C.getWirefameBuffer():[C.gridIndexBuffer,C.gridSegments];for(const Ie of k){const We=P.getTile(Ie),Xe=o.StencilMode.disabled,rt=C.prevTerrainTileForTile[Ie.key],Ht=C.terrainTileForTile[Ie.key];zf(rt,Ht)&&ma.newMorphing(Ie.key,rt,Ht,R,250),N.activeTexture.set($.TEXTURE0),We.texture.bind($.LINEAR,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);const Ge=ma.getMorphValuesForProxy(Ie.key),St=Ge?1:0;let dt;Ge&&(dt={morphing:{srcDemTile:Ge.from,dstDemTile:Ge.to,phase:o.easeCubicInOut(Ge.phase)}});const zt=If(Ie.projMatrix,Rf(Ie.canonical,Q.renderWorldCopies)?ve/10:ve);se(St,ge),C.setupElevationDraw(We,X,dt),b.prepareDrawProgram(N,X,Ie.toUnwrapped()),X.draw(N,_e,le,Xe,ae,o.CullFaceMode.backCCW,zt,"terrain_raster",C.gridBuffer,ke,Se)}})}}(f,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const f=this.painter,_=this.painter.context,b=this.proxySourceCache,C=this.proxiedCoords[b.id],P=this._drapedRenderBatches.shift(),k=[],R=f.style.order;let N=0;for(const $ of C){const X=b.getTileByID($.proxyTileKey),te=b.proxyCachedFBO[$.key]?b.proxyCachedFBO[$.key][c]:void 0,ie=te!==void 0?b.renderCache[te]:this.pool[N++],se=te!==void 0;if(X.texture=ie.tex,se&&!ie.dirty){k.push(X.tileID);continue}let ae;_.bindFramebuffer.set(ie.fb.framebuffer),this.renderedToTile=!1,ie.dirty&&(_.clear({color:o.Color.transparent,stencil:0}),ie.dirty=!1);for(let le=P.start;le<=P.end;++le){const Q=f.style._layers[R[le]];if(Q.isHidden(f.transform.zoom))continue;const ve=f.style._getLayerSourceCache(Q),ge=ve?this.proxyToSource[$.key][ve.id]:[$];if(!ge)continue;const _e=ge;_.viewport.set([0,0,ie.fb.width,ie.fb.height]),ae!==(ve?ve.id:null)&&(this._setupStencil(ie,ge,Q,ve),ae=ve?ve.id:null),f.renderLayer(f,ve,Q,_e)}this.renderedToTile?(ie.dirty=!0,k.push(X.tileID)):se||--N,N===5&&(N=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,f.width,f.height]),P.end+1}postRender(){}renderCacheEfficiency(c){const f=c.order.length;if(f===0)return{efficiency:100};let _,b=0,C=0,P=!1;for(let k=0;k<f;++k){const R=c._layers[c.order[k]];this._style.isLayerDraped(R)?(P&&++b,++C):P||(P=!0,_=R.id)}return C===0?{efficiency:100}:{efficiency:100*(1-b/C),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{c=Math.min(c,f.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,f,_){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const P=C.tileID,k=1<<P.overscaledZ,{x:R,y:N}=P.canonical,$=R/k,X=(R+1)/k,te=N/k,ie=(N+1)/k;return{minx:$,miny:te,maxx:X,maxy:ie,t:C.dem.tree.raycastRoot($,te,X,ie,c,f,_),tile:C}});b.sort((C,P)=>(C.t!==null?C.t:Number.MAX_VALUE)-(P.t!==null?P.t:Number.MAX_VALUE));for(const C of b){if(C.t==null)return null;const P=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,c,f,_);if(P!=null)return P}return null}_createFBO(){const c=this.painter.context,f=c.gl,_=this.drapeBufferSize;c.activeTexture.set(f.TEXTURE0);const b=new o.Texture(c,{width:_[0],height:_[1],data:null},f.RGBA);b.bind(f.LINEAR,f.CLAMP_TO_EDGE);const C=c.createFramebuffer(_[0],_[1],!1);return C.colorAttachment.set(b.texture),C.depthAttachment=new xi(c,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:C,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const f=this._style._layers[c],_=f.isHidden(this.painter.transform.zoom);return f.type==="custom"?!_&&f.shouldRedrape():!_&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const _ of this._style._getSources())if(_ instanceof L){c=!0;break}if(!c)return;const f={};for(let _=0;_<this._style.order.length;++_){const b=this._style._layers[this._style.order[_]],C=this._style._getLayerSourceCache(b);if(C&&!f[C.id]&&!b.isHidden(this.painter.transform.zoom)&&b.type==="line"&&b.widthExpression()instanceof o.ZoomDependentExpression){f[C.id]=!0;for(const P of this.proxyCoords){const k=this.proxyToSource[P.key][C.id];if(k)for(const R of k)this._clearRenderCacheForTile(C.id,R)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof G){c=!0;break}if(!c)return;const f={};for(let _=0;_<this._style.order.length;++_){const b=this._style._layers[this._style.order[_]],C=this._style._getLayerSourceCache(b);if(!C||f[C.id]||b.isHidden(this.painter.transform.zoom)||b.type!=="raster")continue;const P=b.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const R=this.proxyToSource[k.key][C.id];if(R)for(const N of R){const $=Jc(C.getTile(N),C.findLoadedParent(N,0),C,this.painter.transform,P);($.opacity!==1||$.mix!==0)&&this._clearRenderCacheForTile(C.id,N)}}}}_setupDrapedRenderBatches(){const c=this._style.order,f=c.length;if(f===0)return;const _=[];let b,C=0,P=this._style._layers[c[C]];for(;!this._style.isLayerDraped(P)&&P.isHidden(this.painter.transform.zoom)&&++C<f;)P=this._style._layers[c[C]];for(;C<f;++C){const k=this._style._layers[c[C]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?b===void 0&&(b=C):b!==void 0&&(_.push({start:b,end:C-1}),b=void 0))}b!==void 0&&_.push({start:b,end:C-1}),this._drapedRenderBatches=_}_setupRenderCache(c){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const P=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let k=0;k<P.length;++k){const R=Object.values(P[k]);f.renderCachePool.push(...R)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,b=this._tilesDirty;for(let P=_.length-1;P>=0;P--){const k=_[P];if(f.getTileByID(k.key),f.proxyCachedFBO[k.key]!==void 0){const R=c[k.key],N=this.proxyToSource[k.key];let $=0;for(const X in N){const te=N[X],ie=R[X];if(!ie||ie.length!==te.length||te.some((se,ae)=>se!==ie[ae]||b[X]&&b[X].hasOwnProperty(se.key))){$=-1;break}++$}for(const X in f.proxyCachedFBO[k.key])f.renderCache[f.proxyCachedFBO[k.key][X]].dirty=$<0||$!==Object.values(R).length}}const C=[...this._drapedRenderBatches];C.sort((P,k)=>k.end-k.start-(P.end-P.start));for(const P of C)for(const k of _){if(f.proxyCachedFBO[k.key])continue;let R=f.renderCachePool.pop();R===void 0&&f.renderCache.length<50&&(R=f.renderCache.length,f.renderCache.push(this._createFBO())),R!==void 0&&(f.proxyCachedFBO[k.key]={},f.proxyCachedFBO[k.key][P.start]=R,f.renderCache[R].dirty=!0)}this._tilesDirty={}}_setupStencil(c,f,_,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,P=C.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let k;if(_.isTileClipped())k=f.length,this._overlapStencilMode.test={func:P.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:P.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(c,f){const _=this.painter,b=this.painter.context,C=b.gl;_._tileClippingMaskIDs={},b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const P=_.useProgram("clippingMask");for(const k of c){const R=_._tileClippingMaskIDs[k.key]=--f;P.draw(b,C.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:C.ALWAYS,mask:0},R,255,C.KEEP,C.KEEP,C.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,hr(k.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(c){const f=this.painter.transform;if(c.x<0||c.x>f.width||c.y<0||c.y>f.height)return null;const _=[c.x,c.y,1,1];o.transformMat4$1(_,_,f.pixelMatrixInverse),o.scale$1(_,_,1/_[3]),_[0]/=f.worldSize,_[1]/=f.worldSize;const b=f._camera.position,C=o.mercatorZfromAltitude(1,f.center.lat),P=[b[0],b[1],b[2]/C,0],k=o.subtract([],_.slice(0,3),P);o.normalize(k,k);const R=this.raycast(P,k,this._exaggeration);return R!==null&&R?(o.scaleAndAdd(P,P,k,R),P[3]=P[2],P[2]*=C,P):null}drawDepth(){const c=this.painter,f=c.context,_=this.proxySourceCache,b=Math.ceil(c.width),C=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const P=f.gl,k=f.createFramebuffer(b,C,!0);f.activeTexture.set(P.TEXTURE0);const R=new o.Texture(f,{width:b,height:C,data:null},P.RGBA);R.bind(P.NEAREST,P.CLAMP_TO_EDGE),k.colorAttachment.set(R.texture);const N=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,b,C);k.depthAttachment.set(N),this._depthFBO=k,this._depthTexture=R}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,b,C]),function(P,k,R,N){if(P.transform.projection.name==="globe")return;const $=P.context,X=$.gl;$.clear({depth:1});const te=P.useProgram("terrainDepth"),ie=new o.DepthMode(X.LESS,o.DepthMode.ReadWrite,P.depthRangeFor3D);for(const se of N){const ae=R.getTile(se),le=If(se.projMatrix,0);k.setupElevationDraw(ae,te),te.draw($,X.TRIANGLES,ie,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,le,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(c,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,f,_){if(c.getSource()instanceof we)return this._setupProxiedCoordsForImageSource(c,f,_);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const b=this.proxiedCoords[c.id]=[],C=this.proxyCoords;for(let k=0;k<C.length;k++){const R=C[k],N=this._findTileCoveringTileID(R,c);if(N){const $=this._createProxiedId(R,N,_[R.key]&&_[R.key][c.id]);b.push($),this.proxyToSource[R.key][c.id]=[$]}}let P=!1;for(let k=0;k<f.length;k++){const R=c.getTile(f[k]);if(!R||!R.hasData())continue;const N=this._findTileCoveringTileID(R.tileID,this.proxySourceCache);if(N&&N.tileID.canonical.z!==R.tileID.canonical.z){const $=this.proxyToSource[N.tileID.key][c.id],X=this._createProxiedId(N.tileID,R,_[N.tileID.key]&&_[N.tileID.key][c.id]);$?$.splice($.length-1,0,X):this.proxyToSource[N.tileID.key][c.id]=[X],b.push(X),P=!0}}this._sourceTilesOverlap[c.id]=P}_setupProxiedCoordsForImageSource(c,f,_){if(!c.getSource().loaded())return;const b=this.proxiedCoords[c.id]=[],C=this.proxyCoords,P=c.getSource(),k=new o.pointGeometry(P.tileID.x,P.tileID.y)._div(1<<P.tileID.z),R=P.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce(($,X)=>($.min.x=Math.min($.min.x,X.x-k.x),$.min.y=Math.min($.min.y,X.y-k.y),$.max.x=Math.max($.max.x,X.x-k.x),$.max.y=Math.max($.max.y,X.y-k.y),$),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),N=($,X)=>{const te=$.wrap+$.canonical.x/(1<<$.canonical.z),ie=$.canonical.y/(1<<$.canonical.z),se=o.EXTENT/(1<<$.canonical.z),ae=X.wrap+X.canonical.x/(1<<X.canonical.z),le=X.canonical.y/(1<<X.canonical.z);return te+se<ae+R.min.x||te>ae+R.max.x||ie+se<le+R.min.y||ie>le+R.max.y};for(let $=0;$<C.length;$++){const X=C[$];for(let te=0;te<f.length;te++){const ie=c.getTile(f[te]);if(!ie||!ie.hasData()||N(X,ie.tileID))continue;const se=this._createProxiedId(X,ie,_[X.key]&&_[X.key][c.id]),ae=this.proxyToSource[X.key][c.id];ae?ae.push(se):this.proxyToSource[X.key][c.id]=[se],b.push(se)}}}_createProxiedId(c,f,_){let b=this.orthoMatrix;if(_){const C=_.find(P=>P.key===f.tileID.key);if(C)return C}if(f.tileID.key!==c.key){const C=c.canonical.z-f.tileID.canonical.z;let P,k,R;b=o.create();const N=f.tileID.wrap-c.wrap<<c.overscaledZ;C>0?(P=o.EXTENT>>C,k=P*((f.tileID.canonical.x<<C)-c.canonical.x+N),R=P*((f.tileID.canonical.y<<C)-c.canonical.y)):(P=o.EXTENT<<-C,k=o.EXTENT*(f.tileID.canonical.x-(c.canonical.x+N<<-C)),R=o.EXTENT*(f.tileID.canonical.y-(c.canonical.y<<-C))),o.ortho(b,0,P,0,P,0,1),o.translate(b,b,[k,R,0])}return new Of(f.tileID,c.key,b)}_findTileCoveringTileID(c,f){let _=f.getTile(c);if(_&&_.hasData())return _;const b=this._findCoveringTileCache[f.id],C=b[c.key];if(_=C?f.getTileByID(C):null,_&&_.hasData()||C===null)return _;let P=_?_.tileID:c,k=P.overscaledZ;const R=f.getSource().minzoom,N=[];if(!C){const X=f.getSource().maxzoom;if(c.canonical.z>=X){const te=c.canonical.z-X;f.getSource().reparseOverscaled?(k=Math.max(c.canonical.z+2,f.transform.tileZoom),P=new o.OverscaledTileID(k,c.wrap,X,c.canonical.x>>te,c.canonical.y>>te)):te!==0&&(k=X,P=new o.OverscaledTileID(k,c.wrap,X,c.canonical.x>>te,c.canonical.y>>te))}P.key!==c.key&&(N.push(P.key),_=f.getTile(P))}const $=X=>{N.forEach(te=>{b[te]=X}),N.length=0};for(k-=1;k>=R&&(!_||!_.hasData());k--){_&&$(_.tileID.key);const X=P.calculateScaledKey(k);if(_=f.getTileByID(X),_&&_.hasData())break;const te=b[X];if(te===null)break;te===void 0?N.push(X):_=f.getTileByID(te)}return $(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,f){let _=this._tilesDirty[c];_||(_=this._tilesDirty[c]={}),_[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(f){let _=0;const b=new o.StructArrayLayout2ui4,C=131;for(let P=1;P<129;P++){for(let k=1;k<129;k++)_=P*C+k,b.emplaceBack(_,_+1),b.emplaceBack(_,_+C),b.emplaceBack(_+1,_+C),P===128&&b.emplaceBack(_+C,_+C+1);b.emplaceBack(_+1,_+1+C)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Bf{static cacheKey(c,f,_,b){let C=`${f}${b?b.cacheKey:""}`;for(const P of _)c.usedDefines.includes(P)&&(C+=`/${P}`);return C}constructor(c,f,_,b,C,P){const k=c.gl;this.program=k.createProgram();const R=function(Q){const ve=[];for(let ge=0;ge<Q.length;ge++){if(Q[ge]===null)continue;const _e=Q[ge].split(" ");ve.push(_e.pop())}return ve}(_.staticAttributes),N=b?b.getBinderAttributes():[],$=R.concat(N);let X=b?b.defines():[];X=X.concat(P.map(Q=>`#define ${Q}`));const te=c.isWebGL2?`#version 300 es
`:"",ie=te+X.concat(c.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Od):Od,Od,Rd,Pg.fragmentSource,Af.fragmentSource,_.fragmentSource).join(`
`),se=te+X.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Rd,Pg.vertexSource,Af.vertexSource,Pf.vertexSource,_.vertexSource).join(`
`),ae=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ae,ie),k.compileShader(ae),k.attachShader(this.program,ae);const le=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(le,se),k.compileShader(le),k.attachShader(this.program,le),this.attributes={},this.numAttributes=$.length;for(let Q=0;Q<this.numAttributes;Q++)$[Q]&&(k.bindAttribLocation(this.program,Q,$[Q]),this.attributes[$[Q]]=Q);k.linkProgram(this.program),k.deleteShader(le),k.deleteShader(ae),this.fixedUniforms=C(c),this.binderUniforms=b?b.getUniforms(c):[],P.includes("TERRAIN")&&(this.terrainUniforms=(Q=>({u_dem:new o.Uniform1i(Q),u_dem_prev:new o.Uniform1i(Q),u_dem_unpack:new o.Uniform4f(Q),u_dem_tl:new o.Uniform2f(Q),u_dem_scale:new o.Uniform1f(Q),u_dem_tl_prev:new o.Uniform2f(Q),u_dem_scale_prev:new o.Uniform1f(Q),u_dem_size:new o.Uniform1f(Q),u_dem_lerp:new o.Uniform1f(Q),u_exaggeration:new o.Uniform1f(Q),u_depth:new o.Uniform1i(Q),u_depth_size_inv:new o.Uniform2f(Q),u_meter_to_dem:new o.Uniform1f(Q),u_label_plane_matrix_inv:new o.UniformMatrix4f(Q)}))(c)),P.includes("GLOBE")&&(this.globeUniforms=(Q=>({u_tile_tl_up:new o.Uniform3f(Q),u_tile_tr_up:new o.Uniform3f(Q),u_tile_br_up:new o.Uniform3f(Q),u_tile_bl_up:new o.Uniform3f(Q),u_tile_up_scale:new o.Uniform1f(Q)}))(c)),P.includes("FOG")&&(this.fogUniforms=(Q=>({u_fog_matrix:new o.UniformMatrix4f(Q),u_fog_range:new o.Uniform2f(Q),u_fog_color:new o.Uniform4f(Q),u_fog_horizon_blend:new o.Uniform1f(Q),u_fog_temporal_offset:new o.Uniform1f(Q),u_frustum_tl:new o.Uniform3f(Q),u_frustum_tr:new o.Uniform3f(Q),u_frustum_br:new o.Uniform3f(Q),u_frustum_bl:new o.Uniform3f(Q),u_globe_pos:new o.Uniform3f(Q),u_globe_radius:new o.Uniform1f(Q),u_globe_transition:new o.Uniform1f(Q),u_is_globe:new o.Uniform1i(Q),u_viewport:new o.Uniform2f(Q)}))(c))}}setTerrainUniformValues(c,f){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)_[b]&&_[b].set(this.program,b,f[b])}}setGlobeUniformValues(c,f){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)_[b]&&_[b].set(this.program,b,f[b])}}setFogUniformValues(c,f){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)_[b].set(this.program,b,f[b])}}draw(c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae){const le=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(_),c.setStencilMode(b),c.setColorMode(C),c.setCullFace(P);for(const ve of Object.keys(this.fixedUniforms))this.fixedUniforms[ve].set(this.program,ve,k[ve]);se&&se.setUniforms(this.program,c,this.binderUniforms,te,{zoom:ie});const Q={[le.LINES]:2,[le.TRIANGLES]:3,[le.LINE_STRIP]:1}[f];for(const ve of X.get()){const ge=ve.vaos||(ve.vaos={});(ge[R]||(ge[R]=new Yc)).bind(c,this,N,se?se.getPaintVertexBuffers():[],$,ve.vertexOffset,ae||[]),le.drawElements(f,ve.primitiveLength*Q,le.UNSIGNED_SHORT,ve.primitiveOffset*Q*2)}}}function Dg(g,c){const f=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,g.transform.tileZoom)/f,b=_*(c.tileID.canonical.x+c.tileID.wrap*f),C=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_tile_units_to_pixels:1/Dn(c,1,g.transform.tileZoom),u_pixel_coord_upper:[b>>16,C>>16],u_pixel_coord_lower:[65535&b,65535&C]}}const b0=o.create(),Nd=(g,c,f,_,b,C,P,k,R,N,$)=>{const X=c.style.light,te=X.properties.get("position"),ie=[te.x,te.y,te.z],se=o.create$1();X.properties.get("anchor")==="viewport"&&(o.fromRotation(se,-c.transform.angle),o.transformMat3(ie,ie,se));const ae=X.properties.get("color"),le=c.transform,Q={u_matrix:g,u_lightpos:ie,u_lightintensity:X.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+f,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:b0,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:C};return le.projection.name==="globe"&&(Q.u_tile_id=[P.canonical.x,P.canonical.y,1<<P.canonical.z],Q.u_zoom_transition=R,Q.u_inv_rot_matrix=$,Q.u_merc_center=N,Q.u_up_dir=le.projection.upVector(new o.CanonicalTileID(0,0,0),N[0]*o.EXTENT,N[1]*o.EXTENT),Q.u_height_lift=k),Q},Ff=(g,c,f,_,b,C,P,k,R,N,$,X)=>{const te=Nd(g,c,f,_,b,C,P,R,N,$,X),ie={u_height_factor:-Math.pow(2,P.overscaledZ)/k.tileSize/8};return o.extend(te,Dg(c,k),ie)},Ud=g=>({u_matrix:g}),Vd=(g,c,f)=>o.extend(Ud(g),Dg(c,f)),Ig=(g,c)=>({u_matrix:g,u_world:c}),zg=(g,c,f,_)=>o.extend(Vd(g,c,f),{u_world:_}),w0=o.create(),Qc=(g,c,f,_,b,C)=>{const P=g.transform,k=P.projection.name==="globe";let R;if(C.paint.get("circle-pitch-alignment")==="map")if(k){const $=o.globePixelsToTileUnits(P.zoom,c.canonical)*P._pixelsPerMercatorPixel;R=Float32Array.from([$,0,0,$])}else R=P.calculatePixelsToTileUnitsMatrix(f);else R=new Float32Array([P.pixelsToGLUnits[0],0,0,P.pixelsToGLUnits[1]]);const N={u_camera_to_center_distance:P.cameraToCenterDistance,u_matrix:g.translatePosMatrix(c.projMatrix,f,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:R,u_inv_rot_matrix:w0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){N.u_inv_rot_matrix=_,N.u_merc_center=b,N.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],N.u_zoom_transition=o.globeToMercatorTransition(P.zoom);const $=b[0]*o.EXTENT,X=b[1]*o.EXTENT;N.u_up_dir=P.projection.upVector(new o.CanonicalTileID(0,0,0),$,X)}return N},eu=g=>{const c=[];return g.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),g.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c},Rg=(g,c,f,_)=>{const b=o.EXTENT/f.tileSize;return{u_matrix:g,u_camera_to_center_distance:c.getCameraToCenterDistance(_),u_extrude_scale:[c.pixelsToGLUnits[0]/b,c.pixelsToGLUnits[1]/b]}},tu=(g,c,f=1)=>({u_matrix:g,u_color:c,u_overlay:0,u_overlay_scale:f}),$f=o.create(),Ss=(g,c,f,_,b,C,P)=>{const k=g.transform,R=k.projection.name==="globe",N=R?o.globePixelsToTileUnits(k.zoom,c.canonical)*k._pixelsPerMercatorPixel:Dn(f,1,C),$={u_matrix:c.projMatrix,u_extrude_scale:N,u_intensity:P,u_inv_rot_matrix:$f,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(R){$.u_inv_rot_matrix=_,$.u_merc_center=b,$.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],$.u_zoom_transition=o.globeToMercatorTransition(k.zoom);const X=b[0]*o.EXTENT,te=b[1]*o.EXTENT;$.u_up_dir=k.projection.upVector(new o.CanonicalTileID(0,0,0),X,te)}return $},Nf=(g,c,f,_,b,C,P)=>{const k=g.transform,R=k.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:Uf(g,c,f,_),u_pixels_to_tile_units:R,u_device_pixel_ratio:C,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:b,u_texsize:Wd(f)?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:jd(c,g.transform),u_alpha_discard_threshold:0,u_trim_offset:P}},Og=(g,c,f,_,b)=>{const C=g.transform;return{u_matrix:Uf(g,c,f,_),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:b,u_image:0,u_tile_units_to_pixels:jd(c,C),u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function jd(g,c){return 1/Dn(g,1,c.tileZoom)}function Uf(g,c,f,_){return g.translatePosMatrix(_||c.tileID.projMatrix,c,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Wd(g){const c=g.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const T0=(g,c,f,_,b,C)=>{return{u_matrix:g,u_tl_parent:c,u_scale_parent:f,u_fade_t:_.mix,u_opacity:_.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(k=b.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(P=b.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:Vf(b.paint.get("raster-hue-rotate")),u_perspective_transform:C};var P,k};function Vf(g){g*=Math.PI/180;const c=Math.sin(g),f=Math.cos(g);return[(2*f+1)/3,(-Math.sqrt(3)*c-f+1)/3,(Math.sqrt(3)*c-f+1)/3]}const Lg=o.create(),nu=(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae)=>{const le=b.transform,Q={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:le.width/le.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:P,u_coord_matrix:k,u_is_text:+R,u_pitch_with_map:+_,u_texsize:N,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Lg,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Lg,u_up_vector:[0,-1,0]};return ae.name==="globe"&&(Q.u_tile_id=[$.canonical.x,$.canonical.y,1<<$.canonical.z],Q.u_zoom_transition=X,Q.u_inv_rot_matrix=ie,Q.u_merc_center=te,Q.u_camera_forward=le._camera.forward(),Q.u_ecef_origin=o.globeECEFOrigin(le.globeMatrix,$.toUnwrapped()),Q.u_tile_matrix=Float32Array.from(le.globeMatrix),Q.u_up_vector=se),Q},Bg=(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae,le)=>o.extend(nu(g,c,f,_,b,C,P,k,R,N,X,te,ie,se,ae,le),{u_gamma_scale:_?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+$}),jf=(g,c,f,_,b,C,P,k,R,N,$,X,te,ie,se,ae)=>o.extend(Bg(g,c,f,_,b,C,P,k,!0,R,!0,$,X,te,ie,se,ae),{u_texsize_icon:N,u_texture_icon:1}),C0=(g,c,f)=>({u_matrix:g,u_opacity:c,u_color:f}),Wf=(g,c,f,_,b)=>o.extend(function(C,P,k){const R=P.imageManager.getPattern(C.toString()),{width:N,height:$}=P.imageManager.getPixelSize(),X=Math.pow(2,k.tileID.overscaledZ),te=k.tileSize*Math.pow(2,P.transform.tileZoom)/X,ie=te*(k.tileID.canonical.x+k.tileID.wrap*X),se=te*k.tileID.canonical.y;return{u_image:0,u_pattern_tl:R.tl,u_pattern_br:R.br,u_texsize:[N,$],u_pattern_size:R.displaySize,u_tile_units_to_pixels:1/Dn(k,1,P.transform.tileZoom),u_pixel_coord_upper:[ie>>16,se>>16],u_pixel_coord_lower:[65535&ie,65535&se]}}(_,f,b),{u_matrix:g,u_opacity:c}),S0={fillExtrusion:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g)}),fillExtrusionPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_height_factor:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g)}),fill:g=>({u_matrix:new o.UniformMatrix4f(g)}),fillPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),fillOutline:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g)}),fillOutlinePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),circle:g=>({u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),collisionBox:g=>({u_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.Uniform2f(g)}),collisionCircle:g=>({u_matrix:new o.UniformMatrix4f(g),u_inv_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_viewport_size:new o.Uniform2f(g)}),debug:g=>({u_color:new o.UniformColor(g),u_matrix:new o.UniformMatrix4f(g),u_overlay:new o.Uniform1i(g),u_overlay_scale:new o.Uniform1f(g)}),clippingMask:g=>({u_matrix:new o.UniformMatrix4f(g)}),heatmap:g=>({u_extrude_scale:new o.Uniform1f(g),u_intensity:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),heatmapTexture:g=>({u_image:new o.Uniform1i(g),u_color_ramp:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g)}),hillshade:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_latrange:new o.Uniform2f(g),u_light:new o.Uniform2f(g),u_shadow:new o.UniformColor(g),u_highlight:new o.UniformColor(g),u_accent:new o.UniformColor(g)}),hillshadePrepare:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_dimension:new o.Uniform2f(g),u_zoom:new o.Uniform1f(g),u_unpack:new o.Uniform4f(g)}),line:g=>({u_matrix:new o.UniformMatrix4f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_units_to_pixels:new o.Uniform2f(g),u_dash_image:new o.Uniform1i(g),u_gradient_image:new o.Uniform1i(g),u_image_height:new o.Uniform1f(g),u_texsize:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g),u_trim_offset:new o.Uniform2f(g)}),linePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_texsize:new o.Uniform2f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_units_to_pixels:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g)}),raster:g=>({u_matrix:new o.UniformMatrix4f(g),u_tl_parent:new o.Uniform2f(g),u_scale_parent:new o.Uniform1f(g),u_fade_t:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_image0:new o.Uniform1i(g),u_image1:new o.Uniform1i(g),u_brightness_low:new o.Uniform1f(g),u_brightness_high:new o.Uniform1f(g),u_saturation_factor:new o.Uniform1f(g),u_contrast_factor:new o.Uniform1f(g),u_spin_weights:new o.Uniform3f(g),u_perspective_transform:new o.Uniform2f(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_texture:new o.Uniform1i(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_is_halo:new o.Uniform1i(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texsize_icon:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_texture_icon:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_is_halo:new o.Uniform1i(g)}),background:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_color:new o.UniformColor(g)}),backgroundPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_pattern_tl:new o.Uniform2f(g),u_pattern_br:new o.Uniform2f(g),u_texsize:new o.Uniform2f(g),u_pattern_size:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),terrainRaster:Bd,terrainDepth:Bd,skybox:g=>({u_matrix:new o.UniformMatrix4f(g),u_sun_direction:new o.Uniform3f(g),u_cubemap:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxGradient:g=>({u_matrix:new o.UniformMatrix4f(g),u_color_ramp:new o.Uniform1i(g),u_center_direction:new o.Uniform3f(g),u_radius:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxCapture:g=>({u_matrix_3f:new o.UniformMatrix3f(g),u_sun_direction:new o.Uniform3f(g),u_sun_intensity:new o.Uniform1f(g),u_color_tint_r:new o.Uniform4f(g),u_color_tint_m:new o.Uniform4f(g),u_luminance:new o.Uniform1f(g)}),globeRaster:g=>({u_proj_matrix:new o.UniformMatrix4f(g),u_globe_matrix:new o.UniformMatrix4f(g),u_normalize_matrix:new o.UniformMatrix4f(g),u_merc_matrix:new o.UniformMatrix4f(g),u_zoom_transition:new o.Uniform1f(g),u_merc_center:new o.Uniform2f(g),u_image0:new o.Uniform1i(g),u_grid_matrix:new o.UniformMatrix3f(g),u_skirt_height:new o.Uniform1f(g),u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_globe_pos:new o.Uniform3f(g),u_globe_radius:new o.Uniform1f(g),u_viewport:new o.Uniform2f(g)}),globeAtmosphere:g=>({u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_horizon:new o.Uniform1f(g),u_transition:new o.Uniform1f(g),u_fadeout_range:new o.Uniform1f(g),u_color:new o.Uniform4f(g),u_high_color:new o.Uniform4f(g),u_space_color:new o.Uniform4f(g),u_star_intensity:new o.Uniform1f(g),u_star_density:new o.Uniform1f(g),u_star_size:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g),u_horizon_angle:new o.Uniform1f(g),u_rotation_matrix:new o.UniformMatrix4f(g)})};let Qa;function Fg(g,c,f,_,b,C,P){const k=g.context,R=k.gl,N=g.transform,$=g.useProgram("collisionBox"),X=[];let te=0,ie=0;for(let _e=0;_e<_.length;_e++){const ke=_[_e],Se=c.getTile(ke),Ie=Se.getBucket(f);if(!Ie)continue;const We=Vc(ke,Ie,N);let Xe=We;b[0]===0&&b[1]===0||(Xe=g.translatePosMatrix(We,Se,b,C));const rt=P?Ie.textCollisionBox:Ie.iconCollisionBox,Ht=Ie.collisionCircleArray;if(Ht.length>0){const Ge=o.create(),St=Xe;o.mul(Ge,Ie.placementInvProjMatrix,N.glCoordMatrix),o.mul(Ge,Ge,Ie.placementViewportMatrix),X.push({circleArray:Ht,circleOffset:ie,transform:St,invTransform:Ge,projection:Ie.getProjection()}),te+=Ht.length/4,ie=te}rt&&(g.terrain&&g.terrain.setupElevationDraw(Se,$),$.draw(k,R.LINES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,Rg(Xe,N,Se,Ie.getProjection()),f.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,N.zoom,null,[rt.collisionVertexBuffer,rt.collisionVertexBufferExt]))}if(!P||!X.length)return;const se=g.useProgram("collisionCircle"),ae=new o.StructArrayLayout2f1f2i16;ae.resize(4*te),ae._trim();let le=0;for(const _e of X)for(let ke=0;ke<_e.circleArray.length/4;ke++){const Se=4*ke,Ie=_e.circleArray[Se+0],We=_e.circleArray[Se+1],Xe=_e.circleArray[Se+2],rt=_e.circleArray[Se+3];ae.emplace(le++,Ie,We,Xe,rt,0),ae.emplace(le++,Ie,We,Xe,rt,1),ae.emplace(le++,Ie,We,Xe,rt,2),ae.emplace(le++,Ie,We,Xe,rt,3)}(!Qa||Qa.length<2*te)&&(Qa=function(_e){const ke=2*_e,Se=new o.StructArrayLayout3ui6;Se.resize(ke),Se._trim();for(let Ie=0;Ie<ke;Ie++){const We=6*Ie;Se.uint16[We+0]=4*Ie+0,Se.uint16[We+1]=4*Ie+1,Se.uint16[We+2]=4*Ie+2,Se.uint16[We+3]=4*Ie+2,Se.uint16[We+4]=4*Ie+3,Se.uint16[We+5]=4*Ie+0}return Se}(te));const Q=k.createIndexBuffer(Qa,!0),ve=k.createVertexBuffer(ae,o.collisionCircleLayout.members,!0);for(const _e of X){const ke={u_matrix:_e.transform,u_inv_matrix:_e.invTransform,u_camera_to_center_distance:(ge=N).getCameraToCenterDistance(_e.projection),u_viewport_size:[ge.width,ge.height]};se.draw(k,R.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,ke,f.id,ve,Q,o.SegmentVector.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,N.zoom)}var ge;ve.destroy(),Q.destroy()}const Hf=o.create();function $g({width:g,height:c,anchor:f,textOffset:_,textScale:b},C){const{horizontalAlign:P,verticalAlign:k}=o.getAnchorAlignment(f),R=-(P-.5)*g,N=-(k-.5)*c,$=o.evaluateVariableOffset(f,_);return new o.pointGeometry((R/b+$[0])*C,(N/b+$[1])*C)}function Nl(g,c,f,_,b,C,P,k,R,N,$){const X=g.text.placedSymbolArray,te=g.text.dynamicLayoutVertexArray,ie=g.icon.dynamicLayoutVertexArray,se={},ae=g.getProjection(),le=Rl(k,ae,C),Q=C.elevation,ve=ae.upVectorScale(k.canonical,C.center.lat,C.worldSize).metersToTile;te.clear();for(let ge=0;ge<X.length;ge++){const _e=X.get(ge),{tileAnchorX:ke,tileAnchorY:Se,numGlyphs:Ie}=_e,We=g.allowVerticalPlacement&&!_e.placedOrientation,Xe=_e.hidden||!_e.crossTileID||We?null:_[_e.crossTileID];if(Xe){let rt=0,Ht=0,Ge=0;if(Q){const _n=Q?Q.getAtTileOffset(k,ke,Se):0,[Vn,dn,rn]=ae.upVector(k.canonical,ke,Se);rt=_n*Vn*ve,Ht=_n*dn*ve,Ge=_n*rn*ve}let[St,dt,zt,tt]=qt(_e.projectedAnchorX+rt,_e.projectedAnchorY+Ht,_e.projectedAnchorZ+Ge,f?le:P);const Ve=Xn(C.getCameraToCenterDistance(ae),tt);let ot=b.evaluateSizeForFeature(g.textSizeData,N,_e)*Ve/o.ONE_EM;f&&(ot*=g.tilePixelRatio/R);const Dt=$g(Xe,ot);f?({x:St,y:dt,z:zt}=ae.projectTilePoint(ke+Dt.x,Se+Dt.y,k.canonical),[St,dt,zt]=qt(St+rt,dt+Ht,zt+Ge,P)):(c&&Dt._rotate(-C.angle),St+=Dt.x,dt+=Dt.y,zt=0);const Bt=g.allowVerticalPlacement&&_e.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let _n=0;_n<Ie;_n++)o.addDynamicAttributes(te,St,dt,zt,Bt);$&&_e.associatedIconIndex>=0&&(se[_e.associatedIconIndex]={x:St,y:dt,z:zt,angle:Bt})}else Ir(Ie,te)}if($){ie.clear();const ge=g.icon.placedSymbolArray;for(let _e=0;_e<ge.length;_e++){const ke=ge.get(_e),{numGlyphs:Se}=ke,Ie=se[_e];if(ke.hidden||!Ie)Ir(Se,ie);else{const{x:We,y:Xe,z:rt,angle:Ht}=Ie;for(let Ge=0;Ge<Se;Ge++)o.addDynamicAttributes(ie,We,Xe,rt,Ht)}}g.icon.dynamicLayoutVertexBuffer.updateData(ie)}g.text.dynamicLayoutVertexBuffer.updateData(te)}function E0(g,c,f){return f.iconsInText&&c?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Ng(g,c,f,_,b,C,P,k,R,N,$,X){const te=g.context,ie=te.gl,se=g.transform,ae=k==="map",le=R==="map",Q=ae&&f.layout.get("symbol-placement")!=="point",ve=ae&&!le&&!Q,ge=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let _e=!1;const ke=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),Se=[o.mercatorXfromLng(se.center.lng),o.mercatorYfromLat(se.center.lat)],Ie=f.layout.get("text-variable-anchor"),We=se.projection.name==="globe",Xe=[],rt=[0,-1,0];let Ht=rt;!We&&!se.mercatorFromTransition||ae||(Ht=function(Ge){const St=Ge._camera.getWorldToCamera(Ge.worldSize,1),dt=o.multiply([],St,Ge.globeMatrix);o.invert(dt,dt);const zt=[0,0,0],tt=[0,1,0,0];return o.transformMat4$1(tt,tt,dt),zt[0]=tt[0],zt[1]=tt[1],zt[2]=tt[2],o.normalize(zt,zt),zt}(se));for(const Ge of _){const St=c.getTile(Ge),dt=St.getBucket(f);if(!dt||dt.projection.name==="mercator"&&We)continue;const zt=b?dt.text:dt.icon;if(!zt||dt.fullyClipped||!zt.segments.get().length)continue;const tt=zt.programConfigurations.get(f.id),Ve=b||dt.sdfIcons,ot=b?dt.textSizeData:dt.iconSizeData,Dt=le||se.pitch!==0,Bt=o.evaluateSizeForZoom(ot,se.zoom);let _n,Vn,dn,rn,xn=[0,0],Jn=null;if(b){if(Vn=St.glyphAtlasTexture,dn=ie.LINEAR,_n=St.glyphAtlasTexture.size,dt.iconsInText){xn=St.imageAtlasTexture.size,Jn=St.imageAtlasTexture;const Wo=ot.kind==="composite"||ot.kind==="camera";rn=Dt||g.options.rotating||g.options.zooming||Wo?ie.LINEAR:ie.NEAREST}}else{const Wo=f.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Vn=St.imageAtlasTexture,dn=Ve||g.options.rotating||g.options.zooming||Wo||Dt?ie.LINEAR:ie.NEAREST,_n=St.imageAtlasTexture.size}const Mn=dt.projection.name==="globe",Tr=Mn?Ht:rt,Sr=Mn?o.globeToMercatorTransition(se.zoom):0,jr=Rl(Ge,dt.getProjection(),se),Nr=se.calculatePixelsToTileUnitsMatrix(St),Ei=Ts(jr,St.tileID.canonical,le,ae,se,dt.getProjection(),Nr),Ao=g.terrain&&le&&Q?o.invert(o.create(),Ei):Hf,ps=Cs(jr,St.tileID.canonical,le,ae,se,dt.getProjection(),Nr),qs=Ie&&dt.hasTextData(),Kr=f.layout.get("icon-text-fit")!=="none"&&qs&&dt.hasIconData();if(Q){const Wo=se.elevation,rs=Wo?Wo.getAtTileOffsetFunc(Ge,se.center.lat,se.worldSize,dt.getProjection()):null,Zs=zl(jr,St.tileID.canonical,le,ae,se,dt.getProjection(),Nr);es(dt,jr,g,b,Zs,ps,le,N,rs,Ge)}const Ur=Q||b&&Ie||Kr,vr=g.translatePosMatrix(jr,St,C,P),di=Ur?Hf:Ei,co=g.translatePosMatrix(ps,St,C,P,!0),Zr=dt.getProjection().createInversionMatrix(se,Ge.canonical),uo=[];g.terrainRenderModeElevated()&&le&&uo.push("PITCH_WITH_MAP_TERRAIN"),Mn&&uo.push("PROJECTION_GLOBE_VIEW"),Ur&&uo.push("PROJECTED_POS_ON_VIEWPORT");const ho=Ve&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let va;va=Ve?dt.iconsInText?jf(ot.kind,Bt,ve,le,g,vr,di,co,_n,xn,Ge,Sr,Se,Zr,Tr,dt.getProjection()):Bg(ot.kind,Bt,ve,le,g,vr,di,co,b,_n,!0,Ge,Sr,Se,Zr,Tr,dt.getProjection()):nu(ot.kind,Bt,ve,le,g,vr,di,co,b,_n,Ge,Sr,Se,Zr,Tr,dt.getProjection());const Kl={program:g.useProgram(E0(Ve,b,dt),tt,uo),buffers:zt,uniformValues:va,atlasTexture:Vn,atlasTextureIcon:Jn,atlasInterpolation:dn,atlasInterpolationIcon:rn,isSDF:Ve,hasHalo:ho,tile:St,labelPlaneMatrixInv:Ao};if(ge&&dt.canOverlap){_e=!0;const Wo=zt.segments.get();for(const rs of Wo)Xe.push({segments:new o.SegmentVector([rs]),sortKey:rs.sortKey,state:Kl})}else Xe.push({segments:zt.segments,sortKey:0,state:Kl})}_e&&Xe.sort((Ge,St)=>Ge.sortKey-St.sortKey);for(const Ge of Xe){const St=Ge.state;if(g.terrain&&g.terrain.setupElevationDraw(St.tile,St.program,{useDepthForOcclusion:!We,labelPlaneMatrixInv:St.labelPlaneMatrixInv}),te.activeTexture.set(ie.TEXTURE0),St.atlasTexture.bind(St.atlasInterpolation,ie.CLAMP_TO_EDGE),St.atlasTextureIcon&&(te.activeTexture.set(ie.TEXTURE1),St.atlasTextureIcon&&St.atlasTextureIcon.bind(St.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),St.isSDF){const dt=St.uniformValues;St.hasHalo&&(dt.u_is_halo=1,Ug(St.buffers,Ge.segments,f,g,St.program,ke,$,X,dt)),dt.u_is_halo=0}Ug(St.buffers,Ge.segments,f,g,St.program,ke,$,X,St.uniformValues)}}function Ug(g,c,f,_,b,C,P,k,R){const N=_.context,$=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.globeExtVertexBuffer];b.draw(N,N.gl.TRIANGLES,C,P,k,o.CullFaceMode.disabled,R,f.id,g.layoutVertexBuffer,g.indexBuffer,c,f.paint,_.transform.zoom,g.programConfigurations.get(f.id),$)}function Vg(g,c,f,_,b,C,P){const k=g.context.gl,R=f.paint.get("fill-pattern"),N=R&&R.constantOr(1);let $,X,te,ie,se;P?(X=N&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$=k.LINES):(X=N?"fillPattern":"fill",$=k.TRIANGLES);for(const ae of _){const le=c.getTile(ae);if(N&&!le.patternsLoaded())continue;const Q=le.getBucket(f);if(!Q)continue;g.prepareDrawTile();const ve=Q.programConfigurations.get(f.id),ge=g.useProgram(X,ve);N&&(g.context.activeTexture.set(k.TEXTURE0),le.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ve.updatePaintBuffers());const _e=R.constantOr(null);if(_e&&le.imageAtlas){const Se=le.imageAtlas.patternPositions[_e.toString()];Se&&ve.setConstantPatternPositions(Se)}const ke=g.translatePosMatrix(ae.projMatrix,le,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(P){ie=Q.indexBuffer2,se=Q.segments2;const Se=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];te=X==="fillOutlinePattern"&&N?zg(ke,g,le,Se):Ig(ke,Se)}else ie=Q.indexBuffer,se=Q.segments,te=N?Vd(ke,g,le):Ud(ke);g.prepareDrawProgram(g.context,ge,ae.toUnwrapped()),ge.draw(g.context,$,b,g.stencilModeForClipping(ae),C,o.CullFaceMode.disabled,te,f.id,Q.layoutVertexBuffer,ie,se,f.paint,g.transform.zoom,ve)}}function Gf(g,c,f,_,b,C,P){const k=g.context,R=k.gl,N=g.transform,$=f.paint.get("fill-extrusion-pattern"),X=$.constantOr(1),te=f.paint.get("fill-extrusion-opacity"),ie=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],se=f.layout.get("fill-extrusion-edge-radius"),ae=N.projection.name==="globe"?o.fillExtrusionHeightLift():0,le=N.projection.name==="globe",Q=le?o.globeToMercatorTransition(N.zoom):0,ve=[o.mercatorXfromLng(N.center.lng),o.mercatorYfromLat(N.center.lat)],ge=[];le&&ge.push("PROJECTION_GLOBE_VIEW"),ie[0]>0&&ge.push("FAUX_AO");for(const _e of _){const ke=c.getTile(_e),Se=ke.getBucket(f);if(!Se||Se.projection.name!==N.projection.name)continue;const Ie=Se.programConfigurations.get(f.id),We=g.useProgram(X?"fillExtrusionPattern":"fillExtrusion",Ie,ge);if(g.terrain){const zt=g.terrain;if(g.style.terrainSetForDrapingOnly())zt.setupElevationDraw(ke,We,{useMeterToDem:!0});else{if(!Se.enableTerrain)continue;if(zt.setupElevationDraw(ke,We,{useMeterToDem:!0}),M0(k,c,_e,Se,f,zt),!Se.centroidVertexBuffer){const tt=We.attributes.a_centroid_pos;tt!==void 0&&R.vertexAttrib2f(tt,0,0)}}}X&&(g.context.activeTexture.set(R.TEXTURE0),ke.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Ie.updatePaintBuffers());const Xe=$.constantOr(null);if(Xe&&ke.imageAtlas){const zt=ke.imageAtlas.patternPositions[Xe.toString()];zt&&Ie.setConstantPatternPositions(zt)}const rt=g.translatePosMatrix(_e.projMatrix,ke,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Ht=N.projection.createInversionMatrix(N,_e.canonical),Ge=f.paint.get("fill-extrusion-vertical-gradient"),St=X?Ff(rt,g,Ge,te,ie,se,_e,ke,ae,Q,ve,Ht):Nd(rt,g,Ge,te,ie,se,_e,ae,Q,ve,Ht);g.prepareDrawProgram(k,We,_e.toUnwrapped());const dt=[];g.terrain&&dt.push(Se.centroidVertexBuffer),le&&dt.push(Se.layoutVertexExtBuffer),We.draw(k,k.gl.TRIANGLES,b,C,P,o.CullFaceMode.backCCW,St,f.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,f.paint,g.transform.zoom,Ie,dt)}}function M0(g,c,f,_,b,C){const P=[Q=>{let ve=Q.canonical.x-1,ge=Q.wrap;return ve<0&&(ve=(1<<Q.canonical.z)-1,ge--),new o.OverscaledTileID(Q.overscaledZ,ge,Q.canonical.z,ve,Q.canonical.y)},Q=>{let ve=Q.canonical.x+1,ge=Q.wrap;return ve===1<<Q.canonical.z&&(ve=0,ge++),new o.OverscaledTileID(Q.overscaledZ,ge,Q.canonical.z,ve,Q.canonical.y)},Q=>new o.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,(Q.canonical.y===0?1<<Q.canonical.z:Q.canonical.y)-1),Q=>new o.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y===(1<<Q.canonical.z)-1?0:Q.canonical.y+1)],k=Q=>{const ve=c.getSource().minzoom,ge=ke=>{const Se=c.getTileByID(ke);if(Se&&Se.hasData())return Se.getBucket(b)},_e=[0,-1,1];for(const ke of _e){if(Q.overscaledZ+ke<ve)continue;const Se=ge(Q.calculateScaledKey(Q.overscaledZ+ke));if(Se)return Se}},R=[0,0,0],N=(Q,ve)=>(R[0]=Math.min(Q.min.y,ve.min.y),R[1]=Math.max(Q.max.y,ve.max.y),R[2]=o.EXTENT-ve.min.x>Q.max.x?ve.min.x-o.EXTENT:Q.max.x,R),$=(Q,ve)=>(R[0]=Math.min(Q.min.x,ve.min.x),R[1]=Math.max(Q.max.x,ve.max.x),R[2]=o.EXTENT-ve.min.y>Q.max.y?ve.min.y-o.EXTENT:Q.max.y,R),X=[(Q,ve)=>N(Q,ve),(Q,ve)=>N(ve,Q),(Q,ve)=>$(Q,ve),(Q,ve)=>$(ve,Q)],te=new o.pointGeometry(0,0);let ie,se,ae;const le=(Q,ve,ge,_e,ke)=>{const Se=[[_e?ge:Q,_e?Q:ge,0],[_e?ge:ve,_e?ve:ge,0]],Ie=ke<0?o.EXTENT+ke:ke,We=[_e?Ie:(Q+ve)/2,_e?(Q+ve)/2:Ie,0];return ge===0&&ke<0||ge!==0&&ke>0?C.getForTilePoints(ae,[We],!0,se):Se.push(We),C.getForTilePoints(f,Se,!0,ie),Math.max(Se[0][2],Se[1][2],We[2])/C.exaggeration()};for(let Q=0;Q<4;Q++){const ve=(Q<2?1:5)-Q,ge=_.borders[Q];if(ge.length===0)continue;const _e=ae=P[Q](f),ke=k(_e);if(!(ke&&ke instanceof o.FillExtrusionBucket&&ke.enableTerrain)||_.borderDoneWithNeighborZ[Q]===ke.canonical.z&&ke.borderDoneWithNeighborZ[ve]===_.canonical.z||(se=C.findDEMTileFor(_e),!se||!se.dem))continue;if(!ie){const Xe=C.findDEMTileFor(f);if(!Xe||!Xe.dem)return;ie=Xe}const Se=ke.borders[ve];let Ie=0;const We=ke.borderDoneWithNeighborZ[ve]!==_.canonical.z;if(_.canonical.z===ke.canonical.z){for(let Xe=0;Xe<ge.length;Xe++){const rt=_.featuresOnBorder[ge[Xe]],Ht=rt.borders[Q];let Ge;for(;Ie<Se.length&&(Ge=ke.featuresOnBorder[Se[Ie]],!(Ge.borders[ve][1]>Ht[0]+3));)We&&ke.encodeCentroid(void 0,Ge,!1),Ie++;if(Ge&&Ie<Se.length){const St=Ie;let dt=0;for(;!(Ge.borders[ve][0]>Ht[1]-3)&&(dt++,++Ie!==Se.length);)Ge=ke.featuresOnBorder[Se[Ie]];if(Ge=ke.featuresOnBorder[Se[St]],rt.intersectsCount()>1||Ge.intersectsCount()>1||dt!==1){dt!==1&&(Ie=St),_.encodeCentroid(void 0,rt,!1),We&&ke.encodeCentroid(void 0,Ge,!1);continue}const zt=X[Q](rt,Ge),tt=Q%2?o.EXTENT-1:0;te.x=le(zt[0],Math.min(o.EXTENT-1,zt[1]),tt,Q<2,zt[2]),te.y=0,_.encodeCentroid(te,rt,!1),We&&ke.encodeCentroid(te,Ge,!1)}else _.encodeCentroid(void 0,rt,!1)}_.borderDoneWithNeighborZ[Q]=ke.canonical.z,_.needsCentroidUpdate=!0,We&&(ke.borderDoneWithNeighborZ[ve]=_.canonical.z,ke.needsCentroidUpdate=!0)}else{for(const Xe of ge)_.encodeCentroid(void 0,_.featuresOnBorder[Xe],!1);if(We){for(const Xe of Se)ke.encodeCentroid(void 0,ke.featuresOnBorder[Xe],!1);ke.borderDoneWithNeighborZ[ve]=_.canonical.z,ke.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[Q]=ke.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(g)}const qf=new o.Color(1,0,0,1),Zf=new o.Color(0,1,0,1),jg=new o.Color(0,0,1,1),Wg=new o.Color(1,0,1,1),Hg=new o.Color(0,1,1,1);function Yf(g,c,f){const _=g.context,b=g.transform,C=_.gl,P=b.projection.name==="globe",k=P?["PROJECTION_GLOBE_VIEW"]:null;let R=f.projMatrix;if(P&&o.globeToMercatorTransition(b.zoom)>0){const rt=o.transitionTileAABBinECEF(f.canonical,b),Ht=o.globeDenormalizeECEF(rt);R=o.multiply(new Float32Array(16),b.globeMatrix,Ht),o.multiply(R,b.projMatrix,R)}const N=g.useProgram("debug",null,k),$=c.getTileByID(f.key);g.terrain&&g.terrain.setupElevationDraw($,N);const X=o.DepthMode.disabled,te=o.StencilMode.disabled,ie=g.colorModeForRenderPass(),se="$debug";_.activeTexture.set(C.TEXTURE0),g.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),P?$._makeGlobeTileDebugBuffers(g.context,b):$._makeDebugTileBoundsBuffers(g.context,b.projection);const ae=$._tileDebugBuffer||g.debugBuffer,le=$._tileDebugIndexBuffer||g.debugIndexBuffer,Q=$._tileDebugSegments||g.debugSegments;N.draw(_,C.LINE_STRIP,X,te,ie,o.CullFaceMode.disabled,tu(R,o.Color.red),se,ae,le,Q,null,null,null,[$._globeTileDebugBorderBuffer]);const ve=$.latestRawTileData,ge=Math.floor((ve&&ve.byteLength||0)/1024),_e=c.getTile(f).tileSize,ke=512/Math.min(_e,512)*(f.overscaledZ/b.zoom)*.5;let Se=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Se+=` => ${f.overscaledZ}`),Se+=` ${ge}kb`,function(rt,Ht){rt.initDebugOverlayCanvas();const Ge=rt.debugOverlayCanvas,St=rt.context.gl,dt=rt.debugOverlayCanvas.getContext("2d");dt.clearRect(0,0,Ge.width,Ge.height),dt.shadowColor="white",dt.shadowBlur=2,dt.lineWidth=1.5,dt.strokeStyle="white",dt.textBaseline="top",dt.font="bold 36px Open Sans, sans-serif",dt.fillText(Ht,5,5),dt.strokeText(Ht,5,5),rt.debugOverlayTexture.update(Ge),rt.debugOverlayTexture.bind(St.LINEAR,St.CLAMP_TO_EDGE)}(g,Se);const Ie=$._tileDebugTextBuffer||g.debugBuffer,We=$._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Xe=$._tileDebugTextSegments||g.debugSegments;N.draw(_,C.TRIANGLES,X,te,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,tu(R,o.Color.transparent,ke),se,Ie,We,Xe,null,null,null,[$._globeTileDebugTextBuffer])}function ga(g,c,f,_){ru(g,0,c+f/2,g.transform.width,f,_)}function Ul(g,c,f,_){ru(g,c-f/2,0,f,g.transform.height,_)}function ru(g,c,f,_,b,C){const P=g.context,k=P.gl;k.enable(k.SCISSOR_TEST),k.scissor(c*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio),P.clear({color:C}),k.disable(k.SCISSOR_TEST)}const Vl=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:jl}=Vl;function Hs(g,c,f,_){g.emplaceBack(c,f,_)}class Hd{constructor(c){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Hs(this.vertexArray,-1,-1,1),Hs(this.vertexArray,1,-1,1),Hs(this.vertexArray,-1,1,1),Hs(this.vertexArray,1,1,1),Hs(this.vertexArray,-1,-1,-1),Hs(this.vertexArray,1,-1,-1),Hs(this.vertexArray,-1,1,-1),Hs(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,jl),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function lr(g,c,f,_,b,C){const P=g.gl,k=c.paint.get("sky-atmosphere-color"),R=c.paint.get("sky-atmosphere-halo-color"),N=c.paint.get("sky-atmosphere-sun-intensity"),$=((X,te,ie,se,ae)=>({u_matrix_3f:X,u_sun_direction:te,u_sun_intensity:ie,u_color_tint_r:[se.r,se.g,se.b,se.a],u_color_tint_m:[ae.r,ae.g,ae.b,ae.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),_),b,N,k,R);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+C,c.skyboxTexture,0),f.draw(g,P.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,$,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const Gd=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class P0{constructor(c){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const _=new o.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(f,Gd.members),this.indexBuffer=c.createIndexBuffer(_),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Xf={symbol:function(g,c,f,_,b){if(g.renderPass!=="translucent")return;const C=o.StencilMode.disabled,P=g.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(k,R,N,$,X,te,ie){const se=R.transform,ae=X==="map",le=te==="map";for(const Q of k){const ve=$.getTile(Q),ge=ve.getBucket(N);if(!ge||!ge.text||!ge.text.segments.get().length)continue;const _e=o.evaluateSizeForZoom(ge.textSizeData,se.zoom),ke=Rl(Q,ge.getProjection(),se),Se=se.calculatePixelsToTileUnitsMatrix(ve),Ie=Ts(ke,ve.tileID.canonical,le,ae,se,ge.getProjection(),Se),We=N.layout.get("icon-text-fit")!=="none"&&ge.hasIconData();if(_e){const Xe=Math.pow(2,se.zoom-ve.tileID.overscaledZ);Nl(ge,ae,le,ie,o.symbolSize,se,Ie,Q,Xe,_e,We)}}}(_,g,f,c,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&Ng(g,c,f,_,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),C,P),f.paint.get("text-opacity").constantOr(1)!==0&&Ng(g,c,f,_,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),C,P),c.map.showCollisionBoxes&&(Fg(g,c,f,_,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Fg(g,c,f,_,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(g,c,f,_){if(g.renderPass!=="translucent")return;const b=f.paint.get("circle-opacity"),C=f.paint.get("circle-stroke-width"),P=f.paint.get("circle-stroke-opacity"),k=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)===0&&(C.constantOr(1)===0||P.constantOr(1)===0))return;const R=g.context,N=R.gl,$=g.transform,X=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),te=o.StencilMode.disabled,ie=g.colorModeForRenderPass(),se=$.projection.name==="globe",ae=[o.mercatorXfromLng($.center.lng),o.mercatorYfromLat($.center.lat)],le=[];for(let ve=0;ve<_.length;ve++){const ge=_[ve],_e=c.getTile(ge),ke=_e.getBucket(f);if(!ke||ke.projection.name!==$.projection.name)continue;const Se=ke.programConfigurations.get(f.id),Ie=eu(f);se&&Ie.push("PROJECTION_GLOBE_VIEW");const We=g.useProgram("circle",Se,Ie),Xe=ke.layoutVertexBuffer,rt=ke.globeExtVertexBuffer,Ht=ke.indexBuffer,Ge=$.projection.createInversionMatrix($,ge.canonical),St={programConfiguration:Se,program:We,layoutVertexBuffer:Xe,globeExtVertexBuffer:rt,indexBuffer:Ht,uniformValues:Qc(g,ge,_e,Ge,ae,f),tile:_e};if(k){const dt=ke.segments.get();for(const zt of dt)le.push({segments:new o.SegmentVector([zt]),sortKey:zt.sortKey,state:St})}else le.push({segments:ke.segments,sortKey:0,state:St})}k&&le.sort((ve,ge)=>ve.sortKey-ge.sortKey);const Q={useDepthForOcclusion:!se};for(const ve of le){const{programConfiguration:ge,program:_e,layoutVertexBuffer:ke,globeExtVertexBuffer:Se,indexBuffer:Ie,uniformValues:We,tile:Xe}=ve.state,rt=ve.segments;g.terrain&&g.terrain.setupElevationDraw(Xe,_e,Q),g.prepareDrawProgram(R,_e,Xe.tileID.toUnwrapped()),_e.draw(R,N.TRIANGLES,X,te,ie,o.CullFaceMode.disabled,We,f.id,ke,Ie,rt,f.paint,$.zoom,ge,[Se])}},heatmap:function(g,c,f,_){if(f.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const b=g.context,C=b.gl,P=o.StencilMode.disabled,k=new o.ColorMode([C.ONE,C.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ie,se,ae,le){const Q=ie.gl,ve=se.width*le,ge=se.height*le;ie.activeTexture.set(Q.TEXTURE1),ie.viewport.set([0,0,ve,ge]);let _e=ae.heatmapFbo;if(!_e||_e&&(_e.width!==ve||_e.height!==ge)){_e&&_e.destroy();const ke=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,ke),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),_e=ae.heatmapFbo=ie.createFramebuffer(ve,ge,!1),function(Se,Ie,We,Xe,rt,Ht){const Ge=Se.gl;Ge.texImage2D(Ge.TEXTURE_2D,0,Se.isWebGL2&&Se.extRenderToTextureHalfFloat?Ge.RGBA16F:Ge.RGBA,rt,Ht,0,Ge.RGBA,Se.extRenderToTextureHalfFloat?Se.isWebGL2?Ge.HALF_FLOAT:Se.extTextureHalfFloat.HALF_FLOAT_OES:Ge.UNSIGNED_BYTE,null),Xe.colorAttachment.set(We)}(ie,0,ke,_e,ve,ge)}else Q.bindTexture(Q.TEXTURE_2D,_e.colorAttachment.get()),ie.bindFramebuffer.set(_e.framebuffer)})(b,g,f,g.transform.projection.name==="globe"?.5:.25),b.clear({color:o.Color.transparent});const R=g.transform,N=R.projection.name==="globe",$=N?["PROJECTION_GLOBE_VIEW"]:null,X=N?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,te=[o.mercatorXfromLng(R.center.lng),o.mercatorYfromLat(R.center.lat)];for(let ie=0;ie<_.length;ie++){const se=_[ie];if(c.hasRenderableParent(se))continue;const ae=c.getTile(se),le=ae.getBucket(f);if(!le||le.projection.name!==R.projection.name)continue;const Q=le.programConfigurations.get(f.id),ve=g.useProgram("heatmap",Q,$),{zoom:ge}=g.transform;g.terrain&&g.terrain.setupElevationDraw(ae,ve),g.prepareDrawProgram(b,ve,se.toUnwrapped());const _e=R.projection.createInversionMatrix(R,se.canonical);ve.draw(b,C.TRIANGLES,o.DepthMode.disabled,P,k,X,Ss(g,se,ae,_e,te,ge,f.paint.get("heatmap-intensity")),f.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,f.paint,g.transform.zoom,Q,N?[le.globeExtVertexBuffer]:null)}b.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(b,C){const P=b.context,k=P.gl,R=C.heatmapFbo;if(!R)return;P.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,R.colorAttachment.get()),P.activeTexture.set(k.TEXTURE1);let N=C.colorRampTexture;N||(N=C.colorRampTexture=new o.Texture(P,C.colorRamp,k.RGBA)),N.bind(k.LINEAR,k.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(P,k.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,b.colorModeForRenderPass(),o.CullFaceMode.disabled,(($,X,te,ie)=>({u_image:0,u_color_ramp:1,u_opacity:X.paint.get("heatmap-opacity")}))(0,C),C.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,C.paint,b.transform.zoom)}(g,f))},line:function(g,c,f,_){if(g.renderPass!=="translucent")return;const b=f.paint.get("line-opacity"),C=f.paint.get("line-width");if(b.constantOr(1)===0||C.constantOr(1)===0)return;const P=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),k=g.colorModeForRenderPass(),R=g.terrain&&g.terrain.renderingToTexture?1:o.exported.devicePixelRatio,N=f.paint.get("line-dasharray"),$=N.constantOr(1),X=f.layout.get("line-cap"),te=f.paint.get("line-pattern"),ie=te.constantOr(1),se=f.paint.get("line-gradient"),ae=ie?"linePattern":"line",le=g.context,Q=le.gl,ve=(_e=>{const ke=[];Wd(_e)&&ke.push("RENDER_LINE_DASH"),_e.paint.get("line-gradient")&&ke.push("RENDER_LINE_GRADIENT");const Se=_e.paint.get("line-trim-offset");Se[0]===0&&Se[1]===0||ke.push("RENDER_LINE_TRIM_OFFSET");const Ie=_e.paint.get("line-pattern").constantOr(1),We=_e.paint.get("line-opacity").constantOr(1)!==1;return!Ie&&We&&ke.push("RENDER_LINE_ALPHA_DISCARD"),ke})(f);let ge=ve.includes("RENDER_LINE_ALPHA_DISCARD");g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(ge=!1);for(const _e of _){const ke=c.getTile(_e);if(ie&&!ke.patternsLoaded())continue;const Se=ke.getBucket(f);if(!Se)continue;g.prepareDrawTile();const Ie=Se.programConfigurations.get(f.id),We=g.useProgram(ae,Ie,ve),Xe=te.constantOr(null);if(Xe&&ke.imageAtlas){const Ve=ke.imageAtlas.patternPositions[Xe.toString()];Ve&&Ie.setConstantPatternPositions(Ve)}const rt=N.constantOr(null),Ht=X.constantOr(null);if(!ie&&rt&&Ht&&ke.lineAtlas){const Ve=ke.lineAtlas.getDash(rt,Ht);Ve&&Ie.setConstantPatternPositions(Ve)}let[Ge,St]=f.paint.get("line-trim-offset");(Ht==="round"||Ht==="square")&&Ge!==St&&(Ge===0&&(Ge-=1),St===1&&(St+=1));const dt=g.terrain?_e.projMatrix:null,zt=ie?Og(g,ke,f,dt,R):Nf(g,ke,f,dt,Se.lineClipsArray.length,R,[Ge,St]);if(se){const Ve=Se.gradients[f.id];let ot=Ve.texture;if(f.gradientVersion!==Ve.version){let Dt=256;if(f.stepInterpolant){const Bt=c.getSource().maxzoom,_n=_e.canonical.z===Bt?Math.ceil(1<<g.transform.maxZoom-_e.canonical.z):1;Dt=o.clamp(o.nextPowerOfTwo(Se.maxLineLength/o.EXTENT*1024*_n),256,le.maxTextureSize)}Ve.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:Dt,image:Ve.gradient||void 0,clips:Se.lineClipsArray}),Ve.texture?Ve.texture.update(Ve.gradient):Ve.texture=new o.Texture(le,Ve.gradient,Q.RGBA),Ve.version=f.gradientVersion,ot=Ve.texture}le.activeTexture.set(Q.TEXTURE1),ot.bind(f.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}$&&(le.activeTexture.set(Q.TEXTURE0),ke.lineAtlasTexture.bind(Q.LINEAR,Q.REPEAT),Ie.updatePaintBuffers()),ie&&(le.activeTexture.set(Q.TEXTURE0),ke.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Ie.updatePaintBuffers()),g.prepareDrawProgram(le,We,_e.toUnwrapped());const tt=Ve=>{We.draw(le,Q.TRIANGLES,P,Ve,k,o.CullFaceMode.disabled,zt,f.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,f.paint,g.transform.zoom,Ie,[Se.layoutVertexBuffer2])};if(ge){const Ve=g.stencilModeForClipping(_e).ref;Ve===0&&g.terrain&&le.clear({stencil:0});const ot={func:Q.EQUAL,mask:255};zt.u_alpha_discard_threshold=.8,tt(new o.StencilMode(ot,Ve,255,Q.KEEP,Q.KEEP,Q.INVERT)),zt.u_alpha_discard_threshold=0,tt(new o.StencilMode(ot,Ve,255,Q.KEEP,Q.KEEP,Q.KEEP))}else tt(g.stencilModeForClipping(_e))}ge&&(g.resetStencilClippingMasks(),g.terrain&&le.clear({stencil:0}))},fill:function(g,c,f,_){const b=f.paint.get("fill-color"),C=f.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const P=g.colorModeForRenderPass(),k=f.paint.get("fill-pattern"),R=g.opaquePassEnabledForLayer()&&!k.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===R){const N=g.depthModeForSublayer(1,g.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);Vg(g,c,f,_,N,P,!1)}if(g.renderPass==="translucent"&&f.paint.get("fill-antialias")){const N=g.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);Vg(g,c,f,_,N,P,!0)}},"fill-extrusion":function(g,c,f,_){const b=f.paint.get("fill-extrusion-opacity");if(b!==0&&g.renderPass==="translucent"){const C=new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Gf(g,c,f,_,C,o.StencilMode.disabled,o.ColorMode.disabled),Gf(g,c,f,_,C,g.stencilModeFor3D(),g.colorModeForRenderPass()),g.resetStencilClippingMasks();else{const P=g.colorModeForRenderPass();Gf(g,c,f,_,C,o.StencilMode.disabled,P)}}},hillshade:function(g,c,f,_){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const b=g.context,C=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),P=g.colorModeForRenderPass(),k=g.terrain&&g.terrain.renderingToTexture,[R,N]=g.renderPass!=="translucent"||k?[{},_]:g.stencilConfigForOverlap(_);for(const $ of N){const X=c.getTile($);if(X.needsHillshadePrepare&&g.renderPass==="offscreen")Ld(g,X,f,C,o.StencilMode.disabled,P);else if(g.renderPass==="translucent"){const te=k&&g.terrain?g.terrain.stencilModeForRTTOverlap($):R[$.overscaledZ];Xc(g,$,X,f,C,te,P)}}b.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,c,f,_,b,C){if(g.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!_.length)return;const P=g.context,k=P.gl,R=c.getSource(),N=g.useProgram("raster"),$=g.colorModeForRenderPass(),X=g.terrain&&g.terrain.renderingToTexture,[te,ie]=R instanceof we||X?[{},_]:g.stencilConfigForOverlap(_),se=ie[ie.length-1].overscaledZ,ae=!g.options.moving;for(const le of ie){const Q=X?o.DepthMode.disabled:g.depthModeForSublayer(le.overscaledZ-se,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,k.LESS),ve=le.toUnwrapped(),ge=c.getTile(le);if(X&&(!ge||!ge.hasData()))continue;const _e=X?le.projMatrix:g.transform.calculateProjMatrix(ve,ae),ke=g.terrain&&X?g.terrain.stencilModeForRTTOverlap(le):te[le.overscaledZ],Se=C?0:f.paint.get("raster-fade-duration");ge.registerFadeDuration(Se);const Ie=c.findLoadedParent(le,0),We=Jc(ge,Ie,c,g.transform,Se);let Xe,rt;g.terrain&&g.terrain.prepareDrawTile();const Ht=f.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;P.activeTexture.set(k.TEXTURE0),ge.texture.bind(Ht,k.CLAMP_TO_EDGE),P.activeTexture.set(k.TEXTURE1),Ie?(Ie.texture.bind(Ht,k.CLAMP_TO_EDGE),Xe=Math.pow(2,Ie.tileID.overscaledZ-ge.tileID.overscaledZ),rt=[ge.tileID.canonical.x*Xe%1,ge.tileID.canonical.y*Xe%1]):ge.texture.bind(Ht,k.CLAMP_TO_EDGE),ge.texture.useMipmap&&P.extTextureFilterAnisotropic&&g.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax);const Ge=T0(_e,rt||[0,0],Xe||1,We,f,R instanceof we?R.perspectiveTransform:[0,0]);if(g.prepareDrawProgram(P,N,ve),R instanceof we)R.boundsBuffer&&R.boundsSegments&&N.draw(P,k.TRIANGLES,Q,o.StencilMode.disabled,$,o.CullFaceMode.disabled,Ge,f.id,R.boundsBuffer,g.quadTriangleIndexBuffer,R.boundsSegments);else{const{tileBoundsBuffer:St,tileBoundsIndexBuffer:dt,tileBoundsSegments:zt}=g.getTileBoundsBuffers(ge);N.draw(P,k.TRIANGLES,Q,ke,$,o.CullFaceMode.disabled,Ge,f.id,St,dt,zt)}}g.resetStencilClippingMasks()},background:function(g,c,f,_){const b=f.paint.get("background-color"),C=f.paint.get("background-opacity");if(C===0)return;const P=g.context,k=P.gl,R=g.transform,N=R.tileSize,$=f.paint.get("background-pattern");if(g.isPatternMissing($))return;const X=!$&&b.a===1&&C===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==X)return;const te=o.StencilMode.disabled,ie=g.depthModeForSublayer(0,X==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),se=g.colorModeForRenderPass(),ae=g.useProgram($?"backgroundPattern":"background");let le,Q=_;Q||(le=g.getBackgroundTiles(),Q=Object.values(le).map(ve=>ve.tileID)),$&&(P.activeTexture.set(k.TEXTURE0),g.imageManager.bind(g.context));for(const ve of Q){const ge=ve.toUnwrapped(),_e=_?ve.projMatrix:g.transform.calculateProjMatrix(ge);g.prepareDrawTile();const ke=c?c.getTile(ve):le?le[ve.key]:new o.Tile(ve,N,R.zoom,g),Se=$?Wf(_e,C,g,$,{tileID:ve,tileSize:N}):C0(_e,C,b);g.prepareDrawProgram(P,ae,ge);const{tileBoundsBuffer:Ie,tileBoundsIndexBuffer:We,tileBoundsSegments:Xe}=g.getTileBoundsBuffers(ke);ae.draw(P,k.TRIANGLES,ie,te,se,o.CullFaceMode.disabled,Se,f.id,Ie,We,Xe)}},sky:function(g,c,f){const _=g.transform,b=_.projection.name==="mercator"||_.projection.name==="globe"?1:o.smoothstep(7,8,_.zoom),C=f.paint.get("sky-opacity")*b;if(C===0)return;const P=g.context,k=f.paint.get("sky-type"),R=new o.DepthMode(P.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),N=g.frameCounter/1e3%1;k==="atmosphere"?g.renderPass==="offscreen"?f.needsSkyboxCapture(g)&&(function($,X,te,ie){const se=$.context,ae=se.gl;let le=X.skyboxFbo;if(!le){le=X.skyboxFbo=se.createFramebuffer(32,32,!1),X.skyboxGeometry=new Hd(se),X.skyboxTexture=se.gl.createTexture(),ae.bindTexture(ae.TEXTURE_CUBE_MAP,X.skyboxTexture),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MAG_FILTER,ae.LINEAR);for(let _e=0;_e<6;++_e)ae.texImage2D(ae.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,ae.RGBA,32,32,0,ae.RGBA,ae.UNSIGNED_BYTE,null)}se.bindFramebuffer.set(le.framebuffer),se.viewport.set([0,0,32,32]);const Q=X.getCenter($,!0),ve=$.useProgram("skyboxCapture"),ge=new Float64Array(16);o.identity(ge),o.rotateY(ge,ge,.5*-Math.PI),lr(se,X,ve,ge,Q,0),o.identity(ge),o.rotateY(ge,ge,.5*Math.PI),lr(se,X,ve,ge,Q,1),o.identity(ge),o.rotateX(ge,ge,.5*-Math.PI),lr(se,X,ve,ge,Q,2),o.identity(ge),o.rotateX(ge,ge,.5*Math.PI),lr(se,X,ve,ge,Q,3),o.identity(ge),lr(se,X,ve,ge,Q,4),o.identity(ge),o.rotateY(ge,ge,Math.PI),lr(se,X,ve,ge,Q,5),se.viewport.set([0,0,$.width,$.height])}(g,f),f.markSkyboxValid(g)):g.renderPass==="sky"&&function($,X,te,ie,se){const ae=$.context,le=ae.gl,Q=$.transform,ve=$.useProgram("skybox");ae.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_CUBE_MAP,X.skyboxTexture);const ge=((_e,ke,Se,Ie,We)=>({u_matrix:_e,u_sun_direction:ke,u_cubemap:0,u_opacity:Ie,u_temporal_offset:We}))(Q.skyboxMatrix,X.getCenter($,!1),0,ie,se);$.prepareDrawProgram(ae,ve),ve.draw(ae,le.TRIANGLES,te,o.StencilMode.disabled,$.colorModeForRenderPass(),o.CullFaceMode.backCW,ge,"skybox",X.skyboxGeometry.vertexBuffer,X.skyboxGeometry.indexBuffer,X.skyboxGeometry.segment)}(g,f,R,C,N):k==="gradient"&&g.renderPass==="sky"&&function($,X,te,ie,se){const ae=$.context,le=ae.gl,Q=$.transform,ve=$.useProgram("skyboxGradient");X.skyboxGeometry||(X.skyboxGeometry=new Hd(ae)),ae.activeTexture.set(le.TEXTURE0);let ge=X.colorRampTexture;ge||(ge=X.colorRampTexture=new o.Texture(ae,X.colorRamp,le.RGBA)),ge.bind(le.LINEAR,le.CLAMP_TO_EDGE);const _e=((ke,Se,Ie,We,Xe)=>({u_matrix:ke,u_color_ramp:0,u_center_direction:Se,u_radius:o.degToRad(Ie),u_opacity:We,u_temporal_offset:Xe}))(Q.skyboxMatrix,X.getCenter($,!1),X.paint.get("sky-gradient-radius"),ie,se);$.prepareDrawProgram(ae,ve),ve.draw(ae,le.TRIANGLES,te,o.StencilMode.disabled,$.colorModeForRenderPass(),o.CullFaceMode.backCW,_e,"skyboxGradient",X.skyboxGeometry.vertexBuffer,X.skyboxGeometry.indexBuffer,X.skyboxGeometry.segment)}(g,f,R,C,N)},debug:function(g,c,f){for(let _=0;_<f.length;_++)Yf(g,c,f[_])},custom:function(g,c,f,_){const b=g.context,C=f.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&f.isLayerDraped()){if(g.renderPass==="offscreen"){const P=C.prerender;if(P){if(g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const k=g.transform.pointMerc;P.call(C,b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[k.x,k.y],g.transform.pixelsPerMeterRatio)}else P.call(C,b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const k=C.renderToTile;if(k){const R=_[0].canonical,N=new o.MercatorCoordinate(R.x+_[0].wrap*(1<<R.z),R.y,R.z);b.setDepthMode(o.DepthMode.disabled),b.setStencilMode(o.StencilMode.disabled),b.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),k.call(C,b.gl,N),b.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),b.setStencilMode(o.StencilMode.disabled);const P=C.renderingMode==="3d"?new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(b.setDepthMode(P),g.transform.projection.name==="globe"){const k=g.transform.pointMerc;C.render(b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[k.x,k.y],g.transform.pixelsPerMeterRatio)}else C.render(b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState(),b.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class iu{constructor(c,f,_=!1){this.context=new oe(c,_),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Cg,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,f){const _=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Lf(this,c));const b=this._terrain;this.transform.elevation=_?b:null,b.update(c,this.transform,f)}_updateFog(c){const f=c.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,b]=f.getFovAdjustedRange(this.transform._fov);if(_>b)return void(this.transform.fogCullDistSq=null);const C=_+.78*(b-_);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,f){if(this.width=c*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const c=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=c.createVertexBuffer(_,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const b=new o.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(b,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const C=new o.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(o.EXTENT,0,o.EXTENT,0),C.emplaceBack(0,o.EXTENT,0,o.EXTENT),C.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(C,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const P=new o.StructArrayLayout3ui6;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(P);const k=new o.StructArrayLayout1ui2;for(const N of[0,1,3,2,0])k.emplaceBack(N);this.debugIndexBuffer=c.createIndexBuffer(k),this.emptyTexture=new o.Texture(c,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.create();const R=this.context.gl;this.stencilClearMode=new o.StencilMode({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new P0(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,f=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,hr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,f,_){if(!f||this.currentStencilSource===f.id||!c.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const R of _)if(this._tileClippingMaskIDs[R.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=f.id;const b=this.context,C=b.gl;this.nextStencilID+_.length>256&&this.clearStencil(),b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of _){const R=f.getTile(k),N=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:$,tileBoundsIndexBuffer:X,tileBoundsSegments:te}=this.getTileBoundsBuffers(R);P.draw(b,C.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:C.ALWAYS,mask:0},N,255,C.KEEP,C.KEEP,C.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,hr(k.projMatrix),"$clipping",$,X,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},c,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(c){const f=this.context.gl,_=c.sort((P,k)=>k.overscaledZ-P.overscaledZ),b=_[_.length-1].overscaledZ,C=_[0].overscaledZ-b+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const P={};for(let k=0;k<C;k++)P[k+b]=new o.StencilMode({func:f.GEQUAL,mask:255},k+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=C,[P,_]}return[{[b]:o.StencilMode.disabled},_]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([c.CONSTANT_COLOR,c.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(c,f,_){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.DepthMode(_||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,f){this.style=c,this.options=f,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style.order,b=this.style._sourceCaches;for(const N in b){const $=b[N];$.used&&$.prepare(this.context)}const C={},P={},k={};for(const N in b){const $=b[N];C[N]=$.getVisibleCoordinates(),P[N]=C[N].slice().reverse(),k[N]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<_.length;N++)if(this.style._layers[_[N]].is3D()){this.opaquePassCutoff=N;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const N of _){const $=this.style._layers[N],X=c._getLayerSourceCache($);if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const te=X?P[X.id]:void 0;($.type==="custom"||$.isSky()||te&&te.length)&&this.renderLayer(this,X,$,te)}this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon];const R=this.terrain;if(R&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&R.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[_[this.currentLayer]],$=c._getLayerSourceCache(N);if(N.isSky())continue;const X=$?P[$.id]:void 0;this._renderTileClippingMasks(N,$,X),this.renderLayer(this,$,N,X)}if(this.style.fog&&this.transform.projection.supportsFog&&function(N,$){const X=N.context,te=X.gl,ie=N.transform,se=new o.DepthMode(te.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ae=N.useProgram("globeAtmosphere",null,ie.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),le=o.globeToMercatorTransition(ie.zoom),Q=$.properties.get("color").toArray01(),ve=$.properties.get("high-color").toArray01(),ge=$.properties.get("space-color").toArray01PremultipliedAlpha(),_e=o.identity$1([]);o.rotateY$1(_e,_e,-o.degToRad(ie._center.lng)),o.rotateX$1(_e,_e,o.degToRad(ie._center.lat)),o.rotateZ$1(_e,_e,ie.angle),o.rotateX$1(_e,_e,-ie._pitch);const ke=o.fromQuat(new Float32Array(16),_e),Se=o.mapValue($.properties.get("star-intensity"),0,1,0,.25),Ie=5e-4,We=o.mapValue($.properties.get("horizon-blend"),0,1,Ie,.25),Xe=o.globeUseCustomAntiAliasing(N,X,ie)&&We===Ie?ie.worldSize/(2*Math.PI*1.025)-1:ie.globeRadius,rt=N.frameCounter/1e3%1,Ht=o.length(ie.globeCenterInViewSpace),Ge=Math.sqrt(Math.pow(Ht,2)-Math.pow(Xe,2)),St=Math.acos(Ge/Ht),dt=((tt,Ve,ot,Dt,Bt,_n,Vn,dn,rn,xn,Jn,Mn,Tr,Sr)=>({u_frustum_tl:tt,u_frustum_tr:Ve,u_frustum_br:ot,u_frustum_bl:Dt,u_horizon:Bt,u_transition:_n,u_fadeout_range:Vn,u_color:dn,u_high_color:rn,u_space_color:xn,u_star_intensity:Jn,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Mn,u_horizon_angle:Tr,u_rotation_matrix:Sr}))(ie.frustumCorners.TL,ie.frustumCorners.TR,ie.frustumCorners.BR,ie.frustumCorners.BL,ie.frustumCorners.horizon,le,We,Q,ve,ge,Se,rt,St,ke);N.prepareDrawProgram(X,ae);const zt=N.atmosphereBuffer;zt&&ae.draw(X,te.TRIANGLES,se,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,dt,"skybox",zt.vertexBuffer,zt.indexBuffer,zt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const N=this.style._layers[_[this.currentLayer]],$=c._getLayerSourceCache(N);N.isSky()&&this.renderLayer(this,$,N,$?P[$.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const N=this.style._layers[_[this.currentLayer]],$=c._getLayerSourceCache(N);if(N.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(N)){if(N.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const X=$?(N.type==="symbol"?k:P)[$.id]:void 0;this._renderTileClippingMasks(N,$,$?C[$.id]:void 0),this.renderLayer(this,$,N,X),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let N=null;o.values(this.style._layers).forEach($=>{const X=c._getLayerSourceCache($);X&&!$.isHidden(this.transform.zoom)&&(!N||N.getSource().maxzoom<X.getSource().maxzoom)&&(N=X)}),N&&this.options.showTileBoundaries&&Xf.debug(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const $=N.transform.padding;ga(N,N.transform.height-($.top||0),3,qf),ga(N,$.bottom||0,3,Zf),Ul(N,$.left||0,3,jg),Ul(N,N.transform.width-($.right||0),3,Wg);const X=N.transform.centerPoint;(function(te,ie,se,ae){ru(te,ie-1,se-10,2,20,ae),ru(te,ie-10,se-1,20,2,ae)})(N,X.x,N.transform.height-X.y,Hg)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(c,f,_,b){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||b&&b.length)&&(this.id=_.id,this.gpuTimingStart(_),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(_.type)||c.terrain&&_.type==="custom")&&Xf[_.type](c,f,_,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let _=this.gpuTimers[c.id];_||(_=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),_.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,f=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),c.beginQueryEXT(c.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const f={};for(const _ in c){const b=c[_],C=this.context.extTimerQuery,P=C.getQueryObjectEXT(b.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(b.query),f[_]=P}return f}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let _=0;for(const b of c)_+=f.getQueryObjectEXT(b,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(b);return _}translatePosMatrix(c,f,_,b,C){if(!_[0]&&!_[1])return c;const P=C?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(P){const N=Math.sin(P),$=Math.cos(P);_=[_[0]*$-_[1]*N,_[0]*N+_[1]*$]}const k=[C?_[0]:Dn(f,_[0],this.transform.zoom),C?_[1]:Dn(f,_[1],this.transform.zoom),0],R=new Float32Array(16);return o.translate(R,c,k),R}saveTileTexture(c){const f=this._tileTextures[c.size[0]];f?f.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const f=this._tileTextures[c];return f&&f.length>0?f.pop():null}isPatternMissing(c){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&this.terrain.exaggeration()===0,_=this.style&&this.style.fog,b=[];return this.terrainRenderModeElevated()&&b.push("TERRAIN"),this.transform.projection.name==="globe"&&b.push("GLOBE"),f&&b.push("ZERO_EXAGGERATION"),_&&!c&&_.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),c&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(c,f,_){this.cache=this.cache||{};const b=_||[],C=this.currentGlobalDefines().concat(b),P=Bf.cacheKey(kf[c],c,C,f);return this.cache[P]||(this.cache[P]=new Bf(this.context,c,kf[c],f,S0[c],C)),this.cache[P]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,f,_){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const C=b.getOpacity(this.transform.pitch),P=((k,R,N,$,X,te,ie,se,ae,le,Q)=>{const ve=k.transform,ge=R.properties.get("color").toArray01();ge[3]=$;const _e=k.frameCounter/1e3%1;return{u_fog_matrix:N?ve.calculateFogTileMatrix(N):k.identityMat,u_fog_range:R.getFovAdjustedRange(ve._fov),u_fog_color:ge,u_fog_horizon_blend:R.properties.get("horizon-blend"),u_fog_temporal_offset:_e,u_frustum_tl:X,u_frustum_tr:te,u_frustum_br:ie,u_frustum_bl:se,u_globe_pos:ae,u_globe_radius:le,u_viewport:Q,u_globe_transition:o.globeToMercatorTransition(ve.zoom),u_is_globe:+(ve.projection.name==="globe")}})(this,b,_,C,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(c,P)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,f=c.createTexture();return c.bindTexture(c.TEXTURE_2D,f),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,f=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const b of _)f[b.key]=c[b.key]||new o.Tile(b,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class Kf{constructor(c=0,f=0,_=0,b=0){if(isNaN(c)||c<0||isNaN(f)||f<0||isNaN(_)||_<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=f,this.left=_,this.right=b}interpolate(c,f,_){return f.top!=null&&c.top!=null&&(this.top=o.number(c.top,f.top,_)),f.bottom!=null&&c.bottom!=null&&(this.bottom=o.number(c.bottom,f.bottom,_)),f.left!=null&&c.left!=null&&(this.left=o.number(c.left,f.left,_)),f.right!=null&&c.right!=null&&(this.right=o.number(c.right,f.right,_)),this}getCenter(c,f){const _=o.clamp((this.left+c-this.right)/2,0,c),b=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.pointGeometry(_,b)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Kf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gg(g,c){const f=o.getColumn(g,3);o.fromQuat(g,c),o.setColumn(g,3,f)}function qd(g,c){const f=o.identity$1([]);return o.rotateZ$1(f,f,-c),o.rotateX$1(f,f,-g),f}function qg(g,c){const f=[g[0],g[1],0],_=[c[0],c[1],0];if(o.length(f)>=1e-15){const P=o.normalize([],f);o.scale$2(_,P,o.dot(_,P)),c[0]=_[0],c[1]=_[1]}const b=o.cross([],c,g);if(o.len(b)<1e-15)return null;const C=Math.atan2(-b[1],b[0]);return qd(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),C)}class Zd{constructor(c,f){this.position=c,this.orientation=f}get position(){return this._position}set position(c){if(c){const f=c instanceof o.MercatorCoordinate?c:new o.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(c,f){if(this.orientation=null,!this.position)return;const _=this.position,b=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(c)):0,C=o.MercatorCoordinate.fromLngLat(c,b),P=[C.x-_.x,C.y-_.y,C.z-_.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=qg(P,f)}setPitchBearing(c,f){this.orientation=qd(o.degToRad(c),o.degToRad(-f))}}class Wl{constructor(c,f){this._transform=o.identity([]),this.orientation=f,this.position=c}get mercatorPosition(){const c=this.position;return new o.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=o.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var f;c&&o.setColumn(this._transform,3,[(f=c)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.identity$1([]),c&&Gg(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,f){this._orientation=qd(c,f),Gg(this._transform,this._orientation)}forward(){const c=o.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,f){const _=new Float64Array(16);return o.invert(_,this.getWorldToCamera(c,f)),_}getWorldToCameraPosition(c,f,_){const b=this.position;o.scale$2(b,b,-c);const C=new Float64Array(16);return o.fromScaling(C,[_,_,_]),o.translate(C,C,b),C[10]*=f,C}getWorldToCamera(c,f){const _=new Float64Array(16),b=new Float64Array(4),C=this.position;return o.conjugate(b,this._orientation),o.scale$2(C,C,-c),o.fromQuat(_,b),o.translate(_,_,C),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=f,_[9]*=f,_[10]*=f,_[11]*=f,_}getCameraToClipPerspective(c,f,_,b){const C=new Float64Array(16);return o.perspective(C,c,f,_,b),C}getDistanceToElevation(c,f=!1){const _=c===0?0:o.mercatorZfromAltitude(c,f?o.latFromMercatorY(this.position[1]):this.position[1]),b=this.forward();return(_-this.position[2])/b[2]}clone(){return new Wl([...this.position],[...this.orientation])}}function Hl(g,c){const f=el(g.projection,g.zoom,g.width,g.height),_=function(C,P,k,R,N){const $=new o.LngLat(k.lng-180*tl,k.lat),X=new o.LngLat(k.lng+180*tl,k.lat),te=C.project($.lng,$.lat),ie=C.project(X.lng,X.lat),se=-Math.atan2(ie.y-te.y,ie.x-te.x),ae=o.MercatorCoordinate.fromLngLat(k);ae.y=o.clamp(ae.y,-.999975,.999975);const le=ae.toLngLat(),Q=C.project(le.lng,le.lat),ve=o.MercatorCoordinate.fromLngLat(le);ve.x+=tl;const ge=ve.toLngLat(),_e=C.project(ge.lng,ge.lat),ke=su(_e.x-Q.x,_e.y-Q.y,se),Se=o.MercatorCoordinate.fromLngLat(le);Se.y+=tl;const Ie=Se.toLngLat(),We=C.project(Ie.lng,Ie.lat),Xe=su(We.x-Q.x,We.y-Q.y,se),rt=Math.abs(ke.x)/Math.abs(Xe.y),Ht=o.identity([]);o.rotateZ(Ht,Ht,-se*(1-(N?0:R)));const Ge=o.identity([]);return o.scale(Ge,Ge,[1,1-(1-rt)*R,1]),Ge[4]=-Xe.x/Xe.y*R,o.rotateZ(Ge,Ge,se),o.multiply(Ge,Ht,Ge),Ge}(g.projection,0,g.center,f,c),b=Yd(g);return o.scale(_,_,[b,b,1]),_}function Yd(g){const c=g.projection,f=el(g.projection,g.zoom,g.width,g.height),_=ou(c,g.center),b=ou(c,o.LngLat.convert(c.center));return Math.pow(2,_*f+(1-f)*b)}function el(g,c,f,_,b=1/0){const C=g.range;if(!C)return 0;const P=Math.min(b,Math.max(f,_)),k=Math.log(P/1024)/Math.LN2;return o.smoothstep(C[0]+k,C[1]+k,c)}const tl=1/4e4;function ou(g,c){const f=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=new o.LngLat(c.lng-180*tl,f),b=new o.LngLat(c.lng+180*tl,f),C=g.project(_.lng,f),P=g.project(b.lng,f),k=o.MercatorCoordinate.fromLngLat(_),R=o.MercatorCoordinate.fromLngLat(b),N=P.x-C.x,$=P.y-C.y,X=R.x-k.x,te=R.y-k.y,ie=Math.sqrt((X*X+te*te)/(N*N+$*$));return Math.log(ie)/Math.LN2}function su(g,c,f){const _=Math.cos(f),b=Math.sin(f);return{x:g*_-c*b,y:g*b+c*_}}class nn{constructor(c,f,_,b,C,P,k){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=c||0,this._maxZoom=f||22,this._minPitch=_??0,this._maxPitch=b??60,this.setProjection(P),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Kf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Wl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c,f=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(c||_)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const _=!m(f,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=c!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const f=-c*Math.PI/180;var _;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(b,C,P){var k=C[0],R=C[1],N=C[2],$=C[3],X=Math.sin(P),te=Math.cos(P);b[0]=k*te+N*X,b[1]=R*te+$*X,b[2]=k*-X+N*te,b[3]=R*-X+$*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const f=o.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=o.degToRad(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const f=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let b=0,C=0;for(let P=0;P<f.length;P++){const k=new o.pointGeometry(f[P][0]*this.width,_+f[P][1]*(this.height-_)),R=c.pointCoordinate(k);if(!R)continue;const N=1/Math.hypot(R[0]-this._camera.position[0],R[1]-this._camera.position[1]);b+=R[3]*N,C+=N}return C===0?NaN:b/C}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*f,b=this._mercatorZfromZoom(c),C=this._mercatorZfromZoom(this._maxZoom),P=Math.max(b-_,C);this._setZoom(this._zoomFromMercatorZ(P))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let _;_=c.z<this._camera.position[2]?[f.x,f.y,f.z]:[c.x,c.y,c.z];const b=o.length(o.sub([],this._camera.position,_));return o.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let f=!1;if(c.orientation&&!o.exactEquals(c.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(c.orientation)),c.position){const _=[c.position.x,c.position.y,c.position.z];o.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,f=new Zd;return f.position=new o.MercatorCoordinate(c[0],c[1],c[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(c){if(!o.length$1(c))return!1;o.normalize$1(c,c);const f=o.transformQuat([],[0,0,-1],c),_=o.transformQuat([],[0,-1,0],c);if(_[2]<0)return!1;const b=qg(f,_);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(c){const f=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;c[2]=o.clamp(c[2],b/_,b/f),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,f,_){this._unmodified=!1,this._edgeInsets.interpolate(c,f,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const f=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(c){const f=[new o.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.pointGeometry(0,0)),b=this.pointCoordinate(new o.pointGeometry(this.width,0)),C=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new o.pointGeometry(0,this.height)),k=Math.floor(Math.min(_.x,b.x,C.x,P.x)),R=Math.floor(Math.max(_.x,b.x,C.x,P.x)),N=1;for(let $=k-N;$<=R+N;$++)$!==0&&f.push(new o.UnwrappedTileID($,c))}return f}coveringTiles(c){let f=this.coveringZoomLevel(c);const _=f,b=this.elevation&&!c.isTerrainDEM,C=this.projection.name==="mercator";if(c.minzoom!==void 0&&f<c.minzoom)return[];c.maxzoom!==void 0&&f>c.maxzoom&&(f=c.maxzoom);const P=this.locationCoordinate(this.center),k=this.center.lat,R=1<<f,N=[R*P.x,R*P.y,0],$=this.projection.name==="globe",X=!$,te=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,X),ie=$?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),se=R*o.mercatorZfromAltitude(1,this.center.lat),ae=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),le=[R*ie.x,R*ie.y,ae*(X?1:se)],Q=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),ve=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,ge=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_e=c.isTerrainDEM?-ge:this._elevation?this._elevation.getMinElevationBelowMSL():0,ke=this.projection.isReprojectedInTileSpace?Yd(this):1,Se=tt=>{const ot=new o.MercatorCoordinate(tt.x+25e-6,tt.y,tt.z),Dt=new o.MercatorCoordinate(tt.x,tt.y+25e-6,tt.z),Bt=tt.toLngLat(),_n=ot.toLngLat(),Vn=Dt.toLngLat(),dn=this.locationCoordinate(Bt),rn=this.locationCoordinate(_n),xn=this.locationCoordinate(Vn),Jn=Math.hypot(rn.x-dn.x,rn.y-dn.y),Mn=Math.hypot(xn.x-dn.x,xn.y-dn.y);return Math.sqrt(Jn*Mn)*ke/25e-6},Ie=tt=>{const Ve=ge,ot=_e;return{aabb:o.tileAABB(this,R,0,0,0,tt,ot,Ve,this.projection),zoom:0,x:0,y:0,minZ:ot,maxZ:Ve,wrap:tt,fullyVisible:!1}},We=[];let Xe=[];const rt=f,Ht=c.reparseOverscaled?_:f,Ge=tt=>tt*tt,St=Ge((ae-this._centerAltitude)*se),dt=tt=>{if(!this._elevation||!tt.tileID||!C)return;const Ve=this._elevation.getMinMaxForTile(tt.tileID),ot=tt.aabb;Ve?(ot.min[2]=Ve.min,ot.max[2]=Ve.max,ot.center[2]=(ot.min[2]+ot.max[2])/2):(tt.shouldSplit=zt(tt),tt.shouldSplit||(ot.min[2]=ot.max[2]=ot.center[2]=this._centerAltitude))},zt=tt=>{if(tt.zoom<ve)return!0;if(tt.zoom===rt)return!1;if(tt.shouldSplit!=null)return tt.shouldSplit;const Ve=tt.aabb.distanceX(le),ot=tt.aabb.distanceY(le);let Dt=St,Bt=1;if($){Dt=Ge(tt.aabb.distanceZ(le));const dn=Math.pow(2,tt.zoom),rn=o.latFromMercatorY((tt.y+1)/dn),xn=o.latFromMercatorY(tt.y/dn),Jn=Math.min(Math.max(k,rn),xn),Mn=o.circumferenceAtLatitude(Jn)/o.circumferenceAtLatitude(k);if(Bt=Jn===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Mn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&tt.zoom===rt-1&&Mn>=.9)return!0}else if(b&&(Dt=Ge(tt.aabb.distanceZ(le)*se)),this.projection.isReprojectedInTileSpace&&_<=5){const dn=Math.pow(2,tt.zoom),rn=Se(new o.MercatorCoordinate((tt.x+.5)/dn,(tt.y+.5)/dn));Bt=rn>.85?1:rn}const _n=Ve*Ve+ot*ot+Dt,Vn=Ge((1<<rt-tt.zoom)*Q*Bt*((dn,rn)=>{if(rn*Ge(.707)<dn)return 1;const xn=Math.sqrt(rn/dn);return xn/(1.4144271570014144+(Math.pow(1.1,xn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Dt,St),_n));return _n<Vn};if(this.renderWorldCopies)for(let tt=1;tt<=3;tt++)We.push(Ie(-tt)),We.push(Ie(tt));for(We.push(Ie(0));We.length>0;){const tt=We.pop(),Ve=tt.x,ot=tt.y;let Dt=tt.fullyVisible;if(!Dt){const Bt=tt.aabb.intersects(te);if(Bt===0)continue;Dt=Bt===2}if(tt.zoom!==rt&&zt(tt))for(let Bt=0;Bt<4;Bt++){const _n=(Ve<<1)+Bt%2,Vn=(ot<<1)+(Bt>>1),dn={aabb:C?tt.aabb.quadrant(Bt):o.tileAABB(this,R,tt.zoom+1,_n,Vn,tt.wrap,tt.minZ,tt.maxZ,this.projection),zoom:tt.zoom+1,x:_n,y:Vn,wrap:tt.wrap,fullyVisible:Dt,tileID:void 0,shouldSplit:void 0,minZ:tt.minZ,maxZ:tt.maxZ};b&&!$&&(dn.tileID=new o.OverscaledTileID(tt.zoom+1===rt?Ht:tt.zoom+1,tt.wrap,tt.zoom+1,_n,Vn),dt(dn)),We.push(dn)}else{const Bt=tt.zoom===rt?Ht:tt.zoom;if(c.minzoom&&c.minzoom>Bt)continue;const _n=N[0]-(.5+Ve+(tt.wrap<<tt.zoom))*(1<<f-tt.zoom),Vn=N[1]-.5-ot,dn=tt.tileID?tt.tileID:new o.OverscaledTileID(Bt,tt.wrap,tt.zoom,Ve,ot);Xe.push({tileID:dn,distanceSq:_n*_n+Vn*Vn})}}if(this.fogCullDistSq){const tt=this.fogCullDistSq,Ve=this.horizonLineFromTop();Xe=Xe.filter(ot=>{const Dt=[0,0,0,1],Bt=[o.EXTENT,o.EXTENT,0,1],_n=this.calculateFogTileMatrix(ot.tileID.toUnwrapped());o.transformMat4$1(Dt,Dt,_n),o.transformMat4$1(Bt,Bt,_n);const Vn=o.getAABBPointSquareDist(Dt,Bt);if(Vn===0)return!0;let dn=!1;const rn=this._elevation;if(rn&&Vn>tt&&Ve!==0){const xn=this.calculateProjMatrix(ot.tileID.toUnwrapped());let Jn;c.isTerrainDEM||(Jn=rn.getMinMaxForTile(ot.tileID)),Jn||(Jn={min:_e,max:ge});const Mn=o.furthestTileCorner(this.rotation),Tr=[Mn[0]*o.EXTENT,Mn[1]*o.EXTENT,Jn.max];o.transformMat4(Tr,Tr,xn),dn=(1-Tr[1])*this.height*.5<Ve}return Vn<tt||dn})}return Xe.sort((tt,Ve)=>tt.distanceSq-Ve.distanceSq).map(tt=>tt.tileID)}resize(c,f){this.width=c,this.height=f,this.pixelsToGLUnits=[2/c,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const f=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=this.projection.project(c.lng,f);return new o.pointGeometry(_.x*this.worldSize,_.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,f){let _,b;const C=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;_=(f.x-C.x)/k,b=(f.y-C.y)/k}else{const k=this.pointCoordinate(f),R=this.pointCoordinate(C);_=k.x-R.x,b=k.y-R.y}const P=this.locationCoordinate(c);this.setLocation(new o.MercatorCoordinate(P.x-_,P.y-b))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,f){const _=f?o.mercatorZfromAltitude(f,c.lat):void 0,b=this.projection.project(c.lng,c.lat);return new o.MercatorCoordinate(b.x,b.y,_)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,f){const _=f??this._centerAltitude,b=[c.x,c.y,0,1],C=[c.x,c.y,1,1];o.transformMat4$1(b,b,this.pixelMatrixInverse),o.transformMat4$1(C,C,this.pixelMatrixInverse);const P=C[3];o.scale$1(b,b,1/b[3]),o.scale$1(C,C,1/P);const k=b[2],R=C[2];return{p0:b,p1:C,t:k===R?0:(_-k)/(R-k)}}screenPointToMercatorRay(c){const f=[c.x,c.y,0,1],_=[c.x,c.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(_,_,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(_,_,1/_[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,_[2]=o.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(_,_,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],_,f)))}rayIntersectionCoordinate(c){const{p0:f,p1:_,t:b}=c,C=o.mercatorZfromAltitude(f[2],this._center.lat),P=o.mercatorZfromAltitude(_[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],_[0],b)/this.worldSize,o.number(f[1],_[1],b)/this.worldSize,o.number(C,P,b))}pointCoordinate(c,f=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,f)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let f=this.projection.pointCoordinate3D(this,c.x,c.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let _=0,b=this.horizonLineFromTop();if(c.y>b)return this.pointCoordinate(c);const C=.02*b,P=c.clone();for(let k=0;k<10&&b-_>C;k++){P.y=o.number(_,b,.66);const R=this.projection.pointCoordinate3D(this,P.x,P.y);R?(b=P.y,f=R):_=P.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}_coordinatePoint(c,f){const _=f&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,b=[c.x*this.worldSize,c.y*this.worldSize,_+c.toAltitude(),1];return o.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new o.pointGeometry(b[0]/b[3],b[1]/b[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:f}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,C=this.pointLocation3D(new o.pointGeometry(f,c)),P=this.pointLocation3D(new o.pointGeometry(b,c)),k=this.pointLocation3D(new o.pointGeometry(b,_)),R=this.pointLocation3D(new o.pointGeometry(f,_));let N=Math.min(C.lng,P.lng,k.lng,R.lng),$=Math.max(C.lng,P.lng,k.lng,R.lng),X=Math.min(C.lat,P.lat,k.lat,R.lat),te=Math.max(C.lat,P.lat,k.lat,R.lat);const ie=Math.pow(2,-this.zoom)/16*270,se=this.projection.name==="globe"?1:4,ae=(le,Q,ve,ge,_e)=>{const ke=(le+ve)/2,Se=(Q+ge)/2,Ie=new o.pointGeometry(ke,Se),{lng:We,lat:Xe}=this.pointLocation3D(Ie),rt=Math.max(0,N-We,X-Xe,We-$,Xe-te);N=Math.min(N,We),$=Math.max($,We),X=Math.min(X,Xe),te=Math.max(te,Xe),(_e<se||rt>ie)&&(ae(le,Q,ke,Se,_e+1),ae(ke,Se,ve,ge,_e+1))};if(ae(f,c,b,c,1),ae(b,c,b,_,1),ae(b,_,f,_,1),ae(f,_,f,c,1),this.projection.name==="globe"){const[le,Q]=o.polesInViewport(this);le?(te=90,$=180,N=-180):Q&&(X=-90,$=180,N=-180)}return new o.LngLatBounds(new o.LngLat(N,X),new o.LngLat($,te))}_getBoundsRectangular(c,f){const{top:_,left:b}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,k=new o.pointGeometry(b,_),R=new o.pointGeometry(P,_),N=new o.pointGeometry(P,C),$=new o.pointGeometry(b,C);let X=this.pointCoordinate(k,c),te=this.pointCoordinate(R,c);const ie=this.pointCoordinate(N,f),se=this.pointCoordinate($,f),ae=(le,Q)=>(Q.y-le.y)/(Q.x-le.x);return X.y>1&&te.y>=0?X=new o.MercatorCoordinate((1-se.y)/ae(se,X)+se.x,1):X.y<0&&te.y<=1&&(X=new o.MercatorCoordinate(-se.y/ae(se,X)+se.x,0)),te.y>1&&X.y>=0?te=new o.MercatorCoordinate((1-ie.y)/ae(ie,te)+ie.x,1):te.y<0&&X.y<=1&&(te=new o.MercatorCoordinate(-ie.y/ae(ie,te)+ie.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(X)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(se)).extend(this.coordinateLocation(ie))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=c.visibleDemTiles.reduce((_,b)=>{if(b.dem){const C=b.dem.tree;_.min=Math.min(_.min,C.minimums[0]),_.max=Math.max(_.max,C.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*c.exaggeration(),f.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-f*(1-this._horizonShift);return c?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,f){return this.projection.createTileMatrix(this,f,c)}calculateDistanceTileData(c){const f=c.key,_=this._distanceTileDataCache;if(_[f])return _[f];const b=c.canonical,C=1/this.height,P=this.cameraWorldSize,k=P/this.zoomScale(b.z),R=(b.x+Math.pow(2,b.z)*c.wrap)*k,N=b.y*k,$=this.point;$.x*=P/this.worldSize,$.y*=P/this.worldSize;const X=this.angle,te=Math.sin(-X),ie=-Math.cos(-X);return _[f]={bearing:[te,ie],center:[($.x-R)*C,($.y-N)*C],scale:k/o.EXTENT*C},_[f]}calculateFogTileMatrix(c){const f=c.key,_=this._fogTileMatrixCache;if(_[f])return _[f];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return o.multiply(b,this.worldToFogMatrix,b),_[f]=new Float32Array(b),_[f]}calculateProjMatrix(c,f=!1){const _=c.key,b=f?this._alignedProjMatrixCache:this._projMatrixCache;if(b[_])return b[_];const C=this.calculatePosMatrix(c,this.worldSize);return o.multiply(C,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,C),b[_]=new Float32Array(C),b[_]}calculatePixelsToTileUnitsMatrix(c){const f=c.tileID.key,_=this._pixelsToTileUnitsCache;if(_[f])return _[f];const b=function(C,P){const{scale:k}=C.tileTransform,R=k*o.EXTENT/(C.tileSize*Math.pow(2,P.zoom-C.tileID.overscaledZ+C.tileID.canonical.z));return N=new Float32Array(4),te=($=P.inverseAdjustmentMatrix)[1],ie=$[2],se=$[3],le=(X=[R,R])[1],N[0]=$[0]*(ae=X[0]),N[1]=te*ae,N[2]=ie*le,N[3]=se*le,N;var N,$,X,te,ie,se,ae,le}(c,this);return _[f]=b,_[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,f=o.fromScaling([],[c,c,c]);return o.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(f),b=this._camera.forward(),C=o.mercatorZfromAltitude(1,this._center.lat);_[2]/=C,b[2]/=C,o.normalize(b,b);const P=c.raycast(_,b,c.exaggeration());if(P){const k=o.scaleAndAdd([],_,b,P),R=new o.MercatorCoordinate(k[0],k[1],o.mercatorZfromAltitude(k[2],o.latFromMercatorY(k[1]))),N=(R.z+o.length([R.x-_[0],R.y-_[1],R.z-_[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(N),this._centerAltitude=R.toAltitude(),this._center=this.coordinateLocation(R),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const f=this._elevation,_=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(_),C=f.getAtPointOrZero(new o.MercatorCoordinate(...b)),P=this.pixelsPerMeter/this.worldSize*C,k=this._minimumHeightOverTerrain(),R=b[2]-P;if(R<=k)if(R<0||c){const N=this.locationCoordinate(this._center,this._centerAltitude),$=[b[0],b[1],N.z-b[2]],X=o.length($);$[2]-=(k-R)/this._pixelsPerMercatorPixel;const te=o.length($);if(te===0)return;o.scale$2($,$,X/te*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],N.z*this._pixelsPerMercatorPixel-$[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const te=this.center;return te.lat=o.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(te.lng=o.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const f=this._unmodified,{x:_,y:b}=this.point;let C=0,P=_,k=b;const R=this.width/2,N=this.height/2,$=this.worldMinY*this.scale,X=this.worldMaxY*this.scale;if(b-N<$&&(k=$+N),b+N>X&&(k=X-N),X-$<this.height&&(C=Math.max(C,this.height/(X-$)),k=(X+$)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,ie=this.worldMaxX*this.scale,se=this.worldSize/2-(te+ie)/2;P=(_+se+this.worldSize)%this.worldSize-se,P-R<te&&(P=te+R),P+R>ie&&(P=ie-R),ie-te<this.width&&(C=Math.max(C,this.width/(ie-te)),P=(ie+te)/2)}P===_&&k===b||(this.center=this.unproject(new o.pointGeometry(P,k))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const _=el(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?f:1,C=this._camera.getWorldToCamera(this.worldSize,b),P=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);P[8]=2*-c.x/this.width,P[9]=2*c.y/this.height;let k=o.mul([],P,C);if(this.projection.isReprojectedInTileSpace){const Se=this.locationCoordinate(this.center),Ie=o.identity([]);o.translate(Ie,Ie,[Se.x*this.worldSize,Se.y*this.worldSize,0]),o.multiply(Ie,Ie,Hl(this)),o.translate(Ie,Ie,[-Se.x*this.worldSize,-Se.y*this.worldSize,0]),o.multiply(k,k,Ie),this.inverseAdjustmentMatrix=function(We){const Xe=Hl(We,!0);return ue([],[Xe[0],Xe[1],Xe[4],Xe[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],k,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=k,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const R=o.invert([],P);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(R,this.horizonLineFromTop(),this.height);const N=new Float32Array(16);o.identity(N),o.scale(N,N,[1,-1,1]),o.rotateX(N,N,this._pitch),o.rotateZ(N,N,this.angle);const $=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),X=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;$[8]=2*-c.x/this.width,$[9]=2*(c.y+X)/this.height,this.skyboxMatrix=o.multiply(N,$,N);const te=this.point,ie=te.x,se=te.y,ae=this.width%2/2,le=this.height%2/2,Q=Math.cos(this.angle),ve=Math.sin(this.angle),ge=ie-Math.round(ie)+Q*ae+ve*le,_e=se-Math.round(se)+Q*le+ve*ae,ke=new Float64Array(k);if(o.translate(ke,ke,[ge>.5?ge-1:ge,_e>.5?_e-1:_e,0]),this.alignedProjMatrix=ke,k=o.create(),o.scale(k,k,[this.width/2,-this.height/2,1]),o.translate(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=o.create(),o.scale(k,k,[1,-1,1]),o.translate(k,k,[-1,-1,0]),o.scale(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},k=o.invert(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=k,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const Se=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(Se,Se,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=k;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,_=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,C=[c,c,f];o.scale$2(C,C,b),o.scale$2(_,_,-1),o.multiply$2(_,_,C);const P=o.create();o.translate(P,P,_),o.scale(P,P,C),this.mercatorFogMatrix=P,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,f,b)}_computeCameraPosition(c){const f=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),b=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-c/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-_[0]*C,b.y/this.worldSize-_[1]*C,c/this.worldSize*this._centerAltitude-_[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],b=c[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(C=Math.min((f-_)/b,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,c,C),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,f=this._camera.forward(),{pitch:_,bearing:b}=this._camera.getPitchBearing(),C=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,P=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),k=Math.max((c[2]-C)/Math.cos(_),P),R=this._zoomFromMercatorZ(k);o.scaleAndAdd(c,c,f,k),this._pitch=o.clamp(_,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(b,-Math.PI,Math.PI),this._setZoom(o.clamp(R,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let f=0,_=o.GLOBE_ZOOM_THRESHOLD_MAX,b=0,C=1/0;for(;_-f>1e-6&&_>f;){const P=f+.5*(_-f),k=this.tileSize*Math.pow(2,P),R=this.getCameraToCenterDistance(this.projection,P,k),N=this.scaleZoom(R/(c*this.tileSize)),$=Math.abs(P-N);$<C&&(C=$,b=P),P<N?f=P:_=P}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,f){const _=Math.min(c.x,f.x),b=Math.max(c.x,f.x),C=Math.min(c.y,f.y),P=Math.max(c.y,f.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new o.pointGeometry(_,C),new o.pointGeometry(b,P),new o.pointGeometry(_,P),new o.pointGeometry(b,C)],R=this.renderWorldCopies?-3:0,N=this.renderWorldCopies?4:1;for(const $ of k){const X=this.pointRayIntersection($);if(X.t<0)return!0;const te=this.rayIntersectionCoordinate(X);if(te.x<R||te.y<0||te.x>N||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(c,f){const _=o.length(o.sub([],this._camera.position,c)),b=this._zoomFromMercatorZ(_)+f;return _-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([f,_,b],C){const P=[f,_,b,1];o.transformMat4$1(P,P,C);const k=P[3]=Math.max(P[3],1e-6);return P[0]/=k,P[1]/=k,P[2]/=k,P}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,c))}}getCameraToCenterDistance(c,f=this.zoom,_=this.worldSize){const b=el(c,f,this.width,this.height,1024),C=c.pixelSpaceConversion(this.center.lat,_,b);return .5/Math.tan(.5*this._fov)*this.height*C}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(c,c,this.globeMatrix),c}}function ns(g,c){let f=!1,_=null;const b=()=>{_=null,f&&(g(),_=setTimeout(b,c),f=!1)};return()=>(f=!0,_||b(),_)}class Zg{constructor(c){this._hashName=c&&encodeURIComponent(c),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ns(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,o.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const f=Jf(c);if(this._hashName){const _=this._hashName;let b=!1;const C=o.window.location.hash.slice(1).split("&").map(P=>{const k=P.split("=")[0];return k===_?(b=!0,`${k}=${f}`):P}).filter(P=>P);return b||C.push(`${_}=${f}`),`#${C.join("&")}`}return`#${f}`}_getCurrentHash(){const c=o.window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(f=_)}),(f&&f[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(_=>isNaN(_))){const _=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(f[3]||0):c.getBearing();return c.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:_,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,c)}}function Jf(g,c){const f=g.getCenter(),_=Math.round(100*g.getZoom())/100,b=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,b),P=Math.round(f.lng*C)/C,k=Math.round(f.lat*C)/C,R=g.getBearing(),N=g.getPitch();let $=c?`/${P}/${k}/${_}`:`${_}/${k}/${P}`;return(R||N)&&($+="/"+Math.round(10*R)/10),N&&($+=`/${Math.round(N)}`),$}const au={linearity:.3,easing:o.bezier(0,0,.3,1)},Gl=o.extend({deceleration:2500,maxSpeed:1400},au),Yg=o.extend({deceleration:20,maxSpeed:1400},au),Xd=o.extend({deceleration:1e3,maxSpeed:360},au),Qf=o.extend({deceleration:1e3,maxSpeed:90},au);class Kd{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,f=o.exported.now();for(;c.length>0&&f-c[0].time>160;)c.shift()}_onMoveEnd(c){if(o.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)f.zoom+=C.zoomDelta||0,f.bearing+=C.bearingDelta||0,f.pitch+=C.pitchDelta||0,C.panDelta&&f.pan._add(C.panDelta),C.around&&(f.around=C.around),C.pinchAround&&(f.pinchAround=C.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const C=cu(f.pan.mag(),_,o.extend({},Gl,c||{}));b.offset=f.pan.mult(C.amount/f.pan.mag()),b.center=this._map.transform.center,lu(b,C)}if(f.zoom){const C=cu(f.zoom,_,Yg);b.zoom=this._map.transform.zoom+C.amount,lu(b,C)}if(f.bearing){const C=cu(f.bearing,_,Xd);b.bearing=this._map.transform.bearing+o.clamp(C.amount,-179,179),lu(b,C)}if(f.pitch){const C=cu(f.pitch,_,Qf);b.pitch=this._map.transform.pitch+C.amount,lu(b,C)}if(b.zoom||b.bearing){const C=f.pinchAround===void 0?f.around:f.pinchAround;b.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function lu(g,c){(!g.duration||g.duration<c.duration)&&(g.duration=c.duration,g.easing=c.easing)}function cu(g,c,f){const{maxSpeed:_,linearity:b,deceleration:C}=f,P=o.clamp(g*b/(c/1e3),-_,_),k=Math.abs(P)/(C*b);return{easing:f.easing,duration:1e3*k,amount:P*(k/2)}}class Zi extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,_,b={}){const C=Y(f.getCanvasContainer(),_),P=f.unproject(C);super(c,o.extend({point:C,lngLat:P,originalEvent:_},b)),this._defaultPrevented=!1,this.target=f}}class Jd extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,_){const b=c==="touchend"?_.changedTouches:_.touches,C=ce(f.getCanvasContainer(),b),P=C.map(R=>f.unproject(R)),k=C.reduce((R,N,$,X)=>R.add(N.div(X.length)),new o.pointGeometry(0,0));super(c,{points:C,point:k,lngLats:P,lngLat:f.unproject(k),originalEvent:_}),this._defaultPrevented=!1}}class A0 extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,_){super(c,{originalEvent:_}),this._defaultPrevented=!1}}class Xg{constructor(c,f){this._map=c,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new A0(c.type,this._map,c))}mousedown(c,f){return this._mousedownPos=f,this._firePreventable(new Zi(c.type,this._map,c))}mouseup(c){this._map.fire(new Zi(c.type,this._map,c))}preclick(c){const f=o.extend({},c);f.type="preclick",this._map.fire(new Zi(f.type,this._map,f))}click(c,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(c),this._map.fire(new Zi(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new Zi(c.type,this._map,c))}mouseover(c){this._map.fire(new Zi(c.type,this._map,c))}mouseout(c){this._map.fire(new Zi(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Jd(c.type,this._map,c))}touchmove(c){this._map.fire(new Jd(c.type,this._map,c))}touchend(c){this._map.fire(new Jd(c.type,this._map,c))}touchcancel(c){this._map.fire(new Jd(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qd{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new Zi(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Zi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new Zi(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ep{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,f){this.isEnabled()&&c.shiftKey&&c.button===0&&(F(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(c,f){if(!this._active)return;const _=f,b=this._startPos,C=this._lastPos;if(!b||!C||C.equals(_)||!this._box&&_.dist(b)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=A("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const P=Math.min(b.x,_.x),k=Math.max(b.x,_.x),R=Math.min(b.y,_.y),N=Math.max(b.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${P}px,${R}px)`,this._box.style.width=k-P+"px",this._box.style.height=N-R+"px")})}mouseupWindow(c,f){if(!this._active)return;const _=this._startPos,b=f;if(_&&c.button===0){if(this.reset(),Z(),_.x!==b.x||_.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:C=>C.fitScreenCoordinates(_,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),H(),delete this._startPos,delete this._lastPos}_fireEvent(c,f){return this._map.fire(new o.Event(c,{originalEvent:f}))}}function eh(g,c){const f={};for(let _=0;_<g.length;_++)f[g[_].identifier]=c[_];return f}class Kg{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,f,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),_.length===this.numTouches&&(this.centroid=function(b){const C=new o.pointGeometry(0,0);for(const P of b)C._add(P);return C.div(b.length)}(f),this.touches=eh(_,f)))}touchmove(c,f,_){if(this.aborted||!this.centroid)return;const b=eh(_,f);for(const C in this.touches){const P=this.touches[C],k=b[C];(!k||k.dist(P)>30)&&(this.aborted=!0)}}touchend(c,f,_){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class ql{constructor(c){this.singleTap=new Kg(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,f,_){this.singleTap.touchstart(c,f,_)}touchmove(c,f,_){this.singleTap.touchmove(c,f,_)}touchend(c,f,_){const b=this.singleTap.touchend(c,f,_);if(b){const C=c.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(b)<30;if(C&&P||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class tp{constructor(){this._zoomIn=new ql({numTouches:1,numTaps:2}),this._zoomOut=new ql({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,f,_){this._zoomIn.touchstart(c,f,_),this._zoomOut.touchstart(c,f,_)}touchmove(c,f,_){this._zoomIn.touchmove(c,f,_),this._zoomOut.touchmove(c,f,_)}touchend(c,f,_){const b=this._zoomIn.touchend(c,f,_),C=this._zoomOut.touchend(c,f,_);return b?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(b)},{originalEvent:c})}):C?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(C)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Jg={0:1,2:2};class th{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,f){return!1}_move(c,f){return{}}mousedown(c,f){if(this._lastPoint)return;const _=ee(c);this._correctButton(c,_)&&(this._lastPoint=f,this._eventButton=_)}mousemoveWindow(c,f){const _=this._lastPoint;if(_){if(c.preventDefault(),this._eventButton!=null&&function(b,C){const P=Jg[C];return b.buttons===void 0||(b.buttons&P)!==P}(c,this._eventButton))this.reset();else if(this._moved||!(f.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(_,f)}}mouseupWindow(c){this._lastPoint&&ee(c)===this._eventButton&&(this._moved&&Z(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qg extends th{mousedown(c,f){super.mousedown(c,f),this._lastPoint&&(this._active=!0)}_correctButton(c,f){return f===0&&!c.ctrlKey}_move(c,f){return{around:f,panDelta:f.sub(c)}}}class np extends th{_correctButton(c,f){return f===0&&c.ctrlKey||f===2}_move(c,f){const _=.8*(f.x-c.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(c){c.preventDefault()}}class rp extends th{_correctButton(c,f){return f===0&&c.ctrlKey||f===2}_move(c,f){const _=-.5*(f.y-c.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(c){c.preventDefault()}}class Zl{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(c,f,_){return this._calculateTransform(c,f,_)}touchmove(c,f,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,f,_)}}touchend(c,f,_){this._calculateTransform(c,f,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,f,_){_.length>0&&(this._active=!0);const b=eh(_,f),C=new o.pointGeometry(0,0),P=new o.pointGeometry(0,0);let k=0;for(const N in b){const $=b[N],X=this._touches[N];X&&(C._add($),P._add($.sub(X)),k++,b[N]=$)}if(this._touches=b,k<this._minTouches||!P.mag())return;const R=P.div(k);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(k),panDelta:R}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=A("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class nh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,f,_){return{}}touchstart(c,f,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([f[0],f[1]]))}touchmove(c,f,_){const b=this._firstTwoTouches;if(!b)return;c.preventDefault();const[C,P]=b,k=uu(_,f,C),R=uu(_,f,P);if(!k||!R)return;const N=this._aroundCenter?null:k.add(R).div(2);return this._move([k,R],N,c)}touchend(c,f,_){if(!this._firstTwoTouches)return;const[b,C]=this._firstTwoTouches,P=uu(_,f,b),k=uu(_,f,C);P&&k||(this._active&&Z(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function uu(g,c,f){for(let _=0;_<g.length;_++)if(g[_].identifier===f)return c[_]}function ev(g,c){return Math.log(g/c)/Math.LN2}class tv extends nh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,f){const _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(ev(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ev(this._distance,_),pinchAround:f}}}function ip(g,c){return 180*g.angleWith(c)/Math.PI}class nv extends nh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,f){const _=this._vector;if(this._vector=c[0].sub(c[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ip(this._vector,_),pinchAround:f}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const f=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const b=ip(c,_);return Math.abs(b)<f}}function rh(g){return Math.abs(g.y)>Math.abs(g.x)}class lo extends nh{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,rh(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,f,_){const b=this._lastPoints;if(!b)return;const C=c[0].sub(b[0]),P=c[1].sub(b[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(C,P,_.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(C.y+P.y)/2*-.5})}gestureBeginsVertically(c,f,_){if(this._valid!==void 0)return this._valid;const b=c.mag()>=2,C=f.mag()>=2;if(!b&&!C)return;if(!b||!C)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const P=c.y>0==f.y>0;return rh(c)&&rh(f)&&P}}const k0={panStep:100,bearingStep:15,pitchStep:10};class rv{constructor(){const c=k0;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let f=0,_=0,b=0,C=0,P=0;switch(c.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:c.shiftKey?_=-1:(c.preventDefault(),C=-1);break;case 39:c.shiftKey?_=1:(c.preventDefault(),C=1);break;case 38:c.shiftKey?b=1:(c.preventDefault(),P=-1);break;case 40:c.shiftKey?b=-1:(c.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(_=0,b=0),{cameraAnimation:k=>{const R=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:D0,zoom:f?Math.round(R)+f*(c.shiftKey?2:1):R,bearing:k.getBearing()+_*this._bearingStep,pitch:k.getPitch()+b*this._pitchStep,offset:[-C*this._panStep,-P*this._panStep],center:k.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function D0(g){return g*(2-g)}const iv=4.000244140625;class Gs{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=c.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const _=o.exported.now(),b=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,f!==0&&f%iv==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),c.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=c,this._delta-=f,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=Y(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>iv?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&N!==0&&(N=1/N);const $=f(),X=Math.pow(2,$),te=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):X;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(te*N))),this._type==="wheel"&&(this._startZoom=$,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:f(),b=this._startZoom,C=this._easing;let P,k=!1;if(this._type==="wheel"&&b&&C){const R=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),N=C(R);P=o.number(b,_,N),R<1?this._frameId||(this._frameId=!0):k=!0}else P=_,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:P-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let f=o.ease;if(this._prevEase){const _=this._prevEase,b=(o.exported.now()-_.start)/_.duration,C=_.easing(b+.01)-_.easing(b),P=.27/Math.sqrt(C*C+1e-4)*.01,k=Math.sqrt(.0729-P*P);f=o.bezier(P,k,.25,1)}return this._prevEase={start:o.exported.now(),duration:c,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=A("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class ov{constructor(c,f){this._clickZoom=c,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yl{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,f){return c.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(c.shiftKey?-1:1),around:_.unproject(f)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Es{constructor(){this._tap=new ql({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,f,_){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=f[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(c,f,_))}touchmove(c,f,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const b=f[0],C=b.y-this._swipePoint.y;return this._swipePoint=b,c.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(c,f,_)}touchend(c,f,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(c,f,_)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ih{constructor(c,f,_){this._el=c,this._mousePan=f,this._touchPan=_}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class un{constructor(c,f,_){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=f,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class sv{constructor(c,f,_,b){this._el=c,this._touchZoom=f,this._touchRotate=_,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const du=g=>g.zoom||g.drag||g.pitch||g.rotate;class hu extends o.Event{}class fu{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,f){const _=o.sub([],f,c);this.radius=o.length(_[2]<0?o.div([],_,this.constants):[_[0],_[1],0])}projectRay(c){o.div(c,c,this.constants),o.normalize(c,c),o.mul$1(c,c,this.constants);const f=o.scale$2([],c,this.radius);if(f[2]>0){const _=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),b=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),C=o.add([],f,o.scale$2([],o.sub([],o.add([],b,_),f),2));f[0]=C[0],f[1]=C[1]}return f}}function pu(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class av{constructor(c,f){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kd(c),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new fu,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[b,C,P]of this._listeners)b.addEventListener(C,b===o.window.document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[c,f,_]of this._listeners)c.removeEventListener(f,c===o.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(c){const f=this._map,_=f.getCanvasContainer();this._add("mapEvent",new Xg(f,c));const b=f.boxZoom=new ep(f,c);this._add("boxZoom",b);const C=new tp,P=new Yl;f.doubleClickZoom=new ov(P,C),this._add("tapZoom",C),this._add("clickZoom",P);const k=new Es;this._add("tapDragZoom",k);const R=f.touchPitch=new lo(f);this._add("touchPitch",R);const N=new np(c),$=new rp(c);f.dragRotate=new un(c,N,$),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",$,["mouseRotate"]);const X=new Qg(c),te=new Zl(f,c);f.dragPan=new ih(_,X,te),this._add("mousePan",X),this._add("touchPan",te,["touchZoom","touchRotate"]);const ie=new nv,se=new tv;f.touchZoomRotate=new sv(_,se,ie,k),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Qd(f));const ae=f.scrollZoom=new Gs(f,this);this._add("scrollZoom",ae,["mousePan"]);const le=f.keyboard=new rv;this._add("keyboard",le);for(const Q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[Q]&&f[Q].enable(c[Q])}_add(c,f,_){this._handlers.push({handlerName:c,handler:f,allowed:_}),this._handlersById[c]=f}stop(c){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!du(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,f,_){for(const b in c)if(b!==_&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const f=[];for(const _ of c)this._el.contains(_.target)&&f.push(_);return f}handleEvent(c,f){this._updatingCamera=!0;const _=c.type==="renderFrame",b=_?void 0:c,C={needsRenderFrame:!1},P={},k={},R=c.touches?this._getMapTouches(c.touches):void 0,N=R?ce(this._el,R):_?void 0:Y(this._el,c);for(const{handlerName:te,handler:ie,allowed:se}of this._handlers){if(!ie.isEnabled())continue;let ae;this._blockedByActive(k,se,te)?ie.reset():ie[f||c.type]&&(ae=ie[f||c.type](c,N,R),this.mergeHandlerResult(C,P,ae,te,b),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||ie.isActive())&&(k[te]=ie)}const $={};for(const te in this._previousActiveHandlers)k[te]||($[te]=b);this._previousActiveHandlers=k,(Object.keys($).length||pu(C))&&(this._changes.push([C,P,$]),this._triggerRenderFrame()),(Object.keys(k).length||pu(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=C;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))}mergeHandlerResult(c,f,_,b,C){if(!_)return;o.extend(c,_);const P={handlerName:b,originalEvent:_.originalEvent||C};_.zoomDelta!==void 0&&(f.zoom=P),_.panDelta!==void 0&&(f.drag=P),_.pitchDelta!==void 0&&(f.pitch=P),_.bearingDelta!==void 0&&(f.rotate=P)}_applyChanges(){const c={},f={},_={};for(const[b,C,P]of this._changes)b.panDelta&&(c.panDelta=(c.panDelta||new o.pointGeometry(0,0))._add(b.panDelta)),b.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(c.around=b.around),b.aroundCoord!==void 0&&(c.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(c.pinchAround=b.pinchAround),b.noInertia&&(c.noInertia=b.noInertia),o.extend(f,C),o.extend(_,P);this._updateMapTransform(c,f,_),this._changes=[]}_updateMapTransform(c,f,_){const b=this._map,C=b.transform,P=ve=>[ve.x,ve.y,ve.z];if((ve=>{const ge=this._eventsInProgress.drag;return ge&&!this._handlersById[ge.handlerName].isActive()})()&&!pu(c)){const ve=C.zoom;C.cameraElevationReference="sea",C.recenterOnTerrain(),C.cameraElevationReference="ground",ve!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&b._stop(!0),!pu(c))return void this._fireEvents(f,_,!0);let{panDelta:k,zoomDelta:R,bearingDelta:N,pitchDelta:$,around:X,aroundCoord:te,pinchAround:ie}=c;C._isCameraConstrained&&(R>0&&(R=0),C._isCameraConstrained=!1),ie!==void 0&&(X=ie),(R||(ve=>f.drag&&!this._eventsInProgress.drag)())&&X&&(this._dragOrigin=P(C.pointCoordinate3D(X)),this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",b._stop(!0),X=X||b.transform.centerPoint,N&&(C.bearing+=N),$&&(C.pitch+=$),C._updateCameraState();const se=[0,0,0];if(k)if(C.projection.name==="mercator"){const ve=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(X).dir),ge=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(X.sub(k)).dir);se[0]=ge[0]-ve[0],se[1]=ge[1]-ve[1]}else{const ve=C.pointCoordinate(X);if(C.projection.name==="globe"){k=k.rotate(-C.angle);const ge=C._pixelsPerMercatorPixel/C.worldSize;se[0]=-k.x*o.mercatorScale(o.latFromMercatorY(ve.y))*ge,se[1]=-k.y*o.mercatorScale(C.center.lat)*ge}else{const ge=C.pointCoordinate(X.sub(k));ve&&ge&&(se[0]=ge.x-ve.x,se[1]=ge.y-ve.y)}}const ae=C.zoom,le=[0,0,0];if(R){const ve=P(te||C.pointCoordinate3D(X)),ge={dir:o.normalize([],o.sub([],ve,C._camera.position))};if(ge.dir[2]<0){const _e=C.zoomDeltaToMovement(ve,R);o.scale$2(le,ge.dir,_e)}}const Q=o.add(se,se,le);C._translateCameraConstrained(Q),R&&Math.abs(C.zoom-ae)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(f,_,!0)}_fireEvents(c,f,_){const b=du(this._eventsInProgress),C=du(c),P={};for(const $ in c){const{originalEvent:X}=c[$];this._eventsInProgress[$]||(P[`${$}start`]=X),this._eventsInProgress[$]=c[$]}!b&&C&&this._fireEvent("movestart",C.originalEvent);for(const $ in P)this._fireEvent($,P[$]);C&&this._fireEvent("move",C.originalEvent);for(const $ in c){const{originalEvent:X}=c[$];this._fireEvent($,X)}const k={};let R;for(const $ in this._eventsInProgress){const{handlerName:X,originalEvent:te}=this._eventsInProgress[$];this._handlersById[X].isActive()||(delete this._eventsInProgress[$],R=f[X]||te,k[`${$}end`]=R)}for(const $ in k)this._fireEvent($,k[$]);const N=du(this._eventsInProgress);if(_&&(b||C)&&!N){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;$?(X($.bearing||this._map.getBearing())&&($.bearing=0),this._map.easeTo($,{originalEvent:R})):(this._map.fire(new o.Event("moveend",{originalEvent:R})),X(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,f){this._map.fire(new o.Event(c,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new hu("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const op="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class lv extends o.Evented{constructor(c,f){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=f.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,f){return this.jumpTo({center:c},f)}panBy(c,f,_){return c=o.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},f),_)}panTo(c,f,_){return this.easeTo(o.extend({center:c},f),_)}getZoom(){return this.transform.zoom}setZoom(c,f){return this.jumpTo({zoom:c},f),this}zoomTo(c,f,_){return this.easeTo(o.extend({zoom:c},f),_)}zoomIn(c,f){return this.zoomTo(this.getZoom()+1,c,f),this}zoomOut(c,f){return this.zoomTo(this.getZoom()-1,c,f),this}getBearing(){return this.transform.bearing}setBearing(c,f){return this.jumpTo({bearing:c},f),this}getPadding(){return this.transform.padding}setPadding(c,f){return this.jumpTo({padding:c},f),this}rotateTo(c,f,_){return this.easeTo(o.extend({bearing:c},f),_)}resetNorth(c,f){return this.rotateTo(0,o.extend({duration:1e3},c),f),this}resetNorthPitch(c,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),f),this}snapToNorth(c,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,f):this}getPitch(){return this.transform.pitch}setPitch(c,f){return this.jumpTo({pitch:c},f),this}cameraForBounds(c,f){c=o.LngLatBounds.convert(c);const _=f&&f.bearing||0,b=f&&f.pitch||0,C=c.getNorthWest(),P=c.getSouthEast();return this._cameraForBounds(this.transform,C,P,_,b,f)}_extendCameraOptions(c){const f={top:0,bottom:0,right:0,left:0};if(typeof(c=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const _=c.padding;c.padding={top:_,bottom:_,right:_,left:_}}return c.padding=o.extend(f,c.padding),c}_minimumAABBFrustumDistance(c,f){const _=f.max[0]-f.min[0],b=f.max[1]-f.min[1];return _/b>c.aspect?_/(2*Math.tan(.5*c.fovX)*c.aspect):b/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,f,_,b,C,P){const k=c.clone(),R=this._extendCameraOptions(P);k.bearing=b,k.pitch=C;const N=o.LngLat.convert(f),$=o.LngLat.convert(_),X=.5*(N.lat+$.lat),te=.5*(N.lng+$.lng),ie=o.latLngToECEF(X,te),se=o.normalize([],ie),ae=o.normalize([],o.cross([],se,[0,1,0])),le=o.cross([],ae,se),Q=[ae[0],ae[1],ae[2],0,le[0],le[1],le[2],0,se[0],se[1],se[2],0,0,0,0,1],ve=[ie,o.latLngToECEF(N.lat,N.lng),o.latLngToECEF($.lat,N.lng),o.latLngToECEF($.lat,$.lng),o.latLngToECEF(N.lat,$.lng),o.latLngToECEF(X,N.lng),o.latLngToECEF(X,$.lng),o.latLngToECEF(N.lat,te),o.latLngToECEF($.lat,te)];let ge=o.Aabb.fromPoints(ve.map(Dt=>[o.dot(ae,Dt),o.dot(le,Dt),o.dot(se,Dt)]));const _e=o.transformMat4([],ge.center,Q);o.squaredLength(_e)===0&&o.set(_e,0,0,1),o.normalize(_e,_e),o.scale$2(_e,_e,o.GLOBE_RADIUS),k.center=o.ecefToLatLng(_e);const ke=k.getWorldToCameraMatrix(),Se=o.invert(new Float64Array(16),ke);ge=o.Aabb.applyTransform(ge,o.multiply([],ke,Q)),o.transformMat4(_e,_e,ke);const Ie=.5*(ge.max[2]-ge.min[2]),We=this._minimumAABBFrustumDistance(k,ge),Xe=o.scale$2([],[0,0,1],Ie),rt=o.add(Xe,_e,Xe),Ht=We+(k.pitch===0?0:o.distance(_e,rt)),Ge=k.globeCenterInViewSpace,St=o.sub([],_e,[Ge[0],Ge[1],Ge[2]]);o.normalize(St,St),o.scale$2(St,St,Ht);const dt=o.add([],_e,St);o.transformMat4(dt,dt,Se);const zt=o.earthRadius/o.GLOBE_RADIUS,tt=o.length(dt),Ve=o.mercatorZfromAltitude(Math.max(tt*zt-o.earthRadius,Number.EPSILON),0),ot=Math.min(k.zoomFromMercatorZAdjusted(Ve),R.maxZoom);return ot>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"mercator"}),k.zoom=ot,this._cameraForBounds(k,f,_,b,C,P)):{center:k.center,zoom:ot,bearing:b,pitch:C}}queryTerrainElevation(c,f){const _=this.transform.elevation;return _?(f=o.extend({},{exaggerated:!0},f),_.getAtPoint(o.MercatorCoordinate.fromLngLat(c),null,f.exaggerated)):null}_cameraForBounds(c,f,_,b,C,P){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,f,_,b,C,P);const k=c.clone(),R=this._extendCameraOptions(P),N=k.padding;k.bearing=b,k.pitch=C;const $=o.LngLat.convert(f),X=o.LngLat.convert(_),te=new o.LngLat($.lng,X.lat),ie=new o.LngLat(X.lng,$.lat),se=k.project($),ae=k.project(X),le=this.queryTerrainElevation($),Q=this.queryTerrainElevation(X),ve=this.queryTerrainElevation(te),ge=this.queryTerrainElevation(ie),_e=[[se.x,se.y,Math.min(le||0,Q||0,ve||0,ge||0)],[ae.x,ae.y,Math.max(le||0,Q||0,ve||0,ge||0)]];let ke=o.Aabb.fromPoints(_e);const Se=k.getWorldToCameraMatrix(),Ie=o.invert(new Float64Array(16),Se);ke=o.Aabb.applyTransform(ke,Se);const We=o.sub([],ke.max,ke.min),Xe=N.left||0,rt=N.right||0,Ht=N.bottom||0,Ge=N.top||0,{left:St,right:dt,top:zt,bottom:tt}=R.padding,Ve=.5*(Xe+rt),ot=.5*(Ge+Ht),Dt=Math.min(k.scaleZoom(k.scale*Math.min((k.width-(Xe+rt+St+dt))/We[0],(k.height-(Ht+Ge+tt+zt))/We[1])),R.maxZoom),Bt=k.scale/k.zoomScale(Dt);ke=new o.Aabb([ke.min[0]-(St+Ve)*Bt,ke.min[1]-(tt+ot)*Bt,ke.min[2]],[ke.max[0]+(dt+Ve)*Bt,ke.max[1]+(zt+ot)*Bt,ke.max[2]]);const _n=.5*We[2],Vn=this._minimumAABBFrustumDistance(k,ke),dn=[0,0,1,0];o.transformMat4$1(dn,dn,Se),o.normalize$2(dn,dn);const rn=o.scale$2([],dn,Vn+_n),xn=o.add([],ke.center,rn),Jn=(typeof R.offset.x=="number"&&typeof R.offset.y=="number"?new o.pointGeometry(R.offset.x,R.offset.y):o.pointGeometry.convert(R.offset)).rotate(-o.degToRad(b));ke.center[0]-=Jn.x*Bt,ke.center[1]+=Jn.y*Bt,o.transformMat4(ke.center,ke.center,Ie),o.transformMat4(xn,xn,Ie);const Mn=[ke.center[0],ke.center[1],xn[2]*k.pixelsPerMeter];o.scale$2(Mn,Mn,1/k.worldSize);const Tr=o.lngFromMercatorX(Mn[0]),Sr=o.latFromMercatorY(Mn[1]),jr=Math.min(k._zoomFromMercatorZ(Mn[2]),R.maxZoom),Nr=new o.LngLat(Tr,Sr);return k.mercatorFromTransition&&jr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"globe"}),k.zoom=jr,this._cameraForBounds(k,f,_,b,C,P)):{center:Nr,zoom:jr,bearing:b,pitch:C}}fitBounds(c,f,_){const b=this.cameraForBounds(c,f);return this._fitInternal(b,f,_)}fitScreenCoordinates(c,f,_,b,C){const P=o.pointGeometry.convert(c),k=o.pointGeometry.convert(f),R=new o.pointGeometry(Math.min(P.x,k.x),Math.min(P.y,k.y)),N=new o.pointGeometry(Math.max(P.x,k.x),Math.max(P.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(P,k))return this;const $=this.transform.pointLocation3D(R),X=this.transform.pointLocation3D(N),te=this.transform.pointLocation3D(new o.pointGeometry(R.x,N.y)),ie=this.transform.pointLocation3D(new o.pointGeometry(N.x,R.y)),se=[Math.min($.lng,X.lng,te.lng,ie.lng),Math.min($.lat,X.lat,te.lat,ie.lat)],ae=[Math.max($.lng,X.lng,te.lng,ie.lng),Math.max($.lat,X.lat,te.lat,ie.lat)],le=b&&b.pitch?b.pitch:this.getPitch(),Q=this._cameraForBounds(this.transform,se,ae,_,le,b);return this._fitInternal(Q,b,C)}_fitInternal(c,f,_){return c?(delete(f=o.extend(c,f)).padding,f.linear?this.easeTo(f,_):this.flyTo(f,_)):this}jumpTo(c,f){this.stop();const _=c.preloadOnly?this.transform.clone():this.transform;let b=!1,C=!1,P=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(b=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=o.LngLat.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(C=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(P=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),c.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),b&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),C&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),P&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(op),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,f){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.warnOnce(op),this;this.stop();const b=_.zoom,C=_.pitch,P=_.bearing;_.setFreeCameraOptions(c);const k=b!==_.zoom,R=C!==_.pitch,N=P!==_.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),k&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),N&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),R&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(c,f){this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||!c.essential&&o.exported.prefersReducedMotion)&&(c.duration=0);const _=this.transform,b=this.getZoom(),C=this.getBearing(),P=this.getPitch(),k=this.getPadding(),R="zoom"in c?+c.zoom:b,N="bearing"in c?this._normalizeBearing(c.bearing,C):C,$="pitch"in c?+c.pitch:P,X="padding"in c?c.padding:_.padding,te=o.pointGeometry.convert(c.offset);let ie,se,ae;if(_.projection.name==="globe"){const Xe=o.MercatorCoordinate.fromLngLat(_.center),rt=te.rotate(-_.angle);Xe.x+=rt.x/_.worldSize,Xe.y+=rt.y/_.worldSize;const Ht=Xe.toLngLat(),Ge=o.LngLat.convert(c.center||Ht);this._normalizeCenter(Ge),ie=_.centerPoint.add(rt),se=new o.pointGeometry(Xe.x,Xe.y).mult(_.worldSize),ae=new o.pointGeometry(o.mercatorXfromLng(Ge.lng),o.mercatorYfromLat(Ge.lat)).mult(_.worldSize).sub(se)}else{ie=_.centerPoint.add(te);const Xe=_.pointLocation(ie),rt=o.LngLat.convert(c.center||Xe);this._normalizeCenter(rt),se=_.project(Xe),ae=_.project(rt).sub(se)}const le=_.zoomScale(R-b);let Q,ve;c.around&&(Q=o.LngLat.convert(c.around),ve=_.locationPoint(Q));const ge=this._zooming||R!==b,_e=this._rotating||C!==N,ke=this._pitching||$!==P,Se=!_.isPaddingEqual(X),Ie=Xe=>rt=>{if(ge&&(Xe.zoom=o.number(b,R,rt)),_e&&(Xe.bearing=o.number(C,N,rt)),ke&&(Xe.pitch=o.number(P,$,rt)),Se&&(Xe.interpolatePadding(k,X,rt),ie=Xe.centerPoint.add(te)),Q)Xe.setLocationAtPoint(Q,ve);else{const Ht=Xe.zoomScale(Xe.zoom-b),Ge=R>b?Math.min(2,le):Math.max(.5,le),St=Math.pow(Ge,1-rt),dt=Xe.unproject(se.add(ae.mult(rt*St)).mult(Ht));Xe.setLocationAtPoint(Xe.renderWorldCopies?dt.wrap():dt,ie)}return c.preloadOnly||this._fireMoveEvents(f),Xe};if(c.preloadOnly){const Xe=this._emulate(Ie,c.duration,_);return this._preloadTiles(Xe),this}const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ge,this._rotating=_e,this._pitching=ke,this._padding=Se,this._easeId=c.easeId,this._prepareEase(f,c.noMoveStart,We),this._ease(Ie(_),Xe=>{_.recenterOnTerrain(),this._afterEase(f,Xe)},c),this}_prepareEase(c,f,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||_.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))}_afterEase(c,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,b=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",c)),b&&this.fire(new o.Event("rotateend",c)),C&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}flyTo(c,f){if(!c.essential&&o.exported.prefersReducedMotion){const Dt=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Dt,f)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);const _=this.transform,b=this.getZoom(),C=this.getBearing(),P=this.getPitch(),k=this.getPadding(),R="zoom"in c?o.clamp(+c.zoom,_.minZoom,_.maxZoom):b,N="bearing"in c?this._normalizeBearing(c.bearing,C):C,$="pitch"in c?+c.pitch:P,X="padding"in c?c.padding:_.padding,te=_.zoomScale(R-b),ie=o.pointGeometry.convert(c.offset);let se=_.centerPoint.add(ie);const ae=_.pointLocation(se),le=o.LngLat.convert(c.center||ae);this._normalizeCenter(le);const Q=_.project(ae),ve=_.project(le).sub(Q);let ge=c.curve;const _e=Math.max(_.width,_.height),ke=_e/te,Se=ve.mag();if("minZoom"in c){const Dt=o.clamp(Math.min(c.minZoom,b,R),_.minZoom,_.maxZoom),Bt=_e/_.zoomScale(Dt-b);ge=Math.sqrt(Bt/Se*2)}const Ie=ge*ge;function We(Dt){const Bt=(ke*ke-_e*_e+(Dt?-1:1)*Ie*Ie*Se*Se)/(2*(Dt?ke:_e)*Ie*Se);return Math.log(Math.sqrt(Bt*Bt+1)-Bt)}function Xe(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function rt(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}const Ht=We(0);let Ge=function(Dt){return rt(Ht)/rt(Ht+ge*Dt)},St=function(Dt){return _e*((rt(Ht)*(Xe(Bt=Ht+ge*Dt)/rt(Bt))-Xe(Ht))/Ie)/Se;var Bt},dt=(We(1)-Ht)/ge;if(Math.abs(Se)<1e-6||!isFinite(dt)){if(Math.abs(_e-ke)<1e-6)return this.easeTo(c,f);const Dt=ke<_e?-1:1;dt=Math.abs(Math.log(ke/_e))/ge,St=function(){return 0},Ge=function(Bt){return Math.exp(Dt*ge*Bt)}}c.duration="duration"in c?+c.duration:1e3*dt/("screenSpeed"in c?+c.screenSpeed/ge:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const zt=C!==N,tt=$!==P,Ve=!_.isPaddingEqual(X),ot=Dt=>Bt=>{const _n=Bt*dt,Vn=1/Ge(_n);Dt.zoom=Bt===1?R:b+Dt.scaleZoom(Vn),zt&&(Dt.bearing=o.number(C,N,Bt)),tt&&(Dt.pitch=o.number(P,$,Bt)),Ve&&(Dt.interpolatePadding(k,X,Bt),se=Dt.centerPoint.add(ie));const dn=Bt===1?le:Dt.unproject(Q.add(ve.mult(St(_n))).mult(Vn));return Dt.setLocationAtPoint(Dt.renderWorldCopies?dn.wrap():dn,se),Dt._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(f),Dt};if(c.preloadOnly){const Dt=this._emulate(ot,c.duration,_);return this._preloadTiles(Dt),this}return this._zooming=!0,this._rotating=zt,this._pitching=tt,this._padding=Ve,this._prepareEase(f,!1),this._ease(ot(_),()=>this._afterEase(f),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,f)}if(!c){const _=this.handlers;_&&_.stop(!1)}return this}_ease(c,f,_){_.animate===!1||_.duration===0?(c(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,f){c=o.wrap(c,-180,180);const _=Math.abs(c-f);return Math.abs(c-360-f)<_&&(c-=360),Math.abs(c+360-f)<_&&(c+=360),c}_normalizeCenter(c){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const _=c.lng-f.center.lng;c.lng+=_>180?-360:_<-180?360:0}_emulate(c,f,_){const b=Math.ceil(15*f/1e3),C=[],P=c(_.clone());for(let k=0;k<=b;k++){const R=P(k/b);C.push(R.clone())}return C}}class sp{constructor(c={}){this.options=c,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const f=this.options&&this.options.compact;return this._map=c,this._container=A("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=A("button","mapboxgl-ctrl-attrib-button",this._container),A("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,f){const _=this._map._getUIString(`AttributionControl.${f}`);c.setAttribute("aria-label",_),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(c){const _=f.reduce((b,C,P)=>(C.value&&(b+=`${C.key}=${C.value}${P<f.length-1?"&":""}`),b),"?");c.href=`${o.config.FEEDBACK_URL}/${_}#${Jf(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style._sourceCaches;for(const b in f){const C=f[b];if(C.used){const P=C.getSource();P.attribution&&c.indexOf(P.attribution)<0&&c.push(P.attribution)}}c.sort((b,C)=>b.length-C.length),c=c.filter((b,C)=>{for(let P=C+1;P<c.length;P++)if(c[P].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const _=c.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,c.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ap{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=A("div","mapboxgl-ctrl");const f=A("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const f in c){const _=c[f].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class mu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const f=++this._id;return this._queue.push({callback:c,id:f,cancelled:!1}),f}remove(c){const f=this._currentlyRunning,_=f?this._queue.concat(f):this._queue;for(const b of _)if(b.id===c)return void(b.cancelled=!0)}run(c=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const _ of f)if(!_.cancelled&&(_.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function oh(g,c,f){if(g=new o.LngLat(g.lng,g.lat),c){const _=new o.LngLat(g.lng-360,g.lat),b=new o.LngLat(g.lng+360,g.lat),C=360*Math.ceil(Math.abs(g.lng-f.center.lng)/360),P=f.locationPoint(g).distSqr(c),k=c.x<0||c.y<0||c.x>f.width||c.y>f.height;f.locationPoint(_).distSqr(c)<P&&(k||Math.abs(_.lng-f.center.lng)<C)?g=_:f.locationPoint(b).distSqr(c)<P&&(k||Math.abs(b.lng-f.center.lng)<C)&&(g=b)}for(;Math.abs(g.lng-f.center.lng)>180;){const _=f.locationPoint(g);if(_.x>=0&&_.y>=0&&_.x<=f.width&&_.y<=f.height)break;g.lng>f.center.lng?g.lng-=360:g.lng+=360}return g}const Xl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class sh extends o.Evented{constructor(c,f){if(super(),(c instanceof o.window.HTMLElement||f)&&(c=o.extend({element:c},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=o.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=A("div");const b=41,C=27,P=I("svg",{display:"block",height:b*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${b}`},this._element),k=I("radialGradient",{id:"shadowGradient"},I("defs",{},P));I("stop",{offset:"10%","stop-opacity":.4},k),I("stop",{offset:"100%","stop-opacity":.05},k),I("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},P),I("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},P),I("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},P),I("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},P),this._offset=o.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const _=this._element.classList;for(const b in Xl)_.remove(`mapboxgl-marker-anchor-${b}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const f=c.code,_=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(c){const f=c.originalEvent.target,_=this._element;this._popup&&(f===_||_.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,f=this._pos;if(!c||!f)return!1;const _=c.unproject(f),b=c.getFreeCameraOptions();if(!b.position)return!1;const C=b.position.toLngLat();return C.distanceTo(_)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const f=this._pos;if(!f||f.x<0||f.x>c.transform.width||f.y<0||f.y>c.transform.height)return void this._clearFadeTimer();const _=c.unproject(f);let b;c._showingGlobe()&&o.isLngLatBehindGlobe(c.transform,this._lngLat)?b=0:(b=1-c._queryFogOpacity(_),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${Xl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const c=this._pos,f=this._map,_=this.getPitchAlignment();if(!f||!c||_!=="map")return"";if(!f._showingGlobe()){const R=f.getPitch();return R?`rotateX(${R}deg)`:""}const b=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),C=c.sub(o.globeCenterToScreenPoint(f.transform)),P=Math.abs(C.x)+Math.abs(C.y);if(P===0)return"";const k=b/P;return`rotateX(${-C.y*k}deg) rotateY(${C.x*k}deg)`}_calculateZTransform(){const c=this._pos,f=this._map;if(!f||!c)return"";let _=0;const b=this.getRotationAlignment();if(b==="map")if(f._showingGlobe()){const C=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),P=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);_=o.radToDeg(Math.atan2(P.y,P.x))-90}else _=-f.getBearing();else if(b==="horizon"){const C=o.smoothstep(4,6,f.getZoom()),P=o.globeCenterToScreenPoint(f.transform);P.y+=C*f.transform.height;const k=c.sub(P),R=o.radToDeg(Math.atan2(k.y,k.x));_=(R>90?R-270:R+90)*(1-C)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(c){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=oh(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),c===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=o.pointGeometry.convert(c),this._update(),this}_onMove(c){const f=this._map;if(!f)return;const _=this._pointerdownPos,b=this._positionDelta;if(_&&b){if(!this._isDragging){const C=this._clickTolerance||f._clickTolerance;if(c.point.dist(_)<C)return;this._isDragging=!0}this._pos=c.point.sub(b),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(c){const f=this._map,_=this._pos;f&&_&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(_),this._pointerdownPos=c.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const f=this._map;return f&&(c?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const cv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},uv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function lp(g=new o.pointGeometry(0,0),c="bottom"){if(typeof g=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(c){case"top":return new o.pointGeometry(0,g);case"top-left":return new o.pointGeometry(f,f);case"top-right":return new o.pointGeometry(-f,f);case"bottom":return new o.pointGeometry(0,-g);case"bottom-left":return new o.pointGeometry(f,-f);case"bottom-right":return new o.pointGeometry(-f,-f);case"left":return new o.pointGeometry(g,0);case"right":return new o.pointGeometry(-g,0)}return new o.pointGeometry(0,0)}return g instanceof o.pointGeometry||Array.isArray(g)?o.pointGeometry.convert(g):o.pointGeometry.convert(g[c]||[0,0])}class dv{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const f=o.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,f,_){this._start=this.getValue(f),this._end=c,this._startTime=f,this._endTime=f+_}}const hv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},fv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},cp={showCompass:!0,showZoom:!0,visualizePitch:!1};class pv{constructor(c,f,_=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new np({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,_&&(this.mousePitch=new rp({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(c,f){this.mouseRotate.mousedown(c,f),this.mousePitch&&this.mousePitch.mousedown(c,f),F()}move(c,f){const _=this.map,b=this.mouseRotate.mousemoveWindow(c,f),C=b&&b.bearingDelta;if(C&&_.setBearing(_.getBearing()+C),this.mousePitch){const P=this.mousePitch.mousemoveWindow(c,f),k=P&&P.pitchDelta;k&&_.setPitch(_.getPitch()+k)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){H(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),Y(this.element,c)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,Y(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ce(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=ce(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const mv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},gv={maxWidth:100,unit:"metric"};function vv(g,c,f){const _=ah(c),b=_/c,C={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=g*b+"px",this._container.innerHTML=`${_}&nbsp;${C}`})}function ah(g){const c=Math.pow(10,`${Math.floor(g)}`.length-1);let f=g/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(_){const b=Math.pow(10,Math.ceil(-Math.log(_)/Math.LN10));return Math.round(_*b)/b}(f),c*f}const gu={version:o.version,supported:y,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends lv{constructor(g){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(g=o.extend({},fv,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(g.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new nn(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._useWebGL2=g.useWebGL2,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._optimizeForTerrain=g.optimizeForTerrain,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new mu,this._domRenderTaskQueue=new mu,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},hv,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new dv(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,typeof g.container=="string"){if(this._container=o.window.document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new av(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this._hash=g.hash&&new Zg(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),g.attributionControl&&this.addControl(new sp({customAttribution:g.customAttribution})),this._logoControl=new ap,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(g,c){if(c===void 0&&(c=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=g.onAdd(this);this._controls.push(g);const _=this._controlPositions[c];return c.indexOf("bottom")!==-1?_.insertBefore(f,_.firstChild):_.appendChild(f),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(g);return c>-1&&this._controls.splice(c,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.Event("movestart",g)).fire(new o.Event("move",g)),this.fire(new o.Event("resize",g)),c&&this.fire(new o.Event("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(o.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?o.window.navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(c=>c==="auto"?o.window.navigator.language:c):g}setLanguage(g){const c=this._parseLanguage(g);if(!this.style||c===this._language)return this;this._language=c,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,c=g.projection.name;let f;c==="globe"&&g.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(g.setMercatorFromTransition(),f=!0):c==="mercator"&&g.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(g.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,c){return this._updateProjection(g||c||{name:"mercator"})}_updateProjection(g){let c;if(c=g.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(g){return this.transform.locationPoint3D(o.LngLat.convert(g))}unproject(g){return this.transform.pointLocation3D(o.pointGeometry.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,c,f){if(g==="mouseenter"||g==="mouseover"){let _=!1;const b=P=>{const k=c.filter(N=>this.getLayer(N)),R=k.length?this.queryRenderedFeatures(P.point,{layers:k}):[];R.length?_||(_=!0,f.call(this,new Zi(g,this,P.originalEvent,{features:R}))):_=!1},C=()=>{_=!1};return{layers:new Set(c),listener:f,delegates:{mousemove:b,mouseout:C}}}if(g==="mouseleave"||g==="mouseout"){let _=!1;const b=P=>{const k=c.filter(R=>this.getLayer(R));(k.length?this.queryRenderedFeatures(P.point,{layers:k}):[]).length?_=!0:_&&(_=!1,f.call(this,new Zi(g,this,P.originalEvent)))},C=P=>{_&&(_=!1,f.call(this,new Zi(g,this,P.originalEvent)))};return{layers:new Set(c),listener:f,delegates:{mousemove:b,mouseout:C}}}{const _=b=>{const C=c.filter(k=>this.getLayer(k)),P=C.length?this.queryRenderedFeatures(b.point,{layers:C}):[];P.length&&(b.features=P,f.call(this,b),delete b.features)};return{layers:new Set(c),listener:f,delegates:{[g]:_}}}}on(g,c,f){if(f===void 0)return super.on(g,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(g,c,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(_);for(const b in _.delegates)this.on(b,_.delegates[b]);return this}once(g,c,f){if(f===void 0)return super.once(g,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(g,c,f);for(const b in _.delegates)this.once(b,_.delegates[b]);return this}off(g,c,f){if(f===void 0)return super.off(g,c);c=new Set(Array.isArray(c)?c:[c]);const _=(C,P)=>{if(C.size!==P.size)return!1;for(const k of C)if(!P.has(k))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[g]:void 0;return b&&(C=>{for(let P=0;P<C.length;P++){const k=C[P];if(k.listener===f&&_(k.layers,c)){for(const R in k.delegates)this.off(R,k.delegates[R]);return C.splice(P,1),this}}})(b),this}queryRenderedFeatures(g,c){return this.style?(c!==void 0||g===void 0||g instanceof o.pointGeometry||Array.isArray(g)||(c=g,g=void 0),this.style.queryRenderedFeatures(g=g||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(g,c){return this.style.querySourceFeatures(g,c)}setStyle(g,c){return(c=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(g,c))}_getUIString(g){const c=this._locale[g];if(c==null)throw new Error(`Missing UI string '${g}'`);return c}_updateStyle(g,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new ts(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ts(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,c){if(typeof g=="string"){const f=this._requestManager.normalizeStyleURL(g),_=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(_,(b,C)=>{b?this.fire(new o.ErrorEvent(b)):C&&this._updateDiff(C,c)})}else typeof g=="object"&&this._updateDiff(g,c)}_updateDiff(g,c){try{this.style.setState(g)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(g,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(g,c){return this._lazyInitEmptyStyle(),this.style.addSource(g,c),this._update(!0)}isSourceLoaded(g){return!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){const g=this.style&&this.style._sourceCaches;for(const c in g){const f=g[c]._tiles;for(const _ in f){const b=f[_];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(g,c,f){this._lazyInitEmptyStyle(),this.style.addSourceType(g,c,f)}removeSource(g){return this.style.removeSource(g),this._updateTerrain(),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,c,{pixelRatio:f=1,sdf:_=!1,stretchX:b,stretchY:C,content:P}={}){if(this._lazyInitEmptyStyle(),c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap){const{width:k,height:R,data:N}=o.exported.getImageData(c);this.style.addImage(g,{data:new o.RGBAImage({width:k,height:R},N),pixelRatio:f,stretchX:b,stretchY:C,content:P,sdf:_,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:R}=c,N=c;this.style.addImage(g,{data:new o.RGBAImage({width:k,height:R},new Uint8Array(N.data)),pixelRatio:f,stretchX:b,stretchY:C,content:P,sdf:_,version:0,userImage:N}),N.onAdd&&N.onAdd(this,g)}}updateImage(g,c){const f=this.style.getImage(g);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap?o.exported.getImageData(c):c,{width:b,height:C}=_;b!==void 0&&C!==void 0?b===f.data.width&&C===f.data.height?(f.data.replace(_.data,!(c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap)),this.style.updateImage(g,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${C})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,c){o.getImage(this._requestManager.transformRequest(g,o.ResourceType.Image),(f,_)=>{c(f,_ instanceof o.window.HTMLImageElement?o.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(g,c){return this._lazyInitEmptyStyle(),this.style.addLayer(g,c),this._update(!0)}moveLayer(g,c){return this.style.moveLayer(g,c),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,c,f){return this.style.setLayerZoomRange(g,c,f),this._update(!0)}setFilter(g,c,f={}){return this.style.setFilter(g,c,f),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,c,f,_={}){return this.style.setPaintProperty(g,c,f,_),this._update(!0)}getPaintProperty(g,c){return this.style.getPaintProperty(g,c)}setLayoutProperty(g,c,f,_={}){return this.style.setLayoutProperty(g,c,f,_),this._update(!0)}getLayoutProperty(g,c){return this.style.getLayoutProperty(g,c)}setLight(g,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(g),this.transform):0}setFeatureState(g,c){return this.style.setFeatureState(g,c),this._update()}removeFeatureState(g,c){return this.style.removeFeatureState(g,c),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let f,_,b,C=this._container;for(;C&&(!_||!b);){const P=o.window.getComputedStyle(C).transform;P&&P!=="none"&&(f=P.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(_=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(b=f[3])),C=C.parentElement}this._containerWidth=_?Math.abs(g/_):g,this._containerHeight=b?Math.abs(c/b):c}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=A("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=A("div","mapboxgl-canvas-container",g);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=A("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=A("div","mapboxgl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=A("div",`mapboxgl-ctrl-${b}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,c){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(g),this._canvas.height=f*Math.ceil(c),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${c}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const c=this._markers.indexOf(g);c!==-1&&this._markers.splice(c,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const c=this._popups.indexOf(g);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const g=o.extend({},y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._useWebGL2&&this._canvas.getContext("webgl2",g),f=c||this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);f?(this._useWebGL2&&!c&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(f,!0),this.painter=new iu(f,this.transform,!!c),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(f)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let c;const f=this.painter.context.extTimerQuery,_=o.exported.now();if(this.listens("gpu-timing-frame")&&(c=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,R=this.transform.pitch,N=o.exported.now(),$=new o.EvaluationParameters(k,{now:N,fadeDuration:b,pitch:R,transition:this.style.getTransition()});this.style.update($)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const k=o.exported.now()-_;f.endQueryEXT(f.TIME_ELAPSED_EXT,c),setTimeout(()=>{const R=f.getQueryObjectEXT(c,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(c),this.fire(new o.Event("gpu-timing-frame",{cpuTime:k,gpuTime:R})),o.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:R}})},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const R=this.painter.queryGpuTimers(k);this.fire(new o.Event("gpu-timing-layer",{layerTimes:R}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const R=this.painter.queryGpuTimeDeferredRender(k);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:R}))},50)}const P=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(P||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(C=this._updateAverageElevation(_,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const R=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:R})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||P||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const c of this._markers)g&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!g||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(g,c=!1){const f=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((c||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const _=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),C=!1;this.transform.elevation&&(C=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=g;const P=Math.abs(_-b);if(P>1){if(this._isInitialLoad||C)return this._averageElevation.jumpTo(b),f(b);this._averageElevation.easeTo(b,g,300)}else if(P>1e-4)return this._averageElevation.jumpTo(b),f(b)}return!!this._averageElevation.isEasing(g)&&f(this._averageElevation.getValue(g))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===o.AUTH_ERR_MSG||g.status===401)){const c=this.painter.context.gl;o.storeAuthState(c,!1),this._logoControl instanceof ap&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const f=this.painter.context.gl,_=f.createFramebuffer();function b(C){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,C,0);const P=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,P),P}return f.bindFramebuffer(f.FRAMEBUFFER,_),this._canvasPixelComparison(b(g),c.canvasCopies.map(b),c.timeStamps)}_canvasPixelComparison(g,c,f){let _=f[1]-f[0];const b=g.length/4;for(let C=0;C<c.length;C++){const P=c[C];let k=0;for(let R=0;R<P.length;R+=4)P[R]===g[R]&&P[R+1]===g[R+1]&&P[R+2]===g[R+2]&&P[R+3]===g[R+3]&&(k+=1);_+=(f[C+2]-f[C+1])*(1-k/b)}return _}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=o.exported.frame(c=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(c)}))}_preloadTiles(g){const c=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(c,(f,_)=>f._preloadTiles(g,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,c){o.setCacheLimits(g,c)}get version(){return o.version}},NavigationControl:class{constructor(g){this.options=o.extend({},cp,g),this._container=A("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),A("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),A("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:c}):f.resetNorth({},{originalEvent:c}))}),this._compassIcon=A("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const c=g.getZoom(),f=c===g.getMaxZoom(),_=c===g.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pv(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,c){const f=A("button",g,this._container);return f.type="button",f.addEventListener("click",c),f}_setButtonTitle(g,c){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${c}`);g.setAttribute("aria-label",f),g.firstElementChild&&g.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(g){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},mv,g),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ns(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=A("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const c=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,g(f)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(f=>c(f.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(g){const c=this._map.getMaxBounds(),f=g.coords;return!!c&&(f.longitude<c.getWest()||f.longitude>c.getEast()||f.latitude<c.getSouth()||f.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",g)),this._finish()}}_updateCamera(g){const c=new o.LngLat(g.coords.longitude,g.coords.latitude),f=g.coords.accuracy,_=this._map.getBearing(),b=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(f),b,{geolocateSource:!0})}_updateMarker(g){if(g){const c=new o.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,c=o.mercatorZfromAltitude(1,g._center.lat)*g.worldSize,f=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=A("button","mapboxgl-ctrl-geolocate",this._container),A("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A("div","mapboxgl-user-location"),this._dotElement.appendChild(A("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(A("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new sh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=A("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:sp,ScaleControl:class{constructor(g){this.options=o.extend({},gv,g),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=vv.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,c=this._map,f=c._containerHeight/2,_=c._containerWidth/2-g/2,b=c.unproject([_,f]),C=c.unproject([_+g,f]),P=b.distanceTo(C);if(this.options.unit==="imperial"){const k=3.2808*P;k>5280?this._setScale(g,k/5280,"mile"):this._setScale(g,k,"foot")}else this.options.unit==="nautical"?this._setScale(g,P/1852,"nautical-mile"):P>=1e3?this._setScale(g,P/1e3,"kilometer"):this._setScale(g,P,"meter")}_setScale(g,c,f){const _=ah(c),b=_/c;this._map._requestDomTask(()=>{this._container.style.width=g*b+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(_):`${_}&nbsp;nm`})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=A("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof o.window.HTMLElement?this._container=g.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=A("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=A("button","mapboxgl-ctrl-fullscreen",this._controlContainer);A("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(g){super(),this.options=o.extend(Object.create(cv),g),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=o.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(o.window.document.createTextNode(g))}setHTML(g){const c=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let _;for(f.innerHTML=g;_=f.firstChild,_;)c.appendChild(_);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=A("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(g),this.options.closeButton){const f=this._closeButton=A("button","mapboxgl-popup-close-button",c);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let c;return this._classList.delete(g)?c=!1:(this._classList.add(g),c=!0),this._updateClassList(),c}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const c=this._map,f=this._container,_=this._pos;if(!c||!f||!_)return"bottom";const b=f.offsetWidth,C=f.offsetHeight,P=_.x<b/2,k=_.x>c.transform.width-b/2;if(_.y+g<C)return P?"top-left":k?"top-right":"top";if(_.y>c.transform.height-C){if(P)return"bottom-left";if(k)return"bottom-right"}return P?"left":k?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),g.className=c.join(" ")}_update(g){const c=this._map,f=this._content;if(!c||!this._lngLat&&!this._trackPointer||!f)return;let _=this._container;if(_||(_=this._container=A("div","mapboxgl-popup",c.getContainer()),this._tip=A("div","mapboxgl-popup-tip",_),_.appendChild(f)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=oh(this._lngLat,this._pos,c.transform)),!this._trackPointer||g){const b=this._pos=this._trackPointer&&g?g:c.project(this._lngLat),C=lp(this.options.offset),P=this._anchor=this._getAnchor(C.y),k=lp(this.options.offset,P),R=b.add(k).round();c._requestDomTask(()=>{this._container&&P&&(this._container.style.transform=`${Xl[P]} translate(${R.x}px,${R.y}px)`)})}if(!this._marker&&c._showingGlobe()){const b=o.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(uv);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:sh,Style:ts,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Zd,Evented:o.Evented,config:o.config,prewarm:function(){yn().acquire(pt)},clearPrewarmedResources:function(){const g=en;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(pt),en=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(g){o.config.ACCESS_TOKEN=g},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(g){o.config.API_URL=g},get workerCount(){return kt.workerCount},set workerCount(g){kt.workerCount=g},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){o.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){o.clearTileCache(g)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return gu});var d=s;return d})})(qz);var tX=qz.exports;const gc=mg(tX),nX=Tn("p",{style:{"margin-bottom":"20px"}},"Nella mappa  indicato il posizionamento di ciascuna stazione di rilevamento.",-1),rX=Tn("div",{class:"stations-map"},[Tn("div",{id:"map",style:{width:"100%",height:"400px","border-radius":"15px",margin:"0 auto"}})],-1),iX=pn({__name:"StationsMap",setup(e){let t=null;const n=He(null),i=(s,u)=>{gc.accessToken="pk.eyJ1IjoiZ2lnaWdub21hbGF2eSIsImEiOiJjbGhuOHNxM2wxanh0M25xcDkyMjNza2xoIn0.cXhauSeh8jr2W3JXgWkN9g",s=new gc.Map({container:"map",style:"mapbox://styles/mapbox/outdoors-v12",center:[9.19001,45.464177],zoom:11}),s.addControl(new gc.FullscreenControl,"top-left"),s.addControl(new gc.GeolocateControl,"top-left"),s.addControl(new gc.NavigationControl,"top-right"),s.addControl(new gc.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),u.forEach(d=>{const o=new gc.Popup({offset:25}).setHTML(`<h1 style="color: green; font-size: 14px;font-weight: 600;">Stazione ${d._id}</h1><p>Nome: ${d.nome}</p><p> Inquinanti: ${d.inquinanti}</p>`);new gc.Marker({color:"#18a058"}).setLngLat([parseFloat(d.LONG_X_4326).toFixed(5),parseFloat(d.LAT_Y_4326).toFixed(5)]).setPopup(o).addTo(s)})};return Si(async()=>{n.value=await Gz(),await i(t,n.value)}),(s,u)=>(si(),Fs(Vr,null,[tr(cr(vg),{style:{"margin-top":"50px"}},{default:Gr(()=>[Ui("Posizionamento delle stazioni attive")]),_:1}),nX,rX],64))}});/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function xg(e){return e+.5|0}const wc=(e,t,n)=>Math.max(Math.min(e,n),t);function cm(e){return wc(xg(e*2.55),0,255)}function Ac(e){return wc(xg(e*255),0,255)}function yl(e){return wc(xg(e/2.55)/100,0,1)}function AP(e){return wc(xg(e*100),0,100)}const zs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vw=[..."0123456789ABCDEF"],oX=e=>vw[e&15],sX=e=>vw[(e&240)>>4]+vw[e&15],S_=e=>(e&240)>>4===(e&15),aX=e=>S_(e.r)&&S_(e.g)&&S_(e.b)&&S_(e.a);function lX(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&zs[e[1]]*17,g:255&zs[e[2]]*17,b:255&zs[e[3]]*17,a:t===5?zs[e[4]]*17:255}:(t===7||t===9)&&(n={r:zs[e[1]]<<4|zs[e[2]],g:zs[e[3]]<<4|zs[e[4]],b:zs[e[5]]<<4|zs[e[6]],a:t===9?zs[e[7]]<<4|zs[e[8]]:255})),n}const cX=(e,t)=>e<255?t(e):"";function uX(e){var t=aX(e)?oX:sX;return e?"#"+t(e.r)+t(e.g)+t(e.b)+cX(e.a,t):void 0}const dX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yz(e,t,n){const i=t*Math.min(n,1-n),s=(u,d=(u+e/30)%12)=>n-i*Math.max(Math.min(d-3,9-d,1),-1);return[s(0),s(8),s(4)]}function hX(e,t,n){const i=(s,u=(s+e/60)%6)=>n-n*t*Math.max(Math.min(u,4-u,1),0);return[i(5),i(3),i(1)]}function fX(e,t,n){const i=Yz(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function pX(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function KT(e){const n=e.r/255,i=e.g/255,s=e.b/255,u=Math.max(n,i,s),d=Math.min(n,i,s),o=(u+d)/2;let m,y,w;return u!==d&&(w=u-d,y=o>.5?w/(2-u-d):w/(u+d),m=pX(n,i,s,w,u),m=m*60+.5),[m|0,y||0,o]}function JT(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Ac)}function QT(e,t,n){return JT(Yz,e,t,n)}function mX(e,t,n){return JT(fX,e,t,n)}function gX(e,t,n){return JT(hX,e,t,n)}function Xz(e){return(e%360+360)%360}function vX(e){const t=dX.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?cm(+t[5]):Ac(+t[5]));const s=Xz(+t[2]),u=+t[3]/100,d=+t[4]/100;return t[1]==="hwb"?i=mX(s,u,d):t[1]==="hsv"?i=gX(s,u,d):i=QT(s,u,d),{r:i[0],g:i[1],b:i[2],a:n}}function _X(e,t){var n=KT(e);n[0]=Xz(n[0]+t),n=QT(n),e.r=n[0],e.g=n[1],e.b=n[2]}function yX(e){if(!e)return;const t=KT(e),n=t[0],i=AP(t[1]),s=AP(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${yl(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const kP={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},DP={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xX(){const e={},t=Object.keys(DP),n=Object.keys(kP);let i,s,u,d,o;for(i=0;i<t.length;i++){for(d=o=t[i],s=0;s<n.length;s++)u=n[s],o=o.replace(u,kP[u]);u=parseInt(DP[d],16),e[o]=[u>>16&255,u>>8&255,u&255]}return e}let E_;function bX(e){E_||(E_=xX(),E_.transparent=[0,0,0,0]);const t=E_[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const wX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function TX(e){const t=wX.exec(e);let n=255,i,s,u;if(t){if(t[7]!==i){const d=+t[7];n=t[8]?cm(d):wc(d*255,0,255)}return i=+t[1],s=+t[3],u=+t[5],i=255&(t[2]?cm(i):wc(i,0,255)),s=255&(t[4]?cm(s):wc(s,0,255)),u=255&(t[6]?cm(u):wc(u,0,255)),{r:i,g:s,b:u,a:n}}}function CX(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${yl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ib=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Lh=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function SX(e,t,n){const i=Lh(yl(e.r)),s=Lh(yl(e.g)),u=Lh(yl(e.b));return{r:Ac(Ib(i+n*(Lh(yl(t.r))-i))),g:Ac(Ib(s+n*(Lh(yl(t.g))-s))),b:Ac(Ib(u+n*(Lh(yl(t.b))-u))),a:e.a+n*(t.a-e.a)}}function M_(e,t,n){if(e){let i=KT(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=QT(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Kz(e,t){return e&&Object.assign(t||{},e)}function IP(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ac(e[3]))):(t=Kz(e,{r:0,g:0,b:0,a:1}),t.a=Ac(t.a)),t}function EX(e){return e.charAt(0)==="r"?TX(e):vX(e)}class Jm{constructor(t){if(t instanceof Jm)return t;const n=typeof t;let i;n==="object"?i=IP(t):n==="string"&&(i=lX(t)||bX(t)||EX(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Kz(this._rgb);return t&&(t.a=yl(t.a)),t}set rgb(t){this._rgb=IP(t)}rgbString(){return this._valid?CX(this._rgb):void 0}hexString(){return this._valid?uX(this._rgb):void 0}hslString(){return this._valid?yX(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let u;const d=n===u?.5:n,o=2*d-1,m=i.a-s.a,y=((o*m===-1?o:(o+m)/(1+o*m))+1)/2;u=1-y,i.r=255&y*i.r+u*s.r+.5,i.g=255&y*i.g+u*s.g+.5,i.b=255&y*i.b+u*s.b+.5,i.a=d*i.a+(1-d)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=SX(this._rgb,t._rgb,n)),this}clone(){return new Jm(this.rgb)}alpha(t){return this._rgb.a=Ac(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=xg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return M_(this._rgb,2,t),this}darken(t){return M_(this._rgb,2,-t),this}saturate(t){return M_(this._rgb,1,t),this}desaturate(t){return M_(this._rgb,1,-t),this}rotate(t){return _X(this._rgb,t),this}}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function hl(){}const MX=(()=>{let e=0;return()=>e++})();function Br(e){return e===null||typeof e>"u"}function _i(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Cr(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Li(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function _s(e,t){return Li(e)?e:t}function ir(e,t){return typeof e>"u"?t:e}const PX=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Jz=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ci(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function ti(e,t,n,i){let s,u,d;if(_i(e))if(u=e.length,i)for(s=u-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<u;s++)t.call(n,e[s],s);else if(Cr(e))for(d=Object.keys(e),u=d.length,s=0;s<u;s++)t.call(n,e[d[s]],d[s])}function Iy(e,t){let n,i,s,u;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],u=t[n],s.datasetIndex!==u.datasetIndex||s.index!==u.index)return!1;return!0}function zy(e){if(_i(e))return e.map(zy);if(Cr(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=zy(e[n[s]]);return t}return e}function Qz(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function AX(e,t,n,i){if(!Qz(e))return;const s=t[e],u=n[e];Cr(s)&&Cr(u)?Qm(s,u,i):t[e]=zy(u)}function Qm(e,t,n){const i=_i(t)?t:[t],s=i.length;if(!Cr(e))return e;n=n||{};const u=n.merger||AX;let d;for(let o=0;o<s;++o){if(d=i[o],!Cr(d))continue;const m=Object.keys(d);for(let y=0,w=m.length;y<w;++y)u(m[y],e,d,n)}return e}function Sm(e,t){return Qm(e,t,{merger:kX})}function kX(e,t,n){if(!Qz(e))return;const i=t[e],s=n[e];Cr(i)&&Cr(s)?Sm(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=zy(s))}const zP={"":e=>e,x:e=>e.x,y:e=>e.y};function DX(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function IX(e){const t=DX(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Rc(e,t){return(zP[t]||(zP[t]=IX(t)))(e)}function eC(e){return e.charAt(0).toUpperCase()+e.slice(1)}const eg=e=>typeof e<"u",Oc=e=>typeof e=="function",RP=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function zX(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ci=Math.PI,yi=2*Ci,RX=yi+Ci,Ry=Number.POSITIVE_INFINITY,OX=Ci/180,Bi=Ci/2,Bu=Ci/4,OP=Ci*2/3,Tc=Math.log10,Ua=Math.sign;function Em(e,t,n){return Math.abs(e-t)<n}function LP(e){const t=Math.round(e);e=Em(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Tc(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function LX(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,u)=>s-u).pop(),t}function df(e){return!isNaN(parseFloat(e))&&isFinite(e)}function BX(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function eR(e,t,n){let i,s,u;for(i=0,s=e.length;i<s;i++)u=e[i][n],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function sa(e){return e*(Ci/180)}function tC(e){return e*(180/Ci)}function BP(e){if(!Li(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function tR(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let u=Math.atan2(i,n);return u<-.5*Ci&&(u+=yi),{angle:u,distance:s}}function _w(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function FX(e,t){return(e-t+RX)%yi-Ci}function ys(e){return(e%yi+yi)%yi}function tg(e,t,n,i){const s=ys(e),u=ys(t),d=ys(n),o=ys(u-s),m=ys(d-s),y=ys(s-u),w=ys(s-d);return s===u||s===d||i&&u===d||o>m&&y<w}function _o(e,t,n){return Math.max(t,Math.min(n,e))}function $X(e){return _o(e,-32768,32767)}function bl(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function nC(e,t,n){n=n||(d=>e[d]<t);let i=e.length-1,s=0,u;for(;i-s>1;)u=s+i>>1,n(u)?s=u:i=u;return{lo:s,hi:i}}const wl=(e,t,n,i)=>nC(e,n,i?s=>{const u=e[s][t];return u<n||u===n&&e[s+1][t]===n}:s=>e[s][t]<n),NX=(e,t,n)=>nC(e,n,i=>e[i][t]>=n);function UX(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const nR=["push","pop","shift","splice","unshift"];function VX(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),nR.forEach(n=>{const i="_onData"+eC(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...u){const d=s.apply(this,u);return e._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...u)}),d}})})}function FP(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(nR.forEach(u=>{delete e[u]}),delete e._chartjs)}function rR(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const iR=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function oR(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,iR.call(window,()=>{i=!1,e.apply(t,n)}))}}function jX(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const rC=e=>e==="start"?"left":e==="end"?"right":"center",Oo=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,WX=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function sR(e,t,n){const i=t.length;let s=0,u=i;if(e._sorted){const{iScale:d,_parsed:o}=e,m=d.axis,{min:y,max:w,minDefined:S,maxDefined:A}=d.getUserBounds();S&&(s=_o(Math.min(wl(o,d.axis,y).lo,n?i:wl(t,m,d.getPixelForValue(y)).lo),0,i-1)),A?u=_o(Math.max(wl(o,d.axis,w,!0).hi+1,n?0:wl(t,m,d.getPixelForValue(w),!0).hi+1),s,i)-s:u=i-s}return{start:s,count:u}}function aR(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const u=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),u}const P_=e=>e===0||e===1,$P=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*yi/n)),NP=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*yi/n)+1,Mm={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Bi)+1,easeOutSine:e=>Math.sin(e*Bi),easeInOutSine:e=>-.5*(Math.cos(Ci*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>P_(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>P_(e)?e:$P(e,.075,.3),easeOutElastic:e=>P_(e)?e:NP(e,.075,.3),easeInOutElastic(e){return P_(e)?e:e<.5?.5*$P(e*2,.1125,.45):.5+.5*NP(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Mm.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Mm.easeInBounce(e*2)*.5:Mm.easeOutBounce(e*2-1)*.5+.5};function iC(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function UP(e){return iC(e)?e:new Jm(e)}function zb(e){return iC(e)?e:new Jm(e).saturate(.5).darken(.1).hexString()}const HX=["x","y","borderWidth","radius","tension"],GX=["color","borderColor","backgroundColor"];function qX(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:GX},numbers:{type:"number",properties:HX}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ZX(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const VP=new Map;function YX(e,t){t=t||{};const n=e+JSON.stringify(t);let i=VP.get(n);return i||(i=new Intl.NumberFormat(e,t),VP.set(n,i)),i}function bg(e,t,n){return YX(t,n).format(e)}const lR={values(e){return _i(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,u=e;if(n.length>1){const y=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(y<1e-4||y>1e15)&&(s="scientific"),u=XX(e,n)}const d=Tc(Math.abs(u)),o=isNaN(d)?1:Math.max(Math.min(-1*Math.floor(d),20),0),m={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(m,this.options.ticks.format),bg(e,i,m)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Tc(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?lR.numeric.call(this,e,t,n):""}};function XX(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var m0={formatters:lR};function KX(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:m0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const hd=Object.create(null),yw=Object.create(null);function Pm(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const u=n[i];e=e[u]||(e[u]=Object.create(null))}return e}function Rb(e,t,n){return typeof t=="string"?Qm(Pm(e,t),n):Qm(Pm(e,""),t)}class JX{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>zb(s.backgroundColor),this.hoverBorderColor=(i,s)=>zb(s.borderColor),this.hoverColor=(i,s)=>zb(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Rb(this,t,n)}get(t){return Pm(this,t)}describe(t,n){return Rb(yw,t,n)}override(t,n){return Rb(hd,t,n)}route(t,n,i,s){const u=Pm(this,t),d=Pm(this,i),o="_"+n;Object.defineProperties(u,{[o]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const m=this[o],y=d[s];return Cr(m)?Object.assign({},y,m):ir(m,y)},set(m){this[o]=m}}})}apply(t){t.forEach(n=>n(this))}}var Fi=new JX({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qX,ZX,KX]);function QX(e){return!e||Br(e.size)||Br(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Oy(e,t,n,i,s){let u=t[s];return u||(u=t[s]=e.measureText(s).width,n.push(s)),u>i&&(i=u),i}function eK(e,t,n,i){i=i||{};let s=i.data=i.data||{},u=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},u=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let d=0;const o=n.length;let m,y,w,S,A;for(m=0;m<o;m++)if(S=n[m],S!=null&&!_i(S))d=Oy(e,s,u,d,S);else if(_i(S))for(y=0,w=S.length;y<w;y++)A=S[y],A!=null&&!_i(A)&&(d=Oy(e,s,u,d,A));e.restore();const I=u.length/2;if(I>n.length){for(m=0;m<I;m++)delete s[u[m]];u.splice(0,I)}return d}function Fu(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function jP(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function xw(e,t,n,i){cR(e,t,n,i,null)}function cR(e,t,n,i,s){let u,d,o,m,y,w,S,A;const I=t.pointStyle,z=t.rotation,U=t.radius;let j=(z||0)*OX;if(I&&typeof I=="object"&&(u=I.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(j),e.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),e.restore();return}if(!(isNaN(U)||U<=0)){switch(e.beginPath(),I){default:s?e.ellipse(n,i,s/2,U,0,0,yi):e.arc(n,i,U,0,yi),e.closePath();break;case"triangle":w=s?s/2:U,e.moveTo(n+Math.sin(j)*w,i-Math.cos(j)*U),j+=OP,e.lineTo(n+Math.sin(j)*w,i-Math.cos(j)*U),j+=OP,e.lineTo(n+Math.sin(j)*w,i-Math.cos(j)*U),e.closePath();break;case"rectRounded":y=U*.516,m=U-y,d=Math.cos(j+Bu)*m,S=Math.cos(j+Bu)*(s?s/2-y:m),o=Math.sin(j+Bu)*m,A=Math.sin(j+Bu)*(s?s/2-y:m),e.arc(n-S,i-o,y,j-Ci,j-Bi),e.arc(n+A,i-d,y,j-Bi,j),e.arc(n+S,i+o,y,j,j+Bi),e.arc(n-A,i+d,y,j+Bi,j+Ci),e.closePath();break;case"rect":if(!z){m=Math.SQRT1_2*U,w=s?s/2:m,e.rect(n-w,i-m,2*w,2*m);break}j+=Bu;case"rectRot":S=Math.cos(j)*(s?s/2:U),d=Math.cos(j)*U,o=Math.sin(j)*U,A=Math.sin(j)*(s?s/2:U),e.moveTo(n-S,i-o),e.lineTo(n+A,i-d),e.lineTo(n+S,i+o),e.lineTo(n-A,i+d),e.closePath();break;case"crossRot":j+=Bu;case"cross":S=Math.cos(j)*(s?s/2:U),d=Math.cos(j)*U,o=Math.sin(j)*U,A=Math.sin(j)*(s?s/2:U),e.moveTo(n-S,i-o),e.lineTo(n+S,i+o),e.moveTo(n+A,i-d),e.lineTo(n-A,i+d);break;case"star":S=Math.cos(j)*(s?s/2:U),d=Math.cos(j)*U,o=Math.sin(j)*U,A=Math.sin(j)*(s?s/2:U),e.moveTo(n-S,i-o),e.lineTo(n+S,i+o),e.moveTo(n+A,i-d),e.lineTo(n-A,i+d),j+=Bu,S=Math.cos(j)*(s?s/2:U),d=Math.cos(j)*U,o=Math.sin(j)*U,A=Math.sin(j)*(s?s/2:U),e.moveTo(n-S,i-o),e.lineTo(n+S,i+o),e.moveTo(n+A,i-d),e.lineTo(n-A,i+d);break;case"line":d=s?s/2:Math.cos(j)*U,o=Math.sin(j)*U,e.moveTo(n-d,i-o),e.lineTo(n+d,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(j)*(s?s/2:U),i+Math.sin(j)*U);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Tl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function g0(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function v0(e){e.restore()}function tK(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const u=(t.x+n.x)/2;e.lineTo(u,t.y),e.lineTo(u,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function nK(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function rK(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Br(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function iK(e,t,n,i,s){if(s.strikethrough||s.underline){const u=e.measureText(i),d=t-u.actualBoundingBoxLeft,o=t+u.actualBoundingBoxRight,m=n-u.actualBoundingBoxAscent,y=n+u.actualBoundingBoxDescent,w=s.strikethrough?(m+y)/2:y;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(d,w),e.lineTo(o,w),e.stroke()}}function oK(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function fd(e,t,n,i,s,u={}){const d=_i(t)?t:[t],o=u.strokeWidth>0&&u.strokeColor!=="";let m,y;for(e.save(),e.font=s.string,rK(e,u),m=0;m<d.length;++m)y=d[m],u.backdrop&&oK(e,u.backdrop),o&&(u.strokeColor&&(e.strokeStyle=u.strokeColor),Br(u.strokeWidth)||(e.lineWidth=u.strokeWidth),e.strokeText(y,n,i,u.maxWidth)),e.fillText(y,n,i,u.maxWidth),iK(e,n,i,y,u),i+=Number(s.lineHeight);e.restore()}function ng(e,t){const{x:n,y:i,w:s,h:u,radius:d}=t;e.arc(n+d.topLeft,i+d.topLeft,d.topLeft,-Bi,Ci,!0),e.lineTo(n,i+u-d.bottomLeft),e.arc(n+d.bottomLeft,i+u-d.bottomLeft,d.bottomLeft,Ci,Bi,!0),e.lineTo(n+s-d.bottomRight,i+u),e.arc(n+s-d.bottomRight,i+u-d.bottomRight,d.bottomRight,Bi,0,!0),e.lineTo(n+s,i+d.topRight),e.arc(n+s-d.topRight,i+d.topRight,d.topRight,0,-Bi,!0),e.lineTo(n+d.topLeft,i)}const sK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lK(e,t){const n=(""+e).match(sK);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const cK=e=>+e||0;function oC(e,t){const n={},i=Cr(t),s=i?Object.keys(t):t,u=Cr(e)?i?d=>ir(e[d],e[t[d]]):d=>e[d]:()=>e;for(const d of s)n[d]=cK(u(d));return n}function uR(e){return oC(e,{top:"y",right:"x",bottom:"y",left:"x"})}function id(e){return oC(e,["topLeft","topRight","bottomLeft","bottomRight"])}function No(e){const t=uR(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function oo(e,t){e=e||{},t=t||Fi.font;let n=ir(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=ir(e.style,t.style);i&&!(""+i).match(aK)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ir(e.family,t.family),lineHeight:lK(ir(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:ir(e.weight,t.weight),string:""};return s.string=QX(s),s}function um(e,t,n,i){let s=!0,u,d,o;for(u=0,d=e.length;u<d;++u)if(o=e[u],o!==void 0&&(t!==void 0&&typeof o=="function"&&(o=o(t),s=!1),n!==void 0&&_i(o)&&(o=o[n%o.length],s=!1),o!==void 0))return i&&!s&&(i.cacheable=!1),o}function uK(e,t,n){const{min:i,max:s}=e,u=Jz(t,(s-i)/2),d=(o,m)=>n&&o===0?0:o+m;return{min:d(i,-Math.abs(u)),max:d(s,u)}}function Nc(e,t){return Object.assign(Object.create(e),t)}function sC(e,t=[""],n,i,s=()=>e[0]){const u=n||e;typeof i>"u"&&(i=pR("_fallback",e));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:u,_fallback:i,_getTarget:s,override:o=>sC([o,...e],t,u,i)};return new Proxy(d,{deleteProperty(o,m){return delete o[m],delete o._keys,delete e[0][m],!0},get(o,m){return hR(o,m,()=>_K(m,t,e,o))},getOwnPropertyDescriptor(o,m){return Reflect.getOwnPropertyDescriptor(o._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,m){return HP(o).includes(m)},ownKeys(o){return HP(o)},set(o,m,y){const w=o._storage||(o._storage=s());return o[m]=w[m]=y,delete o._keys,!0}})}function hf(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:dR(e,i),setContext:u=>hf(e,u,n,i),override:u=>hf(e.override(u),t,n,i)};return new Proxy(s,{deleteProperty(u,d){return delete u[d],delete e[d],!0},get(u,d,o){return hR(u,d,()=>hK(u,d,o))},getOwnPropertyDescriptor(u,d){return u._descriptors.allKeys?Reflect.has(e,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,d)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(u,d){return Reflect.has(e,d)},ownKeys(){return Reflect.ownKeys(e)},set(u,d,o){return e[d]=o,delete u[d],!0}})}function dR(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Oc(n)?n:()=>n,isIndexable:Oc(i)?i:()=>i}}const dK=(e,t)=>e?e+eC(t):t,aC=(e,t)=>Cr(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function hR(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function hK(e,t,n){const{_proxy:i,_context:s,_subProxy:u,_descriptors:d}=e;let o=i[t];return Oc(o)&&d.isScriptable(t)&&(o=fK(t,o,e,n)),_i(o)&&o.length&&(o=pK(t,o,e,d.isIndexable)),aC(t,o)&&(o=hf(o,s,u&&u[t],d)),o}function fK(e,t,n,i){const{_proxy:s,_context:u,_subProxy:d,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let m=t(u,d||i);return o.delete(e),aC(e,m)&&(m=lC(s._scopes,s,e,m)),m}function pK(e,t,n,i){const{_proxy:s,_context:u,_subProxy:d,_descriptors:o}=n;if(typeof u.index<"u"&&i(e))return t[u.index%t.length];if(Cr(t[0])){const m=t,y=s._scopes.filter(w=>w!==m);t=[];for(const w of m){const S=lC(y,s,e,w);t.push(hf(S,u,d&&d[e],o))}}return t}function fR(e,t,n){return Oc(e)?e(t,n):e}const mK=(e,t)=>e===!0?t:typeof e=="string"?Rc(t,e):void 0;function gK(e,t,n,i,s){for(const u of t){const d=mK(n,u);if(d){e.add(d);const o=fR(d._fallback,n,s);if(typeof o<"u"&&o!==n&&o!==i)return o}else if(d===!1&&typeof i<"u"&&n!==i)return null}return!1}function lC(e,t,n,i){const s=t._rootScopes,u=fR(t._fallback,n,i),d=[...e,...s],o=new Set;o.add(i);let m=WP(o,d,n,u||n,i);return m===null||typeof u<"u"&&u!==n&&(m=WP(o,d,u,m,i),m===null)?!1:sC(Array.from(o),[""],s,u,()=>vK(t,n,i))}function WP(e,t,n,i,s){for(;n;)n=gK(e,t,n,i,s);return n}function vK(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return _i(s)&&Cr(n)?n:s||{}}function _K(e,t,n,i){let s;for(const u of t)if(s=pR(dK(u,e),n),typeof s<"u")return aC(e,s)?lC(n,i,e,s):s}function pR(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function HP(e){let t=e._keys;return t||(t=e._keys=yK(e._scopes)),t}function yK(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function mR(e,t,n,i){const{iScale:s}=e,{key:u="r"}=this._parsing,d=new Array(i);let o,m,y,w;for(o=0,m=i;o<m;++o)y=o+n,w=t[y],d[o]={r:s.parse(Rc(w,u),y)};return d}const xK=Number.EPSILON||1e-14,ff=(e,t)=>t<e.length&&!e[t].skip&&e[t],gR=e=>e==="x"?"y":"x";function bK(e,t,n,i){const s=e.skip?t:e,u=t,d=n.skip?t:n,o=_w(u,s),m=_w(d,u);let y=o/(o+m),w=m/(o+m);y=isNaN(y)?0:y,w=isNaN(w)?0:w;const S=i*y,A=i*w;return{previous:{x:u.x-S*(d.x-s.x),y:u.y-S*(d.y-s.y)},next:{x:u.x+A*(d.x-s.x),y:u.y+A*(d.y-s.y)}}}function wK(e,t,n){const i=e.length;let s,u,d,o,m,y=ff(e,0);for(let w=0;w<i-1;++w)if(m=y,y=ff(e,w+1),!(!m||!y)){if(Em(t[w],0,xK)){n[w]=n[w+1]=0;continue}s=n[w]/t[w],u=n[w+1]/t[w],o=Math.pow(s,2)+Math.pow(u,2),!(o<=9)&&(d=3/Math.sqrt(o),n[w]=s*d*t[w],n[w+1]=u*d*t[w])}}function TK(e,t,n="x"){const i=gR(n),s=e.length;let u,d,o,m=ff(e,0);for(let y=0;y<s;++y){if(d=o,o=m,m=ff(e,y+1),!o)continue;const w=o[n],S=o[i];d&&(u=(w-d[n])/3,o[`cp1${n}`]=w-u,o[`cp1${i}`]=S-u*t[y]),m&&(u=(m[n]-w)/3,o[`cp2${n}`]=w+u,o[`cp2${i}`]=S+u*t[y])}}function CK(e,t="x"){const n=gR(t),i=e.length,s=Array(i).fill(0),u=Array(i);let d,o,m,y=ff(e,0);for(d=0;d<i;++d)if(o=m,m=y,y=ff(e,d+1),!!m){if(y){const w=y[t]-m[t];s[d]=w!==0?(y[n]-m[n])/w:0}u[d]=o?y?Ua(s[d-1])!==Ua(s[d])?0:(s[d-1]+s[d])/2:s[d-1]:s[d]}wK(e,s,u),TK(e,u,t)}function A_(e,t,n){return Math.max(Math.min(e,n),t)}function SK(e,t){let n,i,s,u,d,o=Tl(e[0],t);for(n=0,i=e.length;n<i;++n)d=u,u=o,o=n<i-1&&Tl(e[n+1],t),u&&(s=e[n],d&&(s.cp1x=A_(s.cp1x,t.left,t.right),s.cp1y=A_(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=A_(s.cp2x,t.left,t.right),s.cp2y=A_(s.cp2y,t.top,t.bottom)))}function EK(e,t,n,i,s){let u,d,o,m;if(t.spanGaps&&(e=e.filter(y=>!y.skip)),t.cubicInterpolationMode==="monotone")CK(e,s);else{let y=i?e[e.length-1]:e[0];for(u=0,d=e.length;u<d;++u)o=e[u],m=bK(y,o,e[Math.min(u+1,d-(i?0:1))%d],t.tension),o.cp1x=m.previous.x,o.cp1y=m.previous.y,o.cp2x=m.next.x,o.cp2y=m.next.y,y=o}t.capBezierPoints&&SK(e,n)}function vR(){return typeof window<"u"&&typeof document<"u"}function cC(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ly(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const _0=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function MK(e,t){return _0(e).getPropertyValue(t)}const PK=["top","right","bottom","left"];function od(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const u=PK[s];i[u]=parseFloat(e[t+"-"+u+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const AK=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function kK(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:u}=i;let d=!1,o,m;if(AK(s,u,e.target))o=s,m=u;else{const y=t.getBoundingClientRect();o=i.clientX-y.left,m=i.clientY-y.top,d=!0}return{x:o,y:m,box:d}}function ju(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=_0(n),u=s.boxSizing==="border-box",d=od(s,"padding"),o=od(s,"border","width"),{x:m,y,box:w}=kK(e,n),S=d.left+(w&&o.left),A=d.top+(w&&o.top);let{width:I,height:z}=t;return u&&(I-=d.width+o.width,z-=d.height+o.height),{x:Math.round((m-S)/I*n.width/i),y:Math.round((y-A)/z*n.height/i)}}function DK(e,t,n){let i,s;if(t===void 0||n===void 0){const u=cC(e);if(!u)t=e.clientWidth,n=e.clientHeight;else{const d=u.getBoundingClientRect(),o=_0(u),m=od(o,"border","width"),y=od(o,"padding");t=d.width-y.width-m.width,n=d.height-y.height-m.height,i=Ly(o.maxWidth,u,"clientWidth"),s=Ly(o.maxHeight,u,"clientHeight")}}return{width:t,height:n,maxWidth:i||Ry,maxHeight:s||Ry}}const k_=e=>Math.round(e*10)/10;function IK(e,t,n,i){const s=_0(e),u=od(s,"margin"),d=Ly(s.maxWidth,e,"clientWidth")||Ry,o=Ly(s.maxHeight,e,"clientHeight")||Ry,m=DK(e,t,n);let{width:y,height:w}=m;if(s.boxSizing==="content-box"){const A=od(s,"border","width"),I=od(s,"padding");y-=I.width+A.width,w-=I.height+A.height}return y=Math.max(0,y-u.width),w=Math.max(0,i?y/i:w-u.height),y=k_(Math.min(y,d,m.maxWidth)),w=k_(Math.min(w,o,m.maxHeight)),y&&!w&&(w=k_(y/2)),(t!==void 0||n!==void 0)&&i&&m.height&&w>m.height&&(w=m.height,y=k_(Math.floor(w*i))),{width:y,height:w}}function GP(e,t,n){const i=t||1,s=Math.floor(e.height*i),u=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const d=e.canvas;return d.style&&(n||!d.style.height&&!d.style.width)&&(d.style.height=`${e.height}px`,d.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||d.height!==s||d.width!==u?(e.currentDevicePixelRatio=i,d.height=s,d.width=u,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const zK=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function qP(e,t){const n=MK(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Wu(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function RK(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function OK(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},u={x:t.cp1x,y:t.cp1y},d=Wu(e,s,n),o=Wu(s,u,n),m=Wu(u,t,n),y=Wu(d,o,n),w=Wu(o,m,n);return Wu(y,w,n)}const LK=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},BK=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Gh(e,t,n){return e?LK(t,n):BK()}function _R(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function yR(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function xR(e){return e==="angle"?{between:tg,compare:FX,normalize:ys}:{between:bl,compare:(t,n)=>t-n,normalize:t=>t}}function ZP({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function FK(e,t,n){const{property:i,start:s,end:u}=n,{between:d,normalize:o}=xR(i),m=t.length;let{start:y,end:w,loop:S}=e,A,I;if(S){for(y+=m,w+=m,A=0,I=m;A<I&&d(o(t[y%m][i]),s,u);++A)y--,w--;y%=m,w%=m}return w<y&&(w+=m),{start:y,end:w,loop:S,style:e.style}}function bR(e,t,n){if(!n)return[e];const{property:i,start:s,end:u}=n,d=t.length,{compare:o,between:m,normalize:y}=xR(i),{start:w,end:S,loop:A,style:I}=FK(e,t,n),z=[];let U=!1,j=null,F,H,J;const Z=()=>m(s,J,F)&&o(s,J)!==0,Y=()=>o(u,F)===0||m(u,J,F),ce=()=>U||Z(),ee=()=>!U||Y();for(let de=w,ue=w;de<=S;++de)H=t[de%d],!H.skip&&(F=y(H[i]),F!==J&&(U=m(F,s,u),j===null&&ce()&&(j=o(F,s)===0?de:ue),j!==null&&ee()&&(z.push(ZP({start:j,end:de,loop:A,count:d,style:I})),j=null),ue=de,J=F));return j!==null&&z.push(ZP({start:j,end:S,loop:A,count:d,style:I})),z}function wR(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const u=bR(i[s],e.points,t);u.length&&n.push(...u)}return n}function $K(e,t,n,i){let s=0,u=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(u+=s);u>s&&e[u%t].skip;)u--;return u%=t,{start:s,end:u}}function NK(e,t,n,i){const s=e.length,u=[];let d=t,o=e[t],m;for(m=t+1;m<=n;++m){const y=e[m%s];y.skip||y.stop?o.skip||(i=!1,u.push({start:t%s,end:(m-1)%s,loop:i}),t=d=y.stop?m:null):(d=m,o.skip&&(t=m)),o=y}return d!==null&&u.push({start:t%s,end:d%s,loop:i}),u}function UK(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const u=!!e._loop,{start:d,end:o}=$K(n,s,u,i);if(i===!0)return YP(e,[{start:d,end:o,loop:u}],n,t);const m=o<d?o+s:o,y=!!e._fullLoop&&d===0&&o===s-1;return YP(e,NK(n,d,m,y),n,t)}function YP(e,t,n,i){return!i||!i.setContext||!n?t:VK(e,t,n,i)}function VK(e,t,n,i){const s=e._chart.getContext(),u=XP(e.options),{_datasetIndex:d,options:{spanGaps:o}}=e,m=n.length,y=[];let w=u,S=t[0].start,A=S;function I(z,U,j,F){const H=o?-1:1;if(z!==U){for(z+=m;n[z%m].skip;)z-=H;for(;n[U%m].skip;)U+=H;z%m!==U%m&&(y.push({start:z%m,end:U%m,loop:j,style:F}),w=F,S=U%m)}}for(const z of t){S=o?S:z.start;let U=n[S%m],j;for(A=S+1;A<=z.end;A++){const F=n[A%m];j=XP(i.setContext(Nc(s,{type:"segment",p0:U,p1:F,p0DataIndex:(A-1)%m,p1DataIndex:A%m,datasetIndex:d}))),jK(j,w)&&I(S,A-1,z.loop,w),U=F,w=j}S<A-1&&I(S,A-1,z.loop,w)}return y}function XP(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function jK(e,t){if(!t)return!1;const n=[],i=function(s,u){return iC(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(e,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class WK{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const u=n.listeners[s],d=n.duration;u.forEach(o=>o({chart:t,initial:n.initial,numSteps:d,currentStep:Math.min(i-n.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=iR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const u=i.items;let d=u.length-1,o=!1,m;for(;d>=0;--d)m=u[d],m._active?(m._total>i.duration&&(i.duration=m._total),m.tick(t),o=!0):(u[d]=u[u.length-1],u.pop());o&&(s.draw(),this._notify(s,i,t,"progress")),u.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=u.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var pl=new WK;const KP="transparent",HK={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=UP(e||KP),s=i.valid&&UP(t||KP);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class GK{constructor(t,n,i,s){const u=n[i];s=um([t.to,s,u,t.from]);const d=um([t.from,u,s]);this._active=!0,this._fn=t.fn||HK[t.type||typeof d],this._easing=Mm[t.easing]||Mm.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=d,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],u=i-this._start,d=this._duration-u;this._start=i,this._duration=Math.floor(Math.max(d,t.duration)),this._total+=u,this._loop=!!t.loop,this._to=um([t.to,n,s,t.from]),this._from=um([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,u=this._from,d=this._loop,o=this._to;let m;if(this._active=u!==o&&(d||n<i),!this._active){this._target[s]=o,this._notify(!0);return}if(n<0){this._target[s]=u;return}m=n/i%2,m=d&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[s]=this._fn(u,o,m)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class TR{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Cr(t))return;const n=Object.keys(Fi.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const u=t[s];if(!Cr(u))return;const d={};for(const o of n)d[o]=u[o];(_i(u.properties)&&u.properties||[s]).forEach(o=>{(o===s||!i.has(o))&&i.set(o,d)})})}_animateOptions(t,n){const i=n.options,s=ZK(t,i);if(!s)return[];const u=this._createAnimations(s,i);return i.$shared&&qK(t.options.$animations,i).then(()=>{t.options=i},()=>{}),u}_createAnimations(t,n){const i=this._properties,s=[],u=t.$animations||(t.$animations={}),d=Object.keys(n),o=Date.now();let m;for(m=d.length-1;m>=0;--m){const y=d[m];if(y.charAt(0)==="$")continue;if(y==="options"){s.push(...this._animateOptions(t,n));continue}const w=n[y];let S=u[y];const A=i.get(y);if(S)if(A&&S.active()){S.update(A,w,o);continue}else S.cancel();if(!A||!A.duration){t[y]=w;continue}u[y]=S=new GK(A,t,y,w),s.push(S)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return pl.add(this._chart,i),!0}}function qK(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const u=e[i[s]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function ZK(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function JP(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,u=n.max===void 0?t:0;return{start:i?u:s,end:i?s:u}}function YK(e,t,n){if(n===!1)return!1;const i=JP(e,n),s=JP(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function XK(e){let t,n,i,s;return Cr(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function CR(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,u;for(s=0,u=i.length;s<u;++s)n.push(i[s].index);return n}function QP(e,t,n,i={}){const s=e.keys,u=i.mode==="single";let d,o,m,y;if(t!==null){for(d=0,o=s.length;d<o;++d){if(m=+s[d],m===n){if(i.all)continue;break}y=e.values[m],Li(y)&&(u||t===0||Ua(t)===Ua(y))&&(t+=y)}return t}}function KK(e){const t=Object.keys(e),n=new Array(t.length);let i,s,u;for(i=0,s=t.length;i<s;++i)u=t[i],n[i]={x:u,y:e[u]};return n}function eA(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function JK(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function QK(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function eJ(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function tA(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const u=e[s.index];if(n&&u>0||!n&&u<0)return s.index}return null}function nA(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:u,vScale:d,index:o}=i,m=u.axis,y=d.axis,w=JK(u,d,i),S=t.length;let A;for(let I=0;I<S;++I){const z=t[I],{[m]:U,[y]:j}=z,F=z._stacks||(z._stacks={});A=F[y]=eJ(s,w,U),A[o]=j,A._top=tA(A,d,!0,i.type),A._bottom=tA(A,d,!1,i.type);const H=A._visualValues||(A._visualValues={});H[o]=j}}function Ob(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function tJ(e,t){return Nc(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nJ(e,t,n){return Nc(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function em(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const u=s._stacks;if(!u||u[i]===void 0||u[i][n]===void 0)return;delete u[i][n],u[i]._visualValues!==void 0&&u[i]._visualValues[n]!==void 0&&delete u[i]._visualValues[n]}}}const Lb=e=>e==="reset"||e==="none",rA=(e,t)=>t?e:Object.assign({},e),rJ=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:CR(n,!0),values:null};class la{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=eA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&em(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(S,A,I,z)=>S==="x"?A:S==="r"?z:I,u=n.xAxisID=ir(i.xAxisID,Ob(t,"x")),d=n.yAxisID=ir(i.yAxisID,Ob(t,"y")),o=n.rAxisID=ir(i.rAxisID,Ob(t,"r")),m=n.indexAxis,y=n.iAxisID=s(m,u,d,o),w=n.vAxisID=s(m,d,u,o);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(d),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(y),n.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&FP(this._data,this),t._stacked&&em(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Cr(n))this._data=KK(n);else if(i!==n){if(i){FP(i,this);const s=this._cachedMeta;em(s),s._parsed=[]}n&&Object.isExtensible(n)&&VX(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const u=n._stacked;n._stacked=eA(n.vScale,n),n.stack!==i.stack&&(s=!0,em(n),n.stack=i.stack),this._resyncElements(t),(s||u!==n._stacked)&&nA(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:u,_stacked:d}=i,o=u.axis;let m=t===0&&n===s.length?!0:i._sorted,y=t>0&&i._parsed[t-1],w,S,A;if(this._parsing===!1)i._parsed=s,i._sorted=!0,A=s;else{_i(s[t])?A=this.parseArrayData(i,s,t,n):Cr(s[t])?A=this.parseObjectData(i,s,t,n):A=this.parsePrimitiveData(i,s,t,n);const I=()=>S[o]===null||y&&S[o]<y[o];for(w=0;w<n;++w)i._parsed[w+t]=S=A[w],m&&(I()&&(m=!1),y=S);i._sorted=m}d&&nA(this,A)}parsePrimitiveData(t,n,i,s){const{iScale:u,vScale:d}=t,o=u.axis,m=d.axis,y=u.getLabels(),w=u===d,S=new Array(s);let A,I,z;for(A=0,I=s;A<I;++A)z=A+i,S[A]={[o]:w||u.parse(y[z],z),[m]:d.parse(n[z],z)};return S}parseArrayData(t,n,i,s){const{xScale:u,yScale:d}=t,o=new Array(s);let m,y,w,S;for(m=0,y=s;m<y;++m)w=m+i,S=n[w],o[m]={x:u.parse(S[0],w),y:d.parse(S[1],w)};return o}parseObjectData(t,n,i,s){const{xScale:u,yScale:d}=t,{xAxisKey:o="x",yAxisKey:m="y"}=this._parsing,y=new Array(s);let w,S,A,I;for(w=0,S=s;w<S;++w)A=w+i,I=n[A],y[w]={x:u.parse(Rc(I,o),A),y:d.parse(Rc(I,m),A)};return y}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,u=this._cachedMeta,d=n[t.axis],o={keys:CR(s,!0),values:n._stacks[t.axis]._visualValues};return QP(o,d,u.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const u=i[n.axis];let d=u===null?NaN:u;const o=s&&i._stacks[n.axis];s&&o&&(s.values=o,d=QP(s,u,this._cachedMeta.index)),t.min=Math.min(t.min,d),t.max=Math.max(t.max,d)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,u=i._sorted&&t===i.iScale,d=s.length,o=this._getOtherScale(t),m=rJ(n,i,this.chart),y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:S}=QK(o);let A,I;function z(){I=s[A];const U=I[o.axis];return!Li(I[t.axis])||w>U||S<U}for(A=0;A<d&&!(!z()&&(this.updateRangeFromParsed(y,t,I,m),u));++A);if(u){for(A=d-1;A>=0;--A)if(!z()){this.updateRangeFromParsed(y,t,I,m);break}}return y}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,u,d;for(s=0,u=n.length;s<u;++s)d=n[s][t.axis],Li(d)&&i.push(d);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,u=this.getParsed(t);return{label:i?""+i.getLabelForValue(u[i.axis]):"",value:s?""+s.getLabelForValue(u[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=XK(ir(this.options.clip,YK(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],u=n.chartArea,d=[],o=this._drawStart||0,m=this._drawCount||s.length-o,y=this.options.drawActiveElementsOnTop;let w;for(i.dataset&&i.dataset.draw(t,u,o,m),w=o;w<o+m;++w){const S=s[w];S.hidden||(S.active&&y?d.push(S):S.draw(t,u))}for(w=0;w<d.length;++w)d[w].draw(t,u)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let u;if(t>=0&&t<this._cachedMeta.data.length){const d=this._cachedMeta.data[t];u=d.$context||(d.$context=nJ(this.getContext(),t,d)),u.parsed=this.getParsed(t),u.raw=s.data[t],u.index=u.dataIndex=t}else u=this.$context||(this.$context=tJ(this.chart.getContext(),this.index)),u.dataset=s,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=i,u}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",u=this._cachedDataOpts,d=t+"-"+n,o=u[d],m=this.enableOptionSharing&&eg(i);if(o)return rA(o,m);const y=this.chart.config,w=y.datasetElementScopeKeys(this._type,t),S=s?[`${t}Hover`,"hover",t,""]:[t,""],A=y.getOptionScopes(this.getDataset(),w),I=Object.keys(Fi.elements[t]),z=()=>this.getContext(i,s,n),U=y.resolveNamedOptions(A,I,z,S);return U.$shared&&(U.$shared=m,u[d]=Object.freeze(rA(U,m))),U}_resolveAnimations(t,n,i){const s=this.chart,u=this._cachedDataOpts,d=`animation-${n}`,o=u[d];if(o)return o;let m;if(s.options.animation!==!1){const w=this.chart.config,S=w.datasetAnimationScopeKeys(this._type,n),A=w.getOptionScopes(this.getDataset(),S);m=w.createResolver(A,this.getContext(t,i,n))}const y=new TR(s,m&&m.animations);return m&&m._cacheable&&(u[d]=Object.freeze(y)),y}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Lb(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,u=this.getSharedOptions(i),d=this.includeOptions(n,u)||u!==s;return this.updateSharedOptions(u,n,i),{sharedOptions:u,includeOptions:d}}updateElement(t,n,i,s){Lb(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!Lb(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const u=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(u)||u})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[o,m,y]of this._syncList)this[o](m,y);this._syncList=[];const s=i.length,u=n.length,d=Math.min(u,s);d&&this.parse(0,d),u>s?this._insertElements(s,u-s,t):u<s&&this._removeElements(u,s-u)}_insertElements(t,n,i=!0){const s=this._cachedMeta,u=s.data,d=t+n;let o;const m=y=>{for(y.length+=n,o=y.length-1;o>=d;o--)y[o]=y[o-n]};for(m(u),o=t;o<d;++o)u[o]=new this.dataElementType;this._parsing&&m(s._parsed),this.parse(t,n),i&&this.updateElements(u,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&em(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}cn(la,"defaults",{}),cn(la,"datasetElementType",null),cn(la,"dataElementType",null);function iJ(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,u=n.length;s<u;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=rR(i.sort((s,u)=>s-u))}return e._cache.$bar}function oJ(e){const t=e.iScale,n=iJ(t,e.type);let i=t._length,s,u,d,o;const m=()=>{d===32767||d===-32768||(eg(o)&&(i=Math.min(i,Math.abs(d-o)||i)),o=d)};for(s=0,u=n.length;s<u;++s)d=t.getPixelForValue(n[s]),m();for(o=void 0,s=0,u=t.ticks.length;s<u;++s)d=t.getPixelForTick(s),m();return i}function sJ(e,t,n,i){const s=n.barThickness;let u,d;return Br(s)?(u=t.min*n.categoryPercentage,d=n.barPercentage):(u=s*i,d=1),{chunk:u/i,ratio:d,start:t.pixels[e]-u/2}}function aJ(e,t,n,i){const s=t.pixels,u=s[e];let d=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const m=n.categoryPercentage;d===null&&(d=u-(o===null?t.end-t.start:o-u)),o===null&&(o=u+u-d);const y=u-(u-Math.min(d,o))/2*m;return{chunk:Math.abs(o-d)/2*m/i,ratio:n.barPercentage,start:y}}function lJ(e,t,n,i){const s=n.parse(e[0],i),u=n.parse(e[1],i),d=Math.min(s,u),o=Math.max(s,u);let m=d,y=o;Math.abs(d)>Math.abs(o)&&(m=o,y=d),t[n.axis]=y,t._custom={barStart:m,barEnd:y,start:s,end:u,min:d,max:o}}function SR(e,t,n,i){return _i(e)?lJ(e,t,n,i):t[n.axis]=n.parse(e,i),t}function iA(e,t,n,i){const s=e.iScale,u=e.vScale,d=s.getLabels(),o=s===u,m=[];let y,w,S,A;for(y=n,w=n+i;y<w;++y)A=t[y],S={},S[s.axis]=o||s.parse(d[y],y),m.push(SR(A,S,u,y));return m}function Bb(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function cJ(e,t,n){return e!==0?Ua(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function uJ(e){let t,n,i,s,u;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",u="start"):(s="start",u="end"),{start:n,end:i,reverse:t,top:s,bottom:u}}function dJ(e,t,n,i){let s=t.borderSkipped;const u={};if(!s){e.borderSkipped=u;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:d,end:o,reverse:m,top:y,bottom:w}=uJ(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=y:(n._bottom||0)===i?s=w:(u[oA(w,d,o,m)]=!0,s=y)),u[oA(s,d,o,m)]=!0,e.borderSkipped=u}function oA(e,t,n,i){return i?(e=hJ(e,t,n),e=sA(e,n,t)):e=sA(e,t,n),e}function hJ(e,t,n){return e===t?n:e===n?t:e}function sA(e,t,n){return e==="start"?t:e==="end"?n:e}function fJ(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Y_ extends la{parsePrimitiveData(t,n,i,s){return iA(t,n,i,s)}parseArrayData(t,n,i,s){return iA(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:u,vScale:d}=t,{xAxisKey:o="x",yAxisKey:m="y"}=this._parsing,y=u.axis==="x"?o:m,w=d.axis==="x"?o:m,S=[];let A,I,z,U;for(A=i,I=i+s;A<I;++A)U=n[A],z={},z[u.axis]=u.parse(Rc(U,y),A),S.push(SR(Rc(U,w),z,d,A));return S}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const u=i._custom;u&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,u.min),t.max=Math.max(t.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,u=this.getParsed(t),d=u._custom,o=Bb(d)?"["+d.start+", "+d.end+"]":""+s.getLabelForValue(u[s.axis]);return{label:""+i.getLabelForValue(u[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const u=s==="reset",{index:d,_cachedMeta:{vScale:o}}=this,m=o.getBasePixel(),y=o.isHorizontal(),w=this._getRuler(),{sharedOptions:S,includeOptions:A}=this._getSharedOptions(n,s);for(let I=n;I<n+i;I++){const z=this.getParsed(I),U=u||Br(z[o.axis])?{base:m,head:m}:this._calculateBarValuePixels(I),j=this._calculateBarIndexPixels(I,w),F=(z._stacks||{})[o.axis],H={horizontal:y,base:U.base,enableBorderRadius:!F||Bb(z._custom)||d===F._top||d===F._bottom,x:y?U.head:j.center,y:y?j.center:U.head,height:y?j.size:Math.abs(U.size),width:y?Math.abs(U.size):j.size};A&&(H.options=S||this.resolveDataElementOptions(I,t[I].active?"active":s));const J=H.options||t[I].options;dJ(H,J,F,d),fJ(H,J,w.ratio),this.updateElement(t[I],I,H,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),u=i.options.stacked,d=[],o=m=>{const y=m.controller.getParsed(n),w=y&&y[m.vScale.axis];if(Br(w)||isNaN(w))return!0};for(const m of s)if(!(n!==void 0&&o(m))&&((u===!1||d.indexOf(m.stack)===-1||u===void 0&&m.stack===void 0)&&d.push(m.stack),m.index===t))break;return d.length||d.push(void 0),d}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const s=this._getStacks(t,i),u=n!==void 0?s.indexOf(n):-1;return u===-1?s.length-1:u}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let u,d;for(u=0,d=n.data.length;u<d;++u)s.push(i.getPixelForValue(this.getParsed(u)[i.axis],u));const o=t.barThickness;return{min:o||oJ(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:u,minBarLength:d}}=this,o=u||0,m=this.getParsed(t),y=m._custom,w=Bb(y);let S=m[n.axis],A=0,I=i?this.applyStack(n,m,i):S,z,U;I!==S&&(A=I-S,I=S),w&&(S=y.barStart,I=y.barEnd-y.barStart,S!==0&&Ua(S)!==Ua(y.barEnd)&&(A=0),A+=S);const j=!Br(u)&&!w?u:A;let F=n.getPixelForValue(j);if(this.chart.getDataVisibility(t)?z=n.getPixelForValue(A+I):z=F,U=z-F,Math.abs(U)<d){U=cJ(U,n,o)*d,S===o&&(F-=U/2);const H=n.getPixelForDecimal(0),J=n.getPixelForDecimal(1),Z=Math.min(H,J),Y=Math.max(H,J);F=Math.max(Math.min(F,Y),Z),z=F+U,i&&!w&&(m._stacks[n.axis]._visualValues[s]=n.getValueForPixel(z)-n.getValueForPixel(F))}if(F===n.getPixelForValue(o)){const H=Ua(U)*n.getLineWidthForValue(o)/2;F+=H,U-=H}return{size:U,base:F,head:z,center:z+U/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,u=s.skipNull,d=ir(s.maxBarThickness,1/0);let o,m;if(n.grouped){const y=u?this._getStackCount(t):n.stackCount,w=s.barThickness==="flex"?aJ(t,n,s,y):sJ(t,n,s,y),S=this._getStackIndex(this.index,this._cachedMeta.stack,u?t:void 0);o=w.start+w.chunk*S+w.chunk/2,m=Math.min(d,w.chunk*w.ratio)}else o=i.getPixelForValue(this.getParsed(t)[i.axis],t),m=Math.min(d,n.min*n.ratio);return{base:o-m/2,head:o+m/2,center:o,size:m}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let u=0;for(;u<s;++u)this.getParsed(u)[n.axis]!==null&&i[u].draw(this._ctx)}}cn(Y_,"id","bar"),cn(Y_,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),cn(Y_,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class X_ extends la{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,s){const u=super.parsePrimitiveData(t,n,i,s);for(let d=0;d<u.length;d++)u[d]._custom=this.resolveDataElementOptions(d+i).radius;return u}parseArrayData(t,n,i,s){const u=super.parseArrayData(t,n,i,s);for(let d=0;d<u.length;d++){const o=n[i+d];u[d]._custom=ir(o[2],this.resolveDataElementOptions(d+i).radius)}return u}parseObjectData(t,n,i,s){const u=super.parseObjectData(t,n,i,s);for(let d=0;d<u.length;d++){const o=n[i+d];u[d]._custom=ir(o&&o.r&&+o.r,this.resolveDataElementOptions(d+i).radius)}return u}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:u}=n,d=this.getParsed(t),o=s.getLabelForValue(d.x),m=u.getLabelForValue(d.y),y=d._custom;return{label:i[t]||"",value:"("+o+", "+m+(y?", "+y:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,s){const u=s==="reset",{iScale:d,vScale:o}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(n,s),w=d.axis,S=o.axis;for(let A=n;A<n+i;A++){const I=t[A],z=!u&&this.getParsed(A),U={},j=U[w]=u?d.getPixelForDecimal(.5):d.getPixelForValue(z[w]),F=U[S]=u?o.getBasePixel():o.getPixelForValue(z[S]);U.skip=isNaN(j)||isNaN(F),y&&(U.options=m||this.resolveDataElementOptions(A,I.active?"active":s),u&&(U.options.radius=0)),this.updateElement(I,A,U,s)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const u=s.radius;return n!=="active"&&(s.radius=0),s.radius+=ir(i&&i._custom,u),s}}cn(X_,"id","bubble"),cn(X_,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),cn(X_,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function pJ(e,t,n){let i=1,s=1,u=0,d=0;if(t<yi){const o=e,m=o+t,y=Math.cos(o),w=Math.sin(o),S=Math.cos(m),A=Math.sin(m),I=(J,Z,Y)=>tg(J,o,m,!0)?1:Math.max(Z,Z*n,Y,Y*n),z=(J,Z,Y)=>tg(J,o,m,!0)?-1:Math.min(Z,Z*n,Y,Y*n),U=I(0,y,S),j=I(Bi,w,A),F=z(Ci,y,S),H=z(Ci+Bi,w,A);i=(U-F)/2,s=(j-H)/2,u=-(U+F)/2,d=-(j+H)/2}return{ratioX:i,ratioY:s,offsetX:u,offsetY:d}}class Qu extends la{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let u=m=>+i[m];if(Cr(i[t])){const{key:m="value"}=this._parsing;u=y=>+Rc(i[y],m)}let d,o;for(d=t,o=t+n;d<o;++d)s._parsed[d]=u(d)}}_getRotation(){return sa(this.options.rotation-90)}_getCircumference(){return sa(this.options.circumference)}_getRotationExtents(){let t=yi,n=-yi;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,u=s._getRotation(),d=s._getCircumference();t=Math.min(t,u),n=Math.max(n,u+d)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,u=s.data,d=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-d)/2,0),m=Math.min(PX(this.options.cutout,o),1),y=this._getRingWeight(this.index),{circumference:w,rotation:S}=this._getRotationExtents(),{ratioX:A,ratioY:I,offsetX:z,offsetY:U}=pJ(S,w,m),j=(i.width-d)/A,F=(i.height-d)/I,H=Math.max(Math.min(j,F)/2,0),J=Jz(this.options.radius,H),Z=Math.max(J*m,0),Y=(J-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=z*J,this.offsetY=U*J,s.total=this.calculateTotal(),this.outerRadius=J-Y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Y*y,0),this.updateElements(u,0,u.length,t)}_circumference(t,n){const i=this.options,s=this._cachedMeta,u=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*u/yi)}updateElements(t,n,i,s){const u=s==="reset",d=this.chart,o=d.chartArea,y=d.options.animation,w=(o.left+o.right)/2,S=(o.top+o.bottom)/2,A=u&&y.animateScale,I=A?0:this.innerRadius,z=A?0:this.outerRadius,{sharedOptions:U,includeOptions:j}=this._getSharedOptions(n,s);let F=this._getRotation(),H;for(H=0;H<n;++H)F+=this._circumference(H,u);for(H=n;H<n+i;++H){const J=this._circumference(H,u),Z=t[H],Y={x:w+this.offsetX,y:S+this.offsetY,startAngle:F,endAngle:F+J,circumference:J,outerRadius:z,innerRadius:I};j&&(Y.options=U||this.resolveDataElementOptions(H,Z.active?"active":s)),F+=J,this.updateElement(Z,H,Y,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,s;for(s=0;s<n.length;s++){const u=t._parsed[s];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(u))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?yi*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],u=bg(n._parsed[t],i.options.locale);return{label:s[t]||"",value:u}}getMaxBorderWidth(t){let n=0;const i=this.chart;let s,u,d,o,m;if(!t){for(s=0,u=i.data.datasets.length;s<u;++s)if(i.isDatasetVisible(s)){d=i.getDatasetMeta(s),t=d.data,o=d.controller;break}}if(!t)return 0;for(s=0,u=t.length;s<u;++s)m=o.resolveDataElementOptions(s),m.borderAlign!=="inner"&&(n=Math.max(n,m.borderWidth||0,m.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,s=t.length;i<s;++i){const u=this.resolveDataElementOptions(i);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(ir(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}cn(Qu,"id","doughnut"),cn(Qu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),cn(Qu,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),cn(Qu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((u,d)=>{const m=t.getDatasetMeta(0).controller.getStyle(d);return{text:u,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:s,lineWidth:m.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(d),index:d}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class K_ extends la{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:u}=n,d=this.chart._animationsDisabled;let{start:o,count:m}=sR(n,s,d);this._drawStart=o,this._drawCount=m,aR(n)&&(o=0,m=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!u._decimated,i.points=s;const y=this.resolveDatasetElementOptions(t);this.options.showLine||(y.borderWidth=0),y.segment=this.options.segment,this.updateElement(i,void 0,{animated:!d,options:y},t),this.updateElements(s,o,m,t)}updateElements(t,n,i,s){const u=s==="reset",{iScale:d,vScale:o,_stacked:m,_dataset:y}=this._cachedMeta,{sharedOptions:w,includeOptions:S}=this._getSharedOptions(n,s),A=d.axis,I=o.axis,{spanGaps:z,segment:U}=this.options,j=df(z)?z:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||u||s==="none",H=n+i,J=t.length;let Z=n>0&&this.getParsed(n-1);for(let Y=0;Y<J;++Y){const ce=t[Y],ee=F?ce:{};if(Y<n||Y>=H){ee.skip=!0;continue}const de=this.getParsed(Y),ue=Br(de[I]),Ee=ee[A]=d.getPixelForValue(de[A],Y),ze=ee[I]=u||ue?o.getBasePixel():o.getPixelForValue(m?this.applyStack(o,de,m):de[I],Y);ee.skip=isNaN(Ee)||isNaN(ze)||ue,ee.stop=Y>0&&Math.abs(de[A]-Z[A])>j,U&&(ee.parsed=de,ee.raw=y.data[Y]),S&&(ee.options=w||this.resolveDataElementOptions(Y,ce.active?"active":s)),F||this.updateElement(ce,Y,ee,s),Z=de}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const u=s[0].size(this.resolveDataElementOptions(0)),d=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,u,d)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}cn(K_,"id","line"),cn(K_,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),cn(K_,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Am extends la{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],u=bg(n._parsed[t].r,i.options.locale);return{label:s[t]||"",value:u}}parseObjectData(t,n,i,s){return mR.bind(this)(t,n,i,s)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const u=this.getParsed(s).r;!isNaN(u)&&this.chart.getDataVisibility(s)&&(u<n.min&&(n.min=u),u>n.max&&(n.max=u))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,s=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(s/2,0),d=Math.max(i.cutoutPercentage?u/100*i.cutoutPercentage:1,0),o=(u-d)/t.getVisibleDatasetCount();this.outerRadius=u-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,n,i,s){const u=s==="reset",d=this.chart,m=d.options.animation,y=this._cachedMeta.rScale,w=y.xCenter,S=y.yCenter,A=y.getIndexAngle(0)-.5*Ci;let I=A,z;const U=360/this.countVisibleElements();for(z=0;z<n;++z)I+=this._computeAngle(z,s,U);for(z=n;z<n+i;z++){const j=t[z];let F=I,H=I+this._computeAngle(z,s,U),J=d.getDataVisibility(z)?y.getDistanceFromCenterForValue(this.getParsed(z).r):0;I=H,u&&(m.animateScale&&(J=0),m.animateRotate&&(F=H=A));const Z={x:w,y:S,innerRadius:0,outerRadius:J,startAngle:F,endAngle:H,options:this.resolveDataElementOptions(z,j.active?"active":s)};this.updateElement(j,z,Z,s)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?sa(this.resolveDataElementOptions(t,n).angle||i):0}}cn(Am,"id","polarArea"),cn(Am,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),cn(Am,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((u,d)=>{const m=t.getDatasetMeta(0).controller.getStyle(d);return{text:u,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:s,lineWidth:m.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(d),index:d}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class bw extends Qu{}cn(bw,"id","pie"),cn(bw,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class J_ extends la{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,s){return mR.bind(this)(t,n,i,s)}update(t){const n=this._cachedMeta,i=n.dataset,s=n.data||[],u=n.iScale.getLabels();if(i.points=s,t!=="resize"){const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0);const o={_loop:!0,_fullLoop:u.length===s.length,options:d};this.updateElement(i,void 0,o,t)}this.updateElements(s,0,s.length,t)}updateElements(t,n,i,s){const u=this._cachedMeta.rScale,d=s==="reset";for(let o=n;o<n+i;o++){const m=t[o],y=this.resolveDataElementOptions(o,m.active?"active":s),w=u.getPointPositionForValue(o,this.getParsed(o).r),S=d?u.xCenter:w.x,A=d?u.yCenter:w.y,I={x:S,y:A,angle:w.angle,skip:isNaN(S)||isNaN(A),options:y};this.updateElement(m,o,I,s)}}}cn(J_,"id","radar"),cn(J_,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),cn(J_,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Q_ extends la{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:u}=n,d=this.getParsed(t),o=s.getLabelForValue(d.x),m=u.getLabelForValue(d.y);return{label:i[t]||"",value:"("+o+", "+m+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:u,count:d}=sR(n,i,s);if(this._drawStart=u,this._drawCount=d,aR(n)&&(u=0,d=i.length),this.options.showLine){const{dataset:o,_dataset:m}=n;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!m._decimated,o.points=i;const y=this.resolveDatasetElementOptions(t);y.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:y},t)}this.updateElements(i,u,d,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,s){const u=s==="reset",{iScale:d,vScale:o,_stacked:m,_dataset:y}=this._cachedMeta,w=this.resolveDataElementOptions(n,s),S=this.getSharedOptions(w),A=this.includeOptions(s,S),I=d.axis,z=o.axis,{spanGaps:U,segment:j}=this.options,F=df(U)?U:Number.POSITIVE_INFINITY,H=this.chart._animationsDisabled||u||s==="none";let J=n>0&&this.getParsed(n-1);for(let Z=n;Z<n+i;++Z){const Y=t[Z],ce=this.getParsed(Z),ee=H?Y:{},de=Br(ce[z]),ue=ee[I]=d.getPixelForValue(ce[I],Z),Ee=ee[z]=u||de?o.getBasePixel():o.getPixelForValue(m?this.applyStack(o,ce,m):ce[z],Z);ee.skip=isNaN(ue)||isNaN(Ee)||de,ee.stop=Z>0&&Math.abs(ce[I]-J[I])>F,j&&(ee.parsed=ce,ee.raw=y.data[Z]),A&&(ee.options=S||this.resolveDataElementOptions(Z,Y.active?"active":s)),H||this.updateElement(Y,Z,ee,s),J=ce}this.updateSharedOptions(S,s,w)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let o=0;for(let m=n.length-1;m>=0;--m)o=Math.max(o,n[m].size(this.resolveDataElementOptions(m))/2);return o>0&&o}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const u=n[0].size(this.resolveDataElementOptions(0)),d=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,u,d)/2}}cn(Q_,"id","scatter"),cn(Q_,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),cn(Q_,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var mJ=Object.freeze({__proto__:null,BarController:Y_,BubbleController:X_,DoughnutController:Qu,LineController:K_,PieController:bw,PolarAreaController:Am,RadarController:J_,ScatterController:Q_});function $u(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uC{constructor(t){cn(this,"options");this.options=t||{}}static override(t){Object.assign(uC.prototype,t)}init(){}formats(){return $u()}parse(){return $u()}format(){return $u()}add(){return $u()}diff(){return $u()}startOf(){return $u()}endOf(){return $u()}}var gJ={_date:uC};function vJ(e,t,n,i){const{controller:s,data:u,_sorted:d}=e,o=s._cachedMeta.iScale;if(o&&t===o.axis&&t!=="r"&&d&&u.length){const m=o._reversePixels?NX:wl;if(i){if(s._sharedOptions){const y=u[0],w=typeof y.getRange=="function"&&y.getRange(t);if(w){const S=m(u,t,n-w),A=m(u,t,n+w);return{lo:S.lo,hi:A.hi}}}}else return m(u,t,n)}return{lo:0,hi:u.length-1}}function wg(e,t,n,i,s){const u=e.getSortedVisibleDatasetMetas(),d=n[t];for(let o=0,m=u.length;o<m;++o){const{index:y,data:w}=u[o],{lo:S,hi:A}=vJ(u[o],t,d,s);for(let I=S;I<=A;++I){const z=w[I];z.skip||i(z,y,I)}}}function _J(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const u=t?Math.abs(i.x-s.x):0,d=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(d,2))}}function Fb(e,t,n,i,s){const u=[];return!s&&!e.isPointInArea(t)||wg(e,n,t,function(o,m,y){!s&&!Tl(o,e.chartArea,0)||o.inRange(t.x,t.y,i)&&u.push({element:o,datasetIndex:m,index:y})},!0),u}function yJ(e,t,n,i){let s=[];function u(d,o,m){const{startAngle:y,endAngle:w}=d.getProps(["startAngle","endAngle"],i),{angle:S}=tR(d,{x:t.x,y:t.y});tg(S,y,w)&&s.push({element:d,datasetIndex:o,index:m})}return wg(e,n,t,u),s}function xJ(e,t,n,i,s,u){let d=[];const o=_J(n);let m=Number.POSITIVE_INFINITY;function y(w,S,A){const I=w.inRange(t.x,t.y,s);if(i&&!I)return;const z=w.getCenterPoint(s);if(!(!!u||e.isPointInArea(z))&&!I)return;const j=o(t,z);j<m?(d=[{element:w,datasetIndex:S,index:A}],m=j):j===m&&d.push({element:w,datasetIndex:S,index:A})}return wg(e,n,t,y),d}function $b(e,t,n,i,s,u){return!u&&!e.isPointInArea(t)?[]:n==="r"&&!i?yJ(e,t,n,s):xJ(e,t,n,i,s,u)}function aA(e,t,n,i,s){const u=[],d=n==="x"?"inXRange":"inYRange";let o=!1;return wg(e,n,t,(m,y,w)=>{m[d](t[n],s)&&(u.push({element:m,datasetIndex:y,index:w}),o=o||m.inRange(t.x,t.y,s))}),i&&!o?[]:u}var bJ={evaluateInteractionItems:wg,modes:{index(e,t,n,i){const s=ju(t,e),u=n.axis||"x",d=n.includeInvisible||!1,o=n.intersect?Fb(e,s,u,i,d):$b(e,s,u,!1,i,d),m=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(y=>{const w=o[0].index,S=y.data[w];S&&!S.skip&&m.push({element:S,datasetIndex:y.index,index:w})}),m):[]},dataset(e,t,n,i){const s=ju(t,e),u=n.axis||"xy",d=n.includeInvisible||!1;let o=n.intersect?Fb(e,s,u,i,d):$b(e,s,u,!1,i,d);if(o.length>0){const m=o[0].datasetIndex,y=e.getDatasetMeta(m).data;o=[];for(let w=0;w<y.length;++w)o.push({element:y[w],datasetIndex:m,index:w})}return o},point(e,t,n,i){const s=ju(t,e),u=n.axis||"xy",d=n.includeInvisible||!1;return Fb(e,s,u,i,d)},nearest(e,t,n,i){const s=ju(t,e),u=n.axis||"xy",d=n.includeInvisible||!1;return $b(e,s,u,n.intersect,i,d)},x(e,t,n,i){const s=ju(t,e);return aA(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=ju(t,e);return aA(e,s,"y",n.intersect,i)}}};const ER=["left","top","right","bottom"];function tm(e,t){return e.filter(n=>n.pos===t)}function lA(e,t){return e.filter(n=>ER.indexOf(n.pos)===-1&&n.box.axis===t)}function nm(e,t){return e.sort((n,i)=>{const s=t?i:n,u=t?n:i;return s.weight===u.weight?s.index-u.index:s.weight-u.weight})}function wJ(e){const t=[];let n,i,s,u,d,o;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:u,options:{stack:d,stackWeight:o=1}}=s,t.push({index:n,box:s,pos:u,horizontal:s.isHorizontal(),weight:s.weight,stack:d&&u+d,stackWeight:o});return t}function TJ(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:u}=n;if(!i||!ER.includes(s))continue;const d=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=u}return t}function CJ(e,t){const n=TJ(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let u,d,o;for(u=0,d=e.length;u<d;++u){o=e[u];const{fullSize:m}=o.box,y=n[o.stack],w=y&&o.stackWeight/y.weight;o.horizontal?(o.width=w?w*i:m&&t.availableWidth,o.height=s):(o.width=i,o.height=w?w*s:m&&t.availableHeight)}return n}function SJ(e){const t=wJ(e),n=nm(t.filter(y=>y.box.fullSize),!0),i=nm(tm(t,"left"),!0),s=nm(tm(t,"right")),u=nm(tm(t,"top"),!0),d=nm(tm(t,"bottom")),o=lA(t,"x"),m=lA(t,"y");return{fullSize:n,leftAndTop:i.concat(u),rightAndBottom:s.concat(m).concat(d).concat(o),chartArea:tm(t,"chartArea"),vertical:i.concat(s).concat(m),horizontal:u.concat(d).concat(o)}}function cA(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function MR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function EJ(e,t,n,i){const{pos:s,box:u}=n,d=e.maxPadding;if(!Cr(s)){n.size&&(e[s]-=n.size);const S=i[n.stack]||{size:0,count:1};S.size=Math.max(S.size,n.horizontal?u.height:u.width),n.size=S.size/S.count,e[s]+=n.size}u.getPadding&&MR(d,u.getPadding());const o=Math.max(0,t.outerWidth-cA(d,e,"left","right")),m=Math.max(0,t.outerHeight-cA(d,e,"top","bottom")),y=o!==e.w,w=m!==e.h;return e.w=o,e.h=m,n.horizontal?{same:y,other:w}:{same:w,other:y}}function MJ(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function PJ(e,t){const n=t.maxPadding;function i(s){const u={left:0,top:0,right:0,bottom:0};return s.forEach(d=>{u[d]=Math.max(t[d],n[d])}),u}return i(e?["left","right"]:["top","bottom"])}function dm(e,t,n,i){const s=[];let u,d,o,m,y,w;for(u=0,d=e.length,y=0;u<d;++u){o=e[u],m=o.box,m.update(o.width||t.w,o.height||t.h,PJ(o.horizontal,t));const{same:S,other:A}=EJ(t,n,o,i);y|=S&&s.length,w=w||A,m.fullSize||s.push(o)}return y&&dm(s,t,n,i)||w}function D_(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function uA(e,t,n,i){const s=n.padding;let{x:u,y:d}=t;for(const o of e){const m=o.box,y=i[o.stack]||{count:1,placed:0,weight:1},w=o.stackWeight/y.weight||1;if(o.horizontal){const S=t.w*w,A=y.size||m.height;eg(y.start)&&(d=y.start),m.fullSize?D_(m,s.left,d,n.outerWidth-s.right-s.left,A):D_(m,t.left+y.placed,d,S,A),y.start=d,y.placed+=S,d=m.bottom}else{const S=t.h*w,A=y.size||m.width;eg(y.start)&&(u=y.start),m.fullSize?D_(m,u,s.top,A,n.outerHeight-s.bottom-s.top):D_(m,u,t.top+y.placed,A,S),y.start=u,y.placed+=S,u=m.right}}t.x=u,t.y=d}var $o={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=No(e.options.layout.padding),u=Math.max(t-s.width,0),d=Math.max(n-s.height,0),o=SJ(e.boxes),m=o.vertical,y=o.horizontal;ti(e.boxes,U=>{typeof U.beforeLayout=="function"&&U.beforeLayout()});const w=m.reduce((U,j)=>j.box.options&&j.box.options.display===!1?U:U+1,0)||1,S=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:u,availableHeight:d,vBoxMaxWidth:u/2/w,hBoxMaxHeight:d/2}),A=Object.assign({},s);MR(A,No(i));const I=Object.assign({maxPadding:A,w:u,h:d,x:s.left,y:s.top},s),z=CJ(m.concat(y),S);dm(o.fullSize,I,S,z),dm(m,I,S,z),dm(y,I,S,z)&&dm(m,I,S,z),MJ(I),uA(o.leftAndTop,I,S,z),I.x+=I.w,I.y+=I.h,uA(o.rightAndBottom,I,S,z),e.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h,height:I.h,width:I.w},ti(o.chartArea,U=>{const j=U.box;Object.assign(j,e.chartArea),j.update(I.w,I.h,{left:0,top:0,right:0,bottom:0})})}};class PR{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class AJ extends PR{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ey="$chartjs",kJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dA=e=>e===null||e==="";function DJ(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[ey]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",dA(s)){const u=qP(e,"width");u!==void 0&&(e.width=u)}if(dA(i))if(e.style.height==="")e.height=e.width/(t||2);else{const u=qP(e,"height");u!==void 0&&(e.height=u)}return e}const AR=zK?{passive:!0}:!1;function IJ(e,t,n){e.addEventListener(t,n,AR)}function zJ(e,t,n){e.canvas.removeEventListener(t,n,AR)}function RJ(e,t){const n=kJ[e.type]||e.type,{x:i,y:s}=ju(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function By(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function OJ(e,t,n){const i=e.canvas,s=new MutationObserver(u=>{let d=!1;for(const o of u)d=d||By(o.addedNodes,i),d=d&&!By(o.removedNodes,i);d&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function LJ(e,t,n){const i=e.canvas,s=new MutationObserver(u=>{let d=!1;for(const o of u)d=d||By(o.removedNodes,i),d=d&&!By(o.addedNodes,i);d&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const rg=new Map;let hA=0;function kR(){const e=window.devicePixelRatio;e!==hA&&(hA=e,rg.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function BJ(e,t){rg.size||window.addEventListener("resize",kR),rg.set(e,t)}function FJ(e){rg.delete(e),rg.size||window.removeEventListener("resize",kR)}function $J(e,t,n){const i=e.canvas,s=i&&cC(i);if(!s)return;const u=oR((o,m)=>{const y=s.clientWidth;n(o,m),y<s.clientWidth&&n()},window),d=new ResizeObserver(o=>{const m=o[0],y=m.contentRect.width,w=m.contentRect.height;y===0&&w===0||u(y,w)});return d.observe(s),BJ(e,u),d}function Nb(e,t,n){n&&n.disconnect(),t==="resize"&&FJ(e)}function NJ(e,t,n){const i=e.canvas,s=oR(u=>{e.ctx!==null&&n(RJ(u,e))},e);return IJ(i,t,s),s}class UJ extends PR{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(DJ(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[ey])return!1;const i=n[ey].initial;["height","width"].forEach(u=>{const d=i[u];Br(d)?n.removeAttribute(u):n.setAttribute(u,d)});const s=i.style||{};return Object.keys(s).forEach(u=>{n.style[u]=s[u]}),n.width=n.width,delete n[ey],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),d={attach:OJ,detach:LJ,resize:$J}[n]||NJ;s[n]=d(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:Nb,detach:Nb,resize:Nb}[n]||zJ)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return IK(t,n,i,s)}isAttached(t){const n=cC(t);return!!(n&&n.isConnected)}}function VJ(e){return!vR()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?AJ:UJ}var F_;let Dl=(F_=class{constructor(){cn(this,"x");cn(this,"y");cn(this,"active",!1);cn(this,"options");cn(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return df(this.x)&&df(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(u=>{s[u]=i[u]&&i[u].active()?i[u]._to:this[u]}),s}},cn(F_,"defaults",{}),cn(F_,"defaultRoutes"),F_);function jJ(e,t){const n=e.options.ticks,i=WJ(e),s=Math.min(n.maxTicksLimit||i,i),u=n.major.enabled?GJ(t):[],d=u.length,o=u[0],m=u[d-1],y=[];if(d>s)return qJ(t,y,u,d/s),y;const w=HJ(u,t,s);if(d>0){let S,A;const I=d>1?Math.round((m-o)/(d-1)):null;for(I_(t,y,w,Br(I)?0:o-I,o),S=0,A=d-1;S<A;S++)I_(t,y,w,u[S],u[S+1]);return I_(t,y,w,m,Br(I)?t.length:m+I),y}return I_(t,y,w),y}function WJ(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function HJ(e,t,n){const i=ZJ(e),s=t.length/n;if(!i)return Math.max(s,1);const u=LX(i);for(let d=0,o=u.length-1;d<o;d++){const m=u[d];if(m>s)return m}return Math.max(s,1)}function GJ(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function qJ(e,t,n,i){let s=0,u=n[0],d;for(i=Math.ceil(i),d=0;d<e.length;d++)d===u&&(t.push(e[d]),s++,u=n[s*i])}function I_(e,t,n,i,s){const u=ir(i,0),d=Math.min(ir(s,e.length),e.length);let o=0,m,y,w;for(n=Math.ceil(n),s&&(m=s-i,n=m/Math.floor(m/n)),w=u;w<0;)o++,w=Math.round(u+o*n);for(y=Math.max(u,0);y<d;y++)y===w&&(t.push(e[y]),o++,w=Math.round(u+o*n))}function ZJ(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const YJ=e=>e==="left"?"right":e==="right"?"left":e,fA=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,pA=(e,t)=>Math.min(t||e,e);function mA(e,t){const n=[],i=e.length/t,s=e.length;let u=0;for(;u<s;u+=i)n.push(e[Math.floor(u)]);return n}function XJ(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),u=e._startPixel,d=e._endPixel,o=1e-6;let m=e.getPixelForTick(s),y;if(!(n&&(i===1?y=Math.max(m-u,d-m):t===0?y=(e.getPixelForTick(1)-m)/2:y=(m-e.getPixelForTick(s-1))/2,m+=s<t?y:-y,m<u-o||m>d+o)))return m}function KJ(e,t){ti(e,n=>{const i=n.gc,s=i.length/2;let u;if(s>t){for(u=0;u<s;++u)delete n.data[i[u]];i.splice(0,s)}})}function rm(e){return e.drawTicks?e.tickLength:0}function gA(e,t){if(!e.display)return 0;const n=oo(e.font,t),i=No(e.padding);return(_i(e.text)?e.text.length:1)*n.lineHeight+i.height}function JJ(e,t){return Nc(e,{scale:t,type:"scale"})}function QJ(e,t,n){return Nc(e,{tick:n,index:t,type:"tick"})}function eQ(e,t,n){let i=rC(e);return(n&&t!=="right"||!n&&t==="right")&&(i=YJ(i)),i}function tQ(e,t,n,i){const{top:s,left:u,bottom:d,right:o,chart:m}=e,{chartArea:y,scales:w}=m;let S=0,A,I,z;const U=d-s,j=o-u;if(e.isHorizontal()){if(I=Oo(i,u,o),Cr(n)){const F=Object.keys(n)[0],H=n[F];z=w[F].getPixelForValue(H)+U-t}else n==="center"?z=(y.bottom+y.top)/2+U-t:z=fA(e,n,t);A=o-u}else{if(Cr(n)){const F=Object.keys(n)[0],H=n[F];I=w[F].getPixelForValue(H)-j+t}else n==="center"?I=(y.left+y.right)/2-j+t:I=fA(e,n,t);z=Oo(i,d,s),S=n==="left"?-Bi:Bi}return{titleX:I,titleY:z,maxWidth:A,rotation:S}}class Ed extends Dl{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=_s(t,Number.POSITIVE_INFINITY),n=_s(n,Number.NEGATIVE_INFINITY),i=_s(i,Number.POSITIVE_INFINITY),s=_s(s,Number.NEGATIVE_INFINITY),{min:_s(t,i),max:_s(n,s),minDefined:Li(t),maxDefined:Li(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:u}=this.getUserBounds(),d;if(s&&u)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let m=0,y=o.length;m<y;++m)d=o[m].controller.getMinMax(this,t),s||(n=Math.min(n,d.min)),u||(i=Math.max(i,d.max));return n=u&&n>i?i:n,i=s&&n>i?n:i,{min:_s(n,_s(i,n)),max:_s(i,_s(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ci(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:u,ticks:d}=this.options,o=d.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=uK(this,u,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=o<this.ticks.length;this._convertTicksToLabels(m?mA(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=jJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ci(this.options.afterUpdate,[this])}beforeSetDimensions(){ci(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ci(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ci(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ci(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,u;for(i=0,s=t.length;i<s;i++)u=t[i],u.label=ci(n.callback,[u.value,i,t],this)}afterTickToLabelConversion(){ci(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ci(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=pA(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,u=n.maxRotation;let d=s,o,m,y;if(!this._isVisible()||!n.display||s>=u||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const w=this._getLabelSizes(),S=w.widest.width,A=w.highest.height,I=_o(this.chart.width-S,0,this.maxWidth);o=t.offset?this.maxWidth/i:I/(i-1),S+6>o&&(o=I/(i-(t.offset?.5:1)),m=this.maxHeight-rm(t.grid)-n.padding-gA(t.title,this.chart.options.font),y=Math.sqrt(S*S+A*A),d=tC(Math.min(Math.asin(_o((w.highest.height+6)/o,-1,1)),Math.asin(_o(m/y,-1,1))-Math.asin(_o(A/y,-1,1)))),d=Math.max(s,Math.min(u,d))),this.labelRotation=d}afterCalculateLabelRotation(){ci(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ci(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:u}}=this,d=this._isVisible(),o=this.isHorizontal();if(d){const m=gA(s,n.options.font);if(o?(t.width=this.maxWidth,t.height=rm(u)+m):(t.height=this.maxHeight,t.width=rm(u)+m),i.display&&this.ticks.length){const{first:y,last:w,widest:S,highest:A}=this._getLabelSizes(),I=i.padding*2,z=sa(this.labelRotation),U=Math.cos(z),j=Math.sin(z);if(o){const F=i.mirror?0:j*S.width+U*A.height;t.height=Math.min(this.maxHeight,t.height+F+I)}else{const F=i.mirror?0:U*S.width+j*A.height;t.width=Math.min(this.maxWidth,t.width+F+I)}this._calculatePadding(y,w,j,U)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:u,padding:d},position:o}=this.options,m=this.labelRotation!==0,y=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const w=this.getPixelForTick(0)-this.left,S=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,I=0;m?y?(A=s*t.width,I=i*n.height):(A=i*t.height,I=s*n.width):u==="start"?I=n.width:u==="end"?A=t.width:u!=="inner"&&(A=t.width/2,I=n.width/2),this.paddingLeft=Math.max((A-w+d)*this.width/(this.width-w),0),this.paddingRight=Math.max((I-S+d)*this.width/(this.width-S),0)}else{let w=n.height/2,S=t.height/2;u==="start"?(w=0,S=t.height):u==="end"&&(w=n.height,S=0),this.paddingTop=w+d,this.paddingBottom=S+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ci(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Br(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=mA(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:u}=this,d=[],o=[],m=Math.floor(n/pA(n,i));let y=0,w=0,S,A,I,z,U,j,F,H,J,Z,Y;for(S=0;S<n;S+=m){if(z=t[S].label,U=this._resolveTickFontOptions(S),s.font=j=U.string,F=u[j]=u[j]||{data:{},gc:[]},H=U.lineHeight,J=Z=0,!Br(z)&&!_i(z))J=Oy(s,F.data,F.gc,J,z),Z=H;else if(_i(z))for(A=0,I=z.length;A<I;++A)Y=z[A],!Br(Y)&&!_i(Y)&&(J=Oy(s,F.data,F.gc,J,Y),Z+=H);d.push(J),o.push(Z),y=Math.max(J,y),w=Math.max(Z,w)}KJ(u,n);const ce=d.indexOf(y),ee=o.indexOf(w),de=ue=>({width:d[ue]||0,height:o[ue]||0});return{first:de(0),last:de(n-1),widest:de(ce),highest:de(ee),widths:d,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return $X(this._alignToPixels?Fu(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=QJ(this.getContext(),t,i))}return this.$context||(this.$context=JJ(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=sa(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),u=this._getLabelSizes(),d=t.autoSkipPadding||0,o=u?u.widest.width+d:0,m=u?u.highest.height+d:0;return this.isHorizontal()?m*i>o*s?o/i:m/s:m*s<o*i?m/i:o/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:u,position:d,border:o}=s,m=u.offset,y=this.isHorizontal(),S=this.ticks.length+(m?1:0),A=rm(u),I=[],z=o.setContext(this.getContext()),U=z.display?z.width:0,j=U/2,F=function(st){return Fu(i,st,U)};let H,J,Z,Y,ce,ee,de,ue,Ee,ze,xe,qe;if(d==="top")H=F(this.bottom),ee=this.bottom-A,ue=H-j,ze=F(t.top)+j,qe=t.bottom;else if(d==="bottom")H=F(this.top),ze=t.top,qe=F(t.bottom)-j,ee=H+j,ue=this.top+A;else if(d==="left")H=F(this.right),ce=this.right-A,de=H-j,Ee=F(t.left)+j,xe=t.right;else if(d==="right")H=F(this.left),Ee=t.left,xe=F(t.right)-j,ce=H+j,de=this.left+A;else if(n==="x"){if(d==="center")H=F((t.top+t.bottom)/2+.5);else if(Cr(d)){const st=Object.keys(d)[0],it=d[st];H=F(this.chart.scales[st].getPixelForValue(it))}ze=t.top,qe=t.bottom,ee=H+j,ue=ee+A}else if(n==="y"){if(d==="center")H=F((t.left+t.right)/2);else if(Cr(d)){const st=Object.keys(d)[0],it=d[st];H=F(this.chart.scales[st].getPixelForValue(it))}ce=H-j,de=ce-A,Ee=t.left,xe=t.right}const Qe=ir(s.ticks.maxTicksLimit,S),Be=Math.max(1,Math.ceil(S/Qe));for(J=0;J<S;J+=Be){const st=this.getContext(J),it=u.setContext(st),Pt=o.setContext(st),Ke=it.lineWidth,ut=it.color,jt=Pt.dash||[],on=Pt.dashOffset,En=it.tickWidth,Dn=it.tickColor,Je=it.tickBorderDash||[],yt=it.tickBorderDashOffset;Z=XJ(this,J,m),Z!==void 0&&(Y=Fu(i,Z,Ke),y?ce=de=Ee=xe=Y:ee=ue=ze=qe=Y,I.push({tx1:ce,ty1:ee,tx2:de,ty2:ue,x1:Ee,y1:ze,x2:xe,y2:qe,width:Ke,color:ut,borderDash:jt,borderDashOffset:on,tickWidth:En,tickColor:Dn,tickBorderDash:Je,tickBorderDashOffset:yt}))}return this._ticksLength=S,this._borderValue=H,I}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:u}=i,d=this.isHorizontal(),o=this.ticks,{align:m,crossAlign:y,padding:w,mirror:S}=u,A=rm(i.grid),I=A+w,z=S?-w:I,U=-sa(this.labelRotation),j=[];let F,H,J,Z,Y,ce,ee,de,ue,Ee,ze,xe,qe="middle";if(s==="top")ce=this.bottom-z,ee=this._getXAxisLabelAlignment();else if(s==="bottom")ce=this.top+z,ee=this._getXAxisLabelAlignment();else if(s==="left"){const Be=this._getYAxisLabelAlignment(A);ee=Be.textAlign,Y=Be.x}else if(s==="right"){const Be=this._getYAxisLabelAlignment(A);ee=Be.textAlign,Y=Be.x}else if(n==="x"){if(s==="center")ce=(t.top+t.bottom)/2+I;else if(Cr(s)){const Be=Object.keys(s)[0],st=s[Be];ce=this.chart.scales[Be].getPixelForValue(st)+I}ee=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")Y=(t.left+t.right)/2-I;else if(Cr(s)){const Be=Object.keys(s)[0],st=s[Be];Y=this.chart.scales[Be].getPixelForValue(st)}ee=this._getYAxisLabelAlignment(A).textAlign}n==="y"&&(m==="start"?qe="top":m==="end"&&(qe="bottom"));const Qe=this._getLabelSizes();for(F=0,H=o.length;F<H;++F){J=o[F],Z=J.label;const Be=u.setContext(this.getContext(F));de=this.getPixelForTick(F)+u.labelOffset,ue=this._resolveTickFontOptions(F),Ee=ue.lineHeight,ze=_i(Z)?Z.length:1;const st=ze/2,it=Be.color,Pt=Be.textStrokeColor,Ke=Be.textStrokeWidth;let ut=ee;d?(Y=de,ee==="inner"&&(F===H-1?ut=this.options.reverse?"left":"right":F===0?ut=this.options.reverse?"right":"left":ut="center"),s==="top"?y==="near"||U!==0?xe=-ze*Ee+Ee/2:y==="center"?xe=-Qe.highest.height/2-st*Ee+Ee:xe=-Qe.highest.height+Ee/2:y==="near"||U!==0?xe=Ee/2:y==="center"?xe=Qe.highest.height/2-st*Ee:xe=Qe.highest.height-ze*Ee,S&&(xe*=-1),U!==0&&!Be.showLabelBackdrop&&(Y+=Ee/2*Math.sin(U))):(ce=de,xe=(1-ze)*Ee/2);let jt;if(Be.showLabelBackdrop){const on=No(Be.backdropPadding),En=Qe.heights[F],Dn=Qe.widths[F];let Je=xe-on.top,yt=0-on.left;switch(qe){case"middle":Je-=En/2;break;case"bottom":Je-=En;break}switch(ee){case"center":yt-=Dn/2;break;case"right":yt-=Dn;break}jt={left:yt,top:Je,width:Dn+on.width,height:En+on.height,color:Be.backdropColor}}j.push({label:Z,font:ue,textOffset:xe,options:{rotation:U,color:it,strokeColor:Pt,strokeWidth:Ke,textAlign:ut,textBaseline:qe,translation:[Y,ce],backdrop:jt}})}return j}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-sa(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:u}}=this.options,d=this._getLabelSizes(),o=t+u,m=d.widest.width;let y,w;return n==="left"?s?(w=this.right+u,i==="near"?y="left":i==="center"?(y="center",w+=m/2):(y="right",w+=m)):(w=this.right-o,i==="near"?y="right":i==="center"?(y="center",w-=m/2):(y="left",w=this.left)):n==="right"?s?(w=this.left+u,i==="near"?y="right":i==="center"?(y="center",w-=m/2):(y="left",w-=m)):(w=this.left+o,i==="near"?y="left":i==="center"?(y="center",w+=m/2):(y="right",w=this.right)):y="right",{textAlign:y,x:w}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:u,height:d}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,u,d),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(u=>u.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let u,d;const o=(m,y,w)=>{!w.width||!w.color||(i.save(),i.lineWidth=w.width,i.strokeStyle=w.color,i.setLineDash(w.borderDash||[]),i.lineDashOffset=w.borderDashOffset,i.beginPath(),i.moveTo(m.x,m.y),i.lineTo(y.x,y.y),i.stroke(),i.restore())};if(n.display)for(u=0,d=s.length;u<d;++u){const m=s[u];n.drawOnChartArea&&o({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),n.drawTicks&&o({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,u=i.setContext(this.getContext()),d=i.display?u.width:0;if(!d)return;const o=s.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let y,w,S,A;this.isHorizontal()?(y=Fu(t,this.left,d)-d/2,w=Fu(t,this.right,o)+o/2,S=A=m):(S=Fu(t,this.top,d)-d/2,A=Fu(t,this.bottom,o)+o/2,y=w=m),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(y,S),n.lineTo(w,A),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&g0(i,s);const u=this.getLabelItems(t);for(const d of u){const o=d.options,m=d.font,y=d.label,w=d.textOffset;fd(i,y,0,w,m,o)}s&&v0(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const u=oo(i.font),d=No(i.padding),o=i.align;let m=u.lineHeight/2;n==="bottom"||n==="center"||Cr(n)?(m+=d.bottom,_i(i.text)&&(m+=u.lineHeight*(i.text.length-1))):m+=d.top;const{titleX:y,titleY:w,maxWidth:S,rotation:A}=tQ(this,m,n,o);fd(t,i.text,0,0,u,{color:i.color,maxWidth:S,rotation:A,textAlign:eQ(o,n,s),textBaseline:"middle",translation:[y,w]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=ir(t.grid&&t.grid.z,-1),s=ir(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ed.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:i,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let u,d;for(u=0,d=n.length;u<d;++u){const o=n[u];o[i]===this.id&&(!t||o.type===t)&&s.push(o)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return oo(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class z_{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;iQ(n)&&(i=this.register(n));const s=this.items,u=t.id,d=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+t);return u in s||(s[u]=t,nQ(t,d,i),this.override&&Fi.override(t.id,t.overrides)),d}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in Fi[s]&&(delete Fi[s][i],this.override&&delete hd[i])}}function nQ(e,t,n){const i=Qm(Object.create(null),[n?Fi.get(n):{},Fi.get(t),e.defaults]);Fi.set(t,i),e.defaultRoutes&&rQ(t,e.defaultRoutes),e.descriptors&&Fi.describe(t,e.descriptors)}function rQ(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),u=[e].concat(i).join("."),d=t[n].split("."),o=d.pop(),m=d.join(".");Fi.route(u,s,m,o)})}function iQ(e){return"id"in e&&"defaults"in e}class oQ{constructor(){this.controllers=new z_(la,"datasets",!0),this.elements=new z_(Dl,"elements"),this.plugins=new z_(Object,"plugins"),this.scales=new z_(Ed,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const u=i||this._getRegistryForType(s);i||u.isForType(s)||u===this.plugins&&s.id?this._exec(t,u,s):ti(s,d=>{const o=i||this._getRegistryForType(d);this._exec(t,o,d)})})}_exec(t,n,i){const s=eC(t);ci(i["before"+s],[],i),n[t](i),ci(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var za=new oQ;class sQ{constructor(){this._init=[]}notify(t,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const u=s?this._descriptors(t).filter(s):this._descriptors(t),d=this._notify(u,t,n,i);return n==="afterDestroy"&&(this._notify(u,t,"stop"),this._notify(this._init,t,"uninstall")),d}_notify(t,n,i,s){s=s||{};for(const u of t){const d=u.plugin,o=d[i],m=[n,s,u.options];if(ci(o,m,d)===!1&&s.cancelable)return!1}return!0}invalidate(){Br(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=ir(i.options&&i.options.plugins,{}),u=aQ(i);return s===!1&&!n?[]:cQ(t,u,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(u,d)=>u.filter(o=>!d.some(m=>o.plugin.id===m.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function aQ(e){const t={},n=[],i=Object.keys(za.plugins.items);for(let u=0;u<i.length;u++)n.push(za.getPlugin(i[u]));const s=e.plugins||[];for(let u=0;u<s.length;u++){const d=s[u];n.indexOf(d)===-1&&(n.push(d),t[d.id]=!0)}return{plugins:n,localIds:t}}function lQ(e,t){return!t&&e===!1?null:e===!0?{}:e}function cQ(e,{plugins:t,localIds:n},i,s){const u=[],d=e.getContext();for(const o of t){const m=o.id,y=lQ(i[m],s);y!==null&&u.push({plugin:o,options:uQ(e.config,{plugin:o,local:n[m]},y,d)})}return u}function uQ(e,{plugin:t,local:n},i,s){const u=e.pluginScopeKeys(t),d=e.getOptionScopes(i,u);return n&&t.defaults&&d.push(t.defaults),e.createResolver(d,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ww(e,t){const n=Fi.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function dQ(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function hQ(e,t){return e===t?"_index_":"_value_"}function vA(e){if(e==="x"||e==="y"||e==="r")return e}function fQ(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Tw(e,...t){if(vA(e))return e;for(const n of t){const i=n.axis||fQ(n.position)||e.length>1&&vA(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function _A(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function pQ(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return _A(e,"x",n[0])||_A(e,"y",n[0])}return{}}function mQ(e,t){const n=hd[e.type]||{scales:{}},i=t.scales||{},s=ww(e.type,t),u=Object.create(null);return Object.keys(i).forEach(d=>{const o=i[d];if(!Cr(o))return console.error(`Invalid scale configuration for scale: ${d}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${d}`);const m=Tw(d,o,pQ(d,e),Fi.scales[o.type]),y=hQ(m,s),w=n.scales||{};u[d]=Sm(Object.create(null),[{axis:m},o,w[m],w[y]])}),e.data.datasets.forEach(d=>{const o=d.type||e.type,m=d.indexAxis||ww(o,t),w=(hd[o]||{}).scales||{};Object.keys(w).forEach(S=>{const A=dQ(S,m),I=d[A+"AxisID"]||A;u[I]=u[I]||Object.create(null),Sm(u[I],[{axis:A},i[I],w[S]])})}),Object.keys(u).forEach(d=>{const o=u[d];Sm(o,[Fi.scales[o.type],Fi.scale])}),u}function DR(e){const t=e.options||(e.options={});t.plugins=ir(t.plugins,{}),t.scales=mQ(e,t)}function IR(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function gQ(e){return e=e||{},e.data=IR(e.data),DR(e),e}const yA=new Map,zR=new Set;function R_(e,t){let n=yA.get(e);return n||(n=t(),yA.set(e,n),zR.add(n)),n}const im=(e,t,n)=>{const i=Rc(t,n);i!==void 0&&e.add(i)};class vQ{constructor(t){this._config=gQ(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=IR(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),DR(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return R_(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return R_(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return R_(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return R_(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:u}=this,d=this._cachedScopes(t,i),o=d.get(n);if(o)return o;const m=new Set;n.forEach(w=>{t&&(m.add(t),w.forEach(S=>im(m,t,S))),w.forEach(S=>im(m,s,S)),w.forEach(S=>im(m,hd[u]||{},S)),w.forEach(S=>im(m,Fi,S)),w.forEach(S=>im(m,yw,S))});const y=Array.from(m);return y.length===0&&y.push(Object.create(null)),zR.has(n)&&d.set(n,y),y}chartOptionScopes(){const{options:t,type:n}=this;return[t,hd[n]||{},Fi.datasets[n]||{},{type:n},Fi,yw]}resolveNamedOptions(t,n,i,s=[""]){const u={$shared:!0},{resolver:d,subPrefixes:o}=xA(this._resolverCache,t,s);let m=d;if(yQ(d,n)){u.$shared=!1,i=Oc(i)?i():i;const y=this.createResolver(t,i,o);m=hf(d,i,y)}for(const y of n)u[y]=m[y];return u}createResolver(t,n,i=[""],s){const{resolver:u}=xA(this._resolverCache,t,i);return Cr(n)?hf(u,n,void 0,s):u}}function xA(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let u=i.get(s);return u||(u={resolver:sC(t,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},i.set(s,u)),u}const _Q=e=>Cr(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||Oc(e[n]),!1);function yQ(e,t){const{isScriptable:n,isIndexable:i}=dR(e);for(const s of t){const u=n(s),d=i(s),o=(d||u)&&e[s];if(u&&(Oc(o)||_Q(o))||d&&_i(o))return!0}return!1}var xQ="4.3.0";const bQ=["top","bottom","left","right","chartArea"];function bA(e,t){return e==="top"||e==="bottom"||bQ.indexOf(e)===-1&&t==="x"}function wA(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function TA(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ci(n&&n.onComplete,[e],t)}function wQ(e){const t=e.chart,n=t.options.animation;ci(n&&n.onProgress,[e],t)}function RR(e){return vR()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ty={},CA=e=>{const t=RR(e);return Object.values(ty).filter(n=>n.canvas===t).pop()};function TQ(e,t,n){const i=Object.keys(e);for(const s of i){const u=+s;if(u>=t){const d=e[s];delete e[s],(n>0||u>t)&&(e[u+n]=d)}}}function CQ(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function SQ(e){const{xScale:t,yScale:n}=e;if(t&&n)return{left:t.left,right:t.right,top:n.top,bottom:n.bottom}}class xl{static register(...t){za.add(...t),SA()}static unregister(...t){za.remove(...t),SA()}constructor(t,n){const i=this.config=new vQ(n),s=RR(t),u=CA(s);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const d=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||VJ(s)),this.platform.updateConfig(i);const o=this.platform.acquireContext(s,d.aspectRatio),m=o&&o.canvas,y=m&&m.height,w=m&&m.width;if(this.id=MX(),this.ctx=o,this.canvas=m,this.width=w,this.height=y,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sQ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=jX(S=>this.update(S),d.resizeDelay||0),this._dataChanges=[],ty[this.id]=this,!o||!m){console.error("Failed to create chart: can't acquire context from the given item");return}pl.listen(this,"complete",TA),pl.listen(this,"progress",wQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:u}=this;return Br(t)?n&&u?u:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return za}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():GP(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jP(this.canvas,this.ctx),this}stop(){return pl.stop(this),this}resize(t,n){pl.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,u=i.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(s,t,n,u),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,GP(this,o,!0)&&(this.notifyPlugins("resize",{size:d}),ci(i.onResize,[this,d],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ti(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((d,o)=>(d[o]=!1,d),{});let u=[];n&&(u=u.concat(Object.keys(n).map(d=>{const o=n[d],m=Tw(d,o),y=m==="r",w=m==="x";return{options:o,dposition:y?"chartArea":w?"bottom":"left",dtype:y?"radialLinear":w?"category":"linear"}}))),ti(u,d=>{const o=d.options,m=o.id,y=Tw(m,o),w=ir(o.type,d.dtype);(o.position===void 0||bA(o.position,y)!==bA(d.dposition))&&(o.position=d.dposition),s[m]=!0;let S=null;if(m in i&&i[m].type===w)S=i[m];else{const A=za.getScale(w);S=new A({id:m,type:w,ctx:this.ctx,chart:this}),i[S.id]=S}S.init(o,t)}),ti(s,(d,o)=>{d||delete i[o]}),ti(i,d=>{$o.configure(this,d,d.options),$o.addBox(this,d)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,u)=>s.index-u.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(wA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(u=>u===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const u=n[i];let d=this.getDatasetMeta(i);const o=u.type||this.config.type;if(d.type&&d.type!==o&&(this._destroyDatasetMeta(i),d=this.getDatasetMeta(i)),d.type=o,d.indexAxis=u.indexAxis||ww(o,this.options),d.order=u.order||0,d.index=i,d.label=""+u.label,d.visible=this.isDatasetVisible(i),d.controller)d.controller.updateIndex(i),d.controller.linkScales();else{const m=za.getController(o),{datasetElementType:y,dataElementType:w}=Fi.datasets[o];Object.assign(m,{dataElementType:za.getElement(w),datasetElementType:y&&za.getElement(y)}),d.controller=new m(this,i),t.push(d.controller)}}return this._updateMetasets(),t}_resetElements(){ti(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let y=0,w=this.data.datasets.length;y<w;y++){const{controller:S}=this.getDatasetMeta(y),A=!s&&u.indexOf(S)===-1;S.buildOrUpdateElements(A),d=Math.max(+S.getMaxOverflow(),d)}d=this._minPadding=i.layout.autoPadding?d:0,this._updateLayout(d),s||ti(u,y=>{y.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(wA("z","_idx"));const{_active:o,_lastEvent:m}=this;m?this._eventHandler(m,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ti(this.scales,t=>{$o.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!RP(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:u}of n){const d=i==="_removeElements"?-u:u;TQ(t,s,d)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=u=>new Set(t.filter(d=>d[0]===u).map((d,o)=>o+","+d.splice(1).join(","))),s=i(0);for(let u=1;u<n;u++)if(!RP(s,i(u)))return;return Array.from(s).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$o.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ti(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,u)=>{s._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Oc(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pl.has(this)?this.attached&&!pl.running(this)&&pl.start(this):(this.draw(),TA({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,u;for(s=0,u=n.length;s<u;++s){const d=n[s];(!t||d.visible)&&i.push(d)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,s=!i.disabled,u=SQ(t)||this.chartArea,d={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",d)!==!1&&(s&&g0(n,{left:i.left===!1?0:u.left-i.left,right:i.right===!1?this.width:u.right+i.right,top:i.top===!1?0:u.top-i.top,bottom:i.bottom===!1?this.height:u.bottom+i.bottom}),t.controller.draw(),s&&v0(n),d.cancelable=!1,this.notifyPlugins("afterDatasetDraw",d))}isPointInArea(t){return Tl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const u=bJ.modes[n];return typeof u=="function"?u(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(u=>u&&u._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Nc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",u=this.getDatasetMeta(t),d=u.controller._resolveAnimations(void 0,s);eg(n)?(u.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),d.update(u,{visible:i}),this.update(o=>o.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),pl.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),jP(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ty[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(u,d)=>{n.addEventListener(this,u,d),t[u]=d},s=(u,d,o)=>{u.offsetX=d,u.offsetY=o,this._eventHandler(u)};ti(this.options.events,u=>i(u,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(m,y)=>{n.addEventListener(this,m,y),t[m]=y},s=(m,y)=>{t[m]&&(n.removeEventListener(this,m,y),delete t[m])},u=(m,y)=>{this.canvas&&this.resize(m,y)};let d;const o=()=>{s("attach",o),this.attached=!0,this.resize(),i("resize",u),i("detach",d)};d=()=>{this.attached=!1,s("resize",u),this._stop(),this._resize(0,0),i("attach",o)},n.isAttached(this.canvas)?o():d()}unbindEvents(){ti(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},ti(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let u,d,o,m;for(n==="dataset"&&(u=this.getDatasetMeta(t[0].datasetIndex),u.controller["_"+s+"DatasetHoverStyle"]()),o=0,m=t.length;o<m;++o){d=t[o];const y=d&&this.getDatasetMeta(d.datasetIndex).controller;y&&y[s+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:u,index:d})=>{const o=this.getDatasetMeta(u);if(!o)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:o.data[d],index:d}});!Iy(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,u=(m,y)=>m.filter(w=>!y.some(S=>w.datasetIndex===S.datasetIndex&&w.index===S.index)),d=u(n,t),o=i?t:u(t,n);d.length&&this.updateHoverStyle(d,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=d=>(d.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const u=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(u||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:u}=this,d=n,o=this._getActiveElements(t,s,i,d),m=zX(t),y=CQ(t,this._lastEvent,i,m);i&&(this._lastEvent=null,ci(u.onHover,[t,o,this],this),m&&ci(u.onClick,[t,o,this],this));const w=!Iy(o,s);return(w||n)&&(this._active=o,this._updateHoverStyles(o,s,n)),this._lastEvent=y,w}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const u=this.options.hover;return this.getElementsAtEventForMode(t,u.mode,u,s)}}cn(xl,"defaults",Fi),cn(xl,"instances",ty),cn(xl,"overrides",hd),cn(xl,"registry",za),cn(xl,"version",xQ),cn(xl,"getChart",CA);function SA(){return ti(xl.instances,e=>e._plugins.invalidate())}function EQ(e,t,n){const{startAngle:i,pixelMargin:s,x:u,y:d,outerRadius:o,innerRadius:m}=t;let y=s/o;e.beginPath(),e.arc(u,d,o,i-y,n+y),m>s?(y=s/m,e.arc(u,d,m,n+y,i-y,!0)):e.arc(u,d,s,n+Bi,i-Bi),e.closePath(),e.clip()}function MQ(e){return oC(e,["outerStart","outerEnd","innerStart","innerEnd"])}function PQ(e,t,n,i){const s=MQ(e.options.borderRadius),u=(n-t)/2,d=Math.min(u,i*t/2),o=m=>{const y=(n-Math.min(u,m))*i/2;return _o(m,0,Math.min(u,y))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:_o(s.innerStart,0,d),innerEnd:_o(s.innerEnd,0,d)}}function Bh(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Fy(e,t,n,i,s,u){const{x:d,y:o,startAngle:m,pixelMargin:y,innerRadius:w}=t,S=Math.max(t.outerRadius+i+n-y,0),A=w>0?w+i+n+y:0;let I=0;const z=s-m;if(i){const Be=w>0?w-i:0,st=S>0?S-i:0,it=(Be+st)/2,Pt=it!==0?z*it/(it+i):z;I=(z-Pt)/2}const U=Math.max(.001,z*S-n/Ci)/S,j=(z-U)/2,F=m+j+I,H=s-j-I,{outerStart:J,outerEnd:Z,innerStart:Y,innerEnd:ce}=PQ(t,A,S,H-F),ee=S-J,de=S-Z,ue=F+J/ee,Ee=H-Z/de,ze=A+Y,xe=A+ce,qe=F+Y/ze,Qe=H-ce/xe;if(e.beginPath(),u){const Be=(ue+Ee)/2;if(e.arc(d,o,S,ue,Be),e.arc(d,o,S,Be,Ee),Z>0){const Ke=Bh(de,Ee,d,o);e.arc(Ke.x,Ke.y,Z,Ee,H+Bi)}const st=Bh(xe,H,d,o);if(e.lineTo(st.x,st.y),ce>0){const Ke=Bh(xe,Qe,d,o);e.arc(Ke.x,Ke.y,ce,H+Bi,Qe+Math.PI)}const it=(H-ce/A+(F+Y/A))/2;if(e.arc(d,o,A,H-ce/A,it,!0),e.arc(d,o,A,it,F+Y/A,!0),Y>0){const Ke=Bh(ze,qe,d,o);e.arc(Ke.x,Ke.y,Y,qe+Math.PI,F-Bi)}const Pt=Bh(ee,F,d,o);if(e.lineTo(Pt.x,Pt.y),J>0){const Ke=Bh(ee,ue,d,o);e.arc(Ke.x,Ke.y,J,F-Bi,ue)}}else{e.moveTo(d,o);const Be=Math.cos(ue)*S+d,st=Math.sin(ue)*S+o;e.lineTo(Be,st);const it=Math.cos(Ee)*S+d,Pt=Math.sin(Ee)*S+o;e.lineTo(it,Pt)}e.closePath()}function AQ(e,t,n,i,s){const{fullCircles:u,startAngle:d,circumference:o}=t;let m=t.endAngle;if(u){Fy(e,t,n,i,m,s);for(let y=0;y<u;++y)e.fill();isNaN(o)||(m=d+(o%yi||yi))}return Fy(e,t,n,i,m,s),e.fill(),m}function kQ(e,t,n,i,s){const{fullCircles:u,startAngle:d,circumference:o,options:m}=t,{borderWidth:y,borderJoinStyle:w,borderDash:S,borderDashOffset:A}=m,I=m.borderAlign==="inner";if(!y)return;e.setLineDash(S||[]),e.lineDashOffset=A,I?(e.lineWidth=y*2,e.lineJoin=w||"round"):(e.lineWidth=y,e.lineJoin=w||"bevel");let z=t.endAngle;if(u){Fy(e,t,n,i,z,s);for(let U=0;U<u;++U)e.stroke();isNaN(o)||(z=d+(o%yi||yi))}I&&EQ(e,t,z),u||(Fy(e,t,n,i,z,s),e.stroke())}class hm extends Dl{constructor(n){super();cn(this,"circumference");cn(this,"endAngle");cn(this,"fullCircles");cn(this,"innerRadius");cn(this,"outerRadius");cn(this,"pixelMargin");cn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,s){const u=this.getProps(["x","y"],s),{angle:d,distance:o}=tR(u,{x:n,y:i}),{startAngle:m,endAngle:y,innerRadius:w,outerRadius:S,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),I=(this.options.spacing+this.options.borderWidth)/2,U=ir(A,y-m)>=yi||tg(d,m,y),j=bl(o,w+I,S+I);return U&&j}getCenterPoint(n){const{x:i,y:s,startAngle:u,endAngle:d,innerRadius:o,outerRadius:m}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:y,spacing:w}=this.options,S=(u+d)/2,A=(o+m+w+y)/2;return{x:i+Math.cos(S)*A,y:s+Math.sin(S)*A}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:s}=this,u=(i.offset||0)/4,d=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>yi?Math.floor(s/yi):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const m=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(m)*u,Math.sin(m)*u);const y=1-Math.sin(Math.min(Ci,s||0)),w=u*y;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,AQ(n,this,w,d,o),kQ(n,this,w,d,o),n.restore()}}cn(hm,"id","arc"),cn(hm,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),cn(hm,"defaultRoutes",{backgroundColor:"backgroundColor"}),cn(hm,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function OR(e,t,n=t){e.lineCap=ir(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ir(n.borderDash,t.borderDash)),e.lineDashOffset=ir(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ir(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ir(n.borderWidth,t.borderWidth),e.strokeStyle=ir(n.borderColor,t.borderColor)}function DQ(e,t,n){e.lineTo(n.x,n.y)}function IQ(e){return e.stepped?tK:e.tension||e.cubicInterpolationMode==="monotone"?nK:DQ}function LR(e,t,n={}){const i=e.length,{start:s=0,end:u=i-1}=n,{start:d,end:o}=t,m=Math.max(s,d),y=Math.min(u,o),w=s<d&&u<d||s>o&&u>o;return{count:i,start:m,loop:t.loop,ilen:y<m&&!w?i+y-m:y-m}}function zQ(e,t,n,i){const{points:s,options:u}=t,{count:d,start:o,loop:m,ilen:y}=LR(s,n,i),w=IQ(u);let{move:S=!0,reverse:A}=i||{},I,z,U;for(I=0;I<=y;++I)z=s[(o+(A?y-I:I))%d],!z.skip&&(S?(e.moveTo(z.x,z.y),S=!1):w(e,U,z,A,u.stepped),U=z);return m&&(z=s[(o+(A?y:0))%d],w(e,U,z,A,u.stepped)),!!m}function RQ(e,t,n,i){const s=t.points,{count:u,start:d,ilen:o}=LR(s,n,i),{move:m=!0,reverse:y}=i||{};let w=0,S=0,A,I,z,U,j,F;const H=Z=>(d+(y?o-Z:Z))%u,J=()=>{U!==j&&(e.lineTo(w,j),e.lineTo(w,U),e.lineTo(w,F))};for(m&&(I=s[H(0)],e.moveTo(I.x,I.y)),A=0;A<=o;++A){if(I=s[H(A)],I.skip)continue;const Z=I.x,Y=I.y,ce=Z|0;ce===z?(Y<U?U=Y:Y>j&&(j=Y),w=(S*w+Z)/++S):(J(),e.lineTo(Z,Y),z=ce,S=0,U=j=Y),F=Y}J()}function Cw(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?RQ:zQ}function OQ(e){return e.stepped?RK:e.tension||e.cubicInterpolationMode==="monotone"?OK:Wu}function LQ(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),OR(e,t.options),e.stroke(s)}function BQ(e,t,n,i){const{segments:s,options:u}=t,d=Cw(t);for(const o of s)OR(e,u,o.style),e.beginPath(),d(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const FQ=typeof Path2D=="function";function $Q(e,t,n,i){FQ&&!t.options.segment?LQ(e,t,n,i):BQ(e,t,n,i)}class Cc extends Dl{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;EK(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=UK(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],u=this.points,d=wR(this,{property:n,start:s,end:s});if(!d.length)return;const o=[],m=OQ(i);let y,w;for(y=0,w=d.length;y<w;++y){const{start:S,end:A}=d[y],I=u[S],z=u[A];if(I===z){o.push(I);continue}const U=Math.abs((s-I[n])/(z[n]-I[n])),j=m(I,z,U,i.stepped);j[n]=t[n],o.push(j)}return o.length===1?o[0]:o}pathSegment(t,n,i){return Cw(this)(t,this,n,i)}path(t,n,i){const s=this.segments,u=Cw(this);let d=this._loop;n=n||0,i=i||this.points.length-n;for(const o of s)d&=u(t,this,o,{start:n,end:n+i-1});return!!d}draw(t,n,i,s){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(t.save(),$Q(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}cn(Cc,"id","line"),cn(Cc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),cn(Cc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),cn(Cc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function EA(e,t,n,i){const s=e.options,{[n]:u}=e.getProps([n],i);return Math.abs(t-u)<s.radius+s.hitRadius}class ny extends Dl{constructor(n){super();cn(this,"parsed");cn(this,"skip");cn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const u=this.options,{x:d,y:o}=this.getProps(["x","y"],s);return Math.pow(n-d,2)+Math.pow(i-o,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,i){return EA(this,n,"x",i)}inYRange(n,i){return EA(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!Tl(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,xw(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}cn(ny,"id","point"),cn(ny,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),cn(ny,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function BR(e,t){const{x:n,y:i,base:s,width:u,height:d}=e.getProps(["x","y","base","width","height"],t);let o,m,y,w,S;return e.horizontal?(S=d/2,o=Math.min(n,s),m=Math.max(n,s),y=i-S,w=i+S):(S=u/2,o=n-S,m=n+S,y=Math.min(i,s),w=Math.max(i,s)),{left:o,top:y,right:m,bottom:w}}function Sc(e,t,n,i){return e?0:_o(t,n,i)}function NQ(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,u=uR(i);return{t:Sc(s.top,u.top,0,n),r:Sc(s.right,u.right,0,t),b:Sc(s.bottom,u.bottom,0,n),l:Sc(s.left,u.left,0,t)}}function UQ(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,u=id(s),d=Math.min(t,n),o=e.borderSkipped,m=i||Cr(s);return{topLeft:Sc(!m||o.top||o.left,u.topLeft,0,d),topRight:Sc(!m||o.top||o.right,u.topRight,0,d),bottomLeft:Sc(!m||o.bottom||o.left,u.bottomLeft,0,d),bottomRight:Sc(!m||o.bottom||o.right,u.bottomRight,0,d)}}function VQ(e){const t=BR(e),n=t.right-t.left,i=t.bottom-t.top,s=NQ(e,n/2,i/2),u=UQ(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:u},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,u.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(s.b,s.r))}}}}function Ub(e,t,n,i){const s=t===null,u=n===null,o=e&&!(s&&u)&&BR(e,i);return o&&(s||bl(t,o.left,o.right))&&(u||bl(n,o.top,o.bottom))}function jQ(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function WQ(e,t){e.rect(t.x,t.y,t.w,t.h)}function Vb(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,u=(e.x+e.w!==n.x+n.w?t:0)-i,d=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+u,h:e.h+d,radius:e.radius}}class ry extends Dl{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:u,outer:d}=VQ(this),o=jQ(d.radius)?ng:WQ;t.save(),(d.w!==u.w||d.h!==u.h)&&(t.beginPath(),o(t,Vb(d,n,u)),t.clip(),o(t,Vb(u,-n,d)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),o(t,Vb(u,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return Ub(this,t,n,i)}inXRange(t,n){return Ub(this,t,null,n)}inYRange(t,n){return Ub(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:u}=this.getProps(["x","y","base","horizontal"],t);return{x:u?(n+s)/2:n,y:u?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}cn(ry,"id","bar"),cn(ry,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),cn(ry,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var HQ=Object.freeze({__proto__:null,ArcElement:hm,BarElement:ry,LineElement:Cc,PointElement:ny});const Sw=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],MA=Sw.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function FR(e){return Sw[e%Sw.length]}function $R(e){return MA[e%MA.length]}function GQ(e,t){return e.borderColor=FR(t),e.backgroundColor=$R(t),++t}function qQ(e,t){return e.backgroundColor=e.data.map(()=>FR(t++)),t}function ZQ(e,t){return e.backgroundColor=e.data.map(()=>$R(t++)),t}function YQ(e){let t=0;return(n,i)=>{const s=e.getDatasetMeta(i).controller;s instanceof Qu?t=qQ(n,t):s instanceof Am?t=ZQ(n,t):s&&(t=GQ(n,t))}}function PA(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function XQ(e){return e&&(e.borderColor||e.backgroundColor)}var KQ={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:s}=e.config,{elements:u}=s;if(!n.forceOverride&&(PA(i)||XQ(s)||u&&PA(u)))return;const d=YQ(e);i.forEach(d)}};function JQ(e,t,n,i,s){const u=s.samples||i;if(u>=n)return e.slice(t,t+n);const d=[],o=(n-2)/(u-2);let m=0;const y=t+n-1;let w=t,S,A,I,z,U;for(d[m++]=e[w],S=0;S<u-2;S++){let j=0,F=0,H;const J=Math.floor((S+1)*o)+1+t,Z=Math.min(Math.floor((S+2)*o)+1,n)+t,Y=Z-J;for(H=J;H<Z;H++)j+=e[H].x,F+=e[H].y;j/=Y,F/=Y;const ce=Math.floor(S*o)+1+t,ee=Math.min(Math.floor((S+1)*o)+1,n)+t,{x:de,y:ue}=e[w];for(I=z=-1,H=ce;H<ee;H++)z=.5*Math.abs((de-j)*(e[H].y-ue)-(de-e[H].x)*(F-ue)),z>I&&(I=z,A=e[H],U=H);d[m++]=A,w=U}return d[m++]=e[y],d}function QQ(e,t,n,i){let s=0,u=0,d,o,m,y,w,S,A,I,z,U;const j=[],F=t+n-1,H=e[t].x,Z=e[F].x-H;for(d=t;d<t+n;++d){o=e[d],m=(o.x-H)/Z*i,y=o.y;const Y=m|0;if(Y===w)y<z?(z=y,S=d):y>U&&(U=y,A=d),s=(u*s+o.x)/++u;else{const ce=d-1;if(!Br(S)&&!Br(A)){const ee=Math.min(S,A),de=Math.max(S,A);ee!==I&&ee!==ce&&j.push({...e[ee],x:s}),de!==I&&de!==ce&&j.push({...e[de],x:s})}d>0&&ce!==I&&j.push(e[ce]),j.push(o),w=Y,u=0,z=U=y,S=A=I=d}}return j}function NR(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function AA(e){e.data.datasets.forEach(t=>{NR(t)})}function eee(e,t){const n=t.length;let i=0,s;const{iScale:u}=e,{min:d,max:o,minDefined:m,maxDefined:y}=u.getUserBounds();return m&&(i=_o(wl(t,u.axis,d).lo,0,n-1)),y?s=_o(wl(t,u.axis,o).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var tee={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){AA(e);return}const i=e.width;e.data.datasets.forEach((s,u)=>{const{_data:d,indexAxis:o}=s,m=e.getDatasetMeta(u),y=d||s.data;if(um([o,e.options.indexAxis])==="y"||!m.controller.supportsDecimation)return;const w=e.scales[m.xAxisID];if(w.type!=="linear"&&w.type!=="time"||e.options.parsing)return;let{start:S,count:A}=eee(m,y);const I=n.threshold||4*i;if(A<=I){NR(s);return}Br(d)&&(s._data=y,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(U){this._data=U}}));let z;switch(n.algorithm){case"lttb":z=JQ(y,S,A,i,n);break;case"min-max":z=QQ(y,S,A,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=z})},destroy(e){AA(e)}};function nee(e,t,n){const i=e.segments,s=e.points,u=t.points,d=[];for(const o of i){let{start:m,end:y}=o;y=dC(m,y,s);const w=Ew(n,s[m],s[y],o.loop);if(!t.segments){d.push({source:o,target:w,start:s[m],end:s[y]});continue}const S=wR(t,w);for(const A of S){const I=Ew(n,u[A.start],u[A.end],A.loop),z=bR(o,s,I);for(const U of z)d.push({source:U,target:A,start:{[n]:kA(w,I,"start",Math.max)},end:{[n]:kA(w,I,"end",Math.min)}})}}return d}function Ew(e,t,n,i){if(i)return;let s=t[e],u=n[e];return e==="angle"&&(s=ys(s),u=ys(u)),{property:e,start:s,end:u}}function ree(e,t){const{x:n=null,y:i=null}=e||{},s=t.points,u=[];return t.segments.forEach(({start:d,end:o})=>{o=dC(d,o,s);const m=s[d],y=s[o];i!==null?(u.push({x:m.x,y:i}),u.push({x:y.x,y:i})):n!==null&&(u.push({x:n,y:m.y}),u.push({x:n,y:y.y}))}),u}function dC(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function kA(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function UR(e,t){let n=[],i=!1;return _i(e)?(i=!0,n=e):n=ree(e,t),n.length?new Cc({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function DA(e){return e&&e.fill!==!1}function iee(e,t,n){let s=e[t].fill;const u=[t];let d;if(!n)return s;for(;s!==!1&&u.indexOf(s)===-1;){if(!Li(s))return s;if(d=e[s],!d)return!1;if(d.visible)return s;u.push(s),s=d.fill}return!1}function oee(e,t,n){const i=cee(e);if(Cr(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Li(s)&&Math.floor(s)===s?see(i[0],t,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function see(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function aee(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Cr(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function lee(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Cr(e)?i=e.value:i=t.getBaseValue(),i}function cee(e){const t=e.options,n=t.fill;let i=ir(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function uee(e){const{scale:t,index:n,line:i}=e,s=[],u=i.segments,d=i.points,o=dee(t,n);o.push(UR({x:null,y:t.bottom},i));for(let m=0;m<u.length;m++){const y=u[m];for(let w=y.start;w<=y.end;w++)hee(s,d[w],o)}return new Cc({points:s,options:{}})}function dee(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const u=i[s];if(u.index===t)break;u.hidden||n.unshift(u.dataset)}return n}function hee(e,t,n){const i=[];for(let s=0;s<n.length;s++){const u=n[s],{first:d,last:o,point:m}=fee(u,t,"x");if(!(!m||d&&o)){if(d)i.unshift(m);else if(e.push(m),!o)break}}e.push(...i)}function fee(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const s=i[n],u=e.segments,d=e.points;let o=!1,m=!1;for(let y=0;y<u.length;y++){const w=u[y],S=d[w.start][n],A=d[w.end][n];if(bl(s,S,A)){o=s===S,m=s===A;break}}return{first:o,last:m,point:i}}class VR{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:s,y:u,radius:d}=this;return n=n||{start:0,end:yi},t.arc(s,u,d,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:s}=this,u=t.angle;return{x:n+Math.cos(u)*s,y:i+Math.sin(u)*s,angle:u}}}function pee(e){const{chart:t,fill:n,line:i}=e;if(Li(n))return mee(t,n);if(n==="stack")return uee(e);if(n==="shape")return!0;const s=gee(e);return s instanceof VR?s:UR(s,i)}function mee(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function gee(e){return(e.scale||{}).getPointPositionForValue?_ee(e):vee(e)}function vee(e){const{scale:t={},fill:n}=e,i=aee(n,t);if(Li(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function _ee(e){const{scale:t,fill:n}=e,i=t.options,s=t.getLabels().length,u=i.reverse?t.max:t.min,d=lee(n,t,u),o=[];if(i.grid.circular){const m=t.getPointPositionForValue(0,u);return new VR({x:m.x,y:m.y,radius:t.getDistanceFromCenterForValue(d)})}for(let m=0;m<s;++m)o.push(t.getPointPositionForValue(m,d));return o}function jb(e,t,n){const i=pee(t),{line:s,scale:u,axis:d}=t,o=s.options,m=o.fill,y=o.backgroundColor,{above:w=y,below:S=y}=m||{};i&&s.points.length&&(g0(e,n),yee(e,{line:s,target:i,above:w,below:S,area:n,scale:u,axis:d}),v0(e))}function yee(e,t){const{line:n,target:i,above:s,below:u,area:d,scale:o}=t,m=n._loop?"angle":t.axis;e.save(),m==="x"&&u!==s&&(IA(e,i,d.top),zA(e,{line:n,target:i,color:s,scale:o,property:m}),e.restore(),e.save(),IA(e,i,d.bottom)),zA(e,{line:n,target:i,color:u,scale:o,property:m}),e.restore()}function IA(e,t,n){const{segments:i,points:s}=t;let u=!0,d=!1;e.beginPath();for(const o of i){const{start:m,end:y}=o,w=s[m],S=s[dC(m,y,s)];u?(e.moveTo(w.x,w.y),u=!1):(e.lineTo(w.x,n),e.lineTo(w.x,w.y)),d=!!t.pathSegment(e,o,{move:d}),d?e.closePath():e.lineTo(S.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function zA(e,t){const{line:n,target:i,property:s,color:u,scale:d}=t,o=nee(n,i,s);for(const{source:m,target:y,start:w,end:S}of o){const{style:{backgroundColor:A=u}={}}=m,I=i!==!0;e.save(),e.fillStyle=A,xee(e,d,I&&Ew(s,w,S)),e.beginPath();const z=!!n.pathSegment(e,m);let U;if(I){z?e.closePath():RA(e,i,S,s);const j=!!i.pathSegment(e,y,{move:z,reverse:!0});U=z&&j,U||RA(e,i,w,s)}e.closePath(),e.fill(U?"evenodd":"nonzero"),e.restore()}}function xee(e,t,n){const{top:i,bottom:s}=t.chart.chartArea,{property:u,start:d,end:o}=n||{};u==="x"&&(e.beginPath(),e.rect(d,i,o-d,s-i),e.clip())}function RA(e,t,n,i){const s=t.interpolate(n,i);s&&e.lineTo(s.x,s.y)}var bee={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,s=[];let u,d,o,m;for(d=0;d<i;++d)u=e.getDatasetMeta(d),o=u.dataset,m=null,o&&o.options&&o instanceof Cc&&(m={visible:e.isDatasetVisible(d),index:d,fill:oee(o,d,i),chart:e,axis:u.controller.options.indexAxis,scale:u.vScale,line:o}),u.$filler=m,s.push(m);for(d=0;d<i;++d)m=s[d],!(!m||m.fill===!1)&&(m.fill=iee(s,d,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),u=e.chartArea;for(let d=s.length-1;d>=0;--d){const o=s[d].$filler;o&&(o.line.updateControlPoints(u,o.axis),i&&o.fill&&jb(e.ctx,o,u))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const u=i[s].$filler;DA(u)&&jb(e.ctx,u,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!DA(i)||n.drawTime!=="beforeDatasetDraw"||jb(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const OA=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},wee=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class LA extends Dl{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ci(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=oo(i.font),u=s.size,d=this._computeTitleHeight(),{boxWidth:o,itemHeight:m}=OA(i,u);let y,w;n.font=s.string,this.isHorizontal()?(y=this.maxWidth,w=this._fitRows(d,u,o,m)+10):(w=this.maxHeight,y=this._fitCols(d,s,o,m)+10),this.width=Math.min(y,t.maxWidth||this.maxWidth),this.height=Math.min(w,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:u,maxWidth:d,options:{labels:{padding:o}}}=this,m=this.legendHitBoxes=[],y=this.lineWidths=[0],w=s+o;let S=t;u.textAlign="left",u.textBaseline="middle";let A=-1,I=-w;return this.legendItems.forEach((z,U)=>{const j=i+n/2+u.measureText(z.text).width;(U===0||y[y.length-1]+j+2*o>d)&&(S+=w,y[y.length-(U>0?0:1)]=0,I+=w,A++),m[U]={left:0,top:I,row:A,width:j,height:s},y[y.length-1]+=j+o}),S}_fitCols(t,n,i,s){const{ctx:u,maxHeight:d,options:{labels:{padding:o}}}=this,m=this.legendHitBoxes=[],y=this.columnSizes=[],w=d-t;let S=o,A=0,I=0,z=0,U=0;return this.legendItems.forEach((j,F)=>{const{itemWidth:H,itemHeight:J}=Tee(i,n,u,j,s);F>0&&I+J+2*o>w&&(S+=A+o,y.push({width:A,height:I}),z+=A+o,U++,A=I=0),m[F]={left:z,top:I,col:U,width:H,height:J},A=Math.max(A,H),I+=J+o}),S+=A,y.push({width:A,height:I}),S}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:u}}=this,d=Gh(u,this.left,this.width);if(this.isHorizontal()){let o=0,m=Oo(i,this.left+s,this.right-this.lineWidths[o]);for(const y of n)o!==y.row&&(o=y.row,m=Oo(i,this.left+s,this.right-this.lineWidths[o])),y.top+=this.top+t+s,y.left=d.leftForLtr(d.x(m),y.width),m+=y.width+s}else{let o=0,m=Oo(i,this.top+t+s,this.bottom-this.columnSizes[o].height);for(const y of n)y.col!==o&&(o=y.col,m=Oo(i,this.top+t+s,this.bottom-this.columnSizes[o].height)),y.top=m,y.left+=this.left+s,y.left=d.leftForLtr(d.x(y.left),y.width),m+=y.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;g0(t,this),this._draw(),v0(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:u,labels:d}=t,o=Fi.color,m=Gh(t.rtl,this.left,this.width),y=oo(d.font),{padding:w}=d,S=y.size,A=S/2;let I;this.drawTitle(),s.textAlign=m.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=y.string;const{boxWidth:z,boxHeight:U,itemHeight:j}=OA(d,S),F=function(ce,ee,de){if(isNaN(z)||z<=0||isNaN(U)||U<0)return;s.save();const ue=ir(de.lineWidth,1);if(s.fillStyle=ir(de.fillStyle,o),s.lineCap=ir(de.lineCap,"butt"),s.lineDashOffset=ir(de.lineDashOffset,0),s.lineJoin=ir(de.lineJoin,"miter"),s.lineWidth=ue,s.strokeStyle=ir(de.strokeStyle,o),s.setLineDash(ir(de.lineDash,[])),d.usePointStyle){const Ee={radius:U*Math.SQRT2/2,pointStyle:de.pointStyle,rotation:de.rotation,borderWidth:ue},ze=m.xPlus(ce,z/2),xe=ee+A;cR(s,Ee,ze,xe,d.pointStyleWidth&&z)}else{const Ee=ee+Math.max((S-U)/2,0),ze=m.leftForLtr(ce,z),xe=id(de.borderRadius);s.beginPath(),Object.values(xe).some(qe=>qe!==0)?ng(s,{x:ze,y:Ee,w:z,h:U,radius:xe}):s.rect(ze,Ee,z,U),s.fill(),ue!==0&&s.stroke()}s.restore()},H=function(ce,ee,de){fd(s,de.text,ce,ee+j/2,y,{strikethrough:de.hidden,textAlign:m.textAlign(de.textAlign)})},J=this.isHorizontal(),Z=this._computeTitleHeight();J?I={x:Oo(u,this.left+w,this.right-i[0]),y:this.top+w+Z,line:0}:I={x:this.left+w,y:Oo(u,this.top+Z+w,this.bottom-n[0].height),line:0},_R(this.ctx,t.textDirection);const Y=j+w;this.legendItems.forEach((ce,ee)=>{s.strokeStyle=ce.fontColor,s.fillStyle=ce.fontColor;const de=s.measureText(ce.text).width,ue=m.textAlign(ce.textAlign||(ce.textAlign=d.textAlign)),Ee=z+A+de;let ze=I.x,xe=I.y;m.setWidth(this.width),J?ee>0&&ze+Ee+w>this.right&&(xe=I.y+=Y,I.line++,ze=I.x=Oo(u,this.left+w,this.right-i[I.line])):ee>0&&xe+Y>this.bottom&&(ze=I.x=ze+n[I.line].width+w,I.line++,xe=I.y=Oo(u,this.top+Z+w,this.bottom-n[I.line].height));const qe=m.x(ze);if(F(qe,xe,ce),ze=WX(ue,ze+z+A,J?ze+Ee:this.right,t.rtl),H(m.x(ze),xe,ce),J)I.x+=Ee+w;else if(typeof ce.text!="string"){const Qe=y.lineHeight;I.y+=jR(ce,Qe)}else I.y+=Y}),yR(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=oo(n.font),s=No(n.padding);if(!n.display)return;const u=Gh(t.rtl,this.left,this.width),d=this.ctx,o=n.position,m=i.size/2,y=s.top+m;let w,S=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),w=this.top+y,S=Oo(t.align,S,this.right-A);else{const z=this.columnSizes.reduce((U,j)=>Math.max(U,j.height),0);w=y+Oo(t.align,this.top,this.bottom-z-t.labels.padding-this._computeTitleHeight())}const I=Oo(o,S,S+A);d.textAlign=u.textAlign(rC(o)),d.textBaseline="middle",d.strokeStyle=n.color,d.fillStyle=n.color,d.font=i.string,fd(d,n.text,I,w,i)}_computeTitleHeight(){const t=this.options.title,n=oo(t.font),i=No(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,u;if(bl(t,this.left,this.right)&&bl(n,this.top,this.bottom)){for(u=this.legendHitBoxes,i=0;i<u.length;++i)if(s=u[i],bl(t,s.left,s.left+s.width)&&bl(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Eee(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,u=wee(s,i);s&&!u&&ci(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!u&&ci(n.onHover,[t,i,this],this)}else i&&ci(n.onClick,[t,i,this],this)}}function Tee(e,t,n,i,s){const u=Cee(i,e,t,n),d=See(s,i,t.lineHeight);return{itemWidth:u,itemHeight:d}}function Cee(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((u,d)=>u.length>d.length?u:d)),t+n.size/2+i.measureText(s).width}function See(e,t,n){let i=e;return typeof t.text!="string"&&(i=jR(t,n)),i}function jR(e,t){const n=e.text?e.text.length+.5:0;return t*n}function Eee(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Mee={id:"legend",_element:LA,start(e,t,n){const i=e.legend=new LA({ctx:e.ctx,options:n,chart:e});$o.configure(e,i,n),$o.addBox(e,i)},stop(e){$o.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;$o.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:u,useBorderRadius:d,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(m=>{const y=m.controller.getStyle(n?0:void 0),w=No(y.borderWidth);return{text:t[m.index].label,fillStyle:y.backgroundColor,fontColor:u,hidden:!m.visible,lineCap:y.borderCapStyle,lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:(w.width+w.height)/4,strokeStyle:y.borderColor,pointStyle:i||y.pointStyle,rotation:y.rotation,textAlign:s||y.textAlign,borderRadius:d&&(o||y.borderRadius),datasetIndex:m.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class hC extends Dl{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=_i(i.text)?i.text.length:1;this._padding=No(i.padding);const u=s*oo(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:s,right:u,options:d}=this,o=d.align;let m=0,y,w,S;return this.isHorizontal()?(w=Oo(o,i,u),S=n+t,y=u-i):(d.position==="left"?(w=i+t,S=Oo(o,s,n),m=Ci*-.5):(w=u-t,S=Oo(o,n,s),m=Ci*.5),y=s-n),{titleX:w,titleY:S,maxWidth:y,rotation:m}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=oo(n.font),u=i.lineHeight/2+this._padding.top,{titleX:d,titleY:o,maxWidth:m,rotation:y}=this._drawArgs(u);fd(t,n.text,0,0,i,{color:n.color,maxWidth:m,rotation:y,textAlign:rC(n.align),textBaseline:"middle",translation:[d,o]})}}function Pee(e,t){const n=new hC({ctx:e.ctx,options:t,chart:e});$o.configure(e,n,t),$o.addBox(e,n),e.titleBlock=n}var Aee={id:"title",_element:hC,start(e,t,n){Pee(e,n)},stop(e){const t=e.titleBlock;$o.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;$o.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const O_=new WeakMap;var kee={id:"subtitle",start(e,t,n){const i=new hC({ctx:e.ctx,options:n,chart:e});$o.configure(e,i,n),$o.addBox(e,i),O_.set(e,i)},stop(e){$o.removeBox(e,O_.get(e)),O_.delete(e)},beforeUpdate(e,t,n){const i=O_.get(e);$o.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fm={average(e){if(!e.length)return!1;let t,n,i=0,s=0,u=0;for(t=0,n=e.length;t<n;++t){const d=e[t].element;if(d&&d.hasValue()){const o=d.tooltipPosition();i+=o.x,s+=o.y,++u}}return{x:i/u,y:s/u}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,u,d,o;for(u=0,d=e.length;u<d;++u){const m=e[u].element;if(m&&m.hasValue()){const y=m.getCenterPoint(),w=_w(t,y);w<s&&(s=w,o=m)}}if(o){const m=o.tooltipPosition();n=m.x,i=m.y}return{x:n,y:i}}};function Ia(e,t){return t&&(_i(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ml(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Dee(e,t){const{element:n,datasetIndex:i,index:s}=t,u=e.getDatasetMeta(i).controller,{label:d,value:o}=u.getLabelAndValue(s);return{chart:e,label:d,parsed:u.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:o,dataset:u.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function BA(e,t){const n=e.chart.ctx,{body:i,footer:s,title:u}=e,{boxWidth:d,boxHeight:o}=t,m=oo(t.bodyFont),y=oo(t.titleFont),w=oo(t.footerFont),S=u.length,A=s.length,I=i.length,z=No(t.padding);let U=z.height,j=0,F=i.reduce((Z,Y)=>Z+Y.before.length+Y.lines.length+Y.after.length,0);if(F+=e.beforeBody.length+e.afterBody.length,S&&(U+=S*y.lineHeight+(S-1)*t.titleSpacing+t.titleMarginBottom),F){const Z=t.displayColors?Math.max(o,m.lineHeight):m.lineHeight;U+=I*Z+(F-I)*m.lineHeight+(F-1)*t.bodySpacing}A&&(U+=t.footerMarginTop+A*w.lineHeight+(A-1)*t.footerSpacing);let H=0;const J=function(Z){j=Math.max(j,n.measureText(Z).width+H)};return n.save(),n.font=y.string,ti(e.title,J),n.font=m.string,ti(e.beforeBody.concat(e.afterBody),J),H=t.displayColors?d+2+t.boxPadding:0,ti(i,Z=>{ti(Z.before,J),ti(Z.lines,J),ti(Z.after,J)}),H=0,n.font=w.string,ti(e.footer,J),n.restore(),j+=z.width,{width:j,height:U}}function Iee(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function zee(e,t,n,i){const{x:s,width:u}=i,d=n.caretSize+n.caretPadding;if(e==="left"&&s+u+d>t.width||e==="right"&&s-u-d<0)return!0}function Ree(e,t,n,i){const{x:s,width:u}=n,{width:d,chartArea:{left:o,right:m}}=e;let y="center";return i==="center"?y=s<=(o+m)/2?"left":"right":s<=u/2?y="left":s>=d-u/2&&(y="right"),zee(y,e,t,n)&&(y="center"),y}function FA(e,t,n){const i=n.yAlign||t.yAlign||Iee(e,n);return{xAlign:n.xAlign||t.xAlign||Ree(e,t,n,i),yAlign:i}}function Oee(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function Lee(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function $A(e,t,n,i){const{caretSize:s,caretPadding:u,cornerRadius:d}=e,{xAlign:o,yAlign:m}=n,y=s+u,{topLeft:w,topRight:S,bottomLeft:A,bottomRight:I}=id(d);let z=Oee(t,o);const U=Lee(t,m,y);return m==="center"?o==="left"?z+=y:o==="right"&&(z-=y):o==="left"?z-=Math.max(w,A)+s:o==="right"&&(z+=Math.max(S,I)+s),{x:_o(z,0,i.width-t.width),y:_o(U,0,i.height-t.height)}}function L_(e,t,n){const i=No(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function NA(e){return Ia([],ml(e))}function Bee(e,t,n){return Nc(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function UA(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const WR={beforeTitle:hl,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:hl,beforeBody:hl,beforeLabel:hl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Br(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:hl,afterBody:hl,beforeFooter:hl,footer:hl,afterFooter:hl};function cs(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?WR[t].call(n,i):s}class Mw extends Dl{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,u=new TR(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=Bee(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=cs(i,"beforeTitle",this,t),u=cs(i,"title",this,t),d=cs(i,"afterTitle",this,t);let o=[];return o=Ia(o,ml(s)),o=Ia(o,ml(u)),o=Ia(o,ml(d)),o}getBeforeBody(t,n){return NA(cs(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return ti(t,u=>{const d={before:[],lines:[],after:[]},o=UA(i,u);Ia(d.before,ml(cs(o,"beforeLabel",this,u))),Ia(d.lines,cs(o,"label",this,u)),Ia(d.after,ml(cs(o,"afterLabel",this,u))),s.push(d)}),s}getAfterBody(t,n){return NA(cs(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=cs(i,"beforeFooter",this,t),u=cs(i,"footer",this,t),d=cs(i,"afterFooter",this,t);let o=[];return o=Ia(o,ml(s)),o=Ia(o,ml(u)),o=Ia(o,ml(d)),o}_createItems(t){const n=this._active,i=this.chart.data,s=[],u=[],d=[];let o=[],m,y;for(m=0,y=n.length;m<y;++m)o.push(Dee(this.chart,n[m]));return t.filter&&(o=o.filter((w,S,A)=>t.filter(w,S,A,i))),t.itemSort&&(o=o.sort((w,S)=>t.itemSort(w,S,i))),ti(o,w=>{const S=UA(t.callbacks,w);s.push(cs(S,"labelColor",this,w)),u.push(cs(S,"labelPointStyle",this,w)),d.push(cs(S,"labelTextColor",this,w))}),this.labelColors=s,this.labelPointStyles=u,this.labelTextColors=d,this.dataPoints=o,o}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let u,d=[];if(!s.length)this.opacity!==0&&(u={opacity:0});else{const o=fm[i.position].call(this,s,this._eventPosition);d=this._createItems(i),this.title=this.getTitle(d,i),this.beforeBody=this.getBeforeBody(d,i),this.body=this.getBody(d,i),this.afterBody=this.getAfterBody(d,i),this.footer=this.getFooter(d,i);const m=this._size=BA(this,i),y=Object.assign({},o,m),w=FA(this.chart,i,y),S=$A(i,y,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,u={opacity:1,x:S.x,y:S.y,width:m.width,height:m.height,caretX:o.x,caretY:o.y}}this._tooltipItems=d,this.$context=void 0,u&&this._resolveAnimations().update(this,u),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const u=this.getCaretPosition(t,i,s);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:u}=this,{caretSize:d,cornerRadius:o}=i,{topLeft:m,topRight:y,bottomLeft:w,bottomRight:S}=id(o),{x:A,y:I}=t,{width:z,height:U}=n;let j,F,H,J,Z,Y;return u==="center"?(Z=I+U/2,s==="left"?(j=A,F=j-d,J=Z+d,Y=Z-d):(j=A+z,F=j+d,J=Z-d,Y=Z+d),H=j):(s==="left"?F=A+Math.max(m,w)+d:s==="right"?F=A+z-Math.max(y,S)-d:F=this.caretX,u==="top"?(J=I,Z=J-d,j=F-d,H=F+d):(J=I+U,Z=J+d,j=F+d,H=F-d),Y=J),{x1:j,x2:F,x3:H,y1:J,y2:Z,y3:Y}}drawTitle(t,n,i){const s=this.title,u=s.length;let d,o,m;if(u){const y=Gh(i.rtl,this.x,this.width);for(t.x=L_(this,i.titleAlign,i),n.textAlign=y.textAlign(i.titleAlign),n.textBaseline="middle",d=oo(i.titleFont),o=i.titleSpacing,n.fillStyle=i.titleColor,n.font=d.string,m=0;m<u;++m)n.fillText(s[m],y.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+o,m+1===u&&(t.y+=i.titleMarginBottom-o)}}_drawColorBox(t,n,i,s,u){const d=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:m,boxWidth:y}=u,w=oo(u.bodyFont),S=L_(this,"left",u),A=s.x(S),I=m<w.lineHeight?(w.lineHeight-m)/2:0,z=n.y+I;if(u.usePointStyle){const U={radius:Math.min(y,m)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},j=s.leftForLtr(A,y)+y/2,F=z+m/2;t.strokeStyle=u.multiKeyBackground,t.fillStyle=u.multiKeyBackground,xw(t,U,j,F),t.strokeStyle=d.borderColor,t.fillStyle=d.backgroundColor,xw(t,U,j,F)}else{t.lineWidth=Cr(d.borderWidth)?Math.max(...Object.values(d.borderWidth)):d.borderWidth||1,t.strokeStyle=d.borderColor,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset||0;const U=s.leftForLtr(A,y),j=s.leftForLtr(s.xPlus(A,1),y-2),F=id(d.borderRadius);Object.values(F).some(H=>H!==0)?(t.beginPath(),t.fillStyle=u.multiKeyBackground,ng(t,{x:U,y:z,w:y,h:m,radius:F}),t.fill(),t.stroke(),t.fillStyle=d.backgroundColor,t.beginPath(),ng(t,{x:j,y:z+1,w:y-2,h:m-2,radius:F}),t.fill()):(t.fillStyle=u.multiKeyBackground,t.fillRect(U,z,y,m),t.strokeRect(U,z,y,m),t.fillStyle=d.backgroundColor,t.fillRect(j,z+1,y-2,m-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:u,bodyAlign:d,displayColors:o,boxHeight:m,boxWidth:y,boxPadding:w}=i,S=oo(i.bodyFont);let A=S.lineHeight,I=0;const z=Gh(i.rtl,this.x,this.width),U=function(de){n.fillText(de,z.x(t.x+I),t.y+A/2),t.y+=A+u},j=z.textAlign(d);let F,H,J,Z,Y,ce,ee;for(n.textAlign=d,n.textBaseline="middle",n.font=S.string,t.x=L_(this,j,i),n.fillStyle=i.bodyColor,ti(this.beforeBody,U),I=o&&j!=="right"?d==="center"?y/2+w:y+2+w:0,Z=0,ce=s.length;Z<ce;++Z){for(F=s[Z],H=this.labelTextColors[Z],n.fillStyle=H,ti(F.before,U),J=F.lines,o&&J.length&&(this._drawColorBox(n,t,Z,z,i),A=Math.max(S.lineHeight,m)),Y=0,ee=J.length;Y<ee;++Y)U(J[Y]),A=S.lineHeight;ti(F.after,U)}I=0,A=S.lineHeight,ti(this.afterBody,U),t.y-=u}drawFooter(t,n,i){const s=this.footer,u=s.length;let d,o;if(u){const m=Gh(i.rtl,this.x,this.width);for(t.x=L_(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=m.textAlign(i.footerAlign),n.textBaseline="middle",d=oo(i.footerFont),n.fillStyle=i.footerColor,n.font=d.string,o=0;o<u;++o)n.fillText(s[o],m.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:u,yAlign:d}=this,{x:o,y:m}=t,{width:y,height:w}=i,{topLeft:S,topRight:A,bottomLeft:I,bottomRight:z}=id(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(o+S,m),d==="top"&&this.drawCaret(t,n,i,s),n.lineTo(o+y-A,m),n.quadraticCurveTo(o+y,m,o+y,m+A),d==="center"&&u==="right"&&this.drawCaret(t,n,i,s),n.lineTo(o+y,m+w-z),n.quadraticCurveTo(o+y,m+w,o+y-z,m+w),d==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(o+I,m+w),n.quadraticCurveTo(o,m+w,o,m+w-I),d==="center"&&u==="left"&&this.drawCaret(t,n,i,s),n.lineTo(o,m+S),n.quadraticCurveTo(o,m,o+S,m),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,u=i&&i.y;if(s||u){const d=fm[t.position].call(this,this._active,this._eventPosition);if(!d)return;const o=this._size=BA(this,t),m=Object.assign({},d,this._size),y=FA(n,t,m),w=$A(t,m,y,n);(s._to!==w.x||u._to!==w.y)&&(this.xAlign=y.xAlign,this.yAlign=y.yAlign,this.width=o.width,this.height=o.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},u={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const d=No(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(t.save(),t.globalAlpha=i,this.drawBackground(u,t,s,n),_R(t,n.textDirection),u.y+=d.top,this.drawTitle(u,t,n),this.drawBody(u,t,n),this.drawFooter(u,t,n),yR(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:o,index:m})=>{const y=this.chart.getDatasetMeta(o);if(!y)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:y.data[m],index:m}}),u=!Iy(i,s),d=this._positionChanged(s,n);(u||d)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,u=this._active||[],d=this._getActiveElements(t,u,n,i),o=this._positionChanged(d,t),m=n||!Iy(d,u)||o;return m&&(this._active=d,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),m}_getActiveElements(t,n,i,s){const u=this.options;if(t.type==="mouseout")return[];if(!s)return n;const d=this.chart.getElementsAtEventForMode(t,u.mode,u,i);return u.reverse&&d.reverse(),d}_positionChanged(t,n){const{caretX:i,caretY:s,options:u}=this,d=fm[u.position].call(this,t,n);return d!==!1&&(i!==d.x||s!==d.y)}}cn(Mw,"positioners",fm);var Fee={id:"tooltip",_element:Mw,positioners:fm,afterInit(e,t,n){n&&(e.tooltip=new Mw({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:WR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},$ee=Object.freeze({__proto__:null,Colors:KQ,Decimation:tee,Filler:bee,Legend:Mee,SubTitle:kee,Title:Aee,Tooltip:Fee});const Nee=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Uee(e,t,n,i){const s=e.indexOf(t);if(s===-1)return Nee(e,t,n,i);const u=e.lastIndexOf(t);return s!==u?n:s}const Vee=(e,t)=>e===null?null:_o(Math.round(e),0,t);function VA(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Pw extends Ed{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:u}of n)i[s]===u&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Br(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:Uee(i,t,ir(n,t),this._addedLabels),Vee(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let u=this.getLabels();u=t===0&&n===u.length-1?u:u.slice(t,n+1),this._valueRange=Math.max(u.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let d=t;d<=n;d++)s.push({value:d});return s}getLabelForValue(t){return VA.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}cn(Pw,"id","category"),cn(Pw,"defaults",{ticks:{callback:VA}});function jee(e,t){const n=[],{bounds:s,step:u,min:d,max:o,precision:m,count:y,maxTicks:w,maxDigits:S,includeBounds:A}=e,I=u||1,z=w-1,{min:U,max:j}=t,F=!Br(d),H=!Br(o),J=!Br(y),Z=(j-U)/(S+1);let Y=LP((j-U)/z/I)*I,ce,ee,de,ue;if(Y<1e-14&&!F&&!H)return[{value:U},{value:j}];ue=Math.ceil(j/Y)-Math.floor(U/Y),ue>z&&(Y=LP(ue*Y/z/I)*I),Br(m)||(ce=Math.pow(10,m),Y=Math.ceil(Y*ce)/ce),s==="ticks"?(ee=Math.floor(U/Y)*Y,de=Math.ceil(j/Y)*Y):(ee=U,de=j),F&&H&&u&&BX((o-d)/u,Y/1e3)?(ue=Math.round(Math.min((o-d)/Y,w)),Y=(o-d)/ue,ee=d,de=o):J?(ee=F?d:ee,de=H?o:de,ue=y-1,Y=(de-ee)/ue):(ue=(de-ee)/Y,Em(ue,Math.round(ue),Y/1e3)?ue=Math.round(ue):ue=Math.ceil(ue));const Ee=Math.max(BP(Y),BP(ee));ce=Math.pow(10,Br(m)?Ee:m),ee=Math.round(ee*ce)/ce,de=Math.round(de*ce)/ce;let ze=0;for(F&&(A&&ee!==d?(n.push({value:d}),ee<d&&ze++,Em(Math.round((ee+ze*Y)*ce)/ce,d,jA(d,Z,e))&&ze++):ee<d&&ze++);ze<ue;++ze){const xe=Math.round((ee+ze*Y)*ce)/ce;if(H&&xe>o)break;n.push({value:xe})}return H&&A&&de!==o?n.length&&Em(n[n.length-1].value,o,jA(o,Z,e))?n[n.length-1].value=o:n.push({value:o}):(!H||de===o)&&n.push({value:de}),n}function jA(e,t,{horizontal:n,minRotation:i}){const s=sa(i),u=(n?Math.sin(s):Math.cos(s))||.001,d=.75*t*(""+e).length;return Math.min(t/u,d)}class $y extends Ed{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Br(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:u}=this;const d=m=>s=n?s:m,o=m=>u=i?u:m;if(t){const m=Ua(s),y=Ua(u);m<0&&y<0?o(0):m>0&&y>0&&d(0)}if(s===u){let m=u===0?1:Math.abs(u*.05);o(u+m),t||d(s-m)}this.min=s,this.max=u}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,d=jee(s,u);return t.bounds==="ticks"&&eR(d,this,"value"),t.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return bg(t,this.chart.options.locale,this.options.ticks.format)}}class Aw extends $y{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Li(t)?t:0,this.max=Li(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=sa(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}cn(Aw,"id","linear"),cn(Aw,"defaults",{ticks:{callback:m0.formatters.numeric}});const ig=e=>Math.floor(Tc(e)),Nu=(e,t)=>Math.pow(10,ig(e)+t);function WA(e){return e/Math.pow(10,ig(e))===1}function HA(e,t,n){const i=Math.pow(10,n),s=Math.floor(e/i);return Math.ceil(t/i)-s}function Wee(e,t){const n=t-e;let i=ig(n);for(;HA(e,t,i)>10;)i++;for(;HA(e,t,i)<10;)i--;return Math.min(i,ig(e))}function Hee(e,{min:t,max:n}){t=_s(e.min,t);const i=[],s=ig(t);let u=Wee(t,n),d=u<0?Math.pow(10,Math.abs(u)):1;const o=Math.pow(10,u),m=s>u?Math.pow(10,s):0,y=Math.round((t-m)*d)/d,w=Math.floor((t-m)/o/10)*o*10;let S=Math.floor((y-w)/Math.pow(10,u)),A=_s(e.min,Math.round((m+w+S*Math.pow(10,u))*d)/d);for(;A<n;)i.push({value:A,major:WA(A),significand:S}),S>=10?S=S<15?15:20:S++,S>=20&&(u++,S=2,d=u>=0?1:d),A=Math.round((m+w+S*Math.pow(10,u))*d)/d;const I=_s(e.max,A);return i.push({value:I,major:WA(I),significand:S}),i}class kw extends Ed{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=$y.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Li(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Li(t)?Math.max(0,t):null,this.max=Li(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Li(this._userMin)&&(this.min=t===Nu(this.min,0)?Nu(this.min,-1):Nu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const u=o=>i=t?i:o,d=o=>s=n?s:o;i===s&&(i<=0?(u(1),d(10)):(u(Nu(i,-1)),d(Nu(s,1)))),i<=0&&u(Nu(s,-1)),s<=0&&d(Nu(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=Hee(n,this);return t.bounds==="ticks"&&eR(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":bg(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Tc(t),this._valueRange=Tc(this.max)-Tc(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Tc(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}cn(kw,"id","logarithmic"),cn(kw,"defaults",{ticks:{callback:m0.formatters.logarithmic,major:{enabled:!0}}});function Dw(e){const t=e.ticks;if(t.display&&e.display){const n=No(t.backdropPadding);return ir(t.font&&t.font.size,Fi.font.size)+n.height}return 0}function Gee(e,t,n){return n=_i(n)?n:[n],{w:eK(e,t.string,n),h:n.length*t.lineHeight}}function GA(e,t,n,i,s){return e===i||e===s?{start:t-n/2,end:t+n/2}:e<i||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function qee(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],s=[],u=e._pointLabels.length,d=e.options.pointLabels,o=d.centerPointLabels?Ci/u:0;for(let m=0;m<u;m++){const y=d.setContext(e.getPointLabelContext(m));s[m]=y.padding;const w=e.getPointPosition(m,e.drawingArea+s[m],o),S=oo(y.font),A=Gee(e.ctx,S,e._pointLabels[m]);i[m]=A;const I=ys(e.getIndexAngle(m)+o),z=Math.round(tC(I)),U=GA(z,w.x,A.w,0,180),j=GA(z,w.y,A.h,90,270);Zee(n,t,I,U,j)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=Kee(e,i,s)}function Zee(e,t,n,i,s){const u=Math.abs(Math.sin(n)),d=Math.abs(Math.cos(n));let o=0,m=0;i.start<t.l?(o=(t.l-i.start)/u,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/u,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(m=(t.t-s.start)/d,e.t=Math.min(e.t,t.t-m)):s.end>t.b&&(m=(s.end-t.b)/d,e.b=Math.max(e.b,t.b+m))}function Yee(e,t,n){const i=e.drawingArea,{extra:s,additionalAngle:u,padding:d,size:o}=n,m=e.getPointPosition(t,i+s+d,u),y=Math.round(tC(ys(m.angle+Bi))),w=ete(m.y,o.h,y),S=Jee(y),A=Qee(m.x,o.w,S);return{visible:!0,x:m.x,y:w,textAlign:S,left:A,top:w,right:A+o.w,bottom:w+o.h}}function Xee(e,t){if(!t)return!0;const{left:n,top:i,right:s,bottom:u}=e;return!(Tl({x:n,y:i},t)||Tl({x:n,y:u},t)||Tl({x:s,y:i},t)||Tl({x:s,y:u},t))}function Kee(e,t,n){const i=[],s=e._pointLabels.length,u=e.options,{centerPointLabels:d,display:o}=u.pointLabels,m={extra:Dw(u)/2,additionalAngle:d?Ci/s:0};let y;for(let w=0;w<s;w++){m.padding=n[w],m.size=t[w];const S=Yee(e,w,m);i.push(S),o==="auto"&&(S.visible=Xee(S,y),S.visible&&(y=S))}return i}function Jee(e){return e===0||e===180?"center":e<180?"left":"right"}function Qee(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function ete(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function tte(e,t,n){const{left:i,top:s,right:u,bottom:d}=n,{backdropColor:o}=t;if(!Br(o)){const m=id(t.borderRadius),y=No(t.backdropPadding);e.fillStyle=o;const w=i-y.left,S=s-y.top,A=u-i+y.width,I=d-s+y.height;Object.values(m).some(z=>z!==0)?(e.beginPath(),ng(e,{x:w,y:S,w:A,h:I,radius:m}),e.fill()):e.fillRect(w,S,A,I)}}function nte(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let s=t-1;s>=0;s--){const u=e._pointLabelItems[s];if(!u.visible)continue;const d=i.setContext(e.getPointLabelContext(s));tte(n,d,u);const o=oo(d.font),{x:m,y,textAlign:w}=u;fd(n,e._pointLabels[s],m,y+o.lineHeight/2,o,{color:d.color,textAlign:w,textBaseline:"middle"})}}function HR(e,t,n,i){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,yi);else{let u=e.getPointPosition(0,t);s.moveTo(u.x,u.y);for(let d=1;d<i;d++)u=e.getPointPosition(d,t),s.lineTo(u.x,u.y)}}function rte(e,t,n,i,s){const u=e.ctx,d=t.circular,{color:o,lineWidth:m}=t;!d&&!i||!o||!m||n<0||(u.save(),u.strokeStyle=o,u.lineWidth=m,u.setLineDash(s.dash),u.lineDashOffset=s.dashOffset,u.beginPath(),HR(e,n,d,i),u.closePath(),u.stroke(),u.restore())}function ite(e,t,n){return Nc(e,{label:n,index:t,type:"pointLabel"})}class pm extends $y{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=No(Dw(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Li(t)&&!isNaN(t)?t:0,this.max=Li(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Dw(this.options))}generateTickLabels(t){$y.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const s=ci(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?qee(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,s){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,s))}getIndexAngle(t){const n=yi/(this._pointLabels.length||1),i=this.options.startAngle||0;return ys(t*n+sa(i))}getDistanceFromCenterForValue(t){if(Br(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Br(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return ite(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const s=this.getIndexAngle(t)-Bi+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:s,bottom:u}=this._pointLabelItems[t];return{left:n,top:i,right:s,bottom:u}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),HR(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:s,border:u}=n,d=this._pointLabels.length;let o,m,y;if(n.pointLabels.display&&nte(this,d),s.display&&this.ticks.forEach((w,S)=>{if(S!==0){m=this.getDistanceFromCenterForValue(w.value);const A=this.getContext(S),I=s.setContext(A),z=u.setContext(A);rte(this,I,m,d,z)}}),i.display){for(t.save(),o=d-1;o>=0;o--){const w=i.setContext(this.getPointLabelContext(o)),{color:S,lineWidth:A}=w;!A||!S||(t.lineWidth=A,t.strokeStyle=S,t.setLineDash(w.borderDash),t.lineDashOffset=w.borderDashOffset,m=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),y=this.getPointPosition(o,m),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(y.x,y.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let u,d;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((o,m)=>{if(m===0&&!n.reverse)return;const y=i.setContext(this.getContext(m)),w=oo(y.font);if(u=this.getDistanceFromCenterForValue(this.ticks[m].value),y.showLabelBackdrop){t.font=w.string,d=t.measureText(o.label).width,t.fillStyle=y.backdropColor;const S=No(y.backdropPadding);t.fillRect(-d/2-S.left,-u-w.size/2-S.top,d+S.width,w.size+S.height)}fd(t,o.label,0,-u,w,{color:y.color})}),t.restore()}drawTitle(){}}cn(pm,"id","radialLinear"),cn(pm,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:m0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),cn(pm,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),cn(pm,"descriptors",{angleLines:{_fallback:"grid"}});const y0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hs=Object.keys(y0);function ote(e,t){return e-t}function qA(e,t){if(Br(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:u}=e._parseOpts;let d=t;return typeof i=="function"&&(d=i(d)),Li(d)||(d=typeof i=="string"?n.parse(d,i):n.parse(d)),d===null?null:(s&&(d=s==="week"&&(df(u)||u===!0)?n.startOf(d,"isoWeek",u):n.startOf(d,s)),+d)}function ZA(e,t,n,i){const s=hs.length;for(let u=hs.indexOf(e);u<s-1;++u){const d=y0[hs[u]],o=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((n-t)/(o*d.size))<=i)return hs[u]}return hs[s-1]}function ste(e,t,n,i,s){for(let u=hs.length-1;u>=hs.indexOf(n);u--){const d=hs[u];if(y0[d].common&&e._adapter.diff(s,i,d)>=t-1)return d}return hs[n?hs.indexOf(n):0]}function ate(e){for(let t=hs.indexOf(e)+1,n=hs.length;t<n;++t)if(y0[hs[t]].common)return hs[t]}function YA(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=nC(n,t),u=n[i]>=t?n[i]:n[s];e[u]=!0}}function lte(e,t,n,i){const s=e._adapter,u=+s.startOf(t[0].value,i),d=t[t.length-1].value;let o,m;for(o=u;o<=d;o=+s.add(o,1,i))m=n[o],m>=0&&(t[m].major=!0);return t}function XA(e,t,n){const i=[],s={},u=t.length;let d,o;for(d=0;d<u;++d)o=t[d],s[o]=d,i.push({value:o,major:!1});return u===0||!n?i:lte(e,i,s,n)}class og extends Ed{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new gJ._date(t.adapters.date);s.init(n),Sm(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:qA(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:u,minDefined:d,maxDefined:o}=this.getUserBounds();function m(y){!d&&!isNaN(y.min)&&(s=Math.min(s,y.min)),!o&&!isNaN(y.max)&&(u=Math.max(u,y.max))}(!d||!o)&&(m(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&m(this.getMinMax(!1))),s=Li(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),u=Li(u)&&!isNaN(u)?u:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,u-1),this.max=Math.max(s+1,u)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const u=this.min,d=this.max,o=UX(s,u,d);return this._unit=n.unit||(i.autoSkip?ZA(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):ste(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:ate(this._unit),this.initOffsets(s),t.reverse&&o.reverse(),XA(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,u;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,u=this.getDecimalForValue(t[t.length-1]),t.length===1?i=u:i=(u-this.getDecimalForValue(t[t.length-2]))/2);const d=t.length<3?.5:.25;n=_o(n,0,d),i=_o(i,0,d),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,u=s.time,d=u.unit||ZA(u.minUnit,n,i,this._getLabelCapacity(n)),o=ir(s.ticks.stepSize,1),m=d==="week"?u.isoWeekday:!1,y=df(m)||m===!0,w={};let S=n,A,I;if(y&&(S=+t.startOf(S,"isoWeek",m)),S=+t.startOf(S,y?"day":d),t.diff(i,n,d)>1e5*o)throw new Error(n+" and "+i+" are too far apart with stepSize of "+o+" "+d);const z=s.ticks.source==="data"&&this.getDataTimestamps();for(A=S,I=0;A<i;A=+t.add(A,o,d),I++)YA(w,A,z);return(A===i||s.bounds==="ticks"||I===1)&&YA(w,A,z),Object.keys(w).sort((U,j)=>U-j).map(U=>+U)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,u=this._unit,d=n||s[u];return this._adapter.format(t,d)}_tickFormatFunction(t,n,i,s){const u=this.options,d=u.ticks.callback;if(d)return ci(d,[t,n,i],this);const o=u.time.displayFormats,m=this._unit,y=this._majorUnit,w=m&&o[m],S=y&&o[y],A=i[n],I=y&&S&&A&&A.major;return this._adapter.format(t,s||(I?S:w))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=sa(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(s),d=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:i*u+o*d,h:i*d+o*u}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,u=this._tickFormatFunction(t,0,XA(this,[t],this._majorUnit),s),d=this._getLabelSize(u),o=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(qA(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return rR(t.sort(ote))}}cn(og,"id","time"),cn(og,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function B_(e,t,n){let i=0,s=e.length-1,u,d,o,m;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=wl(e,"pos",t)),{pos:u,time:o}=e[i],{pos:d,time:m}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=wl(e,"time",t)),{time:u,pos:o}=e[i],{time:d,pos:m}=e[s]);const y=d-u;return y?o+(m-o)*(t-u)/y:o}class Iw extends og{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=B_(n,this.min),this._tableRange=B_(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],u=[];let d,o,m,y,w;for(d=0,o=t.length;d<o;++d)y=t[d],y>=n&&y<=i&&s.push(y);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(d=0,o=s.length;d<o;++d)w=s[d+1],m=s[d-1],y=s[d],Math.round((w+m)/2)!==y&&u.push({time:y,pos:d/(o-1)});return u}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(B_(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return B_(this._table,i*this._tableRange+this._minPos,!0)}}cn(Iw,"id","timeseries"),cn(Iw,"defaults",og.defaults);var cte=Object.freeze({__proto__:null,CategoryScale:Pw,LinearScale:Aw,LogarithmicScale:kw,RadialLinearScale:pm,TimeScale:og,TimeSeriesScale:Iw});const ute=[mJ,HQ,$ee,cte];xl.register(...ute);const dte=pn({__name:"StationsChart",setup(e){const t=l0(),n=Sz(),i=He(null),s=He(null),u=He(null);let d=null;const o=He([]),m=He(null),y=He([]),w=He(null),S=He();let A=null;const I=()=>{A&&A.destroy();let z=[],U=[];S.value.forEach(j=>{z.push(j.valore),U.push(j.data)}),A=new xl(i.value,{type:"line",data:{labels:U,datasets:[{label:`Valore di ${m.value}`,data:z,fill:!0,borderColor:"#18a058",tension:.1,pointBackgroundColor:"#18a058",backgroundColor:"#18a05825",showLine:!0}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,type:"linear",display:!0,position:"left"}}}})};return xr(u,async()=>{var z;t.start(),y.value=[],m.value=null,w.value=await WY(u.value),w.value.forEach(U=>{y.value.push({label:U,value:U})}),y.value?(t.finish(),n.info("Seleziona un inquinante"),(z=s.value)==null||z.focus()):t.error()}),xr(m,async()=>{t.start(),m.value&&(S.value=await HY(u.value,m.value),S.value.forEach(z=>{z.data=new Date(z.data).toLocaleDateString("it-IT")})),I(),S.value?t.finish():t.error()}),Si(async()=>{d=await Gz(),d&&d.forEach(z=>{o.value.push({label:"Stazione: "+z._id+" "+z.nome,value:z._id})})}),(z,U)=>(si(),Fs(Vr,null,[tr(cr(vg),{style:{"margin-top":"50px"}},{default:Gr(()=>[Ui("Grafico degli inquinanti")]),_:1}),tr(cr(HT),null,{default:Gr(()=>[tr(cr(rP),{value:u.value,"onUpdate:value":U[0]||(U[0]=j=>u.value=j),options:o.value,placeholder:"Scegli una stazione",style:{width:"250px"}},null,8,["value","options"]),u.value?(si(),qo(cr(rP),{key:0,ref_key:"pollutantSelectRef",ref:s,value:m.value,"onUpdate:value":U[1]||(U[1]=j=>m.value=j),options:y.value,placeholder:"Scegli un inquinante",style:{width:"250px"}},null,8,["value","options"])):Fa("",!0)]),_:1}),Wa(Tn("canvas",{ref_key:"chart",ref:i,style:{"margin-top":"40px"}},null,512),[[vf,m.value]])],64))}}),hte={class:"home"},fte=Tn("ul",{style:{"list-style":"point"}},[Tn("li",{style:{"margin-bottom":"10px"}},[Ui("Dati report qualit aria utilizzati: "),Tn("a",{href:"https://dati.comune.milano.it/",target:"_blank"},"open data citt di Milano")]),Tn("li",null,[Ui("Ti  stata utile o ti piace questa applicazione? Scrivimi "),Tn("a",{href:"mailto:erne.pasto@gmail.com"},"erne.pasto@gmail.com")])],-1),KA=pn({__name:"HomeView",setup(e){const t=He(!1),n=i=>{i<768?t.value=!0:t.value=!1};return Si(()=>{n(window.innerWidth),onresize=i=>n(window.innerWidth)}),(i,s)=>(si(),Fs("div",hte,[t.value?(si(),qo(cr(vP),{key:0,cols:"5","item-responsive":"",style:{padding:"100px"}},{default:Gr(()=>[tr(cr(gP),{span:"0:5 1200:3",offset:"1200:1"},{default:Gr(()=>[tr(cr(_P),{style:{"line-height":"110%"}},{default:Gr(()=>[Ui("Questa applicazione non  disponibile per dispositivi mobili")]),_:1})]),_:1})]),_:1})):(si(),qo(cr(vP),{key:1,cols:"5","item-responsive":"",style:{padding:"100px"}},{default:Gr(()=>[tr(cr(gP),{span:"0:5 1200:3",offset:"1200:1"},{default:Gr(()=>[tr(cr(_P),null,{default:Gr(()=>[Ui("Report qualit aria della citt di Milano")]),_:1}),tr(cr(pP),{"title-placement":"left",style:{"margin-bottom":"70px"}},{default:Gr(()=>[Ui(" Report qualit aria 2023 fornito dal Comune di Milano ")]),_:1}),tr(ZY),tr(KY),tr(eX),tr(dte),tr(iX),tr(cr(pP),{"title-placement":"left",style:{"margin-top":"150px"}},{default:Gr(()=>[Ui(" Alcune informazioni ")]),_:1}),fte]),_:1})]),_:1}))]))}}),pte=r4({history:xF("/air-quality"),routes:[{path:"/",name:"home",component:KA},{path:"/:pathMatch(.*)*",redirect:"/",component:KA}],strict:!0,sensitive:!1}),GR=tF(CZ);GR.use(pte);GR.mount("#app")});export default mte();
